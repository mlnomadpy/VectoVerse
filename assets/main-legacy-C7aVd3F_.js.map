{"version":3,"file":"main-legacy-C7aVd3F_.js","sources":["../../node_modules/pinia/dist/pinia.mjs","../../src/stores/configStore.js","../../src/utils/vectorUtils.js","../../src/stores/vectorStore.js","../../src/stores/uiStore.js","../../src/composables/useKeyboardShortcuts.js","../../src/composables/useTutorialManager.js","../../src/composables/useAccessibility.js","../../src/utils/periodicTableCalculations.js","../../src/utils/nameGenerator.js","../../src/composables/usePeriodicTable.js","../../src/composables/useExportManager.js","../../src/composables/useErrorHandler.js","../../src/composables/useMathRenderer.js","../../src/composables/useControls.js","../../src/components/Control.vue","../../src/components/AppHeader.vue","../../src/composables/useAppActions.js","../../src/utils/Constants.js","../../src/components/visualization/D3Visualization.vue","../../src/composables/useForceCalculator.js","../../src/composables/useEventBus.js","../../src/components/VisualizationContainer.vue","../../src/composables/useVectorOperations.js","../../src/components/StatCard.vue","../../src/components/tabs/individual/AnalysisOverview.vue","../../src/components/tabs/individual/ComponentAnalysis.vue","../../src/components/tabs/individual/AdvancedStats.vue","../../src/components/tabs/IndividualAnalysisTab.vue","../../src/components/tabs/RelationshipsTab.vue","../../src/components/tabs/ClusteringTab.vue","../../src/composables/useClustering.js","../../src/components/tabs/StatisticsTab.vue","../../src/utils/colors.js","../../src/components/visualization/PeriodicElement.vue","../../src/components/visualization/PeriodicElementTooltip.vue","../../src/components/visualization/PeriodicTable.vue","../../src/components/visualization/SparklineChart.vue","../../src/components/controls/HeatmapControls.vue","../../src/components/controls/FilterControls.vue","../../src/components/controls/HighlightControls.vue","../../src/components/tabs/PeriodicTableTab.vue","../../src/components/VectorAnalysisStudio.vue","../../src/components/InfoSidebar.vue","../../src/components/modals/ModalBase.vue","../../src/components/modals/TutorialModal.vue","../../src/components/modals/AnalysisModal.vue","../../src/composables/useAnalytics.js","../../src/components/modals/UploadHelpModal.vue","../../src/components/modals/ActivationHelpModal.vue","../../src/components/modals/ShortcutsModal.vue","../../src/components/modals/AddVectorModal.vue","../../src/utils/formatUtils.js","../../src/components/modals/ExportModal.vue","../../src/components/modals/PresetsModal.vue","../../src/components/Notification.vue","../../src/components/ErrorNotification.vue","../../src/components/modals/SettingsModal.vue","../../src/components/modals/VectorComparisonModal.vue","../../src/components/ModalContainer.vue","../../src/App.vue","../../src/composables/usePerformanceOptimizer.js","../../node_modules/katex/dist/contrib/auto-render.mjs","../../src/main.js"],"sourcesContent":["/*!\n * pinia v2.3.1\n * (c) 2025 Eduardo San Martin Morote\n * @license MIT\n */\nimport { hasInjectionContext, inject, toRaw, watch, unref, markRaw, effectScope, ref, isVue2, isRef, isReactive, set, getCurrentScope, onScopeDispose, getCurrentInstance, reactive, toRef, del, nextTick, computed, toRefs } from 'vue-demi';\nimport { setupDevtoolsPlugin } from '@vue/devtools-api';\n\n/**\n * setActivePinia must be called to handle SSR at the top of functions like\n * `fetch`, `setup`, `serverPrefetch` and others\n */\nlet activePinia;\n/**\n * Sets or unsets the active pinia. Used in SSR and internally when calling\n * actions and getters\n *\n * @param pinia - Pinia instance\n */\n// @ts-expect-error: cannot constrain the type of the return\nconst setActivePinia = (pinia) => (activePinia = pinia);\n/**\n * Get the currently active pinia if there is any.\n */\nconst getActivePinia = () => (hasInjectionContext() && inject(piniaSymbol)) || activePinia;\nconst piniaSymbol = ((process.env.NODE_ENV !== 'production') ? Symbol('pinia') : /* istanbul ignore next */ Symbol());\n\nfunction isPlainObject(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\no) {\n    return (o &&\n        typeof o === 'object' &&\n        Object.prototype.toString.call(o) === '[object Object]' &&\n        typeof o.toJSON !== 'function');\n}\n// type DeepReadonly<T> = { readonly [P in keyof T]: DeepReadonly<T[P]> }\n// TODO: can we change these to numbers?\n/**\n * Possible types for SubscriptionCallback\n */\nvar MutationType;\n(function (MutationType) {\n    /**\n     * Direct mutation of the state:\n     *\n     * - `store.name = 'new name'`\n     * - `store.$state.name = 'new name'`\n     * - `store.list.push('new item')`\n     */\n    MutationType[\"direct\"] = \"direct\";\n    /**\n     * Mutated the state with `$patch` and an object\n     *\n     * - `store.$patch({ name: 'newName' })`\n     */\n    MutationType[\"patchObject\"] = \"patch object\";\n    /**\n     * Mutated the state with `$patch` and a function\n     *\n     * - `store.$patch(state => state.name = 'newName')`\n     */\n    MutationType[\"patchFunction\"] = \"patch function\";\n    // maybe reset? for $state = {} and $reset\n})(MutationType || (MutationType = {}));\n\nconst IS_CLIENT = typeof window !== 'undefined';\n\n/*\n * FileSaver.js A saveAs() FileSaver implementation.\n *\n * Originally by Eli Grey, adapted as an ESM module by Eduardo San Martin\n * Morote.\n *\n * License : MIT\n */\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nconst _global = /*#__PURE__*/ (() => typeof window === 'object' && window.window === window\n    ? window\n    : typeof self === 'object' && self.self === self\n        ? self\n        : typeof global === 'object' && global.global === global\n            ? global\n            : typeof globalThis === 'object'\n                ? globalThis\n                : { HTMLElement: null })();\nfunction bom(blob, { autoBom = false } = {}) {\n    // prepend BOM for UTF-8 XML and text/* types (including HTML)\n    // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n    if (autoBom &&\n        /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n        return new Blob([String.fromCharCode(0xfeff), blob], { type: blob.type });\n    }\n    return blob;\n}\nfunction download(url, name, opts) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        saveAs(xhr.response, name, opts);\n    };\n    xhr.onerror = function () {\n        console.error('could not download file');\n    };\n    xhr.send();\n}\nfunction corsEnabled(url) {\n    const xhr = new XMLHttpRequest();\n    // use sync to avoid popup blocker\n    xhr.open('HEAD', url, false);\n    try {\n        xhr.send();\n    }\n    catch (e) { }\n    return xhr.status >= 200 && xhr.status <= 299;\n}\n// `a.click()` doesn't work for all browsers (#465)\nfunction click(node) {\n    try {\n        node.dispatchEvent(new MouseEvent('click'));\n    }\n    catch (e) {\n        const evt = document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n        node.dispatchEvent(evt);\n    }\n}\nconst _navigator = typeof navigator === 'object' ? navigator : { userAgent: '' };\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nconst isMacOSWebView = /*#__PURE__*/ (() => /Macintosh/.test(_navigator.userAgent) &&\n    /AppleWebKit/.test(_navigator.userAgent) &&\n    !/Safari/.test(_navigator.userAgent))();\nconst saveAs = !IS_CLIENT\n    ? () => { } // noop\n    : // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program\n        typeof HTMLAnchorElement !== 'undefined' &&\n            'download' in HTMLAnchorElement.prototype &&\n            !isMacOSWebView\n            ? downloadSaveAs\n            : // Use msSaveOrOpenBlob as a second approach\n                'msSaveOrOpenBlob' in _navigator\n                    ? msSaveAs\n                    : // Fallback to using FileReader and a popup\n                        fileSaverSaveAs;\nfunction downloadSaveAs(blob, name = 'download', opts) {\n    const a = document.createElement('a');\n    a.download = name;\n    a.rel = 'noopener'; // tabnabbing\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n    if (typeof blob === 'string') {\n        // Support regular links\n        a.href = blob;\n        if (a.origin !== location.origin) {\n            if (corsEnabled(a.href)) {\n                download(blob, name, opts);\n            }\n            else {\n                a.target = '_blank';\n                click(a);\n            }\n        }\n        else {\n            click(a);\n        }\n    }\n    else {\n        // Support blobs\n        a.href = URL.createObjectURL(blob);\n        setTimeout(function () {\n            URL.revokeObjectURL(a.href);\n        }, 4e4); // 40s\n        setTimeout(function () {\n            click(a);\n        }, 0);\n    }\n}\nfunction msSaveAs(blob, name = 'download', opts) {\n    if (typeof blob === 'string') {\n        if (corsEnabled(blob)) {\n            download(blob, name, opts);\n        }\n        else {\n            const a = document.createElement('a');\n            a.href = blob;\n            a.target = '_blank';\n            setTimeout(function () {\n                click(a);\n            });\n        }\n    }\n    else {\n        // @ts-ignore: works on windows\n        navigator.msSaveOrOpenBlob(bom(blob, opts), name);\n    }\n}\nfunction fileSaverSaveAs(blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank');\n    if (popup) {\n        popup.document.title = popup.document.body.innerText = 'downloading...';\n    }\n    if (typeof blob === 'string')\n        return download(blob, name, opts);\n    const force = blob.type === 'application/octet-stream';\n    const isSafari = /constructor/i.test(String(_global.HTMLElement)) || 'safari' in _global;\n    const isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) &&\n        typeof FileReader !== 'undefined') {\n        // Safari doesn't allow downloading of blob URLs\n        const reader = new FileReader();\n        reader.onloadend = function () {\n            let url = reader.result;\n            if (typeof url !== 'string') {\n                popup = null;\n                throw new Error('Wrong reader.result type');\n            }\n            url = isChromeIOS\n                ? url\n                : url.replace(/^data:[^;]*;/, 'data:attachment/file;');\n            if (popup) {\n                popup.location.href = url;\n            }\n            else {\n                location.assign(url);\n            }\n            popup = null; // reverse-tabnabbing #460\n        };\n        reader.readAsDataURL(blob);\n    }\n    else {\n        const url = URL.createObjectURL(blob);\n        if (popup)\n            popup.location.assign(url);\n        else\n            location.href = url;\n        popup = null; // reverse-tabnabbing #460\n        setTimeout(function () {\n            URL.revokeObjectURL(url);\n        }, 4e4); // 40s\n    }\n}\n\n/**\n * Shows a toast or console.log\n *\n * @param message - message to log\n * @param type - different color of the tooltip\n */\nfunction toastMessage(message, type) {\n    const piniaMessage = '🍍 ' + message;\n    if (typeof __VUE_DEVTOOLS_TOAST__ === 'function') {\n        // No longer available :(\n        __VUE_DEVTOOLS_TOAST__(piniaMessage, type);\n    }\n    else if (type === 'error') {\n        console.error(piniaMessage);\n    }\n    else if (type === 'warn') {\n        console.warn(piniaMessage);\n    }\n    else {\n        console.log(piniaMessage);\n    }\n}\nfunction isPinia(o) {\n    return '_a' in o && 'install' in o;\n}\n\n/**\n * This file contain devtools actions, they are not Pinia actions.\n */\n// ---\nfunction checkClipboardAccess() {\n    if (!('clipboard' in navigator)) {\n        toastMessage(`Your browser doesn't support the Clipboard API`, 'error');\n        return true;\n    }\n}\nfunction checkNotFocusedError(error) {\n    if (error instanceof Error &&\n        error.message.toLowerCase().includes('document is not focused')) {\n        toastMessage('You need to activate the \"Emulate a focused page\" setting in the \"Rendering\" panel of devtools.', 'warn');\n        return true;\n    }\n    return false;\n}\nasync function actionGlobalCopyState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));\n        toastMessage('Global state copied to clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to serialize the state. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalPasteState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));\n        toastMessage('Global state pasted from clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalSaveState(pinia) {\n    try {\n        saveAs(new Blob([JSON.stringify(pinia.state.value)], {\n            type: 'text/plain;charset=utf-8',\n        }), 'pinia-state.json');\n    }\n    catch (error) {\n        toastMessage(`Failed to export the state as JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nlet fileInput;\nfunction getFileOpener() {\n    if (!fileInput) {\n        fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = '.json';\n    }\n    function openFile() {\n        return new Promise((resolve, reject) => {\n            fileInput.onchange = async () => {\n                const files = fileInput.files;\n                if (!files)\n                    return resolve(null);\n                const file = files.item(0);\n                if (!file)\n                    return resolve(null);\n                return resolve({ text: await file.text(), file });\n            };\n            // @ts-ignore: TODO: changed from 4.3 to 4.4\n            fileInput.oncancel = () => resolve(null);\n            fileInput.onerror = reject;\n            fileInput.click();\n        });\n    }\n    return openFile;\n}\nasync function actionGlobalOpenStateFile(pinia) {\n    try {\n        const open = getFileOpener();\n        const result = await open();\n        if (!result)\n            return;\n        const { text, file } = result;\n        loadStoresState(pinia, JSON.parse(text));\n        toastMessage(`Global state imported from \"${file.name}\".`);\n    }\n    catch (error) {\n        toastMessage(`Failed to import the state from JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nfunction loadStoresState(pinia, state) {\n    for (const key in state) {\n        const storeState = pinia.state.value[key];\n        // store is already instantiated, patch it\n        if (storeState) {\n            Object.assign(storeState, state[key]);\n        }\n        else {\n            // store is not instantiated, set the initial state\n            pinia.state.value[key] = state[key];\n        }\n    }\n}\n\nfunction formatDisplay(display) {\n    return {\n        _custom: {\n            display,\n        },\n    };\n}\nconst PINIA_ROOT_LABEL = '🍍 Pinia (root)';\nconst PINIA_ROOT_ID = '_root';\nfunction formatStoreForInspectorTree(store) {\n    return isPinia(store)\n        ? {\n            id: PINIA_ROOT_ID,\n            label: PINIA_ROOT_LABEL,\n        }\n        : {\n            id: store.$id,\n            label: store.$id,\n        };\n}\nfunction formatStoreForInspectorState(store) {\n    if (isPinia(store)) {\n        const storeNames = Array.from(store._s.keys());\n        const storeMap = store._s;\n        const state = {\n            state: storeNames.map((storeId) => ({\n                editable: true,\n                key: storeId,\n                value: store.state.value[storeId],\n            })),\n            getters: storeNames\n                .filter((id) => storeMap.get(id)._getters)\n                .map((id) => {\n                const store = storeMap.get(id);\n                return {\n                    editable: false,\n                    key: id,\n                    value: store._getters.reduce((getters, key) => {\n                        getters[key] = store[key];\n                        return getters;\n                    }, {}),\n                };\n            }),\n        };\n        return state;\n    }\n    const state = {\n        state: Object.keys(store.$state).map((key) => ({\n            editable: true,\n            key,\n            value: store.$state[key],\n        })),\n    };\n    // avoid adding empty getters\n    if (store._getters && store._getters.length) {\n        state.getters = store._getters.map((getterName) => ({\n            editable: false,\n            key: getterName,\n            value: store[getterName],\n        }));\n    }\n    if (store._customProperties.size) {\n        state.customProperties = Array.from(store._customProperties).map((key) => ({\n            editable: true,\n            key,\n            value: store[key],\n        }));\n    }\n    return state;\n}\nfunction formatEventData(events) {\n    if (!events)\n        return {};\n    if (Array.isArray(events)) {\n        // TODO: handle add and delete for arrays and objects\n        return events.reduce((data, event) => {\n            data.keys.push(event.key);\n            data.operations.push(event.type);\n            data.oldValue[event.key] = event.oldValue;\n            data.newValue[event.key] = event.newValue;\n            return data;\n        }, {\n            oldValue: {},\n            keys: [],\n            operations: [],\n            newValue: {},\n        });\n    }\n    else {\n        return {\n            operation: formatDisplay(events.type),\n            key: formatDisplay(events.key),\n            oldValue: events.oldValue,\n            newValue: events.newValue,\n        };\n    }\n}\nfunction formatMutationType(type) {\n    switch (type) {\n        case MutationType.direct:\n            return 'mutation';\n        case MutationType.patchFunction:\n            return '$patch';\n        case MutationType.patchObject:\n            return '$patch';\n        default:\n            return 'unknown';\n    }\n}\n\n// timeline can be paused when directly changing the state\nlet isTimelineActive = true;\nconst componentStateTypes = [];\nconst MUTATIONS_LAYER_ID = 'pinia:mutations';\nconst INSPECTOR_ID = 'pinia';\nconst { assign: assign$1 } = Object;\n/**\n * Gets the displayed name of a store in devtools\n *\n * @param id - id of the store\n * @returns a formatted string\n */\nconst getStoreType = (id) => '🍍 ' + id;\n/**\n * Add the pinia plugin without any store. Allows displaying a Pinia plugin tab\n * as soon as it is added to the application.\n *\n * @param app - Vue application\n * @param pinia - pinia instance\n */\nfunction registerPiniaDevtools(app, pinia) {\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia 🍍',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n    }, (api) => {\n        if (typeof api.now !== 'function') {\n            toastMessage('You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.');\n        }\n        api.addTimelineLayer({\n            id: MUTATIONS_LAYER_ID,\n            label: `Pinia 🍍`,\n            color: 0xe5df88,\n        });\n        api.addInspector({\n            id: INSPECTOR_ID,\n            label: 'Pinia 🍍',\n            icon: 'storage',\n            treeFilterPlaceholder: 'Search stores',\n            actions: [\n                {\n                    icon: 'content_copy',\n                    action: () => {\n                        actionGlobalCopyState(pinia);\n                    },\n                    tooltip: 'Serialize and copy the state',\n                },\n                {\n                    icon: 'content_paste',\n                    action: async () => {\n                        await actionGlobalPasteState(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Replace the state with the content of your clipboard',\n                },\n                {\n                    icon: 'save',\n                    action: () => {\n                        actionGlobalSaveState(pinia);\n                    },\n                    tooltip: 'Save the state as a JSON file',\n                },\n                {\n                    icon: 'folder_open',\n                    action: async () => {\n                        await actionGlobalOpenStateFile(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Import the state from a JSON file',\n                },\n            ],\n            nodeActions: [\n                {\n                    icon: 'restore',\n                    tooltip: 'Reset the state (with \"$reset\")',\n                    action: (nodeId) => {\n                        const store = pinia._s.get(nodeId);\n                        if (!store) {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it wasn't found.`, 'warn');\n                        }\n                        else if (typeof store.$reset !== 'function') {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it doesn't have a \"$reset\" method implemented.`, 'warn');\n                        }\n                        else {\n                            store.$reset();\n                            toastMessage(`Store \"${nodeId}\" reset.`);\n                        }\n                    },\n                },\n            ],\n        });\n        api.on.inspectComponent((payload, ctx) => {\n            const proxy = (payload.componentInstance &&\n                payload.componentInstance.proxy);\n            if (proxy && proxy._pStores) {\n                const piniaStores = payload.componentInstance.proxy._pStores;\n                Object.values(piniaStores).forEach((store) => {\n                    payload.instanceData.state.push({\n                        type: getStoreType(store.$id),\n                        key: 'state',\n                        editable: true,\n                        value: store._isOptionsAPI\n                            ? {\n                                _custom: {\n                                    value: toRaw(store.$state),\n                                    actions: [\n                                        {\n                                            icon: 'restore',\n                                            tooltip: 'Reset the state of this store',\n                                            action: () => store.$reset(),\n                                        },\n                                    ],\n                                },\n                            }\n                            : // NOTE: workaround to unwrap transferred refs\n                                Object.keys(store.$state).reduce((state, key) => {\n                                    state[key] = store.$state[key];\n                                    return state;\n                                }, {}),\n                    });\n                    if (store._getters && store._getters.length) {\n                        payload.instanceData.state.push({\n                            type: getStoreType(store.$id),\n                            key: 'getters',\n                            editable: false,\n                            value: store._getters.reduce((getters, key) => {\n                                try {\n                                    getters[key] = store[key];\n                                }\n                                catch (error) {\n                                    // @ts-expect-error: we just want to show it in devtools\n                                    getters[key] = error;\n                                }\n                                return getters;\n                            }, {}),\n                        });\n                    }\n                });\n            }\n        });\n        api.on.getInspectorTree((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                let stores = [pinia];\n                stores = stores.concat(Array.from(pinia._s.values()));\n                payload.rootNodes = (payload.filter\n                    ? stores.filter((store) => '$id' in store\n                        ? store.$id\n                            .toLowerCase()\n                            .includes(payload.filter.toLowerCase())\n                        : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase()))\n                    : stores).map(formatStoreForInspectorTree);\n            }\n        });\n        // Expose pinia instance as $pinia to window\n        globalThis.$pinia = pinia;\n        api.on.getInspectorState((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    // this could be the selected store restored for a different project\n                    // so it's better not to say anything here\n                    return;\n                }\n                if (inspectedStore) {\n                    // Expose selected store as $store to window\n                    if (payload.nodeId !== PINIA_ROOT_ID)\n                        globalThis.$store = toRaw(inspectedStore);\n                    payload.state = formatStoreForInspectorState(inspectedStore);\n                }\n            }\n        });\n        api.on.editInspectorState((payload, ctx) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    return toastMessage(`store \"${payload.nodeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (!isPinia(inspectedStore)) {\n                    // access only the state\n                    if (path.length !== 1 ||\n                        !inspectedStore._customProperties.has(path[0]) ||\n                        path[0] in inspectedStore.$state) {\n                        path.unshift('$state');\n                    }\n                }\n                else {\n                    // Root access, we can omit the `.value` because the devtools API does it for us\n                    path.unshift('state');\n                }\n                isTimelineActive = false;\n                payload.set(inspectedStore, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n        api.on.editComponentState((payload) => {\n            if (payload.type.startsWith('🍍')) {\n                const storeId = payload.type.replace(/^🍍\\s*/, '');\n                const store = pinia._s.get(storeId);\n                if (!store) {\n                    return toastMessage(`store \"${storeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (path[0] !== 'state') {\n                    return toastMessage(`Invalid path for store \"${storeId}\":\\n${path}\\nOnly state can be modified.`);\n                }\n                // rewrite the first entry to be able to directly set the state as\n                // well as any other path\n                path[0] = '$state';\n                isTimelineActive = false;\n                payload.set(store, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n    });\n}\nfunction addStoreToDevtools(app, store) {\n    if (!componentStateTypes.includes(getStoreType(store.$id))) {\n        componentStateTypes.push(getStoreType(store.$id));\n    }\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia 🍍',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n        settings: {\n            logStoreChanges: {\n                label: 'Notify about new/deleted stores',\n                type: 'boolean',\n                defaultValue: true,\n            },\n            // useEmojis: {\n            //   label: 'Use emojis in messages ⚡️',\n            //   type: 'boolean',\n            //   defaultValue: true,\n            // },\n        },\n    }, (api) => {\n        // gracefully handle errors\n        const now = typeof api.now === 'function' ? api.now.bind(api) : Date.now;\n        store.$onAction(({ after, onError, name, args }) => {\n            const groupId = runningActionId++;\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: '🛫 ' + name,\n                    subtitle: 'start',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        action: formatDisplay(name),\n                        args,\n                    },\n                    groupId,\n                },\n            });\n            after((result) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        title: '🛬 ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            result,\n                        },\n                        groupId,\n                    },\n                });\n            });\n            onError((error) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        logType: 'error',\n                        title: '💥 ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            error,\n                        },\n                        groupId,\n                    },\n                });\n            });\n        }, true);\n        store._customProperties.forEach((name) => {\n            watch(() => unref(store[name]), (newValue, oldValue) => {\n                api.notifyComponentUpdate();\n                api.sendInspectorState(INSPECTOR_ID);\n                if (isTimelineActive) {\n                    api.addTimelineEvent({\n                        layerId: MUTATIONS_LAYER_ID,\n                        event: {\n                            time: now(),\n                            title: 'Change',\n                            subtitle: name,\n                            data: {\n                                newValue,\n                                oldValue,\n                            },\n                            groupId: activeAction,\n                        },\n                    });\n                }\n            }, { deep: true });\n        });\n        store.$subscribe(({ events, type }, state) => {\n            api.notifyComponentUpdate();\n            api.sendInspectorState(INSPECTOR_ID);\n            if (!isTimelineActive)\n                return;\n            // rootStore.state[store.id] = state\n            const eventData = {\n                time: now(),\n                title: formatMutationType(type),\n                data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),\n                groupId: activeAction,\n            };\n            if (type === MutationType.patchFunction) {\n                eventData.subtitle = '⤵️';\n            }\n            else if (type === MutationType.patchObject) {\n                eventData.subtitle = '🧩';\n            }\n            else if (events && !Array.isArray(events)) {\n                eventData.subtitle = events.type;\n            }\n            if (events) {\n                eventData.data['rawEvent(s)'] = {\n                    _custom: {\n                        display: 'DebuggerEvent',\n                        type: 'object',\n                        tooltip: 'raw DebuggerEvent[]',\n                        value: events,\n                    },\n                };\n            }\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: eventData,\n            });\n        }, { detached: true, flush: 'sync' });\n        const hotUpdate = store._hotUpdate;\n        store._hotUpdate = markRaw((newStore) => {\n            hotUpdate(newStore);\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: '🔥 ' + store.$id,\n                    subtitle: 'HMR update',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        info: formatDisplay(`HMR update`),\n                    },\n                },\n            });\n            // update the devtools too\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n        });\n        const { $dispose } = store;\n        store.$dispose = () => {\n            $dispose();\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n            api.getSettings().logStoreChanges &&\n                toastMessage(`Disposed \"${store.$id}\" store 🗑`);\n        };\n        // trigger an update so it can display new registered stores\n        api.notifyComponentUpdate();\n        api.sendInspectorTree(INSPECTOR_ID);\n        api.sendInspectorState(INSPECTOR_ID);\n        api.getSettings().logStoreChanges &&\n            toastMessage(`\"${store.$id}\" store installed 🆕`);\n    });\n}\nlet runningActionId = 0;\nlet activeAction;\n/**\n * Patches a store to enable action grouping in devtools by wrapping the store with a Proxy that is passed as the\n * context of all actions, allowing us to set `runningAction` on each access and effectively associating any state\n * mutation to the action.\n *\n * @param store - store to patch\n * @param actionNames - list of actionst to patch\n */\nfunction patchActionForGrouping(store, actionNames, wrapWithProxy) {\n    // original actions of the store as they are given by pinia. We are going to override them\n    const actions = actionNames.reduce((storeActions, actionName) => {\n        // use toRaw to avoid tracking #541\n        storeActions[actionName] = toRaw(store)[actionName];\n        return storeActions;\n    }, {});\n    for (const actionName in actions) {\n        store[actionName] = function () {\n            // the running action id is incremented in a before action hook\n            const _actionId = runningActionId;\n            const trackedStore = wrapWithProxy\n                ? new Proxy(store, {\n                    get(...args) {\n                        activeAction = _actionId;\n                        return Reflect.get(...args);\n                    },\n                    set(...args) {\n                        activeAction = _actionId;\n                        return Reflect.set(...args);\n                    },\n                })\n                : store;\n            // For Setup Stores we need https://github.com/tc39/proposal-async-context\n            activeAction = _actionId;\n            const retValue = actions[actionName].apply(trackedStore, arguments);\n            // this is safer as async actions in Setup Stores would associate mutations done outside of the action\n            activeAction = undefined;\n            return retValue;\n        };\n    }\n}\n/**\n * pinia.use(devtoolsPlugin)\n */\nfunction devtoolsPlugin({ app, store, options }) {\n    // HMR module\n    if (store.$id.startsWith('__hot:')) {\n        return;\n    }\n    // detect option api vs setup api\n    store._isOptionsAPI = !!options.state;\n    // Do not overwrite actions mocked by @pinia/testing (#2298)\n    if (!store._p._testing) {\n        patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);\n        // Upgrade the HMR to also update the new actions\n        const originalHotUpdate = store._hotUpdate;\n        toRaw(store)._hotUpdate = function (newStore) {\n            originalHotUpdate.apply(this, arguments);\n            patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);\n        };\n    }\n    addStoreToDevtools(app, \n    // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?\n    store);\n}\n\n/**\n * Creates a Pinia instance to be used by the application\n */\nfunction createPinia() {\n    const scope = effectScope(true);\n    // NOTE: here we could check the window object for a state and directly set it\n    // if there is anything like it with Vue 3 SSR\n    const state = scope.run(() => ref({}));\n    let _p = [];\n    // plugins added before calling app.use(pinia)\n    let toBeInstalled = [];\n    const pinia = markRaw({\n        install(app) {\n            // this allows calling useStore() outside of a component setup after\n            // installing pinia's plugin\n            setActivePinia(pinia);\n            if (!isVue2) {\n                pinia._a = app;\n                app.provide(piniaSymbol, pinia);\n                app.config.globalProperties.$pinia = pinia;\n                /* istanbul ignore else */\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(app, pinia);\n                }\n                toBeInstalled.forEach((plugin) => _p.push(plugin));\n                toBeInstalled = [];\n            }\n        },\n        use(plugin) {\n            if (!this._a && !isVue2) {\n                toBeInstalled.push(plugin);\n            }\n            else {\n                _p.push(plugin);\n            }\n            return this;\n        },\n        _p,\n        // it's actually undefined here\n        // @ts-expect-error\n        _a: null,\n        _e: scope,\n        _s: new Map(),\n        state,\n    });\n    // pinia devtools rely on dev only features so they cannot be forced unless\n    // the dev build of Vue is used. Avoid old browsers like IE11.\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT && typeof Proxy !== 'undefined') {\n        pinia.use(devtoolsPlugin);\n    }\n    return pinia;\n}\n/**\n * Dispose a Pinia instance by stopping its effectScope and removing the state, plugins and stores. This is mostly\n * useful in tests, with both a testing pinia or a regular pinia and in applications that use multiple pinia instances.\n * Once disposed, the pinia instance cannot be used anymore.\n *\n * @param pinia - pinia instance\n */\nfunction disposePinia(pinia) {\n    pinia._e.stop();\n    pinia._s.clear();\n    pinia._p.splice(0);\n    pinia.state.value = {};\n    // @ts-expect-error: non valid\n    pinia._a = null;\n}\n\n/**\n * Checks if a function is a `StoreDefinition`.\n *\n * @param fn - object to test\n * @returns true if `fn` is a StoreDefinition\n */\nconst isUseStore = (fn) => {\n    return typeof fn === 'function' && typeof fn.$id === 'string';\n};\n/**\n * Mutates in place `newState` with `oldState` to _hot update_ it. It will\n * remove any key not existing in `newState` and recursively merge plain\n * objects.\n *\n * @param newState - new state object to be patched\n * @param oldState - old state that should be used to patch newState\n * @returns - newState\n */\nfunction patchObject(newState, oldState) {\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in oldState) {\n        const subPatch = oldState[key];\n        // skip the whole sub tree\n        if (!(key in newState)) {\n            continue;\n        }\n        const targetValue = newState[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            newState[key] = patchObject(targetValue, subPatch);\n        }\n        else {\n            // objects are either a bit more complex (e.g. refs) or primitives, so we\n            // just set the whole thing\n            if (isVue2) {\n                set(newState, key, subPatch);\n            }\n            else {\n                newState[key] = subPatch;\n            }\n        }\n    }\n    return newState;\n}\n/**\n * Creates an _accept_ function to pass to `import.meta.hot` in Vite applications.\n *\n * @example\n * ```js\n * const useUser = defineStore(...)\n * if (import.meta.hot) {\n *   import.meta.hot.accept(acceptHMRUpdate(useUser, import.meta.hot))\n * }\n * ```\n *\n * @param initialUseStore - return of the defineStore to hot update\n * @param hot - `import.meta.hot`\n */\nfunction acceptHMRUpdate(initialUseStore, hot) {\n    // strip as much as possible from iife.prod\n    if (!(process.env.NODE_ENV !== 'production')) {\n        return () => { };\n    }\n    return (newModule) => {\n        const pinia = hot.data.pinia || initialUseStore._pinia;\n        if (!pinia) {\n            // this store is still not used\n            return;\n        }\n        // preserve the pinia instance across loads\n        hot.data.pinia = pinia;\n        // console.log('got data', newStore)\n        for (const exportName in newModule) {\n            const useStore = newModule[exportName];\n            // console.log('checking for', exportName)\n            if (isUseStore(useStore) && pinia._s.has(useStore.$id)) {\n                // console.log('Accepting update for', useStore.$id)\n                const id = useStore.$id;\n                if (id !== initialUseStore.$id) {\n                    console.warn(`The id of the store changed from \"${initialUseStore.$id}\" to \"${id}\". Reloading.`);\n                    // return import.meta.hot.invalidate()\n                    return hot.invalidate();\n                }\n                const existingStore = pinia._s.get(id);\n                if (!existingStore) {\n                    console.log(`[Pinia]: skipping hmr because store doesn't exist yet`);\n                    return;\n                }\n                useStore(pinia, existingStore);\n            }\n        }\n    };\n}\n\nconst noop = () => { };\nfunction addSubscription(subscriptions, callback, detached, onCleanup = noop) {\n    subscriptions.push(callback);\n    const removeSubscription = () => {\n        const idx = subscriptions.indexOf(callback);\n        if (idx > -1) {\n            subscriptions.splice(idx, 1);\n            onCleanup();\n        }\n    };\n    if (!detached && getCurrentScope()) {\n        onScopeDispose(removeSubscription);\n    }\n    return removeSubscription;\n}\nfunction triggerSubscriptions(subscriptions, ...args) {\n    subscriptions.slice().forEach((callback) => {\n        callback(...args);\n    });\n}\n\nconst fallbackRunWithContext = (fn) => fn();\n/**\n * Marks a function as an action for `$onAction`\n * @internal\n */\nconst ACTION_MARKER = Symbol();\n/**\n * Action name symbol. Allows to add a name to an action after defining it\n * @internal\n */\nconst ACTION_NAME = Symbol();\nfunction mergeReactiveObjects(target, patchToApply) {\n    // Handle Map instances\n    if (target instanceof Map && patchToApply instanceof Map) {\n        patchToApply.forEach((value, key) => target.set(key, value));\n    }\n    else if (target instanceof Set && patchToApply instanceof Set) {\n        // Handle Set instances\n        patchToApply.forEach(target.add, target);\n    }\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in patchToApply) {\n        if (!patchToApply.hasOwnProperty(key))\n            continue;\n        const subPatch = patchToApply[key];\n        const targetValue = target[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            target.hasOwnProperty(key) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            // NOTE: here I wanted to warn about inconsistent types but it's not possible because in setup stores one might\n            // start the value of a property as a certain type e.g. a Map, and then for some reason, during SSR, change that\n            // to `undefined`. When trying to hydrate, we want to override the Map with `undefined`.\n            target[key] = mergeReactiveObjects(targetValue, subPatch);\n        }\n        else {\n            // @ts-expect-error: subPatch is a valid value\n            target[key] = subPatch;\n        }\n    }\n    return target;\n}\nconst skipHydrateSymbol = (process.env.NODE_ENV !== 'production')\n    ? Symbol('pinia:skipHydration')\n    : /* istanbul ignore next */ Symbol();\n/**\n * Tells Pinia to skip the hydration process of a given object. This is useful in setup stores (only) when you return a\n * stateful object in the store but it isn't really state. e.g. returning a router instance in a setup store.\n *\n * @param obj - target object\n * @returns obj\n */\nfunction skipHydrate(obj) {\n    return Object.defineProperty(obj, skipHydrateSymbol, {});\n}\n/**\n * Returns whether a value should be hydrated\n *\n * @param obj - target variable\n * @returns true if `obj` should be hydrated\n */\nfunction shouldHydrate(obj) {\n    return !isPlainObject(obj) || !obj.hasOwnProperty(skipHydrateSymbol);\n}\nconst { assign } = Object;\nfunction isComputed(o) {\n    return !!(isRef(o) && o.effect);\n}\nfunction createOptionsStore(id, options, pinia, hot) {\n    const { state, actions, getters } = options;\n    const initialState = pinia.state.value[id];\n    let store;\n    function setup() {\n        if (!initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(pinia.state.value, id, state ? state() : {});\n            }\n            else {\n                pinia.state.value[id] = state ? state() : {};\n            }\n        }\n        // avoid creating a state in pinia.state.value\n        const localState = (process.env.NODE_ENV !== 'production') && hot\n            ? // use ref() to unwrap refs inside state TODO: check if this is still necessary\n                toRefs(ref(state ? state() : {}).value)\n            : toRefs(pinia.state.value[id]);\n        return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {\n            if ((process.env.NODE_ENV !== 'production') && name in localState) {\n                console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with \"${name}\" in store \"${id}\".`);\n            }\n            computedGetters[name] = markRaw(computed(() => {\n                setActivePinia(pinia);\n                // it was created just before\n                const store = pinia._s.get(id);\n                // allow cross using stores\n                /* istanbul ignore if */\n                if (isVue2 && !store._r)\n                    return;\n                // @ts-expect-error\n                // return getters![name].call(context, context)\n                // TODO: avoid reading the getter while assigning with a global variable\n                return getters[name].call(store, store);\n            }));\n            return computedGetters;\n        }, {}));\n    }\n    store = createSetupStore(id, setup, options, pinia, hot, true);\n    return store;\n}\nfunction createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {\n    let scope;\n    const optionsForPlugin = assign({ actions: {} }, options);\n    /* istanbul ignore if */\n    if ((process.env.NODE_ENV !== 'production') && !pinia._e.active) {\n        throw new Error('Pinia destroyed');\n    }\n    // watcher options for $subscribe\n    const $subscribeOptions = { deep: true };\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production') && !isVue2) {\n        $subscribeOptions.onTrigger = (event) => {\n            /* istanbul ignore else */\n            if (isListening) {\n                debuggerEvents = event;\n                // avoid triggering this while the store is being built and the state is being set in pinia\n            }\n            else if (isListening == false && !store._hotUpdating) {\n                // let patch send all the events together later\n                /* istanbul ignore else */\n                if (Array.isArray(debuggerEvents)) {\n                    debuggerEvents.push(event);\n                }\n                else {\n                    console.error('🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug.');\n                }\n            }\n        };\n    }\n    // internal state\n    let isListening; // set to true at the end\n    let isSyncListening; // set to true at the end\n    let subscriptions = [];\n    let actionSubscriptions = [];\n    let debuggerEvents;\n    const initialState = pinia.state.value[$id];\n    // avoid setting the state for option stores if it is set\n    // by the setup\n    if (!isOptionsStore && !initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n        /* istanbul ignore if */\n        if (isVue2) {\n            set(pinia.state.value, $id, {});\n        }\n        else {\n            pinia.state.value[$id] = {};\n        }\n    }\n    const hotState = ref({});\n    // avoid triggering too many listeners\n    // https://github.com/vuejs/pinia/issues/1129\n    let activeListener;\n    function $patch(partialStateOrMutator) {\n        let subscriptionMutation;\n        isListening = isSyncListening = false;\n        // reset the debugger events since patches are sync\n        /* istanbul ignore else */\n        if ((process.env.NODE_ENV !== 'production')) {\n            debuggerEvents = [];\n        }\n        if (typeof partialStateOrMutator === 'function') {\n            partialStateOrMutator(pinia.state.value[$id]);\n            subscriptionMutation = {\n                type: MutationType.patchFunction,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        else {\n            mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);\n            subscriptionMutation = {\n                type: MutationType.patchObject,\n                payload: partialStateOrMutator,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        const myListenerId = (activeListener = Symbol());\n        nextTick().then(() => {\n            if (activeListener === myListenerId) {\n                isListening = true;\n            }\n        });\n        isSyncListening = true;\n        // because we paused the watcher, we need to manually call the subscriptions\n        triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);\n    }\n    const $reset = isOptionsStore\n        ? function $reset() {\n            const { state } = options;\n            const newState = state ? state() : {};\n            // we use a patch to group all changes into one single subscription\n            this.$patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, newState);\n            });\n        }\n        : /* istanbul ignore next */\n            (process.env.NODE_ENV !== 'production')\n                ? () => {\n                    throw new Error(`🍍: Store \"${$id}\" is built using the setup syntax and does not implement $reset().`);\n                }\n                : noop;\n    function $dispose() {\n        scope.stop();\n        subscriptions = [];\n        actionSubscriptions = [];\n        pinia._s.delete($id);\n    }\n    /**\n     * Helper that wraps function so it can be tracked with $onAction\n     * @param fn - action to wrap\n     * @param name - name of the action\n     */\n    const action = (fn, name = '') => {\n        if (ACTION_MARKER in fn) {\n            fn[ACTION_NAME] = name;\n            return fn;\n        }\n        const wrappedAction = function () {\n            setActivePinia(pinia);\n            const args = Array.from(arguments);\n            const afterCallbackList = [];\n            const onErrorCallbackList = [];\n            function after(callback) {\n                afterCallbackList.push(callback);\n            }\n            function onError(callback) {\n                onErrorCallbackList.push(callback);\n            }\n            // @ts-expect-error\n            triggerSubscriptions(actionSubscriptions, {\n                args,\n                name: wrappedAction[ACTION_NAME],\n                store,\n                after,\n                onError,\n            });\n            let ret;\n            try {\n                ret = fn.apply(this && this.$id === $id ? this : store, args);\n                // handle sync errors\n            }\n            catch (error) {\n                triggerSubscriptions(onErrorCallbackList, error);\n                throw error;\n            }\n            if (ret instanceof Promise) {\n                return ret\n                    .then((value) => {\n                    triggerSubscriptions(afterCallbackList, value);\n                    return value;\n                })\n                    .catch((error) => {\n                    triggerSubscriptions(onErrorCallbackList, error);\n                    return Promise.reject(error);\n                });\n            }\n            // trigger after callbacks\n            triggerSubscriptions(afterCallbackList, ret);\n            return ret;\n        };\n        wrappedAction[ACTION_MARKER] = true;\n        wrappedAction[ACTION_NAME] = name; // will be set later\n        // @ts-expect-error: we are intentionally limiting the returned type to just Fn\n        // because all the added properties are internals that are exposed through `$onAction()` only\n        return wrappedAction;\n    };\n    const _hmrPayload = /*#__PURE__*/ markRaw({\n        actions: {},\n        getters: {},\n        state: [],\n        hotState,\n    });\n    const partialStore = {\n        _p: pinia,\n        // _s: scope,\n        $id,\n        $onAction: addSubscription.bind(null, actionSubscriptions),\n        $patch,\n        $reset,\n        $subscribe(callback, options = {}) {\n            const removeSubscription = addSubscription(subscriptions, callback, options.detached, () => stopWatcher());\n            const stopWatcher = scope.run(() => watch(() => pinia.state.value[$id], (state) => {\n                if (options.flush === 'sync' ? isSyncListening : isListening) {\n                    callback({\n                        storeId: $id,\n                        type: MutationType.direct,\n                        events: debuggerEvents,\n                    }, state);\n                }\n            }, assign({}, $subscribeOptions, options)));\n            return removeSubscription;\n        },\n        $dispose,\n    };\n    /* istanbul ignore if */\n    if (isVue2) {\n        // start as non ready\n        partialStore._r = false;\n    }\n    const store = reactive((process.env.NODE_ENV !== 'production') || ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT)\n        ? assign({\n            _hmrPayload,\n            _customProperties: markRaw(new Set()), // devtools custom properties\n        }, partialStore\n        // must be added later\n        // setupStore\n        )\n        : partialStore);\n    // store the partial store now so the setup of stores can instantiate each other before they are finished without\n    // creating infinite loops.\n    pinia._s.set($id, store);\n    const runWithContext = (pinia._a && pinia._a.runWithContext) || fallbackRunWithContext;\n    // TODO: idea create skipSerialize that marks properties as non serializable and they are skipped\n    const setupStore = runWithContext(() => pinia._e.run(() => (scope = effectScope()).run(() => setup({ action }))));\n    // overwrite existing actions to support $onAction\n    for (const key in setupStore) {\n        const prop = setupStore[key];\n        if ((isRef(prop) && !isComputed(prop)) || isReactive(prop)) {\n            // mark it as a piece of state to be serialized\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                set(hotState.value, key, toRef(setupStore, key));\n                // createOptionStore directly sets the state in pinia.state.value so we\n                // can just skip that\n            }\n            else if (!isOptionsStore) {\n                // in setup stores we must hydrate the state and sync pinia state tree with the refs the user just created\n                if (initialState && shouldHydrate(prop)) {\n                    if (isRef(prop)) {\n                        prop.value = initialState[key];\n                    }\n                    else {\n                        // probably a reactive object, lets recursively assign\n                        // @ts-expect-error: prop is unknown\n                        mergeReactiveObjects(prop, initialState[key]);\n                    }\n                }\n                // transfer the ref to the pinia state to keep everything in sync\n                /* istanbul ignore if */\n                if (isVue2) {\n                    set(pinia.state.value[$id], key, prop);\n                }\n                else {\n                    pinia.state.value[$id][key] = prop;\n                }\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.state.push(key);\n            }\n            // action\n        }\n        else if (typeof prop === 'function') {\n            const actionValue = (process.env.NODE_ENV !== 'production') && hot ? prop : action(prop, key);\n            // this a hot module replacement store because the hotUpdate method needs\n            // to do it with the right context\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(setupStore, key, actionValue);\n            }\n            else {\n                // @ts-expect-error\n                setupStore[key] = actionValue;\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.actions[key] = prop;\n            }\n            // list actions so they can be used in plugins\n            // @ts-expect-error\n            optionsForPlugin.actions[key] = prop;\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            // add getters for devtools\n            if (isComputed(prop)) {\n                _hmrPayload.getters[key] = isOptionsStore\n                    ? // @ts-expect-error\n                        options.getters[key]\n                    : prop;\n                if (IS_CLIENT) {\n                    const getters = setupStore._getters ||\n                        // @ts-expect-error: same\n                        (setupStore._getters = markRaw([]));\n                    getters.push(key);\n                }\n            }\n        }\n    }\n    // add the state, getters, and action properties\n    /* istanbul ignore if */\n    if (isVue2) {\n        Object.keys(setupStore).forEach((key) => {\n            set(store, key, setupStore[key]);\n        });\n    }\n    else {\n        assign(store, setupStore);\n        // allows retrieving reactive objects with `storeToRefs()`. Must be called after assigning to the reactive object.\n        // Make `storeToRefs()` work with `reactive()` #799\n        assign(toRaw(store), setupStore);\n    }\n    // use this instead of a computed with setter to be able to create it anywhere\n    // without linking the computed lifespan to wherever the store is first\n    // created.\n    Object.defineProperty(store, '$state', {\n        get: () => ((process.env.NODE_ENV !== 'production') && hot ? hotState.value : pinia.state.value[$id]),\n        set: (state) => {\n            /* istanbul ignore if */\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                throw new Error('cannot set hotState');\n            }\n            $patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, state);\n            });\n        },\n    });\n    // add the hotUpdate before plugins to allow them to override it\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production')) {\n        store._hotUpdate = markRaw((newStore) => {\n            store._hotUpdating = true;\n            newStore._hmrPayload.state.forEach((stateKey) => {\n                if (stateKey in store.$state) {\n                    const newStateTarget = newStore.$state[stateKey];\n                    const oldStateSource = store.$state[stateKey];\n                    if (typeof newStateTarget === 'object' &&\n                        isPlainObject(newStateTarget) &&\n                        isPlainObject(oldStateSource)) {\n                        patchObject(newStateTarget, oldStateSource);\n                    }\n                    else {\n                        // transfer the ref\n                        newStore.$state[stateKey] = oldStateSource;\n                    }\n                }\n                // patch direct access properties to allow store.stateProperty to work as\n                // store.$state.stateProperty\n                set(store, stateKey, toRef(newStore.$state, stateKey));\n            });\n            // remove deleted state properties\n            Object.keys(store.$state).forEach((stateKey) => {\n                if (!(stateKey in newStore.$state)) {\n                    del(store, stateKey);\n                }\n            });\n            // avoid devtools logging this as a mutation\n            isListening = false;\n            isSyncListening = false;\n            pinia.state.value[$id] = toRef(newStore._hmrPayload, 'hotState');\n            isSyncListening = true;\n            nextTick().then(() => {\n                isListening = true;\n            });\n            for (const actionName in newStore._hmrPayload.actions) {\n                const actionFn = newStore[actionName];\n                set(store, actionName, action(actionFn, actionName));\n            }\n            // TODO: does this work in both setup and option store?\n            for (const getterName in newStore._hmrPayload.getters) {\n                const getter = newStore._hmrPayload.getters[getterName];\n                const getterValue = isOptionsStore\n                    ? // special handling of options api\n                        computed(() => {\n                            setActivePinia(pinia);\n                            return getter.call(store, store);\n                        })\n                    : getter;\n                set(store, getterName, getterValue);\n            }\n            // remove deleted getters\n            Object.keys(store._hmrPayload.getters).forEach((key) => {\n                if (!(key in newStore._hmrPayload.getters)) {\n                    del(store, key);\n                }\n            });\n            // remove old actions\n            Object.keys(store._hmrPayload.actions).forEach((key) => {\n                if (!(key in newStore._hmrPayload.actions)) {\n                    del(store, key);\n                }\n            });\n            // update the values used in devtools and to allow deleting new properties later on\n            store._hmrPayload = newStore._hmrPayload;\n            store._getters = newStore._getters;\n            store._hotUpdating = false;\n        });\n    }\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n        const nonEnumerable = {\n            writable: true,\n            configurable: true,\n            // avoid warning on devtools trying to display this property\n            enumerable: false,\n        };\n        ['_p', '_hmrPayload', '_getters', '_customProperties'].forEach((p) => {\n            Object.defineProperty(store, p, assign({ value: store[p] }, nonEnumerable));\n        });\n    }\n    /* istanbul ignore if */\n    if (isVue2) {\n        // mark the store as ready before plugins\n        store._r = true;\n    }\n    // apply all plugins\n    pinia._p.forEach((extender) => {\n        /* istanbul ignore else */\n        if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n            const extensions = scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            }));\n            Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));\n            assign(store, extensions);\n        }\n        else {\n            assign(store, scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            })));\n        }\n    });\n    if ((process.env.NODE_ENV !== 'production') &&\n        store.$state &&\n        typeof store.$state === 'object' &&\n        typeof store.$state.constructor === 'function' &&\n        !store.$state.constructor.toString().includes('[native code]')) {\n        console.warn(`[🍍]: The \"state\" must be a plain object. It cannot be\\n` +\n            `\\tstate: () => new MyClass()\\n` +\n            `Found in store \"${store.$id}\".`);\n    }\n    // only apply hydrate to option stores with an initial state in pinia\n    if (initialState &&\n        isOptionsStore &&\n        options.hydrate) {\n        options.hydrate(store.$state, initialState);\n    }\n    isListening = true;\n    isSyncListening = true;\n    return store;\n}\n// allows unused stores to be tree shaken\n/*! #__NO_SIDE_EFFECTS__ */\nfunction defineStore(\n// TODO: add proper types from above\nidOrOptions, setup, setupOptions) {\n    let id;\n    let options;\n    const isSetupStore = typeof setup === 'function';\n    if (typeof idOrOptions === 'string') {\n        id = idOrOptions;\n        // the option store setup will contain the actual options in this case\n        options = isSetupStore ? setupOptions : setup;\n    }\n    else {\n        options = idOrOptions;\n        id = idOrOptions.id;\n        if ((process.env.NODE_ENV !== 'production') && typeof id !== 'string') {\n            throw new Error(`[🍍]: \"defineStore()\" must be passed a store id as its first argument.`);\n        }\n    }\n    function useStore(pinia, hot) {\n        const hasContext = hasInjectionContext();\n        pinia =\n            // in test mode, ignore the argument provided as we can always retrieve a\n            // pinia instance with getActivePinia()\n            ((process.env.NODE_ENV === 'test') && activePinia && activePinia._testing ? null : pinia) ||\n                (hasContext ? inject(piniaSymbol, null) : null);\n        if (pinia)\n            setActivePinia(pinia);\n        if ((process.env.NODE_ENV !== 'production') && !activePinia) {\n            throw new Error(`[🍍]: \"getActivePinia()\" was called but there was no active Pinia. Are you trying to use a store before calling \"app.use(pinia)\"?\\n` +\n                `See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.\\n` +\n                `This will fail in production.`);\n        }\n        pinia = activePinia;\n        if (!pinia._s.has(id)) {\n            // creating the store registers it in `pinia._s`\n            if (isSetupStore) {\n                createSetupStore(id, setup, options, pinia);\n            }\n            else {\n                createOptionsStore(id, options, pinia);\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                // @ts-expect-error: not the right inferred type\n                useStore._pinia = pinia;\n            }\n        }\n        const store = pinia._s.get(id);\n        if ((process.env.NODE_ENV !== 'production') && hot) {\n            const hotId = '__hot:' + id;\n            const newStore = isSetupStore\n                ? createSetupStore(hotId, setup, options, pinia, true)\n                : createOptionsStore(hotId, assign({}, options), pinia, true);\n            hot._hotUpdate(newStore);\n            // cleanup the state properties and the store from the cache\n            delete pinia.state.value[hotId];\n            pinia._s.delete(hotId);\n        }\n        if ((process.env.NODE_ENV !== 'production') && IS_CLIENT) {\n            const currentInstance = getCurrentInstance();\n            // save stores in instances to access them devtools\n            if (currentInstance &&\n                currentInstance.proxy &&\n                // avoid adding stores that are just built for hot module replacement\n                !hot) {\n                const vm = currentInstance.proxy;\n                const cache = '_pStores' in vm ? vm._pStores : (vm._pStores = {});\n                cache[id] = store;\n            }\n        }\n        // StoreGeneric cannot be casted towards Store\n        return store;\n    }\n    useStore.$id = id;\n    return useStore;\n}\n\nlet mapStoreSuffix = 'Store';\n/**\n * Changes the suffix added by `mapStores()`. Can be set to an empty string.\n * Defaults to `\"Store\"`. Make sure to extend the MapStoresCustomization\n * interface if you are using TypeScript.\n *\n * @param suffix - new suffix\n */\nfunction setMapStoreSuffix(suffix // could be 'Store' but that would be annoying for JS\n) {\n    mapStoreSuffix = suffix;\n}\n/**\n * Allows using stores without the composition API (`setup()`) by generating an\n * object to be spread in the `computed` field of a component. It accepts a list\n * of store definitions.\n *\n * @example\n * ```js\n * export default {\n *   computed: {\n *     // other computed properties\n *     ...mapStores(useUserStore, useCartStore)\n *   },\n *\n *   created() {\n *     this.userStore // store with id \"user\"\n *     this.cartStore // store with id \"cart\"\n *   }\n * }\n * ```\n *\n * @param stores - list of stores to map to an object\n */\nfunction mapStores(...stores) {\n    if ((process.env.NODE_ENV !== 'production') && Array.isArray(stores[0])) {\n        console.warn(`[🍍]: Directly pass all stores to \"mapStores()\" without putting them in an array:\\n` +\n            `Replace\\n` +\n            `\\tmapStores([useAuthStore, useCartStore])\\n` +\n            `with\\n` +\n            `\\tmapStores(useAuthStore, useCartStore)\\n` +\n            `This will fail in production if not fixed.`);\n        stores = stores[0];\n    }\n    return stores.reduce((reduced, useStore) => {\n        // @ts-expect-error: $id is added by defineStore\n        reduced[useStore.$id + mapStoreSuffix] = function () {\n            return useStore(this.$pinia);\n        };\n        return reduced;\n    }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = function () {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key];\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function () {\n                const store = useStore(this.$pinia);\n                const storeKey = keysOrMapper[key];\n                // for some reason TS is unable to infer the type of storeKey to be a\n                // function\n                return typeof storeKey === 'function'\n                    ? storeKey.call(this, store)\n                    : // @ts-expect-error: FIXME: should work?\n                        store[storeKey];\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Alias for `mapState()`. You should use `mapState()` instead.\n * @deprecated use `mapState()` instead.\n */\nconst mapGetters = mapState;\n/**\n * Allows directly using actions from your store without using the composition\n * API (`setup()`) by generating an object to be spread in the `methods` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapActions(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key](...args);\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[keysOrMapper[key]](...args);\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapWritableState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[key];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[key] = value);\n                },\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[keysOrMapper[key]];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[keysOrMapper[key]] = value);\n                },\n            };\n            return reduced;\n        }, {});\n}\n\n/**\n * Creates an object of references with all the state, getters, and plugin-added\n * state properties of the store. Similar to `toRefs()` but specifically\n * designed for Pinia stores so methods and non reactive properties are\n * completely ignored.\n *\n * @param store - store to extract the refs from\n */\nfunction storeToRefs(store) {\n    // See https://github.com/vuejs/pinia/issues/852\n    // It's easier to just use toRefs() even if it includes more stuff\n    if (isVue2) {\n        // @ts-expect-error: toRefs include methods and others\n        return toRefs(store);\n    }\n    else {\n        const rawStore = toRaw(store);\n        const refs = {};\n        for (const key in rawStore) {\n            const value = rawStore[key];\n            // There is no native method to check for a computed\n            // https://github.com/vuejs/core/pull/4165\n            if (value.effect) {\n                // @ts-expect-error: too hard to type correctly\n                refs[key] =\n                    // ...\n                    computed({\n                        get: () => store[key],\n                        set(value) {\n                            store[key] = value;\n                        },\n                    });\n            }\n            else if (isRef(value) || isReactive(value)) {\n                // @ts-expect-error: the key is state or getter\n                refs[key] =\n                    // ---\n                    toRef(store, key);\n            }\n        }\n        return refs;\n    }\n}\n\n/**\n * Vue 2 Plugin that must be installed for pinia to work. Note **you don't need\n * this plugin if you are using Nuxt.js**. Use the `buildModule` instead:\n * https://pinia.vuejs.org/ssr/nuxt.html.\n *\n * @example\n * ```js\n * import Vue from 'vue'\n * import { PiniaVuePlugin, createPinia } from 'pinia'\n *\n * Vue.use(PiniaVuePlugin)\n * const pinia = createPinia()\n *\n * new Vue({\n *   el: '#app',\n *   // ...\n *   pinia,\n * })\n * ```\n *\n * @param _Vue - `Vue` imported from 'vue'.\n */\nconst PiniaVuePlugin = function (_Vue) {\n    // Equivalent of\n    // app.config.globalProperties.$pinia = pinia\n    _Vue.mixin({\n        beforeCreate() {\n            const options = this.$options;\n            if (options.pinia) {\n                const pinia = options.pinia;\n                // HACK: taken from provide(): https://github.com/vuejs/composition-api/blob/main/src/apis/inject.ts#L31\n                /* istanbul ignore else */\n                if (!this._provided) {\n                    const provideCache = {};\n                    Object.defineProperty(this, '_provided', {\n                        get: () => provideCache,\n                        set: (v) => Object.assign(provideCache, v),\n                    });\n                }\n                this._provided[piniaSymbol] = pinia;\n                // propagate the pinia instance in an SSR friendly way\n                // avoid adding it to nuxt twice\n                /* istanbul ignore else */\n                if (!this.$pinia) {\n                    this.$pinia = pinia;\n                }\n                pinia._a = this;\n                if (IS_CLIENT) {\n                    // this allows calling useStore() outside of a component setup after\n                    // installing pinia's plugin\n                    setActivePinia(pinia);\n                }\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(pinia._a, pinia);\n                }\n            }\n            else if (!this.$pinia && options.parent && options.parent.$pinia) {\n                this.$pinia = options.parent.$pinia;\n            }\n        },\n        destroyed() {\n            delete this._pStores;\n        },\n    });\n};\n\nexport { MutationType, PiniaVuePlugin, acceptHMRUpdate, createPinia, defineStore, disposePinia, getActivePinia, mapActions, mapGetters, mapState, mapStores, mapWritableState, setActivePinia, setMapStoreSuffix, shouldHydrate, skipHydrate, storeToRefs };\n","import { defineStore } from 'pinia';\r\n\r\nexport const useConfigStore = defineStore('config', {\r\n  state: () => ({\r\n    width: 800,\r\n    height: 600,\r\n    dimensions: 4,\r\n    numVectors: 6,\r\n    showForces: true,\r\n    showLabels: false,\r\n    showGrid: true,\r\n    rainbowMode: false,\r\n    neuronMode: false,\r\n    forceStrength: 50,\r\n    linkDistance: 100,\r\n    charge: -30,\r\n    particleSize: 5,\r\n  }),\r\n  actions: {\r\n    updateConfig(key, value) {\r\n      if (Object.prototype.hasOwnProperty.call(this, key)) {\r\n        this[key] = value;\r\n      }\r\n    },\r\n  },\r\n}); ","/**\r\n * Vector Utility Functions\r\n * Comprehensive helper functions for vector operations, validation, and manipulation\r\n */\r\n\r\n// Vector Mathematical Operations\r\nexport const vectorOperations = {\r\n  /**\r\n   * Add two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number[]} Result vector\r\n   */\r\n  add(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.map((val, i) => val + b[i])\r\n  },\r\n\r\n  /**\r\n   * Subtract two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number[]} Result vector\r\n   */\r\n  subtract(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.map((val, i) => val - b[i])\r\n  },\r\n\r\n  /**\r\n   * Scale a vector by a scalar\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} scalar - Scaling factor\r\n   * @returns {number[]} Scaled vector\r\n   */\r\n  scale(vector, scalar) {\r\n    return vector.map(val => val * scalar)\r\n  },\r\n\r\n  /**\r\n   * Calculate dot product of two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Dot product\r\n   */\r\n  dotProduct(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.reduce((sum, val, i) => sum + val * b[i], 0)\r\n  },\r\n\r\n  /**\r\n   * Calculate vector magnitude (L2 norm)\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number} Magnitude\r\n   */\r\n  magnitude(vector) {\r\n    return Math.sqrt(vector.reduce((sum, val) => sum + val * val, 0))\r\n  },\r\n\r\n  /**\r\n   * Normalize a vector to unit length\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number[]} Normalized vector\r\n   */\r\n  normalize(vector) {\r\n    const mag = this.magnitude(vector)\r\n    if (mag === 0) return vector.slice() // Return copy of zero vector\r\n    return vector.map(val => val / mag)\r\n  },\r\n\r\n  /**\r\n   * Calculate cosine similarity between two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Cosine similarity (-1 to 1)\r\n   */\r\n  cosineSimilarity(a, b) {\r\n    const dotProd = this.dotProduct(a, b)\r\n    const magA = this.magnitude(a)\r\n    const magB = this.magnitude(b)\r\n    \r\n    if (magA === 0 || magB === 0) return 0\r\n    return dotProd / (magA * magB)\r\n  },\r\n\r\n  /**\r\n   * Calculate Euclidean distance between two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Euclidean distance\r\n   */\r\n  euclideanDistance(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    const diff = this.subtract(a, b)\r\n    return this.magnitude(diff)\r\n  },\r\n\r\n  /**\r\n   * Calculate Manhattan distance between two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Manhattan distance\r\n   */\r\n  manhattanDistance(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.reduce((sum, val, i) => sum + Math.abs(val - b[i]), 0)\r\n  }\r\n}\r\n\r\n// Vector Generation Utilities\r\nexport const vectorGeneration = {\r\n  /**\r\n   * Generate a random vector with specified dimensions\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @param {number} min - Minimum value\r\n   * @param {number} max - Maximum value\r\n   * @returns {number[]} Random vector\r\n   */\r\n  random(dimensions, min = -1, max = 1) {\r\n    return Array.from({ length: dimensions }, () => \r\n      Math.random() * (max - min) + min\r\n    )\r\n  },\r\n\r\n  /**\r\n   * Generate a zero vector\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @returns {number[]} Zero vector\r\n   */\r\n  zero(dimensions) {\r\n    return new Array(dimensions).fill(0)\r\n  },\r\n\r\n  /**\r\n   * Generate a unit vector (one-hot)\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @param {number} activeIndex - Index of the active dimension\r\n   * @returns {number[]} Unit vector\r\n   */\r\n  unit(dimensions, activeIndex) {\r\n    const vector = this.zero(dimensions)\r\n    if (activeIndex >= 0 && activeIndex < dimensions) {\r\n      vector[activeIndex] = 1\r\n    }\r\n    return vector\r\n  },\r\n\r\n  /**\r\n   * Generate vectors with normal distribution\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @param {number} mean - Mean value\r\n   * @param {number} stdDev - Standard deviation\r\n   * @returns {number[]} Normally distributed vector\r\n   */\r\n  normal(dimensions, mean = 0, stdDev = 1) {\r\n    return Array.from({ length: dimensions }, () => \r\n      this.boxMullerRandom() * stdDev + mean\r\n    )\r\n  },\r\n\r\n  /**\r\n   * Box-Muller transformation for normal distribution\r\n   * @returns {number} Normally distributed random number\r\n   */\r\n  boxMullerRandom() {\r\n    const u1 = Math.random()\r\n    const u2 = Math.random()\r\n    return Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2)\r\n  }\r\n}\r\n\r\n// Vector Validation\r\nexport const vectorValidation = {\r\n  /**\r\n   * Check if input is a valid vector\r\n   * @param {any} input - Input to validate\r\n   * @returns {boolean} True if valid vector\r\n   */\r\n  isValid(input) {\r\n    return Array.isArray(input) && \r\n           input.length > 0 && \r\n           input.every(val => typeof val === 'number' && !isNaN(val))\r\n  },\r\n\r\n  /**\r\n   * Check if two vectors have same dimensions\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {boolean} True if same dimensions\r\n   */\r\n  sameDimensions(a, b) {\r\n    return this.isValid(a) && this.isValid(b) && a.length === b.length\r\n  },\r\n\r\n  /**\r\n   * Validate vector dimensions\r\n   * @param {number[]} vector - Vector to validate\r\n   * @param {number} expectedDimensions - Expected number of dimensions\r\n   * @returns {boolean} True if dimensions match\r\n   */\r\n  validateDimensions(vector, expectedDimensions) {\r\n    return this.isValid(vector) && vector.length === expectedDimensions\r\n  },\r\n\r\n  /**\r\n   * Check if vector contains only finite numbers\r\n   * @param {number[]} vector - Vector to check\r\n   * @returns {boolean} True if all values are finite\r\n   */\r\n  isFinite(vector) {\r\n    return this.isValid(vector) && vector.every(val => Number.isFinite(val))\r\n  }\r\n}\r\n\r\n// Vector Statistics\r\nexport const vectorStatistics = {\r\n  /**\r\n   * Calculate vector statistics\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {Object} Statistics object\r\n   */\r\n  calculate(vector) {\r\n    if (!vectorValidation.isValid(vector)) {\r\n      throw new Error('Invalid vector input')\r\n    }\r\n\r\n    const mean = this.mean(vector)\r\n    const variance = this.variance(vector, mean)\r\n    const stdDev = Math.sqrt(variance)\r\n    const entropy = this.entropy(vector)\r\n    const dimensions = vector.length\r\n\r\n    return {\r\n      mean,\r\n      variance,\r\n      standardDeviation: stdDev,\r\n      min: Math.min(...vector),\r\n      max: Math.max(...vector),\r\n      magnitude: vectorOperations.magnitude(vector),\r\n      sparsity: this.sparsity(vector),\r\n      entropy,\r\n      componentInsights: this.componentInsights(vector),\r\n      effectiveDimensionality: this.effectiveDimensionality(entropy),\r\n      informationDensity: this.informationDensity(entropy, dimensions),\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Calculate mean of vector components\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number} Mean value\r\n   */\r\n  mean(vector) {\r\n    return vector.reduce((sum, val) => sum + val, 0) / vector.length\r\n  },\r\n\r\n  /**\r\n   * Calculate variance of vector components\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} mean - Pre-calculated mean (optional)\r\n   * @returns {number} Variance\r\n   */\r\n  variance(vector, mean = null) {\r\n    const m = mean !== null ? mean : this.mean(vector)\r\n    return vector.reduce((sum, val) => sum + Math.pow(val - m, 2), 0) / vector.length\r\n  },\r\n\r\n  /**\r\n   * Calculate sparsity of a vector\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} [threshold=1e-10] - Threshold for considering a value as zero\r\n   * @returns {number} Sparsity (0 to 1)\r\n   */\r\n  sparsity(vector, threshold = 1e-10) {\r\n    if (!vectorValidation.isValid(vector) || vector.length === 0) return 0\r\n    const zeroCount = vector.filter(val => Math.abs(val) < threshold).length\r\n    return zeroCount / vector.length\r\n  },\r\n\r\n  /**\r\n   * Calculate Shannon entropy of a vector's component distribution\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number} Shannon entropy\r\n   */\r\n  entropy(vector) {\r\n    if (!vectorValidation.isValid(vector) || vector.length === 0) return 0\r\n\r\n    const squared = vector.map(v => v * v)\r\n    const sumSquared = squared.reduce((s, v) => s + v, 0)\r\n\r\n    if (sumSquared === 0) return 0\r\n\r\n    const probabilities = squared.map(v => v / sumSquared)\r\n\r\n    return -probabilities.reduce((s, p) => {\r\n      return p > 0 ? s + p * Math.log2(p) : s\r\n    }, 0)\r\n  },\r\n\r\n  /**\r\n   * Calculate component insights for a vector\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {object} Component insights\r\n   */\r\n  componentInsights(vector) {\r\n    if (!vectorValidation.isValid(vector)) {\r\n      return {\r\n        positiveCount: 0,\r\n        negativeCount: 0,\r\n        zeroCount: 0,\r\n        positiveRatio: 0,\r\n        negativeRatio: 0,\r\n      }\r\n    }\r\n    const len = vector.length\r\n    if (len === 0) return { positiveCount: 0, negativeCount: 0, zeroCount: 0, positiveRatio: 0, negativeRatio: 0 }\r\n\r\n    let positiveCount = 0\r\n    let negativeCount = 0\r\n    let zeroCount = 0\r\n\r\n    for (const v of vector) {\r\n      if (v > 0) positiveCount++\r\n      else if (v < 0) negativeCount++\r\n      else zeroCount++\r\n    }\r\n\r\n    return {\r\n      positiveCount,\r\n      negativeCount,\r\n      zeroCount,\r\n      positiveRatio: positiveCount / len,\r\n      negativeRatio: negativeCount / len,\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Calculate effective dimensionality of a vector\r\n   * @param {number} entropy - Pre-calculated Shannon entropy\r\n   * @returns {number} Effective dimensionality\r\n   */\r\n  effectiveDimensionality(entropy) {\r\n    return Math.pow(2, entropy)\r\n  },\r\n\r\n  /**\r\n   * Calculate information density of a vector\r\n   * @param {number} entropy - Pre-calculated Shannon entropy\r\n   * @param {number} dimensions - The number of dimensions in the vector\r\n   * @returns {number} Information density\r\n   */\r\n  informationDensity(entropy, dimensions) {\r\n    if (dimensions <= 1) return 1\r\n    // We use log2(dimensions) because entropy is in base 2.\r\n    // This gives a normalized value between 0 and 1.\r\n    const maxEntropy = Math.log2(dimensions)\r\n    if (maxEntropy === 0) return 1 // if dimensions is 1, entropy is 0, it's fully \"dense\" for its dimension.\r\n    return entropy / maxEntropy\r\n  },\r\n\r\n  /**\r\n   * Perform k-means clustering on a set of vectors\r\n   * @param {Array<number[]>} vectors - Array of vectors\r\n   * @param {number} k - Number of clusters\r\n   * @param {number} maxIterations - Max iterations to prevent infinite loops\r\n   * @returns {Object} Clustered data\r\n   */\r\n  kmeans(vectors, k, maxIterations = 100) {\r\n    if (vectors.length < k) {\r\n      throw new Error('Number of vectors cannot be less than k.')\r\n    }\r\n\r\n    // 1. Initialize centroids randomly\r\n    let centroids = vectors.slice(0, k).map(v => v.slice())\r\n\r\n    let assignments = []\r\n    let iterations = 0\r\n\r\n    while (iterations < maxIterations) {\r\n      // 2. Assign each vector to the closest centroid\r\n      const newAssignments = vectors.map(vector => {\r\n        let minDistance = Infinity\r\n        let closestCentroidIndex = 0\r\n        centroids.forEach((centroid, index) => {\r\n          const distance = vectorOperations.euclideanDistance(vector, centroid)\r\n          if (distance < minDistance) {\r\n            minDistance = distance\r\n            closestCentroidIndex = index\r\n          }\r\n        })\r\n        return closestCentroidIndex\r\n      })\r\n\r\n      // Check for convergence\r\n      if (JSON.stringify(assignments) === JSON.stringify(newAssignments)) {\r\n        break\r\n      }\r\n      assignments = newAssignments\r\n\r\n      // 3. Recalculate centroids\r\n      const clusters = Array.from({ length: k }, () => [])\r\n      vectors.forEach((vector, i) => {\r\n        clusters[assignments[i]].push(vector)\r\n      })\r\n\r\n      centroids = clusters.map(cluster => {\r\n        if (cluster.length === 0) {\r\n          // Re-initialize empty clusters to a random vector\r\n          return vectors[Math.floor(Math.random() * vectors.length)].slice()\r\n        }\r\n        const meanVector = Array(vectors[0].length).fill(0)\r\n        cluster.forEach(vector => {\r\n          for (let i = 0; i < vector.length; i++) {\r\n            meanVector[i] += vector[i]\r\n          }\r\n        })\r\n        return meanVector.map(val => val / cluster.length)\r\n      })\r\n\r\n      iterations++\r\n    }\r\n\r\n    const clusters = Array.from({ length: k }, () => [])\r\n      vectors.forEach((vector, i) => {\r\n        clusters[assignments[i]].push(vector)\r\n      })\r\n\r\n    return {\r\n      centroids,\r\n      assignments,\r\n      clusters\r\n    }\r\n  }\r\n}\r\n\r\n// Vector Conversion Utilities\r\nexport const vectorConversion = {\r\n  /**\r\n   * Convert vector to string representation\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} precision - Decimal precision\r\n   * @returns {string} String representation\r\n   */\r\n  toString(vector, precision = 3) {\r\n    const formatted = vector.map(val => val.toFixed(precision))\r\n    return `[${formatted.join(', ')}]`\r\n  },\r\n\r\n  /**\r\n   * Parse vector from string\r\n   * @param {string} str - String representation\r\n   * @returns {number[]} Parsed vector\r\n   */\r\n  fromString(str) {\r\n    try {\r\n      // Remove brackets and split by comma\r\n      const cleaned = str.replace(/[\\[\\]]/g, '').trim()\r\n      if (!cleaned) return []\r\n      \r\n      return cleaned.split(',').map(val => {\r\n        const num = parseFloat(val.trim())\r\n        if (isNaN(num)) throw new Error(`Invalid number: ${val}`)\r\n        return num\r\n      })\r\n    } catch (error) {\r\n      throw new Error(`Failed to parse vector: ${error.message}`)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert vector to CSV row\r\n   * @param {number[]} vector - Input vector\r\n   * @param {string} separator - CSV separator\r\n   * @returns {string} CSV row\r\n   */\r\n  toCSV(vector, separator = ',') {\r\n    return vector.join(separator)\r\n  },\r\n\r\n  /**\r\n   * Parse vector from CSV row\r\n   * @param {string} csvRow - CSV row string\r\n   * @param {string} separator - CSV separator\r\n   * @returns {number[]} Parsed vector\r\n   */\r\n  fromCSV(csvRow, separator = ',') {\r\n    return csvRow.split(separator).map(val => {\r\n      const num = parseFloat(val.trim())\r\n      if (isNaN(num)) throw new Error(`Invalid number: ${val}`)\r\n      return num\r\n    })\r\n  }\r\n} ","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport { useConfigStore } from './configStore'\r\nimport { vectorOperations } from '../utils/vectorUtils'\r\n\r\nexport const useVectorStore = defineStore('vector', () => {\r\n  // State\r\n  const vectors = ref([])\r\n  const selectedVectorIds = ref(new Set());\r\n  const inputVector = ref(null)\r\n  const forceType = ref('resonance')\r\n  const activationFunction = ref('sigmoid')\r\n  const learningRate = ref(0.01)\r\n\r\n  // Getters\r\n  const selectedVectors = computed(() => {\r\n    return vectors.value.filter(v => selectedVectorIds.value.has(v.id))\r\n  })\r\n\r\n  const vectorCount = computed(() => vectors.value.length)\r\n\r\n  const averageMagnitude = computed(() => {\r\n    if (!vectors.value.length) return 0;\r\n    const sum = vectors.value.reduce((acc, v) => {\r\n        const magnitude = Math.sqrt(v.components.reduce((sum, c) => sum + c*c, 0));\r\n        return acc + (magnitude || 0);\r\n    }, 0);\r\n    return sum / vectors.value.length;\r\n  });\r\n\r\n  const availableForceTypes = computed(() => ['resonance', 'gravity', 'repulsion'])\r\n\r\n  const availableActivationFunctions = computed(() => [\r\n    'sigmoid', 'tanh', 'relu', 'leaky_relu', 'softplus', 'swish', 'softmax', 'softermax', 'soft_sigmoid'\r\n  ])\r\n\r\n  const maxSimilarity = computed(() => {\r\n    if (vectors.value.length < 2) return 0\r\n    let max = 0\r\n    for (let i = 0; i < vectors.value.length; i++) {\r\n      for (let j = i + 1; j < vectors.value.length; j++) {\r\n        const sim = vectorOperations.cosineSimilarity(\r\n          vectors.value[i].components,\r\n          vectors.value[j].components\r\n        )\r\n        if (sim > max) max = sim\r\n      }\r\n    }\r\n    return max\r\n  })\r\n\r\n  // Actions\r\n  function generateVectors() {\r\n    const configStore = useConfigStore()\r\n    const newVectors = []\r\n    const margin = 80\r\n\r\n    for (let i = 0; i < configStore.numVectors; i++) {\r\n      const vector = {\r\n        id: i,\r\n        components: [],\r\n        x: Math.random() * (configStore.width - 2 * margin) + margin,\r\n        y: Math.random() * (configStore.height - 2 * margin) + margin,\r\n      }\r\n\r\n      for (let d = 0; d < configStore.dimensions; d++) {\r\n        vector.components.push((Math.random() - 0.5) * 2)\r\n      }\r\n      newVectors.push(vector)\r\n    }\r\n    vectors.value = newVectors\r\n    selectedVectorIds.value.clear();\r\n    inputVector.value = null\r\n  }\r\n\r\n  function selectVector(vectorId, isMultiSelect = false) {\r\n    if (!isMultiSelect) {\r\n      if (selectedVectorIds.value.has(vectorId) && selectedVectorIds.value.size === 1) {\r\n        selectedVectorIds.value.clear();\r\n      } else {\r\n        selectedVectorIds.value.clear();\r\n        selectedVectorIds.value.add(vectorId);\r\n      }\r\n    } else {\r\n      if (selectedVectorIds.value.has(vectorId)) {\r\n        selectedVectorIds.value.delete(vectorId);\r\n      } else {\r\n        selectedVectorIds.value.add(vectorId);\r\n      }\r\n    }\r\n  }\r\n\r\n  function addInputVector() {\r\n    const configStore = useConfigStore()\r\n    const newIV = {\r\n      id: 'input',\r\n      components: [],\r\n      x: Math.random() * (configStore.width - 100) + 50,\r\n      y: Math.random() * (configStore.height - 100) + 50,\r\n      isInput: true,\r\n    }\r\n    for (let d = 0; d < configStore.dimensions; d++) {\r\n      newIV.components.push((Math.random() - 0.5) * 2)\r\n    }\r\n    inputVector.value = newIV\r\n  }\r\n\r\n  function removeInputVector() {\r\n    inputVector.value = null\r\n  }\r\n\r\n  function randomizeInputVector() {\r\n    if (!inputVector.value) return\r\n    for (let i = 0; i < inputVector.value.components.length; i++) {\r\n      inputVector.value.components[i] = (Math.random() - 0.5) * 2\r\n    }\r\n  }\r\n\r\n  function updateInputVectorComponent(index, value) {\r\n    if (!inputVector.value) return\r\n    inputVector.value.components[index] = value\r\n  }\r\n\r\n  function removeVector(vectorId) {\r\n    vectors.value = vectors.value.filter(v => v.id !== vectorId)\r\n    selectedVectorIds.value.delete(vectorId);\r\n  }\r\n\r\n  function addCustomVector(components) {\r\n    const configStore = useConfigStore()\r\n    const margin = 80\r\n    const vector = {\r\n      id: vectors.value.length > 0 ? Math.max(...vectors.value.map(v => v.id)) + 1 : 0,\r\n      components: components,\r\n      x: Math.random() * (configStore.width - 2 * margin) + margin,\r\n      y: Math.random() * (configStore.height - 2 * margin) + margin,\r\n      isCustom: true\r\n    }\r\n    vectors.value.push(vector)\r\n    configStore.updateConfig('numVectors', vectors.value.length)\r\n  }\r\n\r\n  function setVectorCustomColor(vectorId, color) {\r\n    const vector = vectors.value.find(v => v.id === vectorId)\r\n    if (vector) {\r\n      vector.customColor = color\r\n    }\r\n  }\r\n\r\n  function setVectorScale(vectorId, scale) {\r\n    const vector = vectors.value.find(v => v.id === vectorId)\r\n    if (vector) {\r\n      vector.scale = scale\r\n    }\r\n  }\r\n\r\n  function setForceType(type) {\r\n    forceType.value = type\r\n  }\r\n\r\n  function setActivationFunction(func) {\r\n    activationFunction.value = func\r\n  }\r\n\r\n  function setLearningRate(rate) {\r\n    learningRate.value = rate\r\n  }\r\n\r\n  return {\r\n    // State\r\n    vectors,\r\n    selectedVectorIds,\r\n    inputVector,\r\n    forceType,\r\n    activationFunction,\r\n    learningRate,\r\n    // Getters\r\n    selectedVectors,\r\n    vectorCount,\r\n    averageMagnitude,\r\n    availableForceTypes,\r\n    availableActivationFunctions,\r\n    maxSimilarity,\r\n    // Actions\r\n    generateVectors,\r\n    selectVector,\r\n    addInputVector,\r\n    removeInputVector,\r\n    randomizeInputVector,\r\n    updateInputVectorComponent,\r\n    removeVector,\r\n    addCustomVector,\r\n    setVectorCustomColor,\r\n    setVectorScale,\r\n    setForceType,\r\n    setActivationFunction,\r\n    setLearningRate\r\n  }\r\n}) ","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport const useUIStore = defineStore('ui', () => {\r\n  // State\r\n  const activeModal = ref(null)\r\n  const errorMessage = ref('')\r\n  const successMessage = ref('')\r\n  const errorDetails = ref(null)\r\n  const isLoading = ref(false)\r\n  const sidebarCollapsed = ref(false)\r\n  const activeTab = ref('individual')\r\n  const analysisViewMode = ref('overview') // 'overview' or 'detailed'\r\n  const neuralModeActive = ref(false)\r\n  const forcesVisible = ref(false)\r\n  \r\n  // Analysis state\r\n  const selectedAnalysisType = ref('pca')\r\n  const analysisResults = ref(null)\r\n  const isAnalyzing = ref(false)\r\n  \r\n  // Tutorial state\r\n  const tutorialStep = ref(0)\r\n  const tutorialActive = ref(false)\r\n  \r\n  // Keyboard shortcuts state\r\n  const shortcutsVisible = ref(false)\r\n\r\n  // Getters\r\n  const hasError = computed(() => !!errorMessage.value)\r\n  const hasSuccess = computed(() => !!successMessage.value)\r\n  const isModalOpen = computed(() => !!activeModal.value)\r\n\r\n  // Actions\r\n  const showModal = (modalName) => {\r\n    activeModal.value = modalName\r\n  }\r\n\r\n  const hideModal = () => {\r\n    activeModal.value = null\r\n  }\r\n\r\n  const showError = (message, actions = []) => {\r\n    errorMessage.value = message\r\n    errorDetails.value = { message, actions }\r\n    successMessage.value = ''\r\n  }\r\n\r\n  const hideError = () => {\r\n    errorMessage.value = ''\r\n    errorDetails.value = null\r\n  }\r\n\r\n  const showSuccess = (message, duration = 3000) => {\r\n    successMessage.value = message\r\n    if (duration > 0) {\r\n      setTimeout(() => {\r\n        successMessage.value = ''\r\n      }, duration)\r\n    }\r\n  }\r\n\r\n  const hideSuccess = () => {\r\n    successMessage.value = ''\r\n  }\r\n\r\n  const setLoading = (loading) => {\r\n    isLoading.value = loading\r\n  }\r\n\r\n  const toggleSidebar = () => {\r\n    sidebarCollapsed.value = !sidebarCollapsed.value\r\n  }\r\n\r\n  const setActiveTab = (tabName) => {\r\n    activeTab.value = tabName\r\n  }\r\n\r\n  const setAnalysisViewMode = (mode) => {\r\n    analysisViewMode.value = mode\r\n  }\r\n\r\n  const setNeuralModeActive = (active) => {\r\n    neuralModeActive.value = active\r\n  }\r\n\r\n  const setForcesVisible = (visible) => {\r\n    forcesVisible.value = visible\r\n  }\r\n\r\n  // Analysis methods\r\n  const setAnalysisType = (type) => {\r\n    selectedAnalysisType.value = type\r\n  }\r\n\r\n  const setAnalysisResults = (results) => {\r\n    analysisResults.value = results\r\n  }\r\n\r\n  const setAnalyzing = (analyzing) => {\r\n    isAnalyzing.value = analyzing\r\n  }\r\n\r\n  const runAnalysis = async (analysisFunction) => {\r\n    setAnalyzing(true)\r\n    try {\r\n      const results = await analysisFunction()\r\n      setAnalysisResults(results)\r\n      showSuccess('Analysis completed successfully!')\r\n    } catch (error) {\r\n      showError(`Analysis failed: ${error.message}`)\r\n    } finally {\r\n      setAnalyzing(false)\r\n    }\r\n  }\r\n\r\n  // Tutorial methods\r\n  const startTutorial = () => {\r\n    tutorialActive.value = true\r\n    tutorialStep.value = 0\r\n  }\r\n\r\n  const nextTutorialStep = () => {\r\n    tutorialStep.value++\r\n  }\r\n\r\n  const previousTutorialStep = () => {\r\n    if (tutorialStep.value > 0) {\r\n      tutorialStep.value--\r\n    }\r\n  }\r\n\r\n  const endTutorial = () => {\r\n    tutorialActive.value = false\r\n    tutorialStep.value = 0\r\n  }\r\n\r\n  const toggleShortcuts = () => {\r\n    shortcutsVisible.value = !shortcutsVisible.value\r\n    if (shortcutsVisible.value) {\r\n      showModal('shortcuts')\r\n    } else {\r\n      hideModal()\r\n    }\r\n  }\r\n\r\n  // Modal management helpers\r\n  const showTutorialModal = () => showModal('tutorial')\r\n  const showAnalysisModal = () => showModal('analysis')\r\n  const showUploadHelpModal = () => showModal('uploadHelp')\r\n  const showActivationHelpModal = () => showModal('activationHelp')\r\n  const showAddVectorModal = () => showModal('addVector')\r\n  const showExportModal = () => showModal('export')\r\n  const showShortcutsModal = (shortcuts) => {\r\n    shortcutsData.value = shortcuts\r\n    showModal('shortcuts')\r\n  }\r\n  const showPresetsModal = () => showModal('presets')\r\n\r\n  // Additional UI helpers\r\n  const closeAllModals = () => {\r\n    hideModal()\r\n    hideError()\r\n    hideSuccess()\r\n  }\r\n\r\n  const showInfo = (message, duration = 3000) => {\r\n    // Use success for info messages with different styling\r\n    showSuccess(message, duration)\r\n  }\r\n\r\n  // Shortcuts data\r\n  const shortcutsData = ref([])\r\n\r\n  return {\r\n    // State\r\n    activeModal,\r\n    errorMessage,\r\n    successMessage,\r\n    errorDetails,\r\n    isLoading,\r\n    sidebarCollapsed,\r\n    activeTab,\r\n    analysisViewMode,\r\n    neuralModeActive,\r\n    forcesVisible,\r\n    selectedAnalysisType,\r\n    analysisResults,\r\n    isAnalyzing,\r\n    tutorialStep,\r\n    tutorialActive,\r\n    shortcutsVisible,\r\n    shortcutsData,\r\n    \r\n    // Getters\r\n    hasError,\r\n    hasSuccess,\r\n    isModalOpen,\r\n    \r\n    // Actions\r\n    showModal,\r\n    hideModal,\r\n    showError,\r\n    hideError,\r\n    showSuccess,\r\n    hideSuccess,\r\n    setLoading,\r\n    toggleSidebar,\r\n    setActiveTab,\r\n    setAnalysisViewMode,\r\n    setNeuralModeActive,\r\n    setForcesVisible,\r\n    setAnalysisType,\r\n    setAnalysisResults,\r\n    setAnalyzing,\r\n    runAnalysis,\r\n    startTutorial,\r\n    nextTutorialStep,\r\n    previousTutorialStep,\r\n    endTutorial,\r\n    toggleShortcuts,\r\n    \r\n    // Modal helpers\r\n    showTutorialModal,\r\n    showAnalysisModal,\r\n    showUploadHelpModal,\r\n    showActivationHelpModal,\r\n    showAddVectorModal,\r\n    showExportModal,\r\n    showShortcutsModal,\r\n    showPresetsModal,\r\n    closeAllModals,\r\n    showInfo\r\n  }\r\n}) ","import { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useVectorStore } from '@/stores/vectorStore'\r\nimport { useUIStore } from '@/stores/uiStore'\r\n\r\nexport function useKeyboardShortcuts() {\r\n  const vectorStore = useVectorStore()\r\n  const uiStore = useUIStore()\r\n  \r\n  const isEnabled = ref(true)\r\n  const shortcuts = ref(new Map())\r\n  \r\n  // Default keyboard shortcuts\r\n  const defaultShortcuts = [\r\n    {\r\n      key: 'g',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Generate new vectors',\r\n      action: () => vectorStore.generateVectors()\r\n    },\r\n    {\r\n      key: 'a',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Add custom vector',\r\n      action: () => uiStore.showAddVectorModal()\r\n    },\r\n    {\r\n      key: 'n',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle neural mode',\r\n      action: () => vectorStore.toggleNeuralMode()\r\n    },\r\n    {\r\n      key: 'f',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle forces visualization',\r\n      action: () => vectorStore.toggleForces()\r\n    },\r\n    {\r\n      key: 'r',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Run analysis',\r\n      action: () => uiStore.showAnalysisModal()\r\n    },\r\n    {\r\n      key: 'h',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Show help',\r\n      action: () => uiStore.showTutorialModal()\r\n    },\r\n    {\r\n      key: 'Escape',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Close modals/cancel',\r\n      action: () => uiStore.closeAllModals()\r\n    },\r\n    {\r\n      key: 's',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Save/Export data',\r\n      action: () => exportData()\r\n    },\r\n    {\r\n      key: 'o',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Open/Import data',\r\n      action: () => triggerFileInput()\r\n    },\r\n    {\r\n      key: 'z',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Undo last action',\r\n      action: () => vectorStore.undo()\r\n    },\r\n    {\r\n      key: 'y',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Redo last action',\r\n      action: () => vectorStore.redo()\r\n    },\r\n    {\r\n      key: 'Delete',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Delete selected vector',\r\n      action: () => deleteSelectedVector()\r\n    },\r\n    {\r\n      key: 'Enter',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Confirm action',\r\n      action: () => confirmCurrentAction()\r\n    },\r\n    {\r\n      key: '1',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to vectors tab',\r\n      action: () => uiStore.setActiveTab('vectors')\r\n    },\r\n    {\r\n      key: '2',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to analysis tab',\r\n      action: () => uiStore.setActiveTab('analysis')\r\n    },\r\n    {\r\n      key: '3',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to visualization tab',\r\n      action: () => uiStore.setActiveTab('visualization')\r\n    },\r\n    {\r\n      key: '4',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to neural tab',\r\n      action: () => uiStore.setActiveTab('neural')\r\n    },\r\n    {\r\n      key: 'ArrowUp',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Select previous vector',\r\n      action: () => selectPreviousVector()\r\n    },\r\n    {\r\n      key: 'ArrowDown',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Select next vector',\r\n      action: () => selectNextVector()\r\n    },\r\n    {\r\n      key: 'ArrowLeft',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Previous tab',\r\n      action: () => navigateTab(-1)\r\n    },\r\n    {\r\n      key: 'ArrowRight',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Next tab',\r\n      action: () => navigateTab(1)\r\n    },\r\n    {\r\n      key: ' ',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle selection',\r\n      action: () => toggleVectorSelection()\r\n    },\r\n    {\r\n      key: 'F11',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle fullscreen',\r\n      action: () => toggleFullscreen()\r\n    }\r\n  ]\r\n  \r\n  // Initialize shortcuts\r\n  const initializeShortcuts = () => {\r\n    defaultShortcuts.forEach(shortcut => {\r\n      const key = createShortcutKey(shortcut)\r\n      shortcuts.value.set(key, shortcut)\r\n    })\r\n  }\r\n  \r\n  // Create unique key for shortcut mapping\r\n  const createShortcutKey = (shortcut) => {\r\n    const modifiers = []\r\n    if (shortcut.ctrl) modifiers.push('ctrl')\r\n    if (shortcut.alt) modifiers.push('alt')\r\n    if (shortcut.shift) modifiers.push('shift')\r\n    return [...modifiers, shortcut.key.toLowerCase()].join('+')\r\n  }\r\n  \r\n  // Handle keyboard events\r\n  const handleKeyDown = (event) => {\r\n    if (!isEnabled.value) return\r\n    \r\n    // Don't trigger shortcuts when typing in inputs\r\n    if (isInputElement(event.target)) return\r\n    \r\n    const key = createEventKey(event)\r\n    const shortcut = shortcuts.value.get(key)\r\n    \r\n    if (shortcut) {\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n      \r\n      try {\r\n        shortcut.action()\r\n        uiStore.showInfo(`Keyboard shortcut: ${shortcut.description}`)\r\n      } catch (error) {\r\n        console.error('Shortcut execution error:', error)\r\n        uiStore.showError('Failed to execute keyboard shortcut')\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Create event key from keyboard event\r\n  const createEventKey = (event) => {\r\n    const modifiers = []\r\n    if (event.ctrlKey || event.metaKey) modifiers.push('ctrl')\r\n    if (event.altKey) modifiers.push('alt')\r\n    if (event.shiftKey) modifiers.push('shift')\r\n    return [...modifiers, event.key.toLowerCase()].join('+')\r\n  }\r\n  \r\n  // Check if element is an input where we shouldn't trigger shortcuts\r\n  const isInputElement = (element) => {\r\n    const inputElements = ['input', 'textarea', 'select']\r\n    const contentEditable = element.contentEditable === 'true'\r\n    return inputElements.includes(element.tagName.toLowerCase()) || contentEditable\r\n  }\r\n  \r\n  // Shortcut action implementations\r\n  const exportData = () => {\r\n    try {\r\n      const data = {\r\n        vectors: vectorStore.vectors,\r\n        config: {\r\n          dimensions: vectorStore.dimensions,\r\n          forceType: vectorStore.forceType,\r\n          activationFunction: vectorStore.activationFunction\r\n        },\r\n        timestamp: new Date().toISOString()\r\n      }\r\n      \r\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\r\n      const url = URL.createObjectURL(blob)\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.download = `vectoverse-export-${Date.now()}.json`\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      URL.revokeObjectURL(url)\r\n    } catch (error) {\r\n      console.error('Export error:', error)\r\n      uiStore.showError('Failed to export data')\r\n    }\r\n  }\r\n  \r\n  const triggerFileInput = () => {\r\n    const fileInput = document.getElementById('vector-file')\r\n    if (fileInput) {\r\n      fileInput.click()\r\n    }\r\n  }\r\n  \r\n  const deleteSelectedVector = () => {\r\n    if (vectorStore.selectedVectorId) {\r\n      vectorStore.removeVector(vectorStore.selectedVectorId)\r\n      uiStore.showSuccess('Selected vector deleted')\r\n    }\r\n  }\r\n  \r\n  const confirmCurrentAction = () => {\r\n    // Find active modal and trigger its confirm button\r\n    const activeModal = document.querySelector('.modal.active')\r\n    if (activeModal) {\r\n      const confirmButton = activeModal.querySelector('.btn-primary, .confirm-btn')\r\n      if (confirmButton) {\r\n        confirmButton.click()\r\n      }\r\n    }\r\n  }\r\n  \r\n  const selectPreviousVector = () => {\r\n    const vectors = vectorStore.vectors\r\n    if (vectors.length === 0) return\r\n    \r\n    const currentIndex = vectors.findIndex(v => v.id === vectorStore.selectedVectorId)\r\n    const previousIndex = currentIndex > 0 ? currentIndex - 1 : vectors.length - 1\r\n    vectorStore.selectVector(vectors[previousIndex].id)\r\n  }\r\n  \r\n  const selectNextVector = () => {\r\n    const vectors = vectorStore.vectors\r\n    if (vectors.length === 0) return\r\n    \r\n    const currentIndex = vectors.findIndex(v => v.id === vectorStore.selectedVectorId)\r\n    const nextIndex = currentIndex < vectors.length - 1 ? currentIndex + 1 : 0\r\n    vectorStore.selectVector(vectors[nextIndex].id)\r\n  }\r\n  \r\n  const navigateTab = (direction) => {\r\n    const tabs = ['vectors', 'analysis', 'visualization', 'neural']\r\n    const currentIndex = tabs.indexOf(uiStore.activeTab)\r\n    const newIndex = (currentIndex + direction + tabs.length) % tabs.length\r\n    uiStore.setActiveTab(tabs[newIndex])\r\n  }\r\n  \r\n  const toggleVectorSelection = () => {\r\n    if (vectorStore.selectedVectorId) {\r\n      vectorStore.selectVector(null)\r\n    } else if (vectorStore.vectors.length > 0) {\r\n      vectorStore.selectVector(vectorStore.vectors[0].id)\r\n    }\r\n  }\r\n  \r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      document.documentElement.requestFullscreen()\r\n    } else {\r\n      document.exitFullscreen()\r\n    }\r\n  }\r\n  \r\n  // Add custom shortcut\r\n  const addShortcut = (key, ctrl = false, alt = false, shift = false, description, action) => {\r\n    const shortcut = { key, ctrl, alt, shift, description, action }\r\n    const shortcutKey = createShortcutKey(shortcut)\r\n    shortcuts.value.set(shortcutKey, shortcut)\r\n  }\r\n  \r\n  // Remove shortcut\r\n  const removeShortcut = (key, ctrl = false, alt = false, shift = false) => {\r\n    const shortcutKey = createShortcutKey({ key, ctrl, alt, shift })\r\n    shortcuts.value.delete(shortcutKey)\r\n  }\r\n  \r\n  // Enable/disable shortcuts\r\n  const enableShortcuts = () => {\r\n    isEnabled.value = true\r\n  }\r\n  \r\n  const disableShortcuts = () => {\r\n    isEnabled.value = false\r\n  }\r\n  \r\n  // Get all shortcuts for help display\r\n  const getAllShortcuts = () => {\r\n    return Array.from(shortcuts.value.values()).map(shortcut => ({\r\n      ...shortcut,\r\n      keyDisplay: formatShortcutDisplay(shortcut)\r\n    }))\r\n  }\r\n  \r\n  // Format shortcut for display\r\n  const formatShortcutDisplay = (shortcut) => {\r\n    const parts = []\r\n    if (shortcut.ctrl) parts.push('Ctrl')\r\n    if (shortcut.alt) parts.push('Alt')\r\n    if (shortcut.shift) parts.push('Shift')\r\n    parts.push(shortcut.key)\r\n    return parts.join(' + ')\r\n  }\r\n  \r\n  // Show shortcuts help\r\n  const showShortcutsHelp = () => {\r\n    const shortcuts = getAllShortcuts()\r\n    uiStore.showShortcutsModal(shortcuts)\r\n  }\r\n  \r\n  // Lifecycle\r\n  onMounted(() => {\r\n    initializeShortcuts()\r\n    document.addEventListener('keydown', handleKeyDown)\r\n  })\r\n  \r\n  onUnmounted(() => {\r\n    document.removeEventListener('keydown', handleKeyDown)\r\n  })\r\n  \r\n  return {\r\n    isEnabled,\r\n    addShortcut,\r\n    removeShortcut,\r\n    enableShortcuts,\r\n    disableShortcuts,\r\n    getAllShortcuts,\r\n    showShortcutsHelp\r\n  }\r\n} ","import { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useTutorialManager() {\r\n  const uiStore = useUIStore()\r\n  \r\n  // Tutorial state\r\n  const isActive = ref(false)\r\n  const currentStep = ref(0)\r\n  const announcements = ref([])\r\n  \r\n  // Tutorial steps\r\n  const tutorialSteps = ref([\r\n    {\r\n      title: \"Welcome to the Vectoverse! 🌌\",\r\n      content: \"Welcome to an interactive environment for visualizing n-dimensional vectors as 'information atoms'. Let's explore the atomic-inspired world of vector mathematics!\",\r\n      target: null,\r\n      action: null,\r\n      highlight: false\r\n    },\r\n    {\r\n      title: \"Understanding Vector Atoms ⚛️\", \r\n      content: \"Each glowing sphere represents a vector in n-dimensional space. The size represents magnitude (like atomic mass) and the pulsing represents energy states.\",\r\n      target: \"#main-viz\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Vector Components 🔢\",\r\n      content: \"Click on any vector to see its components and properties. Each component is like an electron with positive or negative charge.\",\r\n      target: \".vector-atom\",\r\n      action: \"clickVector\",\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Tab Navigation 📋\",\r\n      content: \"Use the tab system to explore different views: Vectors, Analysis, Visualization, and Neural Network modes.\",\r\n      target: \".tab-container\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Generating New Vectors 🎲\",\r\n      content: \"Use the floating action button or controls to create new random vectors. Try changing dimensions and vector count!\",\r\n      target: \".floating-action-button\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"3D Visualization 🌐\",\r\n      content: \"Switch to 3D mode for immersive vector exploration with camera controls and interactive features.\",\r\n      target: \".three-js-visualization\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Vector Operations 🛠️\",\r\n      content: \"Perform mathematical operations like addition, subtraction, dot product, and normalization on your vectors.\",\r\n      target: \".vectors-panel\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Analysis Tools 🔬\",\r\n      content: \"Run advanced analysis including PCA, K-means clustering, and similarity analysis to discover patterns.\",\r\n      target: \".analysis-panel\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Keyboard Shortcuts ⌨️\",\r\n      content: \"Press ? to see all keyboard shortcuts. Navigate efficiently with Ctrl+G (generate), Ctrl+E (export), and more!\",\r\n      target: null,\r\n      action: \"showShortcuts\",\r\n      highlight: false\r\n    },\r\n    {\r\n      title: \"Export Your Data 📁\",\r\n      content: \"Export your vectors in multiple formats: JSON, CSV, Python, LaTeX, and more! Perfect for research and analysis.\",\r\n      target: null,\r\n      action: null,\r\n      highlight: false\r\n    },\r\n    {\r\n      title: \"You're Ready to Explore! 🚀\",\r\n      content: \"Congratulations! You now understand the basics of VectoVerse. Explore different dimensions, analyze patterns, and discover the hidden relationships in vector space!\",\r\n      target: null,\r\n      action: null,\r\n      highlight: false\r\n    }\r\n  ])\r\n\r\n  // Computed properties\r\n  const progress = computed(() => {\r\n    if (tutorialSteps.value.length === 0) return 0\r\n    return ((currentStep.value + 1) / tutorialSteps.value.length) * 100\r\n  })\r\n\r\n  const currentStepData = computed(() => {\r\n    return tutorialSteps.value[currentStep.value] || null\r\n  })\r\n\r\n  const isFirstStep = computed(() => currentStep.value === 0)\r\n  const isLastStep = computed(() => currentStep.value === tutorialSteps.value.length - 1)\r\n\r\n  // Methods\r\n  const startTutorial = () => {\r\n    isActive.value = true\r\n    currentStep.value = 0\r\n    uiStore.showTutorialModal()\r\n    trackEvent('tutorial_started')\r\n    announce('Tutorial started. Use arrow keys to navigate.')\r\n  }\r\n\r\n  const nextStep = () => {\r\n    if (currentStep.value < tutorialSteps.value.length - 1) {\r\n      currentStep.value++\r\n      performStepAction()\r\n      trackEvent('tutorial_step', { step: currentStep.value + 1 })\r\n    } else {\r\n      endTutorial()\r\n    }\r\n  }\r\n\r\n  const previousStep = () => {\r\n    if (currentStep.value > 0) {\r\n      currentStep.value--\r\n    }\r\n  }\r\n\r\n  const goToStep = (stepIndex) => {\r\n    if (stepIndex >= 0 && stepIndex < tutorialSteps.value.length) {\r\n      currentStep.value = stepIndex\r\n    }\r\n  }\r\n\r\n  const endTutorial = () => {\r\n    isActive.value = false\r\n    currentStep.value = 0\r\n    uiStore.hideModal()\r\n    clearHighlights()\r\n    \r\n    // Mark tutorial as completed\r\n    localStorage.setItem('vectoverse-tutorial-completed', 'true')\r\n    \r\n    trackEvent('tutorial_completed', {\r\n      completed_steps: currentStep.value + 1,\r\n      total_steps: tutorialSteps.value.length\r\n    })\r\n    \r\n    uiStore.showSuccess('Tutorial completed! Happy exploring! 🚀')\r\n  }\r\n\r\n  const performStepAction = () => {\r\n    const step = currentStepData.value\r\n    if (!step || !step.action) return\r\n\r\n    switch (step.action) {\r\n      case 'clickVector':\r\n        // Highlight the first vector if available\r\n        setTimeout(() => {\r\n          const firstVector = document.querySelector('.vector-atom')\r\n          if (firstVector) {\r\n            firstVector.focus()\r\n            highlightElement(firstVector)\r\n          }\r\n        }, 1000)\r\n        break\r\n        \r\n      case 'showShortcuts':\r\n        setTimeout(() => {\r\n          uiStore.toggleShortcuts()\r\n        }, 500)\r\n        break\r\n    }\r\n  }\r\n\r\n  const highlightElement = (selector) => {\r\n    clearHighlights()\r\n    \r\n    let element\r\n    if (typeof selector === 'string') {\r\n      element = document.querySelector(selector)\r\n    } else {\r\n      element = selector\r\n    }\r\n    \r\n    if (!element) return\r\n\r\n    element.classList.add('tutorial-highlight')\r\n    element.scrollIntoView({ \r\n      behavior: 'smooth', \r\n      block: 'center',\r\n      inline: 'center'\r\n    })\r\n\r\n    // Remove highlight after 3 seconds\r\n    setTimeout(() => {\r\n      element.classList.remove('tutorial-highlight')\r\n    }, 3000)\r\n  }\r\n\r\n  const clearHighlights = () => {\r\n    document.querySelectorAll('.tutorial-highlight').forEach(el => {\r\n      el.classList.remove('tutorial-highlight')\r\n    })\r\n  }\r\n\r\n  const trackEvent = (eventName, data = {}) => {\r\n    console.log(`Tutorial Event: ${eventName}`, data)\r\n    \r\n    // Could integrate with analytics services\r\n    if (window.gtag) {\r\n      window.gtag('event', eventName, {\r\n        custom_parameter: data\r\n      })\r\n    }\r\n  }\r\n\r\n  const announce = (message, priority = 'polite') => {\r\n    announcements.value.push({\r\n      message,\r\n      priority,\r\n      timestamp: new Date().toISOString()\r\n    })\r\n\r\n    // Limit announcements array size\r\n    if (announcements.value.length > 20) {\r\n      announcements.value = announcements.value.slice(-20)\r\n    }\r\n  }\r\n\r\n  const shouldShowTutorial = () => {\r\n    const hasSeenTutorial = localStorage.getItem('vectoverse-tutorial-completed')\r\n    const hasVisited = localStorage.getItem('vectoverse-visited')\r\n    return !hasSeenTutorial && !hasVisited\r\n  }\r\n\r\n  const autoStartIfNew = () => {\r\n    if (shouldShowTutorial()) {\r\n      setTimeout(() => {\r\n        startTutorial()\r\n        localStorage.setItem('vectoverse-visited', 'true')\r\n      }, 2000)\r\n    }\r\n  }\r\n\r\n  // Keyboard navigation\r\n  const handleKeydown = (event) => {\r\n    if (!isActive.value) return\r\n\r\n    switch (event.key) {\r\n      case 'ArrowRight':\r\n      case ' ':\r\n        event.preventDefault()\r\n        nextStep()\r\n        break\r\n      case 'ArrowLeft':\r\n        event.preventDefault()\r\n        previousStep()\r\n        break\r\n      case 'Escape':\r\n        event.preventDefault()\r\n        endTutorial()\r\n        break\r\n      case '1':\r\n      case '2':\r\n      case '3':\r\n      case '4':\r\n      case '5':\r\n      case '6':\r\n      case '7':\r\n      case '8':\r\n      case '9':\r\n        event.preventDefault()\r\n        const stepNum = parseInt(event.key) - 1\r\n        if (stepNum < tutorialSteps.value.length) {\r\n          goToStep(stepNum)\r\n        }\r\n        break\r\n    }\r\n  }\r\n\r\n  // Lifecycle\r\n  onMounted(() => {\r\n    document.addEventListener('keydown', handleKeydown)\r\n    \r\n    // Auto-start tutorial for new users\r\n    autoStartIfNew()\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    document.removeEventListener('keydown', handleKeydown)\r\n    clearHighlights()\r\n  })\r\n\r\n  return {\r\n    // State\r\n    isActive,\r\n    currentStep,\r\n    tutorialSteps,\r\n    announcements,\r\n    \r\n    // Computed\r\n    progress,\r\n    currentStepData,\r\n    isFirstStep,\r\n    isLastStep,\r\n    \r\n    // Methods\r\n    startTutorial,\r\n    nextStep,\r\n    previousStep,\r\n    goToStep,\r\n    endTutorial,\r\n    performStepAction,\r\n    highlightElement,\r\n    clearHighlights,\r\n    trackEvent,\r\n    announce,\r\n    shouldShowTutorial,\r\n    autoStartIfNew\r\n  }\r\n} ","import { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useAccessibility() {\r\n  const uiStore = useUIStore()\r\n  \r\n  // State\r\n  const announcements = ref([])\r\n  const highContrastMode = ref(false)\r\n  const liveRegion = ref(null)\r\n  const focusableElements = ref([])\r\n\r\n  // Create ARIA live region for screen reader announcements\r\n  const createAriaLiveRegion = () => {\r\n    if (liveRegion.value) return\r\n\r\n    const region = document.createElement('div')\r\n    region.id = 'vectoverse-announcements'\r\n    region.setAttribute('aria-live', 'polite')\r\n    region.setAttribute('aria-atomic', 'true')\r\n    region.className = 'sr-only'\r\n    region.style.cssText = `\r\n      position: absolute !important;\r\n      width: 1px !important;\r\n      height: 1px !important;\r\n      padding: 0 !important;\r\n      margin: -1px !important;\r\n      overflow: hidden !important;\r\n      clip: rect(0, 0, 0, 0) !important;\r\n      white-space: nowrap !important;\r\n      border: 0 !important;\r\n    `\r\n    \r\n    document.body.appendChild(region)\r\n    liveRegion.value = region\r\n  }\r\n\r\n  // Announce message to screen readers\r\n  const announce = (message, priority = 'polite') => {\r\n    if (!liveRegion.value) return\r\n\r\n    liveRegion.value.setAttribute('aria-live', priority)\r\n    liveRegion.value.textContent = message\r\n    \r\n    // Track announcement\r\n    announcements.value.push({\r\n      message,\r\n      priority,\r\n      timestamp: new Date().toISOString()\r\n    })\r\n    \r\n    // Limit announcements history\r\n    if (announcements.value.length > 50) {\r\n      announcements.value = announcements.value.slice(-50)\r\n    }\r\n    \r\n    // Clear after announcement to allow repeated messages\r\n    setTimeout(() => {\r\n      if (liveRegion.value) {\r\n        liveRegion.value.textContent = ''\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  // Keyboard shortcut handlers\r\n  const handleKeyboardShortcuts = (event) => {\r\n    // Skip if user is typing in an input\r\n    if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {\r\n      return\r\n    }\r\n\r\n    // Handle keyboard shortcuts\r\n    if (event.ctrlKey || event.metaKey) {\r\n      switch (event.key) {\r\n        case 'g':\r\n          event.preventDefault()\r\n          // Generate vectors action\r\n          const generateBtn = document.querySelector('[data-action=\"generate\"]')\r\n          if (generateBtn) {\r\n            generateBtn.click()\r\n            announce('Generated new vectors')\r\n          }\r\n          break\r\n        case 'r':\r\n          event.preventDefault()\r\n          // Reset visualization\r\n          const resetBtn = document.querySelector('[data-action=\"reset\"]')\r\n          if (resetBtn) {\r\n            resetBtn.click()\r\n            announce('Reset visualization')\r\n          }\r\n          break\r\n        case 'e':\r\n          event.preventDefault()\r\n          uiStore.showExportModal()\r\n          announce('Export options opened')\r\n          break\r\n        case 'a':\r\n          event.preventDefault()\r\n          uiStore.showAnalysisModal()\r\n          announce('Analysis modal opened')\r\n          break\r\n        case 'h':\r\n          event.preventDefault()\r\n          uiStore.showTutorialModal()\r\n          announce('Help modal opened')\r\n          break\r\n      }\r\n    } else {\r\n      switch (event.key) {\r\n        case '?':\r\n          event.preventDefault()\r\n          uiStore.toggleShortcuts()\r\n          announce('Keyboard shortcuts displayed')\r\n          break\r\n        case 'Escape':\r\n          uiStore.hideModal()\r\n          announce('Modal closed')\r\n          break\r\n        case 'Tab':\r\n          manageFocus(event)\r\n          break\r\n      }\r\n    }\r\n  }\r\n\r\n  // Focus management\r\n  const manageFocus = (event) => {\r\n    const focusedElement = event.target\r\n    \r\n    // Ensure vector focus is announced\r\n    if (focusedElement.classList.contains('vector-atom')) {\r\n      announceVectorFocus(focusedElement)\r\n    }\r\n    \r\n    // Ensure focused element is visible\r\n    if (focusedElement.scrollIntoView) {\r\n      focusedElement.scrollIntoView({ \r\n        behavior: 'smooth', \r\n        block: 'center',\r\n        inline: 'center'\r\n      })\r\n    }\r\n  }\r\n\r\n  // Announce vector focus for screen readers\r\n  const announceVectorFocus = (vectorElement) => {\r\n    const vectorId = vectorElement.getAttribute('data-id')\r\n    if (vectorId) {\r\n      const message = `Vector ${parseInt(vectorId) + 1} focused. Use Enter to select, arrow keys to navigate.`\r\n      announce(message)\r\n    }\r\n  }\r\n\r\n  // Focus trap for modals\r\n  const trapFocusInModal = (modal, event) => {\r\n    const focusableElements = modal.querySelectorAll(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    )\r\n    const firstElement = focusableElements[0]\r\n    const lastElement = focusableElements[focusableElements.length - 1]\r\n\r\n    if (event.shiftKey && event.target === firstElement) {\r\n      event.preventDefault()\r\n      lastElement?.focus()\r\n    } else if (!event.shiftKey && event.target === lastElement) {\r\n      event.preventDefault()\r\n      firstElement?.focus()\r\n    }\r\n  }\r\n\r\n  // Setup high contrast mode\r\n  const setupHighContrastMode = () => {\r\n    // Detect high contrast preference\r\n    const highContrastQuery = window.matchMedia('(prefers-contrast: high)')\r\n    \r\n    const updateHighContrast = (matches) => {\r\n      highContrastMode.value = matches\r\n      document.body.classList.toggle('high-contrast', matches)\r\n      announce(matches ? 'High contrast mode enabled' : 'High contrast mode disabled')\r\n    }\r\n    \r\n    updateHighContrast(highContrastQuery.matches)\r\n    \r\n    // Listen for changes\r\n    highContrastQuery.addEventListener('change', (e) => {\r\n      updateHighContrast(e.matches)\r\n    })\r\n  }\r\n\r\n  // Add ARIA labels to controls\r\n  const addAriaLabelsToControls = () => {\r\n    const controls = {\r\n      '#dimensions-slider': 'Number of dimensions',\r\n      '#num-vectors-slider': 'Number of vectors',\r\n      '#regenerate': 'Generate new random vectors',\r\n      '#toggle-forces': 'Toggle force visualization',\r\n      '#run-analysis': 'Open analysis modal',\r\n      '#file-upload': 'Upload vector data file',\r\n      '.theme-switcher': 'Switch between light and dark theme',\r\n      '.floating-action-button': 'Quick actions menu',\r\n      '.tab-button': 'Tab navigation'\r\n    }\r\n\r\n    Object.entries(controls).forEach(([selector, label]) => {\r\n      const elements = document.querySelectorAll(selector)\r\n      elements.forEach(element => {\r\n        if (!element.getAttribute('aria-label')) {\r\n          element.setAttribute('aria-label', label)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  // Update visualization description for screen readers\r\n  const updateVisualizationDescription = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    const vectorElements = document.querySelectorAll('.vector-atom')\r\n    \r\n    if (svg) {\r\n      const description = `Vector visualization with ${vectorElements.length} vectors. Use arrow keys to navigate between vectors, Enter to select, and ? for keyboard shortcuts.`\r\n      svg.setAttribute('aria-label', description)\r\n      svg.setAttribute('role', 'img')\r\n    }\r\n  }\r\n\r\n  // Handle focus events\r\n  const handleFocusIn = (event) => {\r\n    const modal = event.target.closest('.modal-overlay')\r\n    if (modal) {\r\n      trapFocusInModal(modal, event)\r\n    }\r\n  }\r\n\r\n  // Show keyboard shortcuts modal\r\n  const showKeyboardShortcuts = () => {\r\n    const shortcuts = [\r\n      { key: 'Ctrl+G', action: 'Generate new vectors' },\r\n      { key: 'Ctrl+R', action: 'Reset visualization' },\r\n      { key: 'Ctrl+E', action: 'Export data' },\r\n      { key: 'Ctrl+A', action: 'Open analysis modal' },\r\n      { key: 'Ctrl+H', action: 'Show help' },\r\n      { key: 'Arrow Keys', action: 'Navigate between vectors' },\r\n      { key: 'Enter/Space', action: 'Select vector' },\r\n      { key: 'Escape', action: 'Close modals' },\r\n      { key: '?', action: 'Show keyboard shortcuts' },\r\n      { key: 'Tab', action: 'Navigate between controls' }\r\n    ]\r\n\r\n    uiStore.showShortcutsModal(shortcuts)\r\n  }\r\n\r\n  // Ensure color contrast\r\n  const ensureColorContrast = () => {\r\n    // Add high contrast styles if needed\r\n    if (highContrastMode.value) {\r\n      const style = document.createElement('style')\r\n      style.id = 'accessibility-high-contrast'\r\n      style.textContent = `\r\n        .high-contrast .vector-atom {\r\n          stroke: #000 !important;\r\n          stroke-width: 2px !important;\r\n        }\r\n        .high-contrast .force-line {\r\n          stroke: #000 !important;\r\n          stroke-width: 3px !important;\r\n        }\r\n        .high-contrast .modal-content {\r\n          background: #fff !important;\r\n          color: #000 !important;\r\n          border: 3px solid #000 !important;\r\n        }\r\n      `\r\n      document.head.appendChild(style)\r\n    }\r\n  }\r\n\r\n  // Get accessibility report\r\n  const getAccessibilityReport = () => {\r\n    return {\r\n      announcements: announcements.value,\r\n      focusableElements: document.querySelectorAll('[tabindex], button, input, select, textarea, a[href]').length,\r\n      ariaLabels: document.querySelectorAll('[aria-label]').length,\r\n      highContrastMode: highContrastMode.value,\r\n      screenReaderSupport: {\r\n        liveRegion: !!liveRegion.value,\r\n        landmarks: document.querySelectorAll('[role]').length,\r\n        headings: document.querySelectorAll('h1, h2, h3, h4, h5, h6').length\r\n      }\r\n    }\r\n  }\r\n\r\n  // Initialize accessibility features\r\n  const initialize = () => {\r\n    createAriaLiveRegion()\r\n    setupHighContrastMode()\r\n    addAriaLabelsToControls()\r\n    ensureColorContrast()\r\n    updateVisualizationDescription()\r\n    \r\n    announce('VectoVerse visualization loaded. Press ? for keyboard shortcuts.')\r\n  }\r\n\r\n  // Cleanup\r\n  const cleanup = () => {\r\n    if (liveRegion.value) {\r\n      document.body.removeChild(liveRegion.value)\r\n      liveRegion.value = null\r\n    }\r\n    \r\n    const highContrastStyle = document.getElementById('accessibility-high-contrast')\r\n    if (highContrastStyle) {\r\n      document.head.removeChild(highContrastStyle)\r\n    }\r\n  }\r\n\r\n  // Lifecycle\r\n  onMounted(() => {\r\n    initialize()\r\n    document.addEventListener('keydown', handleKeyboardShortcuts)\r\n    document.addEventListener('focusin', handleFocusIn)\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    cleanup()\r\n    document.removeEventListener('keydown', handleKeyboardShortcuts)\r\n    document.removeEventListener('focusin', handleFocusIn)\r\n  })\r\n\r\n  return {\r\n    // State\r\n    announcements,\r\n    highContrastMode,\r\n    \r\n    // Methods\r\n    announce,\r\n    manageFocus,\r\n    announceVectorFocus,\r\n    trapFocusInModal,\r\n    setupHighContrastMode,\r\n    addAriaLabelsToControls,\r\n    updateVisualizationDescription,\r\n    showKeyboardShortcuts,\r\n    ensureColorContrast,\r\n    getAccessibilityReport,\r\n    initialize,\r\n    cleanup\r\n  }\r\n} ","/**\r\n * Calculations for the Vector Periodic Table.\r\n * These functions handle the transformation of raw vectors into \"elemental\" properties.\r\n */\r\n\r\n// Calculate vector statistics\r\nexport const calculateVectorStatistics = (vector) => {\r\n  const magnitude = calculateMagnitude(vector.components)\r\n  const entropy = calculateEntropy(vector.components)\r\n  const stability = calculateStability(vector.components)\r\n  \r\n  return { magnitude, entropy, stability }\r\n}\r\n\r\n// Calculate magnitude\r\nexport const calculateMagnitude = (components) => {\r\n  return Math.sqrt(components.reduce((sum, c) => sum + c * c, 0))\r\n}\r\n\r\n// Calculate entropy\r\nexport const calculateEntropy = (components) => {\r\n  const total = components.reduce((sum, c) => sum + Math.abs(c), 0)\r\n  if (total === 0) return 0\r\n  \r\n  const probabilities = components.map(c => Math.abs(c) / total)\r\n  return -probabilities.reduce((sum, p) => {\r\n    return p > 0 ? sum + p * Math.log2(p) : sum\r\n  }, 0)\r\n}\r\n\r\n// Calculate stability\r\nexport const calculateStability = (components) => {\r\n  const mean = components.reduce((sum, c) => sum + c, 0) / components.length\r\n  const variance = components.reduce((sum, c) => sum + Math.pow(c - mean, 2), 0) / components.length\r\n  return 1 / (1 + variance) // Higher stability for lower variance\r\n}\r\n\r\nconst QUANTUM_THRESHOLD = 0.2;\r\n\r\n// Get information quantums\r\nexport const getInformationQuantums = (vector) => {\r\n  const components = vector.components\r\n  const excitatory = components.filter(c => c > QUANTUM_THRESHOLD).length\r\n  const inhibitory = components.filter(c => c < -QUANTUM_THRESHOLD).length\r\n  const neutral = components.filter(c => c >= -QUANTUM_THRESHOLD && c <= QUANTUM_THRESHOLD).length\r\n  \r\n  return { excitatory, inhibitory, neutral }\r\n} ","const prefixes = [\r\n    // 1-10\r\n    'Mono', 'Di', 'Tri', 'Tetra', 'Penta', 'Hexa', 'Hepta', 'Octa', 'Nona', 'Deca',\r\n    // 11-20\r\n    'Undeca', 'Dodeca', 'Trideca', 'Tetradeca', 'Pentadeca', 'Hexadeca', 'Heptadeca', 'Octadeca', 'Nonadeca', 'Icosa'\r\n  ];\r\n  \r\n  // 🔥 Excitatory roots (Energy, Fire, Force)\r\n  const excitatoryRoots = [\r\n    'Aether',       // Greek: divine spark\r\n    'Agni',         // Sanskrit: fire deity\r\n    'Raijin',       // Japanese: thunder god\r\n    'Shango',       // Yoruba: lightning/fire deity\r\n    'Surtr',        // Norse: fire giant\r\n    'Sekhem',       // Egyptian: power/life force\r\n    'Itztli',       // Aztec: obsidian, energy blade\r\n    'Pele',         // Hawaiian: volcano goddess\r\n    'Huitzilopochtli', // Aztec: sun/war god\r\n    'Brigid',       // Celtic: fire and fertility\r\n    'Hephaestus',   // Greek: god of forge\r\n    'Amaterasu'     // Japanese: sun goddess\r\n  ];\r\n  \r\n  // ❄️ Inhibitory roots (Darkness, Cold, Void)\r\n  const inhibitoryRoots = [\r\n    'Frigus',       // Latin: cold\r\n    'Tamasa',       // Sanskrit: inertia/darkness\r\n    'Yami',         // Japanese: darkness\r\n    'Nu',           // Egyptian: primordial void\r\n    'Morana',       // Slavic: goddess of winter/death\r\n    'Tenebris',     // Latin: shadow\r\n    'Noctis',       // Latin: night\r\n    'Chione',       // Greek: goddess of snow\r\n    'Izanami',      // Japanese: goddess of death\r\n    'Hel',          // Norse: underworld deity\r\n    'Kali',         // Sanskrit: destruction, time\r\n    'Ereshkigal'    // Sumerian: queen of the underworld\r\n  ];\r\n  \r\n  // ⚖️ Balanced roots (Harmony, Equilibrium, Law)\r\n  const balancedRoots = [\r\n    'Zhong',        // Chinese: center/balance\r\n    'Sattva',       // Sanskrit: harmony/purity\r\n    'Sophrosyne',   // Greek: moderation\r\n    'Nkwa',         // Akan: life force\r\n    'Wa',           // Japanese: peace/harmony\r\n    'Dharma',       // Sanskrit: cosmic law\r\n    'Ma\\'at',       // Egyptian: balance, truth\r\n    'Asha',         // Persian (Zoroastrian): truth/order\r\n    'Rta',          // Vedic: natural law\r\n    'Tao',          // Chinese: the way\r\n    'Heka',         // Egyptian: magical order\r\n    'Ubuntu'        // Bantu: harmony through humanity\r\n  ];\r\n  \r\n  /**\r\n   * Generates a procedural name for a vector element based on its quantum properties.\r\n   * @param {number} excitatory - The number of excitatory components.\r\n   * @param {number} inhibitory - The number of inhibitory components.\r\n   * @returns {string} The generated element name.\r\n   */\r\n  export function generateElementName(excitatory, inhibitory) {\r\n    const activeDimensions = excitatory + inhibitory;\r\n  \r\n    if (activeDimensions === 0) {\r\n      return 'Amorphium'; // A neutral placeholder for zero-dimensional elements\r\n    }\r\n  \r\n    // Get the numeric prefix, default to \"Poly\" for high-dimensional vectors\r\n    const prefix = prefixes[activeDimensions - 1] || 'Poly';\r\n  \r\n    let root;\r\n  \r\n    if (excitatory > inhibitory) {\r\n      root = excitatoryRoots[excitatory % excitatoryRoots.length];\r\n    } else if (inhibitory > excitatory) {\r\n      root = inhibitoryRoots[inhibitory % inhibitoryRoots.length];\r\n    } else {\r\n      // Balanced case\r\n      root = balancedRoots[(excitatory + inhibitory) % balancedRoots.length];\r\n    }\r\n  \r\n    // Combine and capitalize\r\n    const name = prefix + root;\r\n    return name.charAt(0).toUpperCase() + name.slice(1);\r\n  }\r\n  ","import { ref, watch, computed } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useConfigStore } from '../stores/configStore'\r\nimport { \r\n  calculateVectorStatistics, \r\n  getInformationQuantums \r\n} from '../utils/periodicTableCalculations'\r\nimport { generateElementName } from '../utils/nameGenerator'\r\n\r\n// --- State should be defined outside the function to be a singleton ---\r\nconst activeHeatmap = ref('none'); // none, magnitude, entropy, stability\r\nconst dataRanges = ref({\r\n  magnitude: { min: 0, max: 1 },\r\n  entropy: { min: 0, max: 1 },\r\n  stability: { min: 0, max: 1 }\r\n});\r\nconst showPlaceholders = ref(true);\r\nconst highlightedElementIds = ref(new Set());\r\n// --- End of singleton state ---\r\n\r\nexport function usePeriodicTable() {\r\n  const vectorStore = useVectorStore()\r\n  const configStore = useConfigStore()\r\n  \r\n  const periodicData = ref([])\r\n  \r\n  const config = ref({\r\n    elementWidth: 70, // Increased width\r\n    elementHeight: 70, // Increased height\r\n    padding: 4,\r\n    fontSize: 9,\r\n    symbolFontSize: 16\r\n  })\r\n\r\n  const tableDimensions = computed(() => {\r\n    return {\r\n      rows: configStore.dimensions + 1,\r\n      cols: configStore.dimensions + 1\r\n    }\r\n  });\r\n\r\n  const generateFullPeriodicTable = () => {\r\n    const { dimensions } = configStore;\r\n    const newTable = [];\r\n\r\n    for (let row = 0; row <= dimensions; row++) { // Excitatory\r\n      for (let col = 0; col <= dimensions; col++) { // Inhibitory\r\n        \r\n        const neutralCount = dimensions - row - col;\r\n        if (neutralCount < 0) continue;\r\n\r\n        const x = 50 + col * (config.value.elementWidth + config.value.padding + 15);\r\n        const y = 40 + row * (config.value.elementHeight + config.value.padding + 15);\r\n\r\n        const element = {\r\n          id: `p_${row}_${col}`,\r\n          isPlaceholder: true,\r\n          symbol: `E${row}I${col}`,\r\n          name: generateElementName(row, col),\r\n          atomicNumber: row * (dimensions + 1) + col + 1,\r\n          atomicMass: 0,\r\n          excitatory: row,\r\n          inhibitory: col,\r\n          neutral: neutralCount,\r\n          entropy: 0,\r\n          stability: 0,\r\n          color: '#333', // Placeholder color\r\n          position: { row, col, x, y },\r\n          vector: null,\r\n          present: false, // Indicates if a vector from the store occupies this slot\r\n          vectors: [] // To hold multiple vectors if they map to the same slot\r\n        };\r\n        newTable.push(element);\r\n      }\r\n    }\r\n    return newTable;\r\n  }\r\n\r\n  const mapVectorsToTable = (table) => {\r\n    const vectors = vectorStore.vectors;\r\n    const mappedTable = table; \r\n\r\n    const vectorGroups = new Map();\r\n    vectors.forEach(vector => {\r\n      const quantumData = getInformationQuantums(vector);\r\n      const key = `${quantumData.excitatory}_${quantumData.inhibitory}`;\r\n      if (!vectorGroups.has(key)) {\r\n        vectorGroups.set(key, []);\r\n      }\r\n      vectorGroups.get(key).push(vector);\r\n    });\r\n\r\n    mappedTable.forEach(element => {\r\n      const key = `${element.excitatory}_${element.inhibitory}`;\r\n      const vectorsForElement = vectorGroups.get(key);\r\n\r\n      if (vectorsForElement && vectorsForElement.length > 0) {\r\n        const firstVector = vectorsForElement[0];\r\n        const quantumData = getInformationQuantums(firstVector);\r\n        let stats;\r\n\r\n        if (vectorsForElement.length > 1) {\r\n          // Calculate average stats for stacked vectors\r\n          const avgMagnitude = vectorsForElement.reduce((sum, v) => sum + calculateVectorStatistics(v).magnitude, 0) / vectorsForElement.length;\r\n          const avgEntropy = vectorsForElement.reduce((sum, v) => sum + calculateVectorStatistics(v).entropy, 0) / vectorsForElement.length;\r\n          const avgStability = vectorsForElement.reduce((sum, v) => sum + calculateVectorStatistics(v).stability, 0) / vectorsForElement.length;\r\n          stats = { magnitude: avgMagnitude, entropy: avgEntropy, stability: avgStability };\r\n        } else {\r\n          stats = calculateVectorStatistics(firstVector);\r\n        }\r\n\r\n        element.id = firstVector.id; \r\n        element.isPlaceholder = false;\r\n        element.present = true;\r\n        element.name = generateElementName(quantumData.excitatory, quantumData.inhibitory);\r\n        element.atomicMass = Math.round(stats.magnitude * 100) / 100;\r\n        element.entropy = Math.round(stats.entropy * 1000) / 1000;\r\n        element.stability = Math.round(stats.stability * 1000) / 1000;\r\n        element.color = getElementColor(firstVector, stats, quantumData);\r\n        element.vector = firstVector;\r\n        element.vectors = vectorsForElement;\r\n      }\r\n    });\r\n\r\n    return mappedTable;\r\n  }\r\n  \r\n  const getElementColor = (vector, stats, quantumData) => {\r\n    if (quantumData.excitatory > quantumData.inhibitory) {\r\n      return '#ff6b6b' // Red for excitatory dominant\r\n    } else if (quantumData.inhibitory > quantumData.excitatory) {\r\n      return '#4ecdc4' // Cyan for inhibitory dominant\r\n    } else {\r\n      return '#f39c12' // Orange for balanced or neutral\r\n    }\r\n  }\r\n\r\n  const calculateDataRanges = (table) => {\r\n    const presentElements = table.filter(el => el.present);\r\n    if (presentElements.length === 0) return;\r\n\r\n    const magnitudes = presentElements.map(el => el.atomicMass);\r\n    const entropies = presentElements.map(el => el.entropy);\r\n    const stabilities = presentElements.map(el => el.stability);\r\n\r\n    dataRanges.value = {\r\n      magnitude: { min: Math.min(...magnitudes), max: Math.max(...magnitudes) },\r\n      entropy: { min: Math.min(...entropies), max: Math.max(...entropies) },\r\n      stability: { min: Math.min(...stabilities), max: Math.max(...stabilities) },\r\n    }\r\n  }\r\n\r\n  const setHighlight = (property, direction = 'desc', count = 5) => {\r\n    const sorted = [...periodicData.value]\r\n      .filter(el => el.present)\r\n      .sort((a, b) => {\r\n        const valA = property === 'excitatory' || property === 'inhibitory' ? a[property] : a.atomicMass;\r\n        const valB = property === 'excitatory' || property === 'inhibitory' ? b[property] : b.atomicMass;\r\n        return direction === 'desc' ? valB - valA : valA - valB;\r\n      });\r\n    \r\n    const topIds = new Set(sorted.slice(0, count).map(el => el.id));\r\n    highlightedElementIds.value = topIds;\r\n  };\r\n\r\n  const clearHighlight = () => {\r\n    highlightedElementIds.value.clear();\r\n  };\r\n\r\n  const updatePeriodicData = () => {\r\n    const fullTable = generateFullPeriodicTable();\r\n    const mappedTable = mapVectorsToTable(fullTable);\r\n    calculateDataRanges(mappedTable);\r\n    periodicData.value = mappedTable;\r\n  }\r\n\r\n  const getElementData = (vectorId) => {\r\n    if (typeof vectorId === 'string' && vectorId.startsWith('p_')) {\r\n        // It's a placeholder\r\n        return periodicData.value.find(element => element.id === vectorId)\r\n    }\r\n    return periodicData.value.find(element => !element.isPlaceholder && element.id === vectorId)\r\n  }\r\n\r\n  watch(\r\n    () => vectorStore.vectors,\r\n    () => {\r\n      updatePeriodicData();\r\n    },\r\n    { deep: true, immediate: true }\r\n  );\r\n\r\n  watch(\r\n    () => configStore.dimensions,\r\n    () => {\r\n      updatePeriodicData();\r\n    },\r\n    { immediate: true }\r\n  );\r\n\r\n  return {\r\n    periodicData,\r\n    config,\r\n    getElementData,\r\n    tableDimensions,\r\n    activeHeatmap,\r\n    dataRanges,\r\n    showPlaceholders,\r\n    highlightedElementIds,\r\n    setHighlight,\r\n    clearHighlight\r\n  }\r\n} ","import { ref, computed } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useExportManager() {\r\n  const vectorStore = useVectorStore()\r\n  const uiStore = useUIStore()\r\n  \r\n  // State\r\n  const isExporting = ref(false)\r\n  const exportProgress = ref(0)\r\n\r\n  // Export formats\r\n  const formats = ref({\r\n    json: { name: 'JSON', extension: '.json', mimeType: 'application/json' },\r\n    csv: { name: 'CSV', extension: '.csv', mimeType: 'text/csv' },\r\n    svg: { name: 'SVG', extension: '.svg', mimeType: 'image/svg+xml' },\r\n    png: { name: 'PNG', extension: '.png', mimeType: 'image/png' },\r\n    latex: { name: 'LaTeX', extension: '.tex', mimeType: 'text/plain' },\r\n    python: { name: 'Python', extension: '.py', mimeType: 'text/plain' },\r\n    txt: { name: 'Text Report', extension: '.txt', mimeType: 'text/plain' }\r\n  })\r\n\r\n  // Computed properties\r\n  const hasVectors = computed(() => vectorStore.vectors.length > 0)\r\n  const canExport = computed(() => hasVectors.value && !isExporting.value)\r\n\r\n  // Export JSON with metadata\r\n  const exportJSON = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const exportData = {\r\n        metadata: {\r\n          version: \"2.0\",\r\n          timestamp: new Date().toISOString(),\r\n          source: \"VectoVerse\",\r\n          description: \"Vector visualization data export\"\r\n        },\r\n        config: {\r\n          dimensions: vectorStore.vectors[0]?.components.length || 0,\r\n          numVectors: vectorStore.vectors.length\r\n        },\r\n        vectors: vectorStore.vectors.map(v => ({\r\n          id: v.id,\r\n          components: v.components,\r\n          position: { x: v.x || 0, y: v.y || 0 },\r\n          type: v.type || 'generated',\r\n          metadata: {\r\n            magnitude: calculateMagnitude(v.components),\r\n            entropy: calculateEntropy(v.components)\r\n          }\r\n        })),\r\n        inputVector: vectorStore.inputVector ? {\r\n          components: vectorStore.inputVector.components,\r\n          position: { x: vectorStore.inputVector.x || 0, y: vectorStore.inputVector.y || 0 }\r\n        } : null,\r\n        analysis: generateAnalysisData()\r\n      }\r\n\r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        JSON.stringify(exportData, null, 2),\r\n        `vectoverse-export-${getTimestamp()}.json`,\r\n        'application/json'\r\n      )\r\n\r\n      uiStore.showSuccess('JSON export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`JSON export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export CSV format\r\n  const exportCSV = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      if (vectors.length === 0) {\r\n        throw new Error('No vectors to export')\r\n      }\r\n      \r\n      const dimensions = vectors[0].components.length\r\n      \r\n      // Create headers\r\n      const headers = [\r\n        'vector_id', 'type', 'x_position', 'y_position', \r\n        'magnitude', 'entropy'\r\n      ]\r\n      \r\n      // Add dimension headers\r\n      for (let i = 0; i < dimensions; i++) {\r\n        headers.push(`component_${i + 1}`)\r\n      }\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Create rows\r\n      const rows = [headers.join(',')]\r\n      \r\n      vectors.forEach(vector => {\r\n        const row = [\r\n          vector.id,\r\n          vector.type || 'generated',\r\n          (vector.x || 0).toFixed(2),\r\n          (vector.y || 0).toFixed(2),\r\n          calculateMagnitude(vector.components).toFixed(6),\r\n          calculateEntropy(vector.components).toFixed(6),\r\n          ...vector.components.map(c => c.toFixed(6))\r\n        ]\r\n        rows.push(row.join(','))\r\n      })\r\n      \r\n      // Add input vector if exists\r\n      if (vectorStore.inputVector) {\r\n        const inputRow = [\r\n          'input',\r\n          'input',\r\n          (vectorStore.inputVector.x || 0).toFixed(2),\r\n          (vectorStore.inputVector.y || 0).toFixed(2),\r\n          calculateMagnitude(vectorStore.inputVector.components).toFixed(6),\r\n          calculateEntropy(vectorStore.inputVector.components).toFixed(6),\r\n          ...vectorStore.inputVector.components.map(c => c.toFixed(6))\r\n        ]\r\n        rows.push(inputRow.join(','))\r\n      }\r\n      \r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        rows.join('\\n'),\r\n        `vectoverse-data-${getTimestamp()}.csv`,\r\n        'text/csv'\r\n      )\r\n\r\n      uiStore.showSuccess('CSV export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`CSV export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export similarity matrix as CSV\r\n  const exportSimilarityMatrix = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      if (vectors.length === 0) return\r\n\r\n      // Create header with vector IDs\r\n      const headers = ['vector_id', ...vectors.map(v => v.id)]\r\n      const rows = [headers.join(',')]\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Calculate similarity matrix\r\n      vectors.forEach((v1, i) => {\r\n        const row = [v1.id]\r\n        vectors.forEach(v2 => {\r\n          const similarity = cosineSimilarity(v1.components, v2.components)\r\n          row.push(similarity.toFixed(4))\r\n        })\r\n        rows.push(row.join(','))\r\n        exportProgress.value = 30 + (i / vectors.length) * 50\r\n      })\r\n      \r\n      downloadFile(\r\n        rows.join('\\n'),\r\n        `vectoverse-similarity-matrix-${getTimestamp()}.csv`,\r\n        'text/csv'\r\n      )\r\n\r\n      uiStore.showSuccess('Similarity matrix exported successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`Similarity matrix export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as SVG\r\n  const exportSVG = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const svg = document.querySelector('#main-viz')\r\n      if (!svg) {\r\n        throw new Error('No visualization found to export')\r\n      }\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Clone the SVG to avoid modifying the original\r\n      const clonedSvg = svg.cloneNode(true)\r\n      \r\n      // Add styles inline for standalone SVG\r\n      const styleElement = document.createElementNS('http://www.w3.org/2000/svg', 'style')\r\n      styleElement.textContent = getSVGStyles()\r\n      clonedSvg.insertBefore(styleElement, clonedSvg.firstChild)\r\n      \r\n      exportProgress.value = 70\r\n      \r\n      // Serialize SVG\r\n      const serializer = new XMLSerializer()\r\n      const svgString = serializer.serializeToString(clonedSvg)\r\n      \r\n      downloadFile(\r\n        svgString,\r\n        `vectoverse-visualization-${getTimestamp()}.svg`,\r\n        'image/svg+xml'\r\n      )\r\n\r\n      uiStore.showSuccess('SVG export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`SVG export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as PNG\r\n  const exportPNG = async (scale = 2) => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const svg = document.querySelector('#main-viz')\r\n      if (!svg) {\r\n        throw new Error('No visualization found to export')\r\n      }\r\n      \r\n      const canvas = document.createElement('canvas')\r\n      const ctx = canvas.getContext('2d')\r\n      const rect = svg.getBoundingClientRect()\r\n      \r\n      canvas.width = rect.width * scale\r\n      canvas.height = rect.height * scale\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Create image from SVG\r\n      const svgData = new XMLSerializer().serializeToString(svg)\r\n      const img = new Image()\r\n      \r\n      const promise = new Promise((resolve, reject) => {\r\n        img.onload = () => {\r\n          ctx.scale(scale, scale)\r\n          ctx.drawImage(img, 0, 0)\r\n          \r\n          exportProgress.value = 80\r\n          \r\n          canvas.toBlob(blob => {\r\n            if (blob) {\r\n              const url = URL.createObjectURL(blob)\r\n              const a = document.createElement('a')\r\n              a.href = url\r\n              a.download = `vectoverse-visualization-${getTimestamp()}.png`\r\n              a.click()\r\n              URL.revokeObjectURL(url)\r\n              resolve()\r\n            } else {\r\n              reject(new Error('Failed to create PNG blob'))\r\n            }\r\n          })\r\n        }\r\n        \r\n        img.onerror = () => reject(new Error('Failed to load SVG for PNG export'))\r\n      })\r\n      \r\n      const svgBlob = new Blob([svgData], { type: 'image/svg+xml' })\r\n      const url = URL.createObjectURL(svgBlob)\r\n      img.src = url\r\n      \r\n      await promise\r\n      URL.revokeObjectURL(url)\r\n\r\n      uiStore.showSuccess('PNG export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`PNG export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as LaTeX document\r\n  const exportLaTeX = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      const analysis = generateAnalysisData()\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      const latex = `\r\n\\\\documentclass{article}\r\n\\\\usepackage{amsmath}\r\n\\\\usepackage{amsfonts}\r\n\\\\usepackage{booktabs}\r\n\\\\usepackage{geometry}\r\n\\\\geometry{margin=1in}\r\n\r\n\\\\title{VectoVerse Vector Analysis Report}\r\n\\\\author{Generated by VectoVerse}\r\n\\\\date{${new Date().toLocaleDateString()}}\r\n\r\n\\\\begin{document}\r\n\\\\maketitle\r\n\r\n\\\\section{Dataset Overview}\r\nThis report contains analysis of ${vectors.length} vectors in ${vectors[0]?.components.length || 0}-dimensional space.\r\n\r\n\\\\section{Vector Statistics}\r\n\\\\begin{table}[h]\r\n\\\\centering\r\n\\\\begin{tabular}{lr}\r\n\\\\toprule\r\nMetric & Value \\\\\\\\\r\n\\\\midrule\r\nNumber of Vectors & ${vectors.length} \\\\\\\\\r\nDimensions & ${vectors[0]?.components.length || 0} \\\\\\\\\r\nAverage Magnitude & ${analysis.averageMagnitude.toFixed(4)} \\\\\\\\\r\nAverage Entropy & ${analysis.averageEntropy.toFixed(4)} \\\\\\\\\r\n\\\\bottomrule\r\n\\\\end{tabular}\r\n\\\\caption{Basic vector statistics}\r\n\\\\end{table}\r\n\r\n\\\\section{Mathematical Formulations}\r\nThe following formulas were used in the analysis:\r\n\r\n\\\\subsection{Vector Magnitude}\r\n\\\\begin{equation}\r\n||\\\\mathbf{v}|| = \\\\sqrt{\\\\sum_{i=1}^{n} v_i^2}\r\n\\\\end{equation}\r\n\r\n\\\\subsection{Cosine Similarity}\r\n\\\\begin{equation}\r\n\\\\text{sim}(\\\\mathbf{u}, \\\\mathbf{v}) = \\\\frac{\\\\mathbf{u} \\\\cdot \\\\mathbf{v}}{||\\\\mathbf{u}|| \\\\cdot ||\\\\mathbf{v}||}\r\n\\\\end{equation}\r\n\r\n\\\\subsection{Information Entropy}\r\n\\\\begin{equation}\r\nH(\\\\mathbf{v}) = -\\\\sum_{i=1}^{n} p(v_i) \\\\log_2(p(v_i))\r\n\\\\end{equation}\r\n\r\n\\\\section{Vector Components}\r\n${generateLaTeXVectorTable(vectors.slice(0, 10))}\r\n\r\n\\\\end{document}\r\n      `.trim()\r\n      \r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        latex,\r\n        `vectoverse-analysis-${getTimestamp()}.tex`,\r\n        'text/plain'\r\n      )\r\n\r\n      uiStore.showSuccess('LaTeX export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`LaTeX export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as Python NumPy script\r\n  const exportPython = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      if (vectors.length === 0) return\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      const pythonCode = `\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nfrom datetime import datetime\r\n\r\n# VectoVerse Export\r\n# Generated on: ${new Date().toISOString()}\r\n\r\n# Vector data\r\nvectors = np.array([\r\n${vectors.map(v => `    [${v.components.map(c => c.toFixed(6)).join(', ')}]`).join(',\\n')}\r\n])\r\n\r\n# Vector metadata\r\nvector_ids = [${vectors.map(v => `'${v.id}'`).join(', ')}]\r\npositions = np.array([\r\n${vectors.map(v => `    [${(v.x || 0).toFixed(2)}, ${(v.y || 0).toFixed(2)}]`).join(',\\n')}\r\n])\r\n\r\n${vectorStore.inputVector ? `\r\n# Input vector\r\ninput_vector = np.array([${vectorStore.inputVector.components.map(c => c.toFixed(6)).join(', ')}])\r\ninput_position = np.array([${(vectorStore.inputVector.x || 0).toFixed(2)}, ${(vectorStore.inputVector.y || 0).toFixed(2)}])\r\n` : '# No input vector'}\r\n\r\n# Basic analysis functions\r\ndef calculate_magnitude(v):\r\n    return np.linalg.norm(v)\r\n\r\ndef cosine_similarity(v1, v2):\r\n    return np.dot(v1, v2) / (np.linalg.norm(v1) * np.linalg.norm(v2))\r\n\r\ndef euclidean_distance(v1, v2):\r\n    return np.linalg.norm(v1 - v2)\r\n\r\n# Calculate similarity matrix\r\nsimilarity_matrix = np.zeros((len(vectors), len(vectors)))\r\nfor i in range(len(vectors)):\r\n    for j in range(len(vectors)):\r\n        similarity_matrix[i, j] = cosine_similarity(vectors[i], vectors[j])\r\n\r\nprint(f\"Loaded {len(vectors)} vectors with {vectors.shape[1]} dimensions\")\r\nprint(f\"Average magnitude: {np.mean([calculate_magnitude(v) for v in vectors]):.4f}\")\r\n\r\n# Example visualization\r\nplt.figure(figsize=(10, 8))\r\nplt.imshow(similarity_matrix, cmap='viridis')\r\nplt.colorbar(label='Cosine Similarity')\r\nplt.title('Vector Similarity Matrix')\r\nplt.xlabel('Vector Index')\r\nplt.ylabel('Vector Index')\r\nplt.show()\r\n      `.trim()\r\n      \r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        pythonCode,\r\n        `vectoverse-export-${getTimestamp()}.py`,\r\n        'text/plain'\r\n      )\r\n\r\n      uiStore.showSuccess('Python export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`Python export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export session data\r\n  const exportSession = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const sessionData = {\r\n        metadata: {\r\n          version: \"2.0\",\r\n          timestamp: new Date().toISOString(),\r\n          source: \"VectoVerse Session Export\"\r\n        },\r\n        config: {\r\n          dimensions: vectorStore.vectors[0]?.components.length || 0,\r\n          numVectors: vectorStore.vectors.length,\r\n          theme: localStorage.getItem('vectoverse-theme') || 'dark'\r\n        },\r\n        vectors: vectorStore.vectors.map(v => ({\r\n          id: v.id,\r\n          components: v.components,\r\n          position: { x: v.x || 0, y: v.y || 0 },\r\n          type: v.type || 'generated',\r\n          customColor: v.customColor,\r\n          scale: v.scale\r\n        })),\r\n        inputVector: vectorStore.inputVector ? {\r\n          components: vectorStore.inputVector.components,\r\n          position: { x: vectorStore.inputVector.x || 0, y: vectorStore.inputVector.y || 0 }\r\n        } : null,\r\n        selectedVectorId: vectorStore.selectedVectorId\r\n      }\r\n\r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        JSON.stringify(sessionData, null, 2),\r\n        `vectoverse-session-${getTimestamp()}.json`,\r\n        'application/json'\r\n      )\r\n\r\n      uiStore.showSuccess('Session export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`Session export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Helper functions\r\n  const calculateMagnitude = (components) => {\r\n    return Math.sqrt(components.reduce((sum, c) => sum + c * c, 0))\r\n  }\r\n\r\n  const calculateEntropy = (components) => {\r\n    const total = components.reduce((sum, c) => sum + Math.abs(c), 0)\r\n    if (total === 0) return 0\r\n    \r\n    const probabilities = components.map(c => Math.abs(c) / total)\r\n    return -probabilities.reduce((sum, p) => {\r\n      return p > 0 ? sum + p * Math.log2(p) : sum\r\n    }, 0)\r\n  }\r\n\r\n  const cosineSimilarity = (v1, v2) => {\r\n    const dotProduct = v1.reduce((sum, a, i) => sum + a * v2[i], 0)\r\n    const mag1 = calculateMagnitude(v1)\r\n    const mag2 = calculateMagnitude(v2)\r\n    \r\n    if (mag1 === 0 || mag2 === 0) return 0\r\n    return dotProduct / (mag1 * mag2)\r\n  }\r\n\r\n  const generateAnalysisData = () => {\r\n    const vectors = vectorStore.vectors\r\n    \r\n    if (vectors.length === 0) {\r\n      return {\r\n        averageMagnitude: 0,\r\n        averageEntropy: 0,\r\n        vectorCount: 0,\r\n        dimensions: 0\r\n      }\r\n    }\r\n    \r\n    const magnitudes = vectors.map(v => calculateMagnitude(v.components))\r\n    const entropies = vectors.map(v => calculateEntropy(v.components))\r\n    \r\n    return {\r\n      vectorCount: vectors.length,\r\n      dimensions: vectors[0].components.length,\r\n      averageMagnitude: magnitudes.reduce((sum, mag) => sum + mag, 0) / magnitudes.length,\r\n      averageEntropy: entropies.reduce((sum, ent) => sum + ent, 0) / entropies.length,\r\n      magnitudes: magnitudes,\r\n      entropies: entropies\r\n    }\r\n  }\r\n\r\n  const generateLaTeXVectorTable = (vectors) => {\r\n    if (vectors.length === 0) return ''\r\n    \r\n    const maxComponents = Math.min(5, vectors[0].components.length)\r\n    \r\n    let table = '\\\\begin{table}[h]\\n\\\\centering\\n\\\\begin{tabular}{l'\r\n    for (let i = 0; i < maxComponents; i++) {\r\n      table += 'r'\r\n    }\r\n    table += '}\\n\\\\toprule\\nVector'\r\n    \r\n    for (let i = 0; i < maxComponents; i++) {\r\n      table += ` & $v_{${i+1}}$`\r\n    }\r\n    table += ' \\\\\\\\\\n\\\\midrule\\n'\r\n    \r\n    vectors.forEach((vector, idx) => {\r\n      table += `Vector ${idx + 1}`\r\n      for (let i = 0; i < maxComponents; i++) {\r\n        table += ` & ${vector.components[i].toFixed(3)}`\r\n      }\r\n      table += ' \\\\\\\\\\n'\r\n    })\r\n    \r\n    table += '\\\\bottomrule\\n\\\\end{tabular}\\n\\\\caption{Vector components (first 5 dimensions)}\\n\\\\end{table}'\r\n    \r\n    return table\r\n  }\r\n\r\n  const getSVGStyles = () => {\r\n    return `\r\n      .vector-atom { stroke: #667eea; stroke-width: 2; fill-opacity: 0.8; }\r\n      .force-line { stroke-opacity: 0.6; }\r\n      .vector-label { font-family: Arial, sans-serif; font-size: 12px; fill: white; }\r\n      .periodic-element { cursor: pointer; }\r\n      .periodic-element:hover { filter: brightness(1.2); }\r\n    `\r\n  }\r\n\r\n  const getTimestamp = () => {\r\n    return new Date().toISOString().slice(0, 19).replace(/[:]/g, '-')\r\n  }\r\n\r\n  const downloadFile = (content, filename, mimeType) => {\r\n    const blob = new Blob([content], { type: mimeType })\r\n    const url = URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = filename\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    document.body.removeChild(a)\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n  return {\r\n    // State\r\n    isExporting,\r\n    exportProgress,\r\n    formats,\r\n    \r\n    // Computed\r\n    hasVectors,\r\n    canExport,\r\n    \r\n    // Methods\r\n    exportJSON,\r\n    exportCSV,\r\n    exportSimilarityMatrix,\r\n    exportSVG,\r\n    exportPNG,\r\n    exportLaTeX,\r\n    exportPython,\r\n    exportSession,\r\n    \r\n    // Helper methods\r\n    calculateMagnitude,\r\n    calculateEntropy,\r\n    cosineSimilarity,\r\n    generateAnalysisData,\r\n    downloadFile\r\n  }\r\n} ","import { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useErrorHandler() {\r\n  const uiStore = useUIStore()\r\n  const errorLog = ref([])\r\n\r\n  const setupGlobalErrorHandling = () => {\r\n    window.addEventListener('error', (event) => {\r\n      handleError(event.error, {\r\n        context: 'Global JavaScript Error',\r\n        filename: event.filename,\r\n        lineno: event.lineno,\r\n        colno: event.colno\r\n      })\r\n    })\r\n\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      handleError(event.reason, {\r\n        context: 'Unhandled Promise Rejection'\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleError = (error, context = {}) => {\r\n    const errorInfo = {\r\n      id: `err-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`,\r\n      timestamp: new Date().toISOString(),\r\n      message: error?.message || 'An unknown error occurred.',\r\n      stack: error?.stack || '',\r\n      context: context,\r\n      severity: classifyError(error)\r\n    }\r\n\r\n    errorLog.value.push(errorInfo)\r\n    if (errorLog.value.length > 50) {\r\n      errorLog.value.shift()\r\n    }\r\n\r\n    logErrorToConsole(errorInfo)\r\n    \r\n    const friendlyMessage = getFriendlyMessage(errorInfo)\r\n    const actions = getSuggestedActions(errorInfo)\r\n\r\n    uiStore.showError(friendlyMessage, actions)\r\n  }\r\n\r\n  const classifyError = (error) => {\r\n    if (!error) return 'unknown';\r\n    const message = (error.message || '').toLowerCase();\r\n    if (message.includes('network') || message.includes('fetch')) return 'network';\r\n    if (message.includes('permission') || message.includes('denied')) return 'permission';\r\n    if (message.includes('memory') || message.includes('allocation')) return 'memory';\r\n    if (message.includes('invalid') || message.includes('malformed')) return 'validation';\r\n    if (message.includes('timeout')) return 'timeout';\r\n    return 'application';\r\n  }\r\n\r\n  const getFriendlyMessage = (errorInfo) => {\r\n    switch (errorInfo.severity) {\r\n      case 'network':\r\n        return 'A network error occurred. Please check your connection.';\r\n      case 'permission':\r\n        return 'Permission denied. The application may not have the required permissions to perform this action.';\r\n      case 'memory':\r\n        return 'The application ran out of memory. Try reducing the number of vectors or reloading.';\r\n      case 'validation':\r\n        return 'An invalid data format was encountered. Please check your inputs.';\r\n      case 'timeout':\r\n        return 'The operation timed out. Please try again.';\r\n      default:\r\n        return errorInfo.message || 'An unexpected error occurred.';\r\n    }\r\n  }\r\n\r\n  const getSuggestedActions = (errorInfo) => {\r\n    const actions = [];\r\n    switch (errorInfo.severity) {\r\n      case 'network':\r\n        actions.push({ text: 'Retry', action: () => window.location.reload() });\r\n        break;\r\n      case 'memory':\r\n        actions.push({ text: 'Reload', action: () => window.location.reload() });\r\n        break;\r\n      default:\r\n        actions.push({ text: 'Reload App', action: () => window.location.reload() });\r\n    }\r\n    return actions;\r\n  }\r\n\r\n  const logErrorToConsole = (errorInfo) => {\r\n    if (import.meta.env.DEV) {\r\n      console.group(`🚨 VectoVerse Error: ${errorInfo.id}`);\r\n      console.error('Message:', errorInfo.message);\r\n      console.log('Severity:', errorInfo.severity);\r\n      console.log('Context:', errorInfo.context);\r\n      console.log('Timestamp:', errorInfo.timestamp);\r\n      console.log('Stack Trace:', errorInfo.stack);\r\n      console.groupEnd();\r\n    }\r\n  }\r\n  \r\n  const wrapAsync = async (fn, context = {}) => {\r\n    try {\r\n      return await fn();\r\n    } catch (error) {\r\n      handleError(error, context);\r\n      // Re-throw so the caller knows it failed.\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  onMounted(() => {\r\n    setupGlobalErrorHandling()\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    // In a real SPA, you might want to remove the listeners,\r\n    // but for this app, they can live for the lifetime of the page.\r\n  })\r\n\r\n  return {\r\n    errorLog,\r\n    handleError,\r\n    wrapAsync,\r\n  }\r\n} ","import { ref, onMounted } from 'vue'\r\n\r\nexport function useMathRenderer() {\r\n  const isKaTeXReady = ref(false)\r\n\r\n  const waitForKaTeX = () => {\r\n    if (typeof window.katex !== 'undefined' && typeof window.renderMathInElement !== 'undefined') {\r\n      isKaTeXReady.value = true\r\n    } else {\r\n      setTimeout(waitForKaTeX, 100)\r\n    }\r\n  }\r\n\r\n  onMounted(waitForKaTeX)\r\n\r\n  const renderMath = (element, options = {}) => {\r\n    if (!isKaTeXReady.value || !element) return\r\n\r\n    const defaultOptions = {\r\n      delimiters: [\r\n        { left: '$$', right: '$$', display: true },\r\n        { left: '$', right: '$', display: false },\r\n        { left: '\\\\(', right: '\\\\)', display: false },\r\n        { left: '\\\\[', right: '\\\\]', display: true }\r\n      ],\r\n      throwOnError: false,\r\n      errorColor: '#cc0000',\r\n      macros: {\r\n        \"\\\\vec\": \"\\\\mathbf{#1}\",\r\n        \"\\\\norm\": \"\\\\left\\\\|#1\\\\right\\\\|\",\r\n        \"\\\\dot\": \"\\\\cdot\",\r\n        \"\\\\similarity\": \"\\\\text{sim}(#1, #2)\",\r\n        \"\\\\cosinesim\": \"\\\\cos\\\\theta_{#1,#2}\"\r\n      }\r\n    }\r\n\r\n    try {\r\n      window.renderMathInElement(element, { ...defaultOptions, ...options })\r\n    } catch (e) {\r\n      console.warn('KaTeX rendering error:', e)\r\n    }\r\n  }\r\n\r\n  const createVectorNotation = (components) => {\r\n    if (!Array.isArray(components)) return ''\r\n    // Limit to 10 components for display\r\n    const limitedComponents = components.slice(0, 10);\r\n    let componentStr = limitedComponents.map(c => c.toFixed(2)).join(' \\\\\\\\ ');\r\n    if (components.length > 10) {\r\n        componentStr += ' \\\\\\\\ \\\\vdots';\r\n    }\r\n    return `\\\\vec{v} = \\\\begin{pmatrix} ${componentStr} \\\\end{pmatrix}`;\r\n  }\r\n\r\n  const createMagnitudeFormula = (val) => `\\\\norm{\\\\vec{v}} = ${val.toFixed(3)}`\r\n  const createEntropyFormula = (val) => `H(\\\\vec{v}) = ${val.toFixed(3)}`\r\n  const createCosineSimilarityFormula = () => `\\\\text{sim}(\\\\vec{a}, \\\\vec{b}) = \\\\frac{\\\\vec{a} \\\\cdot \\\\vec{b}}{\\\\norm{\\\\vec{a}} \\\\norm{\\\\vec{b}}}`\r\n  const createEuclideanDistanceFormula = () => `d(\\\\vec{a}, \\\\vec{b}) = \\\\sqrt{\\\\sum_{i=1}^{n} (a_i - b_i)^2}`\r\n\r\n  return {\r\n    isKaTeXReady,\r\n    renderMath,\r\n    createVectorNotation,\r\n    createMagnitudeFormula,\r\n    createEntropyFormula,\r\n    createCosineSimilarityFormula,\r\n    createEuclideanDistanceFormula,\r\n  }\r\n} ","import { ref, reactive, watch, computed, onMounted } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useConfigStore } from '../stores/configStore'\r\n\r\nexport function useControls() {\r\n  const vectorStore = useVectorStore()\r\n  const configStore = useConfigStore()\r\n\r\n  const controls = reactive({\r\n    // New controls for vector generation\r\n    numVectors: { label: 'Number of Vectors', value: configStore.numVectors, type: 'slider', min: 1, max: 100, group: 'Generation' },\r\n    dimensions: { label: 'Vector Dimensions', value: configStore.dimensions, type: 'slider', min: 2, max: 50, group: 'Generation' },\r\n\r\n    // Visualization (now with icons)\r\n    showForces: { label: 'Show Forces', value: true, type: 'checkbox', group: 'Visualization', icon: '💨' },\r\n    showLabels: { label: 'Show Labels', value: false, type: 'checkbox', group: 'Visualization', icon: '🏷️' },\r\n    showGrid: { label: 'Show Grid', value: true, type: 'checkbox', group: 'Visualization', icon: '🏁' },\r\n\r\n    // Forces\r\n    forceStrength: { label: 'Force Strength', value: 50, type: 'slider', min: 1, max: 200, group: 'Forces' },\r\n    linkDistance: { label: 'Link Distance', value: 100, type: 'slider', min: 10, max: 300, group: 'Forces' },\r\n    charge: { label: 'Charge', value: -30, type: 'slider', min: -100, max: 10, group: 'Forces' },\r\n\r\n    // Aesthetics\r\n    particleSize: { label: 'Particle Size', value: 5, type: 'slider', min: 1, max: 20, group: 'Aesthetics' },\r\n    rainbowMode: { label: 'Rainbow Mode', value: false, type: 'checkbox', group: 'Aesthetics', icon: '🌈' },\r\n\r\n    // Neural Net Mode\r\n    neuronMode: { label: 'Neuron Mode (1st vector is input)', value: false, type: 'checkbox', group: 'Mode', icon: '🧠' },\r\n    activationFunction: { label: 'Activation Function', value: vectorStore.activationFunction, type: 'dropdown', options: vectorStore.availableActivationFunctions, group: 'Mode' },\r\n  })\r\n\r\n  // History for Undo/Redo\r\n  const history = ref([])\r\n  const historyIndex = ref(-1)\r\n\r\n  const recordHistory = (key, oldValue, newValue) => {\r\n    // If we are not at the end of the history, slice it\r\n    if (historyIndex.value < history.value.length - 1) {\r\n      history.value = history.value.slice(0, historyIndex.value + 1)\r\n    }\r\n    history.value.push({ key, oldValue, newValue });\r\n    historyIndex.value++;\r\n     // Limit history size\r\n    if (history.value.length > 50) {\r\n        history.value.shift();\r\n        historyIndex.value--;\r\n    }\r\n  }\r\n\r\n  const undo = () => {\r\n    if (historyIndex.value >= 0) {\r\n      const lastChange = history.value[historyIndex.value];\r\n      controls[lastChange.key].value = lastChange.oldValue;\r\n      historyIndex.value--;\r\n    }\r\n  }\r\n\r\n  const redo = () => {\r\n    if (historyIndex.value < history.value.length - 1) {\r\n      historyIndex.value++;\r\n      const nextChange = history.value[historyIndex.value];\r\n      controls[nextChange.key].value = nextChange.newValue;\r\n    }\r\n  }\r\n\r\n  // Presets\r\n  const presets = ref([])\r\n\r\n  const loadPresets = () => {\r\n    const savedPresets = localStorage.getItem('vectoverse_presets')\r\n    if (savedPresets) {\r\n      presets.value = JSON.parse(savedPresets)\r\n    } else {\r\n      // Add some default presets if none are saved\r\n      presets.value = [\r\n        { name: 'Default', values: getCurrentControlValues() },\r\n        { name: 'Focused Work', values: { ...getCurrentControlValues(), forceStrength: 20, linkDistance: 50 } },\r\n        { name: 'Chaos', values: { ...getCurrentControlValues(), forceStrength: 200, charge: 10 } },\r\n      ]\r\n    }\r\n  }\r\n\r\n  const savePreset = (name) => {\r\n    if (!name) return\r\n    const newPreset = { name, values: getCurrentControlValues() }\r\n    const existingIndex = presets.value.findIndex(p => p.name === name)\r\n    if (existingIndex > -1) {\r\n      presets.value[existingIndex] = newPreset\r\n    } else {\r\n      presets.value.push(newPreset)\r\n    }\r\n    persistPresets()\r\n  }\r\n\r\n  const loadPreset = (name) => {\r\n    const preset = presets.value.find(p => p.name === name)\r\n    if (preset) {\r\n      for (const key in preset.values) {\r\n        if (controls[key]) {\r\n          controls[key].value = preset.values[key]\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  const deletePreset = (name) => {\r\n      presets.value = presets.value.filter(p => p.name !== name);\r\n      persistPresets();\r\n  }\r\n\r\n  const persistPresets = () => {\r\n    localStorage.setItem('vectoverse_presets', JSON.stringify(presets.value))\r\n  }\r\n\r\n  const getCurrentControlValues = () => {\r\n    return Object.entries(controls).reduce((acc, [key, config]) => {\r\n      acc[key] = config.value\r\n      return acc\r\n    }, {})\r\n  }\r\n  \r\n  onMounted(loadPresets)\r\n\r\n  // Watchers for individual controls\r\n  watch(() => controls.numVectors.value, (newValue) => {\r\n    configStore.updateConfig('numVectors', newValue)\r\n    vectorStore.generateVectors() // Regenerate vectors when number changes\r\n  })\r\n\r\n  watch(() => controls.dimensions.value, (newValue) => {\r\n    configStore.updateConfig('dimensions', newValue)\r\n    vectorStore.generateVectors() // Regenerate vectors when dimensions change\r\n  })\r\n\r\n  watch(() => controls.neuronMode.value, (newValue, oldValue) => {\r\n    recordHistory('neuronMode', oldValue, newValue)\r\n    configStore.updateConfig('neuronMode', newValue)\r\n  })\r\n\r\n  watch(() => controls.activationFunction.value, (newValue) => {\r\n    vectorStore.setActivationFunction(newValue)\r\n  })\r\n\r\n  // Generic watcher for other controls\r\n  const otherControlKeys = ['showForces', 'showLabels', 'showGrid', 'forceStrength', 'linkDistance', 'charge', 'particleSize', 'rainbowMode']\r\n  otherControlKeys.forEach(key => {\r\n    watch(() => controls[key].value, (newValue, oldValue) => {\r\n      recordHistory(key, oldValue, newValue)\r\n      // Update the config store for visualization-related changes\r\n      configStore.updateConfig(key, newValue)\r\n    })\r\n  })\r\n\r\n  // Method to get controls by group\r\n  const getControlsByGroup = (group) => {\r\n    return Object.entries(controls)\r\n      .filter(([key, config]) => config.group === group)\r\n      .reduce((obj, [key, config]) => {\r\n        obj[key] = config;\r\n        return obj;\r\n      }, {});\r\n  }\r\n\r\n  return {\r\n    controls,\r\n    getControlsByGroup,\r\n    undo,\r\n    redo,\r\n    canUndo: computed(() => historyIndex.value > -1),\r\n    canRedo: computed(() => historyIndex.value < history.value.length - 1),\r\n    presets,\r\n    savePreset,\r\n    loadPreset,\r\n    deletePreset,\r\n  }\r\n} ","<template>\r\n  <div class=\"control-wrapper\" :class=\"[`control-${config.type}`, { 'has-icon': config.icon }]\">\r\n    \r\n    <!-- Icon Toggle Button -->\r\n    <template v-if=\"config.type === 'checkbox' && config.icon\">\r\n      <button \r\n        class=\"icon-toggle\"\r\n        :class=\"{ active: modelValue }\"\r\n        :title=\"config.label\"\r\n        @click=\"$emit('update:modelValue', !modelValue)\"\r\n      >\r\n        {{ config.icon }}\r\n      </button>\r\n    </template>\r\n\r\n    <!-- Standard Controls -->\r\n    <template v-else>\r\n      <label :for=\"controlId\" v-if=\"config.label\">{{ config.label }}</label>\r\n      <div class=\"control-input\">\r\n        <template v-if=\"config.type === 'slider'\">\r\n          <input\r\n            :id=\"controlId\"\r\n            type=\"range\"\r\n            :min=\"config.min\"\r\n            :max=\"config.max\"\r\n            :step=\"config.step || 1\"\r\n            :value=\"modelValue\"\r\n            @input=\"$emit('update:modelValue', parseFloat($event.target.value))\"\r\n          />\r\n          <span class=\"slider-value\">{{ modelValue }}</span>\r\n        </template>\r\n\r\n        <template v-if=\"config.type === 'checkbox' && !config.icon\">\r\n          <label class=\"switch\">\r\n            <input\r\n              :id=\"controlId\"\r\n              type=\"checkbox\"\r\n              :checked=\"modelValue\"\r\n              @change=\"$emit('update:modelValue', $event.target.checked)\"\r\n            />\r\n            <span class=\"slider round\"></span>\r\n          </label>\r\n        </template>\r\n        \r\n        <template v-if=\"config.type === 'button'\">\r\n          <button :id=\"controlId\" @click=\"$emit('click')\">\r\n            {{ config.label }}\r\n          </button>\r\n        </template>\r\n        \r\n        <template v-if=\"config.type === 'dropdown'\">\r\n          <select \r\n              :id=\"controlId\" \r\n              :value=\"modelValue\" \r\n              @change=\"$emit('update:modelValue', $event.target.value)\"\r\n          >\r\n            <option v-for=\"option in config.options\" :key=\"option\" :value=\"option\">\r\n              {{ option }}\r\n            </option>\r\n          </select>\r\n        </template>\r\n\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  config: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  modelValue: {\r\n    required: true\r\n  },\r\n  id: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\ndefineEmits(['update:modelValue', 'click'])\r\n\r\nconst controlId = computed(() => `control-${props.id}`)\r\n</script>\r\n\r\n<style scoped>\r\n.control-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 6px;\r\n}\r\n.control-wrapper.has-icon {\r\n  padding: 0;\r\n  justify-content: center;\r\n}\r\n\r\nlabel {\r\n  font-size: 0.85em;\r\n  color: var(--text-secondary);\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.control-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n/* Icon Toggle Button */\r\n.icon-toggle {\r\n  background: transparent;\r\n  border: 1px solid transparent;\r\n  color: var(--text-secondary);\r\n  padding: 0.4rem 0.6rem;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  font-size: 1.1rem;\r\n}\r\n.icon-toggle:hover {\r\n  border-color: var(--border-color-soft);\r\n  color: var(--text-primary);\r\n}\r\n.icon-toggle.active {\r\n  background-color: var(--primary-light);\r\n  color: var(--primary);\r\n  box-shadow: 0 0 10px 0 var(--primary-light);\r\n}\r\n\r\n/* Slider */\r\n.control-slider input[type=\"range\"] {\r\n  width: 100px;\r\n}\r\n.slider-value {\r\n  font-weight: bold;\r\n  font-size: 0.85em;\r\n  width: 28px;\r\n  text-align: right;\r\n}\r\n\r\n/* Checkbox (Switch) */\r\n.switch {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 44px;\r\n  height: 24px;\r\n}\r\n.switch input { \r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n.slider {\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: #4a4a4a;\r\n  transition: .4s;\r\n}\r\n.slider:before {\r\n  position: absolute;\r\n  content: \"\";\r\n  height: 18px;\r\n  width: 18px;\r\n  left: 3px;\r\n  bottom: 3px;\r\n  background-color: white;\r\n  transition: .4s;\r\n}\r\ninput:checked + .slider {\r\n  background-color: var(--primary);\r\n}\r\ninput:checked + .slider:before {\r\n  transform: translateX(20px);\r\n}\r\n.slider.round {\r\n  border-radius: 24px;\r\n}\r\n.slider.round:before {\r\n  border-radius: 50%;\r\n}\r\n</style> ","<template>\r\n  <header class=\"app-header\">\r\n    <div class=\"header-branding\">\r\n      <h1 class=\"app-title\">VectoVerse</h1>\r\n    </div>\r\n\r\n    <div class=\"controls-toolbar\">\r\n      <!-- Action Buttons -->\r\n      <div class=\"toolbar-section action-buttons\">\r\n        <button @click=\"vectorStore.generateVectors()\" title=\"Generate new vectors (G)\">🎲</button>\r\n        <button @click=\"uiStore.showAddVectorModal()\" title=\"Add a custom vector (A)\">➕</button>\r\n        <button @click=\"uiStore.showAnalysisModal()\" title=\"Run analysis (R)\">📊</button>\r\n        <button @click=\"appActions.exportData()\" title=\"Export data (E)\">💾</button>\r\n        <button @click=\"appActions.toggleFullscreen()\" title=\"Toggle fullscreen (F)\">🔍</button>\r\n      </div>\r\n\r\n      <!-- Main Controls -->\r\n      <div class=\"toolbar-section main-controls\">\r\n        <Control v-for=\"(config, key) in controls.controls\" :key=\"key\" :id=\"key\" :config=\"config\" v-model=\"config.value\" />\r\n      </div>\r\n\r\n      <!-- History -->\r\n      <div class=\"toolbar-section history-controls\">\r\n        <button @click=\"controls.undo()\" :disabled=\"!controls.canUndo.value\" title=\"Undo (Ctrl+Z)\">↩️</button>\r\n        <button @click=\"controls.redo()\" :disabled=\"!controls.canRedo.value\" title=\"Redo (Ctrl+Y)\">↪️</button>\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script setup>\r\nimport { useControls } from '../composables/useControls'\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useAppActions } from '../composables/useAppActions'\r\nimport Control from './Control.vue'\r\n\r\nconst controls = useControls()\r\nconst uiStore = useUIStore()\r\nconst vectorStore = useVectorStore()\r\nconst appActions = useAppActions()\r\n</script>\r\n\r\n<style scoped>\r\n.app-header {\r\n  grid-area: header;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 0.75rem;\r\n  background-color: var(--sidebar-bg);\r\n  border-bottom: 1px solid var(--border-color);\r\n  height: 50px;\r\n}\r\n\r\n.header-branding {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.app-title {\r\n  font-size: 1.3rem;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  margin: 0;\r\n}\r\n\r\n.controls-toolbar {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n}\r\n\r\n.toolbar-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n}\r\n\r\n.main-controls {\r\n  flex-grow: 1;\r\n}\r\n\r\n.action-buttons button,\r\n.history-controls button {\r\n  background: transparent;\r\n  border: none;\r\n  color: var(--text-secondary);\r\n  padding: 0 0.4rem;\r\n  height: 100%;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  font-size: 1.1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.action-buttons button:hover,\r\n.history-controls button:hover:not(:disabled) {\r\n  color: var(--primary);\r\n  background-color: var(--bg-secondary);\r\n}\r\n\r\n.history-controls button:disabled {\r\n  opacity: 0.4;\r\n  cursor: not-allowed;\r\n}\r\n</style> ","import { ref } from 'vue'\r\nimport { useVectorStore } from '@/stores/vectorStore'\r\nimport { useUIStore } from '@/stores/uiStore'\r\n\r\nexport function useAppActions() {\r\n    const vectorStore = useVectorStore()\r\n    const uiStore = useUIStore()\r\n\r\n    const exportData = () => {\r\n        try {\r\n            const data = {\r\n                vectors: vectorStore.vectors,\r\n                config: {\r\n                    dimensions: vectorStore.dimensions,\r\n                    forceType: vectorStore.forceType,\r\n                    activationFunction: vectorStore.activationFunction\r\n                },\r\n                timestamp: new Date().toISOString()\r\n            }\r\n            \r\n            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\r\n            const url = URL.createObjectURL(blob)\r\n            const link = document.createElement('a')\r\n            link.href = url\r\n            link.download = `vectoverse-export-${Date.now()}.json`\r\n            document.body.appendChild(link)\r\n            link.click()\r\n            document.body.removeChild(link)\r\n            URL.revokeObjectURL(url)\r\n            \r\n            uiStore.showSuccess('Data exported successfully')\r\n        } catch (error) {\r\n            console.error('Export error:', error)\r\n            uiStore.showError('Failed to export data')\r\n        }\r\n    }\r\n\r\n    const toggleFullscreen = () => {\r\n        if (!document.fullscreenElement) {\r\n            document.documentElement.requestFullscreen()\r\n        } else {\r\n            document.exitFullscreen()\r\n        }\r\n    }\r\n\r\n    return {\r\n        exportData,\r\n        toggleFullscreen\r\n    }\r\n} ","export const Constants = {\r\n  COLORS: {\r\n    POSITIVE: '#4CAF50', // Green\r\n    NEGATIVE: '#FF5722', // Orange\r\n    NEUTRAL: '#888888',  // Grey\r\n    INPUT: '#FFD700',     // Gold\r\n    UPLOADED: '#2196F3', // Blue\r\n    SELECTION: '#FFD700' // Gold\r\n  },\r\n  MIN_VECTOR_RADIUS: 15,\r\n  MAX_VECTOR_RADIUS: 40,\r\n}; ","<template>\r\n  <div ref=\"container\" class=\"vector-renderer-container\">\r\n    <svg ref=\"svgElement\"></svg>\r\n    <div ref=\"tooltip\" class=\"renderer-tooltip\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch, nextTick, onUnmounted } from 'vue';\r\nimport * as d3 from 'd3';\r\nimport { useVectorStore } from '@/stores/vectorStore';\r\nimport { useConfigStore } from '@/stores/configStore';\r\nimport { vectorOperations } from '@/utils/vectorUtils';\r\nimport { Constants } from '@/utils/Constants';\r\nimport { useForceCalculator } from '@/composables/useForceCalculator';\r\n// Assuming composables exist, if not, they would need to be created or logic integrated.\r\n// import { useAnimationEngine } from '@/composables/useAnimationEngine';\r\n\r\nconst props = defineProps({\r\n  analysisResult: {\r\n    type: Object,\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst vectorStore = useVectorStore();\r\nconst configStore = useConfigStore();\r\nconst forceCalculator = useForceCalculator();\r\n// const forceCalculator = useForceCalculator(); // Assuming this provides calculation methods\r\n\r\nconst container = ref(null);\r\nconst svgElement = ref(null);\r\nconst tooltip = ref(null);\r\nlet svg;\r\n\r\n// useAnimationEngine(svgElement); // This would set up a simulation if we use one\r\n\r\nonMounted(() => {\r\n  svg = d3.select(svgElement.value);\r\n  \r\n  if (svg.select(\"defs\").empty()) {\r\n    const defs = svg.append(\"defs\");\r\n    const filter = defs.append(\"filter\").attr(\"id\", \"glow\");\r\n    filter.append(\"feGaussianBlur\").attr(\"stdDeviation\", \"3\").attr(\"result\", \"coloredBlur\");\r\n    const feMerge = filter.append(\"feMerge\");\r\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\r\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\r\n  }\r\n\r\n  resize();\r\n  render();\r\n  setupKeyboardNavigation();\r\n});\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('keydown', handleKeyDown);\r\n});\r\n\r\nwatch(() => [configStore.width, configStore.height], resize);\r\nwatch(() => [vectorStore.vectors, vectorStore.selectedVectorId, configStore.showForces, vectorStore.forceType, vectorStore.inputVector], render, { deep: true });\r\nwatch(() => props.analysisResult, handleAnalysisResults);\r\n\r\nfunction resize() {\r\n  if (!svg) return;\r\n  svg.attr(\"width\", configStore.width)\r\n     .attr(\"height\", configStore.height)\r\n     .attr(\"viewBox\", `0 0 ${configStore.width} ${configStore.height}`);\r\n  render();\r\n}\r\n\r\nfunction render() {\r\n  if (!svg) return;\r\n  nextTick(() => {\r\n    svg.selectAll(\".bg-particle\").remove(); // Clear only particles and vectors, not defs\r\n    svg.selectAll(\".vector-atom\").remove();\r\n    svg.selectAll(\".input-vector\").remove();\r\n    svg.selectAll(\".force-line\").remove();\r\n    \r\n    renderBackgroundParticles();\r\n    renderVectors();\r\n    if (configStore.showForces) {\r\n      renderForces();\r\n    }\r\n    if (vectorStore.inputVector) {\r\n      renderInputVector();\r\n    }\r\n    updateVectorSelection();\r\n  });\r\n}\r\n\r\nfunction renderVectors() {\r\n    const vectorGroups = svg.selectAll(\".vector-atom\")\r\n        .data(vectorStore.vectors, d => d.id)\r\n        .join(\"g\")\r\n        .attr(\"class\", \"vector-atom\")\r\n        .attr(\"transform\", d => `translate(${d.x || configStore.width / 2}, ${d.y || configStore.height / 2})`)\r\n        .attr(\"tabindex\", \"0\")\r\n        .attr(\"role\", \"button\")\r\n        .attr(\"aria-label\", d => `Vector ${d.id}, magnitude ${vectorOperations.magnitude(d.components).toFixed(2)}`)\r\n        .on(\"click\", (event, d) => {\r\n            event.stopPropagation();\r\n            vectorStore.selectVector(d.id);\r\n        })\r\n        .on(\"keydown\", (event, d) => {\r\n            if (event.key === 'Enter' || event.key === ' ') {\r\n                event.preventDefault();\r\n                vectorStore.selectVector(d.id);\r\n            }\r\n        });\r\n\r\n    vectorGroups.append(\"circle\")\r\n        .attr(\"r\", d => getVectorRadius(d))\r\n        .attr(\"fill\", \"rgba(255,255,255,0.1)\")\r\n        .attr(\"stroke\", \"rgba(255,255,255,0.5)\")\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"filter\", \"url(#glow)\");\r\n\r\n    vectorGroups.each(function(d) {\r\n        renderDimensionArcs(d3.select(this), d);\r\n    });\r\n\r\n    vectorGroups.append(\"text\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"dominant-baseline\", \"middle\")\r\n        .attr(\"fill\", \"white\")\r\n        .attr(\"font-weight\", \"bold\")\r\n        .attr(\"font-size\", \"14px\")\r\n        .text(d => `V${d.id}`);\r\n}\r\n\r\nfunction renderDimensionArcs(group, vector) {\r\n    const radius = getVectorRadius(vector);\r\n    const angleStep = (2 * Math.PI) / vector.components.length;\r\n    \r\n    vector.components.forEach((component, dimIndex) => {\r\n        const angle = dimIndex * angleStep - Math.PI / 2;\r\n        const intensity = Math.abs(component);\r\n        const segmentRadius = radius * 0.8;\r\n        \r\n        const arc = d3.arc()\r\n            .innerRadius(segmentRadius - 8)\r\n            .outerRadius(segmentRadius - 2)\r\n            .startAngle(angle - angleStep * 0.4)\r\n            .endAngle(angle + angleStep * 0.4);\r\n        \r\n        group.append(\"path\")\r\n            .attr(\"d\", arc)\r\n            .attr(\"fill\", getComponentColor(component))\r\n            .attr(\"opacity\", 0.3 + intensity * 0.7)\r\n            .attr(\"class\", \"dimension-segment\");\r\n    });\r\n}\r\n\r\nfunction renderInputVector() {\r\n    const iv = vectorStore.inputVector;\r\n    if (!iv) return;\r\n\r\n    const inputGroup = svg.selectAll(\".input-vector\")\r\n        .data([iv])\r\n        .join(\"g\")\r\n        .attr(\"class\", \"input-vector\")\r\n        .attr(\"transform\", `translate(${iv.x || configStore.width - 50}, ${iv.y || 50})`);\r\n\r\n    const radius = getVectorRadius(iv);\r\n\r\n    inputGroup.append(\"circle\")\r\n        .attr(\"r\", radius + 10)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", Constants.COLORS.INPUT)\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"opacity\", 0.5)\r\n        .attr(\"class\", \"input-pulse\");\r\n    \r\n    inputGroup.append(\"circle\")\r\n        .attr(\"r\", radius)\r\n        .attr(\"fill\", \"rgba(255,215,0,0.3)\")\r\n        .attr(\"stroke\", Constants.COLORS.INPUT)\r\n        .attr(\"stroke-width\", 3);\r\n\r\n    renderDimensionArcs(inputGroup, iv);\r\n\r\n    inputGroup.append(\"text\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"dominant-baseline\", \"middle\")\r\n        .attr(\"fill\", Constants.COLORS.INPUT)\r\n        .attr(\"font-weight\", \"bold\")\r\n        .attr(\"font-size\", \"16px\")\r\n        .text(\"INPUT\");\r\n}\r\n\r\nfunction getVectorRadius(vector) {\r\n    const magnitude = vectorOperations.magnitude(vector.components);\r\n    const radius = Math.max(Constants.MIN_VECTOR_RADIUS, Math.min(Constants.MAX_VECTOR_RADIUS, magnitude * 25));\r\n    return radius;\r\n}\r\n\r\nfunction getComponentColor(value) {\r\n    if (Math.abs(value) < 0.1) return Constants.COLORS.NEUTRAL;\r\n    return value > 0 ? Constants.COLORS.POSITIVE : Constants.COLORS.NEGATIVE;\r\n}\r\n\r\nfunction updateVectorSelection() {\r\n    svg.selectAll(\".vector-atom\")\r\n        .classed(\"selected\", d => d.id === vectorStore.selectedVectorId);\r\n}\r\n\r\nfunction handleKeyDown(e) {\r\n    if (e.target.closest('.modal-overlay') || e.target.tagName === 'INPUT') return;\r\n            \r\n    const vectors = vectorStore.vectors;\r\n    if (!vectors.length) return;\r\n    \r\n    const currentIndex = vectors.findIndex(v => v.id === vectorStore.selectedVectorId);\r\n    let newIndex = -1;\r\n\r\n    switch(e.key) {\r\n        case 'ArrowRight':\r\n        case 'ArrowDown':\r\n            e.preventDefault();\r\n            newIndex = currentIndex < vectors.length - 1 ? currentIndex + 1 : 0;\r\n            break;\r\n        case 'ArrowLeft':\r\n        case 'ArrowUp':\r\n            e.preventDefault();\r\n            newIndex = currentIndex > 0 ? currentIndex - 1 : vectors.length - 1;\r\n            break;\r\n        case 'Home':\r\n            e.preventDefault();\r\n            newIndex = 0;\r\n            break;\r\n        case 'End':\r\n            e.preventDefault();\r\n            newIndex = vectors.length - 1;\r\n            break;\r\n    }\r\n    \r\n    if (newIndex !== -1) {\r\n        const newVectorId = vectors[newIndex].id;\r\n        vectorStore.selectVector(newVectorId);\r\n        \r\n        // Focus the newly selected element for accessibility\r\n        const vectorElement = svg.selectAll(\".vector-atom\").filter(d => d.id === newVectorId).node();\r\n        if (vectorElement) {\r\n            vectorElement.focus();\r\n        }\r\n    }\r\n}\r\n\r\nfunction setupKeyboardNavigation() {\r\n    document.addEventListener('keydown', handleKeyDown);\r\n}\r\n\r\nfunction renderBackgroundParticles() {\r\n    const particles = d3.range(30).map(() => ({\r\n        x: Math.random() * configStore.width,\r\n        y: Math.random() * configStore.height,\r\n        r: Math.random() * 2 + 1\r\n    }));\r\n    \r\n    svg.selectAll(\".bg-particle\")\r\n        .data(particles)\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"class\", \"bg-particle\")\r\n        .attr(\"cx\", d => d.x)\r\n        .attr(\"cy\", d => d.y)\r\n        .attr(\"r\", d => d.r)\r\n        .style(\"fill\", \"rgba(255,255,255,0.1)\");\r\n}\r\n\r\nfunction renderForces() {\r\n  const forces = forceCalculator.calculateForces(vectorStore.vectors, vectorStore.forceType);\r\n  \r\n  const forceLines = svg.selectAll(\".force-line\")\r\n    .data(forces)\r\n    .join(\"line\")\r\n    .attr(\"class\", \"force-line\")\r\n    .attr(\"x1\", d => d.x1)\r\n    .attr(\"y1\", d => d.y1)\r\n    .attr(\"x2\", d => d.x2)\r\n    .attr(\"y2\", d => d.y2)\r\n    .attr(\"stroke\", d => d.force > 0 ? Constants.COLORS.POSITIVE : Constants.COLORS.NEGATIVE)\r\n    .attr(\"stroke-width\", d => Math.min(5, Math.abs(d.force) * 5))\r\n    .attr(\"opacity\", d => Math.min(0.8, Math.abs(d.force) * 0.8));\r\n}\r\n\r\nfunction showVectorTooltip(event, data) {\r\n    const tt = d3.select(tooltip.value);\r\n    tt.style(\"opacity\", 1)\r\n      .style(\"left\", `${event.pageX + 10}px`)\r\n      .style(\"top\", `${event.pageY}px`)\r\n      .html(`<b>Vector ID: ${data.id}</b><br/>Components: ${data.components.length}`);\r\n}\r\n\r\nfunction hideVectorTooltip() {\r\n    d3.select(tooltip.value).style(\"opacity\", 0);\r\n}\r\n\r\nfunction showForceTooltip(event, data) {\r\n    const tt = d3.select(tooltip.value);\r\n    tt.style(\"opacity\", 1)\r\n      .style(\"left\", `${event.pageX + 10}px`)\r\n      .style(\"top\", `${event.pageY}px`)\r\n      .html(`<b>Force Type: ${data.forceType}</b><br/>Strength: ${data.force.toFixed(4)}`);\r\n}\r\n\r\nfunction hideForceTooltip() {\r\n    d3.select(tooltip.value).style(\"opacity\", 0);\r\n}\r\n\r\nfunction handleAnalysisResults(result) {\r\n    if (!result || !result.type) return;\r\n\r\n    const { data } = result;\r\n    if (result.type === 'kmeans') {\r\n        const colors = d3.scaleOrdinal(d3.schemeCategory10);\r\n        svg.selectAll(\".vector-atom\")\r\n            .each(function(d, i) {\r\n                const clusterId = data.assignments[i];\r\n                d3.select(this).select('circle').style('fill', colors(clusterId));\r\n            });\r\n    } else {\r\n        const xScale = d3.scaleLinear().domain(d3.extent(data, d => d[0])).range([50, configStore.width - 50]);\r\n        const yScale = d3.scaleLinear().domain(d3.extent(data, d => d[1])).range([50, configStore.height - 50]);\r\n\r\n        svg.selectAll(\".vector-atom\")\r\n            .transition().duration(750)\r\n            .attr(\"transform\", (d, i) => {\r\n                // Also update the vector's position in the store if desired\r\n                // vectorStore.updateVectorPosition(d.id, { x: xScale(data[i][0]), y: yScale(data[i][1]) });\r\n                return `translate(${xScale(data[i][0])}, ${yScale(data[i][1])})`\r\n            });\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.renderer-tooltip {\r\n    position: absolute;\r\n    background-color: rgba(0,0,0,0.9);\r\n    color: white;\r\n    padding: 8px 12px;\r\n    border-radius: 6px;\r\n    font-size: 11px;\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    transition: opacity 0.2s;\r\n    z-index: 1000;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.3);\r\n}\r\n\r\n.vector-atom {\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  pointer-events: all;\r\n}\r\n\r\n.vector-atom:hover {\r\n  filter: brightness(1.2);\r\n}\r\n\r\n.vector-atom.selected {\r\n  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));\r\n}\r\n\r\n.vector-atom.selected circle {\r\n  stroke: rgba(255, 255, 255, 0.9) !important;\r\n  stroke-width: 3 !important;\r\n}\r\n\r\n.input-pulse {\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    transform: scale(1);\r\n    opacity: 0.5;\r\n  }\r\n  70% {\r\n    transform: scale(2);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n    opacity: 0;\r\n  }\r\n}\r\n</style> ","import { reactive, computed } from 'vue';\r\nimport { useVectorStore } from '@/stores/vectorStore';\r\nimport { vectorOperations } from '@/utils/vectorUtils';\r\n\r\nexport function useForceCalculator() {\r\n  const vectorStore = useVectorStore();\r\n\r\n  const state = reactive({\r\n    epsilon: 0.01,\r\n    temperature: 1.0,\r\n  });\r\n\r\n  // --- Core Physics & Math Functions ---\r\n  const dotProduct = (v1, v2) => vectorOperations.dotProduct(v1.components, v2.components);\r\n  const magnitude = (v) => vectorOperations.magnitude(v.components);\r\n  const distanceSquared = (v1, v2) => {\r\n      let sum = 0;\r\n      for (let i = 0; i < v1.components.length; i++) {\r\n          const diff = v1.components[i] - v2.components[i];\r\n          sum += diff * diff;\r\n      }\r\n      return sum;\r\n  };\r\n  const euclideanDistance = (v1, v2) => Math.sqrt(distanceSquared(v1, v2));\r\n  const manhattanDistance = (v1, v2) => v1.components.reduce((sum, c, i) => sum + Math.abs(c - v2.components[i]), 0);\r\n  const cosineSimilarity = (v1, v2) => {\r\n      const mag1 = magnitude(v1);\r\n      const mag2 = magnitude(v2);\r\n      if (mag1 === 0 || mag2 === 0) return 0;\r\n      return dotProduct(v1, v2) / (mag1 * mag2);\r\n  };\r\n\r\n  // --- Force Calculation ---\r\n  function calculateForces(vectors, forceType) {\r\n    const forces = [];\r\n    if (vectors.length < 2) return forces;\r\n\r\n    for (let i = 0; i < vectors.length; i++) {\r\n        for (let j = i + 1; j < vectors.length; j++) {\r\n            const v1 = vectors[i];\r\n            const v2 = vectors[j];\r\n            const force = calculateSelectedMetric(v1, v2, forceType);\r\n            forces.push({\r\n                x1: v1.x, y1: v1.y,\r\n                x2: v2.x, y2: v2.y,\r\n                force: force,\r\n                type: 'normal',\r\n                forceType: forceType\r\n            });\r\n        }\r\n    }\r\n    return forces;\r\n  }\r\n\r\n  function calculateSelectedMetric(v1, v2, metricType) {\r\n    switch (metricType) {\r\n        case 'gravity':\r\n            return (magnitude(v1) * magnitude(v2)) / (distanceSquared(v1, v2) + state.epsilon);\r\n        case 'repulsion':\r\n             return 1 / (distanceSquared(v1, v2) + state.epsilon);\r\n        case 'cosine':\r\n            return Math.abs(cosineSimilarity(v1, v2));\r\n        case 'correlation':\r\n            return Math.abs(vectorOperations.correlation(v1.components, v2.components));\r\n        case 'euclidean':\r\n            return 1 / (1 + euclideanDistance(v1, v2));\r\n        case 'manhattan':\r\n            return 1 / (1 + manhattanDistance(v1, v2));\r\n        case 'resonance':\r\n        default:\r\n            const alignment = Math.pow(dotProduct(v1, v2), 2);\r\n            const proximity = distanceSquared(v1, v2) + state.epsilon;\r\n            return alignment / proximity;\r\n    }\r\n  }\r\n\r\n  // --- Neural & Activation ---\r\n  function applyActivation(value, type = vectorStore.activationFunction) {\r\n      // Logic from EnhancedForceCalculator\r\n  }\r\n\r\n  // --- Comprehensive Analysis ---\r\n  function getEnhancedVectorAnalysis(vectorId) {\r\n      const vector = vectorStore.vectors.find(v => v.id === vectorId);\r\n      if (!vector) return null;\r\n      // Combine stats from both old calculators\r\n  }\r\n\r\n  return {\r\n    state,\r\n    calculateForces,\r\n    getEnhancedVectorAnalysis,\r\n    applyActivation,\r\n    // Expose other specific metrics if needed by components\r\n    cosineSimilarity,\r\n    euclideanDistance,\r\n    manhattanDistance\r\n  };\r\n} ","import { ref } from 'vue';\r\n\r\nconst bus = ref(new Map());\r\n\r\nexport function useEventBus() {\r\n  const on = (event, callback) => {\r\n    if (!bus.value.has(event)) {\r\n      bus.value.set(event, []);\r\n    }\r\n    bus.value.get(event).push(callback);\r\n  };\r\n\r\n  const off = (event, callback) => {\r\n    if (bus.value.has(event)) {\r\n      const callbacks = bus.value.get(event);\r\n      const index = callbacks.indexOf(callback);\r\n      if (index > -1) {\r\n        callbacks.splice(index, 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const emit = (event, ...args) => {\r\n    if (bus.value.has(event)) {\r\n      bus.value.get(event).forEach(callback => {\r\n        callback(...args);\r\n      });\r\n    }\r\n  };\r\n\r\n  return { on, off, emit };\r\n} ","<template>\r\n  <div class=\"visualization-container\" ref=\"container\">\r\n    <D3Visualization :analysisResult=\"analysisResult\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, onMounted } from 'vue';\r\nimport D3Visualization from './visualization/D3Visualization.vue';\r\nimport { useVectorStore } from '@/stores/vectorStore';\r\nimport { useEventBus } from '@/composables/useEventBus';\r\n\r\nconst vectorStore = useVectorStore();\r\nconst eventBus = useEventBus();\r\n\r\nconst analysisResult = ref(null);\r\nconst container = ref(null);\r\n\r\nwatch(() => vectorStore.analysisResults, (newResult) => {\r\n  if (newResult) {\r\n    analysisResult.value = newResult;\r\n  }\r\n}, { deep: true });\r\n\r\nonMounted(() => {\r\n  eventBus.on('analysisCompleted', (result) => {\r\n    analysisResult.value = result;\r\n  });\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.visualization-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 600px;\r\n  background: radial-gradient(circle at center, rgba(102, 126, 234, 0.1) 0%, transparent 70%);\r\n  border-radius: 12px;\r\n  border: 2px solid rgba(102, 126, 234, 0.2);\r\n  overflow: hidden;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .visualization-container {\r\n    height: 400px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .visualization-container {\r\n    height: 300px;\r\n  }\r\n}\r\n</style> ","import { ref, computed, toRefs } from 'vue'\r\nimport { vectorOperations, vectorGeneration, vectorStatistics } from '../utils/vectorUtils.js'\r\nimport { useVectorStore } from '../stores/vectorStore.js'\r\n\r\n/**\r\n * Vue Composable for Vector Operations\r\n * Provides reactive vector manipulation and analysis functions\r\n */\r\nexport function useVectorOperations() {\r\n  const vectorStore = useVectorStore()\r\n  \r\n  // Reactive state\r\n  const isCalculating = ref(false)\r\n  const lastError = ref(null)\r\n  const operationHistory = ref([])\r\n  \r\n  // Computed properties\r\n  const selectedVector = computed(() => vectorStore.selectedVector)\r\n  const allVectors = computed(() => vectorStore.vectors)\r\n  const currentDimensions = computed(() => vectorStore.dimensions)\r\n  \r\n  /**\r\n   * Execute vector operation with error handling\r\n   * @param {Function} operation - Operation to execute\r\n   * @param {string} operationName - Name for history tracking\r\n   * @returns {Promise<any>} Operation result\r\n   */\r\n  const executeOperation = async (operation, operationName) => {\r\n    isCalculating.value = true\r\n    lastError.value = null\r\n    \r\n    try {\r\n      const result = await operation()\r\n      \r\n      // Add to operation history\r\n      operationHistory.value.unshift({\r\n        name: operationName,\r\n        timestamp: new Date(),\r\n        success: true,\r\n        result: typeof result === 'object' ? { ...result } : result\r\n      })\r\n      \r\n      // Keep only last 50 operations\r\n      if (operationHistory.value.length > 50) {\r\n        operationHistory.value = operationHistory.value.slice(0, 50)\r\n      }\r\n      \r\n      return result\r\n    } catch (error) {\r\n      lastError.value = error.message\r\n      \r\n      operationHistory.value.unshift({\r\n        name: operationName,\r\n        timestamp: new Date(),\r\n        success: false,\r\n        error: error.message\r\n      })\r\n      \r\n      throw error\r\n    } finally {\r\n      isCalculating.value = false\r\n    }\r\n  }\r\n  \r\n  // Vector Creation Operations\r\n  const createRandomVector = async (dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.random(dims, -10, 10)\r\n      return {\r\n        id: `random_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: vectorOperations.magnitude(vector),\r\n        created: new Date(),\r\n        type: 'random'\r\n      }\r\n    }, 'Create Random Vector')\r\n  }\r\n  \r\n  const createZeroVector = async (dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.zero(dims)\r\n      return {\r\n        id: `zero_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: 0,\r\n        created: new Date(),\r\n        type: 'zero'\r\n      }\r\n    }, 'Create Zero Vector')\r\n  }\r\n  \r\n  const createUnitVector = async (activeIndex, dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.unit(dims, activeIndex)\r\n      return {\r\n        id: `unit_${activeIndex}_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: 1,\r\n        created: new Date(),\r\n        type: 'unit',\r\n        activeIndex\r\n      }\r\n    }, `Create Unit Vector (e${activeIndex + 1})`)\r\n  }\r\n  \r\n  const createNormalVector = async (mean = 0, stdDev = 1, dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.normal(dims, mean, stdDev)\r\n      return {\r\n        id: `normal_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: vectorOperations.magnitude(vector),\r\n        created: new Date(),\r\n        type: 'normal',\r\n        parameters: { mean, stdDev }\r\n      }\r\n    }, 'Create Normal Vector')\r\n  }\r\n  \r\n  // Vector Arithmetic Operations\r\n  const addVectors = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for addition')\r\n      }\r\n      \r\n      const result = vectorOperations.add(vectorA.components, vectorB.components)\r\n      return {\r\n        id: `add_${Date.now()}`,\r\n        components: result,\r\n        magnitude: vectorOperations.magnitude(result),\r\n        created: new Date(),\r\n        type: 'addition',\r\n        operands: [vectorA.id, vectorB.id]\r\n      }\r\n    }, 'Vector Addition')\r\n  }\r\n  \r\n  const subtractVectors = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for subtraction')\r\n      }\r\n      \r\n      const result = vectorOperations.subtract(vectorA.components, vectorB.components)\r\n      return {\r\n        id: `subtract_${Date.now()}`,\r\n        components: result,\r\n        magnitude: vectorOperations.magnitude(result),\r\n        created: new Date(),\r\n        type: 'subtraction',\r\n        operands: [vectorA.id, vectorB.id]\r\n      }\r\n    }, 'Vector Subtraction')\r\n  }\r\n  \r\n  const scaleVector = async (vector, scalar) => {\r\n    return executeOperation(async () => {\r\n      if (!vector) {\r\n        throw new Error('Vector is required for scaling')\r\n      }\r\n      \r\n      const result = vectorOperations.scale(vector.components, scalar)\r\n      return {\r\n        id: `scale_${Date.now()}`,\r\n        components: result,\r\n        magnitude: vectorOperations.magnitude(result),\r\n        created: new Date(),\r\n        type: 'scaling',\r\n        operands: [vector.id],\r\n        scalar\r\n      }\r\n    }, `Scale Vector by ${scalar}`)\r\n  }\r\n  \r\n  const normalizeVector = async (vector) => {\r\n    return executeOperation(async () => {\r\n      if (!vector) {\r\n        throw new Error('Vector is required for normalization')\r\n      }\r\n      \r\n      const result = vectorOperations.normalize(vector.components)\r\n      return {\r\n        id: `normalize_${Date.now()}`,\r\n        components: result,\r\n        magnitude: 1,\r\n        created: new Date(),\r\n        type: 'normalization',\r\n        operands: [vector.id]\r\n      }\r\n    }, 'Normalize Vector')\r\n  }\r\n  \r\n  // Vector Analysis Operations\r\n  const calculateDotProduct = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for dot product')\r\n      }\r\n      \r\n      return vectorOperations.dotProduct(vectorA.components, vectorB.components)\r\n    }, 'Calculate Dot Product')\r\n  }\r\n  \r\n  const calculateCosineSimilarity = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for cosine similarity')\r\n      }\r\n      \r\n      return vectorOperations.cosineSimilarity(vectorA.components, vectorB.components)\r\n    }, 'Calculate Cosine Similarity')\r\n  }\r\n  \r\n  const calculateDistance = async (vectorA, vectorB, metric = 'euclidean') => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for distance calculation')\r\n      }\r\n      \r\n      switch (metric.toLowerCase()) {\r\n        case 'euclidean':\r\n          return vectorOperations.euclideanDistance(vectorA.components, vectorB.components)\r\n        case 'manhattan':\r\n          return vectorOperations.manhattanDistance(vectorA.components, vectorB.components)\r\n        default:\r\n          throw new Error(`Unknown distance metric: ${metric}`)\r\n      }\r\n    }, `Calculate ${metric} Distance`)\r\n  }\r\n  \r\n  const analyzeVector = async (vector) => {\r\n    return executeOperation(async () => {\r\n      if (!vector) {\r\n        throw new Error('Vector is required for analysis')\r\n      }\r\n      \r\n      const stats = vectorStatistics.calculate(vector.components)\r\n      \r\n      return {\r\n        vectorId: vector.id,\r\n        ...stats,\r\n        dimensions: vector.components.length,\r\n        timestamp: new Date(),\r\n      }\r\n    }, 'Analyze Vector')\r\n  }\r\n  \r\n  // Batch Operations\r\n  const analyzeBatch = async (vectors) => {\r\n    return executeOperation(async () => {\r\n      if (!vectors || !Array.isArray(vectors)) {\r\n        throw new Error('Array of vectors is required for batch analysis')\r\n      }\r\n      \r\n      const analyses = await Promise.all(\r\n        vectors.map(vector => analyzeVector(vector))\r\n      )\r\n      \r\n      // Calculate batch statistics\r\n      const magnitudes = vectors.map(v => vectorOperations.magnitude(v.components))\r\n      const avgMagnitude = magnitudes.reduce((sum, mag) => sum + mag, 0) / magnitudes.length\r\n      const maxMagnitude = Math.max(...magnitudes)\r\n      const minMagnitude = Math.min(...magnitudes)\r\n      \r\n      return {\r\n        vectorAnalyses: analyses,\r\n        batchStatistics: {\r\n          count: vectors.length,\r\n          averageMagnitude: avgMagnitude,\r\n          maxMagnitude,\r\n          minMagnitude,\r\n          totalMagnitude: magnitudes.reduce((sum, mag) => sum + mag, 0)\r\n        },\r\n        timestamp: new Date()\r\n      }\r\n    }, 'Batch Analysis')\r\n  }\r\n  \r\n  const calculateSimilarityMatrix = async (vectors) => {\r\n    return executeOperation(async () => {\r\n      if (!vectors || !Array.isArray(vectors)) {\r\n        throw new Error('Array of vectors is required for similarity matrix')\r\n      }\r\n      \r\n      const n = vectors.length\r\n      const matrix = Array(n).fill().map(() => Array(n).fill(0))\r\n      \r\n      for (let i = 0; i < n; i++) {\r\n        for (let j = 0; j < n; j++) {\r\n          if (i === j) {\r\n            matrix[i][j] = 1 // Self-similarity is 1\r\n          } else {\r\n            matrix[i][j] = vectorOperations.cosineSimilarity(\r\n              vectors[i].components,\r\n              vectors[j].components\r\n            )\r\n          }\r\n        }\r\n      }\r\n      \r\n      return {\r\n        matrix,\r\n        vectors: vectors.map(v => ({ id: v.id, label: v.label || v.id })),\r\n        timestamp: new Date()\r\n      }\r\n    }, 'Calculate Similarity Matrix')\r\n  }\r\n  \r\n  // Utility functions\r\n  const clearHistory = () => {\r\n    operationHistory.value = []\r\n  }\r\n  \r\n  const clearError = () => {\r\n    lastError.value = null\r\n  }\r\n  \r\n  const getOperationHistory = (limit = 10) => {\r\n    return operationHistory.value.slice(0, limit)\r\n  }\r\n  \r\n  const undoLastOperation = () => {\r\n    if (operationHistory.value.length > 0) {\r\n      const lastOp = operationHistory.value[0]\r\n      operationHistory.value = operationHistory.value.slice(1)\r\n      return lastOp\r\n    }\r\n    return null\r\n  }\r\n  \r\n  return {\r\n    // Reactive state\r\n    isCalculating,\r\n    lastError,\r\n    operationHistory,\r\n    \r\n    // Computed properties\r\n    selectedVector,\r\n    allVectors,\r\n    currentDimensions,\r\n    \r\n    // Vector creation\r\n    createRandomVector,\r\n    createZeroVector,\r\n    createUnitVector,\r\n    createNormalVector,\r\n    \r\n    // Vector arithmetic\r\n    addVectors,\r\n    subtractVectors,\r\n    scaleVector,\r\n    normalizeVector,\r\n    \r\n    // Vector analysis\r\n    calculateDotProduct,\r\n    calculateCosineSimilarity,\r\n    calculateDistance,\r\n    analyzeVector,\r\n    \r\n    // Batch operations\r\n    analyzeBatch,\r\n    calculateSimilarityMatrix,\r\n    \r\n    // Utility functions\r\n    clearHistory,\r\n    clearError,\r\n    getOperationHistory,\r\n    undoLastOperation\r\n  }\r\n} ","<template>\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-icon\">{{ icon }}</div>\r\n    <div class=\"stat-info\">\r\n      <div class=\"stat-value\">{{ value }}</div>\r\n      <div class=\"stat-label\">{{ label }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps({\r\n  icon: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  value: {\r\n    type: [String, Number],\r\n    required: true\r\n  },\r\n  label: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.stat-card {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  padding: 1.5rem;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 8px;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.stat-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);\r\n  background: rgba(255, 255, 255, 0.08);\r\n}\r\n\r\n.stat-icon {\r\n  font-size: 2rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n.stat-info {\r\n  flex: 1;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 1.8rem;\r\n  font-weight: 700;\r\n  color: #667eea;\r\n  margin-bottom: 0.2rem;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .stat-card {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .stat-icon {\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  .stat-value {\r\n    font-size: 1.4rem;\r\n  }\r\n  \r\n  .stat-label {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <div class=\"analysis-overview-tab\">\r\n    <h4>Vector Overview</h4>\r\n    <div class=\"overview-grid\">\r\n      <StatCard label=\"Magnitude\" :value=\"stats.magnitude.toFixed(4)\" icon=\"📏\" />\r\n      <StatCard label=\"Dimensions\" :value=\"stats.dimensions\" icon=\"📐\" />\r\n      <StatCard label=\"Sparsity\" :value=\"`${(stats.sparsity * 100).toFixed(2)}%`\" icon=\"✨\" />\r\n      <StatCard label=\"Entropy\" :value=\"stats.entropy.toFixed(4)\" icon=\"🌀\" />\r\n      <StatCard label=\"Effective Dim.\" :value=\"stats.effectiveDimensionality.toFixed(2)\" icon=\"🌐\" />\r\n      <StatCard label=\"Info Density\" :value=\"`${(stats.informationDensity * 100).toFixed(2)}%`\" icon=\" densely\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport StatCard from '../../StatCard.vue'\r\n\r\ndefineProps({\r\n  stats: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.analysis-overview-tab {\r\n  padding: 1rem 0;\r\n}\r\n.overview-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n  gap: 1rem;\r\n}\r\n</style> ","<template>\r\n  <div class=\"component-analysis-tab\">\r\n    <div class=\"component-insights\">\r\n      <StatCard label=\"Positive\" :value=\"stats.componentInsights.positiveCount\" icon=\"➕\" />\r\n      <StatCard label=\"Negative\" :value=\"stats.componentInsights.negativeCount\" icon=\"➖\" />\r\n      <StatCard label=\"Zeros\" :value=\"stats.componentInsights.zeroCount\" icon=\"⭕\" />\r\n    </div>\r\n    \r\n    <h4>Component Values</h4>\r\n    <div class=\"component-list-container\">\r\n      <ul class=\"component-list\">\r\n        <li v-for=\"(component, index) in components\" :key=\"index\">\r\n          <span class=\"component-index\">{{ index }}:</span>\r\n          <span class=\"component-value\">{{ component.toFixed(4) }}</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport StatCard from '../../StatCard.vue'\r\n\r\ndefineProps({\r\n  stats: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  components: {\r\n    type: Array,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.component-analysis-tab {\r\n  padding: 1rem 0;\r\n}\r\n.component-insights {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 2rem;\r\n}\r\n.component-list-container {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n}\r\n.component-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.component-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.3rem 0.5rem;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n}\r\n.component-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n.component-index {\r\n  font-weight: bold;\r\n  color: #888;\r\n}\r\n.component-value {\r\n  font-family: 'Courier New', Courier, monospace;\r\n}\r\n</style> ","<template>\r\n  <div class=\"advanced-stats-tab\">\r\n    <h4>Statistical Properties</h4>\r\n    <ul class=\"stats-list\">\r\n      <li>\r\n        <span class=\"stat-label\">Mean</span>\r\n        <span class=\"stat-value\">{{ stats.mean.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Variance</span>\r\n        <span class=\"stat-value\">{{ stats.variance.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Standard Deviation</span>\r\n        <span class=\"stat-value\">{{ stats.standardDeviation.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Min Value</span>\r\n        <span class=\"stat-value\">{{ stats.min.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Max Value</span>\r\n        <span class=\"stat-value\">{{ stats.max.toFixed(4) }}</span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps({\r\n  stats: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.advanced-stats-tab {\r\n  padding: 1rem 0;\r\n}\r\n.stats-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  background: rgba(0,0,0,0.1);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n}\r\n.stats-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.75rem 0.5rem;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n}\r\n.stats-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n.stat-label {\r\n  color: #bbb;\r\n}\r\n.stat-value {\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n</style> ","<template>\r\n  <div class=\"individual-analysis-tab\">\r\n    <div v-if=\"selectedVector && vectorStats\">\r\n      <div class=\"vector-title\">\r\n        <h3>Analysis for Vector: <strong>{{ selectedVector.id }}</strong></h3>\r\n      </div>\r\n      \r\n      <div class=\"sub-tabs\">\r\n        <button \r\n          v-for=\"tab in subTabs\" \r\n          :key=\"tab.id\"\r\n          class=\"sub-tab-btn\" \r\n          :class=\"{ active: activeSubTab === tab.id }\"\r\n          @click=\"activeSubTab = tab.id\"\r\n        >\r\n          {{ tab.label }}\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"sub-tab-content\">\r\n        <AnalysisOverview v-if=\"activeSubTab === 'overview'\" :stats=\"vectorStats\" />\r\n        <ComponentAnalysis v-if=\"activeSubTab === 'components'\" :stats=\"vectorStats\" :components=\"selectedVector.components\" />\r\n        <AdvancedStats v-if=\"activeSubTab === 'advanced'\" :stats=\"vectorStats\" />\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"no-vector-selected\">\r\n      <p>Select a vector to see its individual analysis.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, watch, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\nimport { useVectorOperations } from '../../composables/useVectorOperations'\r\nimport AnalysisOverview from './individual/AnalysisOverview.vue'\r\nimport ComponentAnalysis from './individual/ComponentAnalysis.vue'\r\nimport AdvancedStats from './individual/AdvancedStats.vue'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst vectorOps = useVectorOperations()\r\n\r\nconst selectedVector = computed(() => vectorStore.selectedVector)\r\nconst vectorStats = ref(null)\r\nconst activeSubTab = ref('overview')\r\n\r\nconst subTabs = ref([\r\n  { id: 'overview', label: 'Overview' },\r\n  { id: 'components', label: 'Component Analysis' },\r\n  { id: 'advanced', label: 'Advanced Stats' }\r\n])\r\n\r\nconst analyzeVector = async () => {\r\n  if (selectedVector.value) {\r\n    const stats = await vectorOps.analyzeVector(selectedVector.value)\r\n    vectorStats.value = stats\r\n  } else {\r\n    vectorStats.value = null\r\n  }\r\n}\r\n\r\nwatch(selectedVector, (newVector) => {\r\n  if (newVector) {\r\n    analyzeVector()\r\n    activeSubTab.value = 'overview' // Reset to overview when vector changes\r\n  } else {\r\n    vectorStats.value = null\r\n  }\r\n})\r\n\r\nonMounted(() => {\r\n  if (selectedVector.value) {\r\n    analyzeVector()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.individual-analysis-tab {\r\n  padding: 1rem;\r\n}\r\n\r\n.vector-title {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.no-vector-selected {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #888;\r\n}\r\n\r\n.sub-tabs {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.sub-tab-btn {\r\n  padding: 0.8rem 1.2rem;\r\n  border: none;\r\n  background: transparent;\r\n  color: #aaa;\r\n  border-bottom: 2px solid transparent;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-weight: 500;\r\n}\r\n\r\n.sub-tab-btn.active {\r\n  color: #667eea;\r\n  border-bottom-color: #667eea;\r\n}\r\n\r\n.sub-tab-btn:hover:not(.active) {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  color: #fff;\r\n}\r\n\r\n.sub-tab-content {\r\n  min-height: 250px;\r\n}\r\n</style> ","<template>\r\n  <div class=\"relationships-tab\">\r\n    <div v-if=\"selectedVector\">\r\n      <h3>Relationships for Vector: <strong>{{ selectedVector.id }}</strong></h3>\r\n      <div v-if=\"relationships.length > 0\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Target Vector</th>\r\n              <th>Cosine Similarity</th>\r\n              <th>Euclidean Distance</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"rel in relationships\" :key=\"rel.id\">\r\n              <td>{{ rel.id }}</td>\r\n              <td>{{ rel.cosineSimilarity.toFixed(4) }}</td>\r\n              <td>{{ rel.euclideanDistance.toFixed(4) }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div v-else>\r\n        <p>Calculating relationships...</p>\r\n      </div>\r\n    </div>\r\n    <div v-else>\r\n      <p>Select a vector to see its relationships.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, watch, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\nimport { useVectorOperations } from '../../composables/useVectorOperations'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst vectorOps = useVectorOperations()\r\n\r\nconst selectedVector = computed(() => vectorStore.selectedVector)\r\nconst relationships = ref([])\r\n\r\nconst calculateRelationships = async () => {\r\n  if (selectedVector.value) {\r\n    relationships.value = []\r\n    const otherVectors = vectorStore.vectors.filter(v => v.id !== selectedVector.value.id)\r\n    const rels = await Promise.all(otherVectors.map(async (otherVector) => {\r\n      const cosineSimilarity = await vectorOps.calculateCosineSimilarity(selectedVector.value, otherVector)\r\n      const euclideanDistance = await vectorOps.calculateDistance(selectedVector.value, otherVector)\r\n      return {\r\n        id: otherVector.id,\r\n        cosineSimilarity,\r\n        euclideanDistance\r\n      }\r\n    }))\r\n    relationships.value = rels\r\n  } else {\r\n    relationships.value = []\r\n  }\r\n}\r\n\r\nwatch(selectedVector, calculateRelationships)\r\nonMounted(calculateRelationships)\r\n</script>\r\n\r\n<style scoped>\r\n.relationships-tab {\r\n  padding: 1rem;\r\n}\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\nth, td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\nth {\r\n  background-color: #f2f2f2;\r\n  text-align: left;\r\n}\r\n</style> ","<template>\r\n  <div class=\"clustering-tab\">\r\n    <div class=\"controls\">\r\n      <label for=\"k-value\">Number of Clusters (k):</label>\r\n      <input type=\"number\" id=\"k-value\" v-model.number=\"k\" min=\"1\" :max=\"maxK\">\r\n      <button @click=\"runClustering\" :disabled=\"isClustering || k < 1\">\r\n        {{ isClustering ? 'Clustering...' : 'Run K-Means' }}\r\n      </button>\r\n    </div>\r\n    <div v-if=\"clusters\" class=\"results\">\r\n      <h4>Clustering Results</h4>\r\n      <div v-for=\"(cluster, index) in clusters.clusters\" :key=\"index\" class=\"cluster\">\r\n        <h5>Cluster {{ index + 1 }}</h5>\r\n        <ul>\r\n          <li v-for=\"vector in cluster\" :key=\"vector.id\">\r\n            {{ vector.id }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useClustering } from '../../composables/useClustering'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\n\r\nconst { clusters, isClustering, runKMeans } = useClustering()\r\nconst vectorStore = useVectorStore()\r\n\r\nconst k = ref(3)\r\nconst maxK = computed(() => vectorStore.vectors.length)\r\n\r\nconst runClustering = () => {\r\n  if (k.value > 0) {\r\n    runKMeans(k.value)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.clustering-tab {\r\n  padding: 1rem;\r\n}\r\n.controls {\r\n  margin-bottom: 1rem;\r\n}\r\n.cluster {\r\n  margin-bottom: 1rem;\r\n  padding: 0.5rem;\r\n  border: 1px solid #eee;\r\n  border-radius: 4px;\r\n}\r\nul {\r\n  padding-left: 20px;\r\n}\r\n</style> ","import { ref } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { vectorStatistics } from '../utils/vectorUtils'\r\n\r\nexport function useClustering() {\r\n  const vectorStore = useVectorStore()\r\n  const clusters = ref(null)\r\n  const isClustering = ref(false)\r\n\r\n  const runKMeans = async (k) => {\r\n    isClustering.value = true\r\n    clusters.value = null\r\n    try {\r\n      const vectors = vectorStore.vectors.map(v => v.components)\r\n      const result = await new Promise((resolve) => {\r\n          setTimeout(() => {\r\n            const res = vectorStatistics.kmeans(vectors, k)\r\n            resolve(res)\r\n          }, 0)\r\n      })\r\n      \r\n      // Map original vector objects to clusters\r\n      const vectorMap = new Map(vectorStore.vectors.map(v => [JSON.stringify(v.components), v]));\r\n      const clusteredVectors = result.clusters.map(cluster => \r\n        cluster.map(vectorComponents => vectorMap.get(JSON.stringify(vectorComponents)))\r\n      );\r\n\r\n      clusters.value = {\r\n        centroids: result.centroids,\r\n        clusters: clusteredVectors,\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Clustering failed:', error)\r\n      clusters.value = null\r\n    } finally {\r\n      isClustering.value = false\r\n    }\r\n  }\r\n\r\n  return {\r\n    clusters,\r\n    isClustering,\r\n    runKMeans\r\n  }\r\n} ","<template>\r\n  <div class=\"statistics-tab\">\r\n    <h4>Global Vector Statistics</h4>\r\n    <div v-if=\"stats\">\r\n      <p><strong>Total Vectors:</strong> {{ stats.count }}</p>\r\n      <p><strong>Dimensions:</strong> {{ stats.dimensions }}</p>\r\n      \r\n      <h5>Mean Vector</h5>\r\n      <p class=\"vector-display\">{{ formatVector(stats.meanVector) }}</p>\r\n\r\n      <h5>Magnitude Distribution</h5>\r\n      <p>Mean: {{ stats.magnitude.mean.toFixed(4) }}, StdDev: {{ stats.magnitude.stdDev.toFixed(4) }}</p>\r\n\r\n    </div>\r\n    <div v-else>\r\n      <p>Calculating statistics...</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\nimport { vectorStatistics } from '../../utils/vectorUtils'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst stats = ref(null)\r\n\r\nconst calculateGlobalStats = () => {\r\n  const vectors = vectorStore.vectors.map(v => v.components)\r\n  if (vectors.length === 0) return\r\n\r\n  const count = vectors.length\r\n  const dimensions = vectors[0].length\r\n  \r\n  // Mean vector\r\n  const meanVector = Array(dimensions).fill(0)\r\n  vectors.forEach(vector => {\r\n    for (let i = 0; i < dimensions; i++) {\r\n      meanVector[i] += vector[i]\r\n    }\r\n  })\r\n  for (let i = 0; i < dimensions; i++) {\r\n    meanVector[i] /= count\r\n  }\r\n\r\n  // Magnitude distribution\r\n  const magnitudes = vectors.map(v => vectorStatistics.calculate(v).magnitude)\r\n  const magMean = vectorStatistics.mean(magnitudes)\r\n  const magVariance = vectorStatistics.variance(magnitudes, magMean)\r\n  const magStdDev = Math.sqrt(magVariance)\r\n\r\n  stats.value = {\r\n    count,\r\n    dimensions,\r\n    meanVector,\r\n    magnitude: {\r\n      mean: magMean,\r\n      stdDev: magStdDev\r\n    }\r\n  }\r\n}\r\n\r\nconst formatVector = (vector) => {\r\n  return '[' + vector.map(c => c.toFixed(2)).join(', ') + ']'\r\n}\r\n\r\nonMounted(calculateGlobalStats)\r\n</script>\r\n\r\n<style scoped>\r\n.statistics-tab {\r\n  padding: 1rem;\r\n}\r\n.vector-display {\r\n  word-break: break-all;\r\n}\r\n</style> ","/**\r\n * Interpolates between two colors.\r\n * @param {string} color1 - The start color (hex).\r\n * @param {string} color2 - The end color (hex).\r\n * @param {number} factor - The interpolation factor (0 to 1).\r\n * @returns {string} The interpolated hex color.\r\n */\r\nfunction interpolateColor(color1, color2, factor) {\r\n  const r1 = parseInt(color1.substring(1, 3), 16);\r\n  const g1 = parseInt(color1.substring(3, 5), 16);\r\n  const b1 = parseInt(color1.substring(5, 7), 16);\r\n\r\n  const r2 = parseInt(color2.substring(1, 3), 16);\r\n  const g2 = parseInt(color2.substring(3, 5), 16);\r\n  const b2 = parseInt(color2.substring(5, 7), 16);\r\n\r\n  const r = Math.round(r1 + factor * (r2 - r1));\r\n  const g = Math.round(g1 + factor * (g2 - g1));\r\n  const b = Math.round(b1 + factor * (b2 - b1));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n * Generates a heatmap color for a value within a given range.\r\n * @param {number} value - The value to get a color for.\r\n * @param {number} min - The minimum value in the range.\r\n * @param {number} max - The maximum value in the range.\r\n * @returns {string} The calculated hex color.\r\n */\r\nexport function getHeatmapColor(value, min, max) {\r\n  if (min === max) {\r\n    return '#667eea'; // Return a neutral color if all values are the same\r\n  }\r\n  const factor = (value - min) / (max - min);\r\n  // Interpolate from a cool blue to a hot red\r\n  return interpolateColor('#4ecdc4', '#ff6b6b', factor);\r\n} ","<template>\r\n  <g \r\n    :transform=\"`translate(${element.position.x}, ${element.position.y})`\"\r\n    @click=\"onClick\"\r\n    @mouseenter=\"onMouseEnter\"\r\n    @mouseleave=\"onMouseLeave\"\r\n    class=\"periodic-element\"\r\n    :class=\"{ \r\n      'is-selected': isSelected, \r\n      'is-placeholder': element.isPlaceholder, \r\n      'is-present': element.present,\r\n      'is-highlighted': isHighlighted\r\n    }\"\r\n  >\r\n    <rect \r\n      class=\"element-rect\"\r\n      :width=\"config.elementWidth\"\r\n      :height=\"config.elementHeight\"\r\n      :fill=\"fillColor\"\r\n    />\r\n    <text \r\n      :x=\"config.elementWidth / 2\" \r\n      :y=\"config.elementHeight / 2 - 2\"\r\n      text-anchor=\"middle\" \r\n      alignment-baseline=\"central\"\r\n      class=\"element-name\"\r\n      :style=\"{ fontSize: dynamicFontSize }\"\r\n    >\r\n      {{ element.name }}\r\n    </text>\r\n    <text \r\n      :x=\"config.elementWidth / 2\" \r\n      :y=\"config.elementHeight / 2 + 18\" \r\n      :font-size=\"config.fontSize\"\r\n      text-anchor=\"middle\"\r\n      class=\"element-symbol\"\r\n    >\r\n      {{ element.symbol }}\r\n    </text>\r\n    <text \r\n      :x=\"4\"\r\n      :y=\"config.fontSize + 2\"\r\n      :font-size=\"config.fontSize\"\r\n      class=\"atomic-number\"\r\n    >\r\n      {{ element.atomicNumber }}\r\n    </text>\r\n  </g>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\nimport { useVectorStore } from '../../stores/vectorStore';\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nimport { getHeatmapColor } from '../../utils/colors';\r\n\r\nconst props = defineProps({\r\n  element: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n  config: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst vectorStore = useVectorStore();\r\nconst { activeHeatmap, dataRanges, highlightedElementIds } = usePeriodicTable();\r\n\r\nconst isSelected = computed(() => {\r\n  return vectorStore.selectedVectorIds.has(props.element.id);\r\n});\r\n\r\nconst isHighlighted = computed(() => {\r\n  return highlightedElementIds.value.has(props.element.id);\r\n});\r\n\r\nconst fillColor = computed(() => {\r\n  if (props.element.isPlaceholder) return '#333';\r\n  if (activeHeatmap.value === 'none' || !props.element.present) {\r\n    return props.element.color;\r\n  }\r\n  \r\n  const property = activeHeatmap.value; // e.g., 'atomicMass'\r\n  const value = props.element[property];\r\n  const range = dataRanges.value[property === 'atomicMass' ? 'magnitude' : property];\r\n\r\n  if (range && value !== undefined) {\r\n    return getHeatmapColor(value, range.min, range.max);\r\n  }\r\n  \r\n  return props.element.color;\r\n});\r\n\r\nconst dynamicFontSize = computed(() => {\r\n  const baseSize = props.config.symbolFontSize || 16;\r\n  const nameLength = props.element.name.length;\r\n  if (nameLength > 7) {\r\n    const scaleFactor = Math.max(0.5, 1 - (nameLength - 7) * 0.1);\r\n    return `${baseSize * scaleFactor}px`;\r\n  }\r\n  return `${baseSize}px`;\r\n});\r\n\r\nconst emit = defineEmits(['showTooltip', 'hideTooltip']);\r\n\r\nconst onClick = (event) => {\r\n  const isMultiSelect = event.ctrlKey || event.metaKey;\r\n  vectorStore.selectVector(props.element.id, isMultiSelect);\r\n}\r\n\r\nconst onMouseEnter = (event) => {\r\n  if (!props.element.isPlaceholder) {\r\n    emit('showTooltip', { event, element: props.element });\r\n  }\r\n}\r\n\r\nconst onMouseLeave = () => {\r\n  emit('hideTooltip');\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n@keyframes pulse {\r\n  0% {\r\n    box-shadow: 0 0 20px #f39c12;\r\n  }\r\n  50% {\r\n    box-shadow: 0 0 30px #f39c12;\r\n  }\r\n  100% {\r\n    box-shadow: 0 0 20px #f39c12;\r\n  }\r\n}\r\n\r\n.periodic-element {\r\n  cursor: pointer;\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\n.periodic-element.is-placeholder {\r\n  opacity: 0.3;\r\n  cursor: default;\r\n}\r\n\r\n.periodic-element.is-placeholder:hover {\r\n  opacity: 0.6;\r\n}\r\n\r\n.periodic-element.is-placeholder .element-rect {\r\n  stroke-dasharray: 3, 3;\r\n}\r\n\r\n.element-rect {\r\n  rx: 6;\r\n  ry: 6;\r\n  stroke-width: 1px;\r\n  stroke: rgba(255,255,255,0.2);\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\n.periodic-element.is-present .element-rect {\r\n  stroke: rgba(102, 126, 234, 0.7);\r\n  stroke-width: 1.5px;\r\n  box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);\r\n}\r\n\r\n.periodic-element.is-present:hover .element-rect {\r\n  stroke-width: 2px;\r\n  stroke: #82a2ff;\r\n  box-shadow: 0 0 15px rgba(102, 126, 234, 0.8);\r\n}\r\n\r\n.periodic-element.is-highlighted .element-rect {\r\n  stroke: #10b981;\r\n  stroke-width: 2.5px;\r\n}\r\n\r\n.periodic-element.is-selected .element-rect {\r\n  stroke: #f39c12;\r\n  stroke-width: 3px;\r\n  transform: scale(1.05);\r\n  transform-origin: center;\r\n  box-shadow: 0 0 20px #f39c12;\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n.element-name {\r\n  font-weight: 700;\r\n  fill: white;\r\n  pointer-events: none;\r\n}\r\n.element-symbol {\r\n  font-size: 10px;\r\n  opacity: 0.7;\r\n  fill: white;\r\n  pointer-events: none;\r\n}\r\n.atomic-number {\r\n  font-size: 10px;\r\n  font-weight: 500;\r\n  opacity: 0.9;\r\n  fill: white;\r\n  pointer-events: none;\r\n}\r\n</style> ","<template>\r\n  <div class=\"periodic-tooltip\" :style=\"positionStyles\">\r\n    <div class=\"tooltip-content\">\r\n      <div class=\"tooltip-header\">\r\n        <div class=\"tooltip-symbol\" :style=\"{ color: element.color }\">{{ element.symbol }}</div>\r\n        <div>\r\n          <div class=\"tooltip-name\">{{ element.name }}</div>\r\n          <div class=\"tooltip-quantum-key\">Quantum Profile: {{ element.quantumKey }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"tooltip-body\">\r\n        <div><strong>Magnitude:</strong> {{ element.atomicMass }}</div>\r\n        <div><strong>Entropy:</strong> {{ element.entropy }}</div>\r\n        <div><strong>Stability:</strong> {{ element.stability }}</div>\r\n      </div>\r\n      <div class=\"tooltip-footer\">\r\n        <div class=\"quantum-makeup-label\">Quantum Makeup:</div>\r\n        <div class=\"quantum-bar\">\r\n          <div \r\n            class=\"quantum-bar-item\"\r\n            :style=\"{ width: `${excitPct}%`, background: '#ff6b6b' }\" \r\n            :title=\"`Excitatory: ${element.excitatory}`\"\r\n          ></div>\r\n          <div \r\n            class=\"quantum-bar-item\"\r\n            :style=\"{ width: `${inhibPct}%`, background: '#4ecdc4' }\" \r\n            :title=\"`Inhibitory: ${element.inhibitory}`\"\r\n          ></div>\r\n          <div \r\n            class=\"quantum-bar-item\"\r\n            :style=\"{ width: `${neuPct}%`, background: '#95a5a6' }\" \r\n            :title=\"`Neutral: ${element.neutral}`\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"element.vectors && element.vectors.length > 1\" class=\"tooltip-footer\">\r\n        <strong>Stacked Vectors ({{ element.vectors.length }}):</strong>\r\n        <div class=\"vector-id-list\">\r\n          {{ element.vectors.map(v => v.id).join(', ') }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  element: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  position: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n});\r\n\r\nconst positionStyles = computed(() => ({\r\n  top: props.position.top,\r\n  left: props.position.left,\r\n  transform: 'translate(10px, 0)' // Add small offset\r\n}));\r\n\r\nconst quantumTotal = computed(() => props.element.excitatory + props.element.inhibitory + props.element.neutral);\r\nconst excitPct = computed(() => quantumTotal.value > 0 ? (props.element.excitatory / quantumTotal.value * 100).toFixed(1) : 0);\r\nconst inhibPct = computed(() => quantumTotal.value > 0 ? (props.element.inhibitory / quantumTotal.value * 100).toFixed(1) : 0);\r\nconst neuPct = computed(() => quantumTotal.value > 0 ? (props.element.neutral / quantumTotal.value * 100).toFixed(1) : 0);\r\n</script>\r\n\r\n<style scoped>\r\n.periodic-tooltip {\r\n  position: absolute;\r\n  background: rgba(20, 20, 30, 0.95);\r\n  color: white;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  font-size: 13px;\r\n  pointer-events: none;\r\n  z-index: 1000;\r\n  box-shadow: 0 5px 15px rgba(0,0,0,0.4);\r\n  max-width: 240px;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\r\n  transition: opacity 0.2s;\r\n}\r\n.tooltip-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid rgba(255,255,255,0.1);\r\n}\r\n.tooltip-symbol {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-right: 8px;\r\n  line-height: 1;\r\n}\r\n.tooltip-name {\r\n  font-weight: 600;\r\n}\r\n.tooltip-quantum-key {\r\n  font-size: 11px;\r\n  opacity: 0.7;\r\n}\r\n.tooltip-body {\r\n  margin-bottom: 8px;\r\n}\r\n.tooltip-body > div {\r\n  margin-bottom: 2px;\r\n}\r\n.tooltip-footer {\r\n  margin-top: 8px;\r\n  padding-top: 8px;\r\n  border-top: 1px solid rgba(255,255,255,0.1);\r\n}\r\n.tooltip-footer strong {\r\n  font-size: 12px;\r\n  color: #a0aec0;\r\n}\r\n.vector-id-list {\r\n  font-size: 11px;\r\n  opacity: 0.8;\r\n  max-height: 40px;\r\n  overflow-y: auto;\r\n  word-break: break-all;\r\n  margin-top: 4px;\r\n}\r\n.quantum-makeup-label {\r\n  font-weight: 600;\r\n  margin-bottom: 4px;\r\n}\r\n.quantum-bar {\r\n  width: 100%;\r\n  height: 10px;\r\n  background: #333;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  overflow: hidden;\r\n}\r\n</style> ","<template>\r\n  <div class=\"periodic-table-container-wrapper\">\r\n    <div class=\"periodic-table-container\" ref=\"tableContainerRef\">\r\n      <svg \r\n        class=\"periodic-table-svg\" \r\n        :width=\"tableWidth\" \r\n        :height=\"tableHeight\"\r\n      >\r\n        <text x=\"20\" y=\"20\" class=\"table-title\">🧪 Vector Periodic Table</text>\r\n        <g>\r\n          <text v-for=\"i in tableDimensions.rows\" :key=\"`row-label-${i-1}`\"\r\n            :x=\"15\"\r\n            :y=\"40 + (i - 1) * (config.elementHeight + config.padding + 15) + config.elementHeight / 2 + 5\"\r\n            class=\"axis-label\"\r\n          >\r\n            E{{ i - 1 }}\r\n          </text>\r\n        </g>\r\n        <g>\r\n           <text v-for=\"i in tableDimensions.cols\" :key=\"`col-label-${i-1}`\"\r\n            :x=\"50 + (i - 1) * (config.elementWidth + config.padding + 15) + config.elementWidth / 2\"\r\n            :y=\"25\"\r\n            class=\"axis-label\"\r\n          >\r\n            I{{ i - 1 }}\r\n          </text>\r\n        </g>\r\n        <PeriodicElement \r\n          v-for=\"element in visibleElements\" \r\n          :key=\"`${element.id}-${element.isPlaceholder}`\"\r\n          :element=\"element\"\r\n          :config=\"config\"\r\n          @showTooltip=\"onShowTooltip\"\r\n          @hideTooltip=\"onHideTooltip\"\r\n        />\r\n      </svg>\r\n    </div>\r\n    <PeriodicElementTooltip \r\n      v-if=\"tooltip.visible\"\r\n      :element=\"tooltip.element\"\r\n      :position=\"tooltip.position\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nimport PeriodicElement from './PeriodicElement.vue';\r\nimport PeriodicElementTooltip from './PeriodicElementTooltip.vue';\r\n\r\nconst { periodicData, config, tableDimensions, showPlaceholders } = usePeriodicTable();\r\nconst tableContainerRef = ref(null);\r\n\r\nconst visibleElements = computed(() => {\r\n  if (showPlaceholders.value) {\r\n    return periodicData.value;\r\n  }\r\n  return periodicData.value.filter(el => el.present);\r\n});\r\n\r\nconst tableWidth = computed(() => {\r\n  if (!periodicData.value.length) return '100%';\r\n  return 50 + tableDimensions.value.cols * (config.value.elementWidth + config.value.padding + 15) + 50;\r\n});\r\n\r\nconst tableHeight = computed(() => {\r\n  if (!periodicData.value.length) return 200;\r\n  return 40 + tableDimensions.value.rows * (config.value.elementHeight + config.value.padding + 15) + 40;\r\n});\r\n\r\nconst tooltip = ref({\r\n  visible: false,\r\n  element: null,\r\n  position: { top: '0px', left: '0px' }\r\n});\r\n\r\nconst onShowTooltip = ({ event, element }) => {\r\n  tooltip.value.element = element;\r\n  tooltip.value.visible = true;\r\n  \r\n  const rect = event.target.getBoundingClientRect();\r\n  const containerRect = tableContainerRef.value?.getBoundingClientRect() ?? { top: 0, left: 0 };\r\n  \r\n  tooltip.value.position = {\r\n    left: `${rect.right - containerRect.left}px`,\r\n    top: `${rect.top - containerRect.top}px`\r\n  };\r\n};\r\n\r\nconst onHideTooltip = () => {\r\n  tooltip.value.visible = false;\r\n  tooltip.value.element = null;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.periodic-table-container-wrapper {\r\n  width: 100%;\r\n  flex-grow: 1;\r\n  background: rgba(0,0,0,0.1);\r\n  position: relative; /* For tooltip positioning */\r\n  overflow: hidden;\r\n}\r\n.periodic-table-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n.periodic-table-svg {\r\n  display: block;\r\n  min-width: 100%;\r\n  min-height: 100%;\r\n}\r\n.table-title {\r\n  fill: white;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n}\r\n.axis-label {\r\n  fill: #667eea;\r\n  font-size: 12px;\r\n  text-anchor: middle;\r\n}\r\n</style> ","<template>\r\n  <div class=\"sparkline-container\">\r\n    <svg :viewBox=\"`0 0 ${width} ${height}`\" preserveAspectRatio=\"none\">\r\n      <path :d=\"path\" class=\"sparkline-path\" />\r\n      <line :x1=\"0\" :y1=\"zeroAxis\" :x2=\"width\" :y2=\"zeroAxis\" class=\"zero-axis\" />\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  components: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n  width: {\r\n    type: Number,\r\n    default: 100,\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 30,\r\n  },\r\n});\r\n\r\nconst path = computed(() => {\r\n  if (!props.components || props.components.length === 0) return '';\r\n  \r\n  const values = props.components;\r\n  const max = Math.max(...values.map(Math.abs));\r\n  if (max === 0) { // Handle case where all components are 0\r\n    const y = props.height / 2;\r\n    return `M 0,${y} L ${props.width},${y}`;\r\n  }\r\n\r\n  const scaleY = props.height / (max * 2);\r\n  const scaleX = props.width / (values.length - 1 || 1);\r\n\r\n  const points = values.map((val, i) => {\r\n    const x = i * scaleX;\r\n    const y = (props.height / 2) - val * scaleY;\r\n    return `${x},${y}`;\r\n  });\r\n\r\n  return `M ${points.join(' L ')}`;\r\n});\r\n\r\nconst zeroAxis = computed(() => props.height / 2);\r\n</script>\r\n\r\n<style scoped>\r\n.sparkline-container {\r\n  width: 100%;\r\n  height: 40px;\r\n}\r\n\r\n.sparkline-path {\r\n  stroke: #667eea;\r\n  stroke-width: 1.5;\r\n  fill: none;\r\n  stroke-linecap: round;\r\n  stroke-linejoin: round;\r\n}\r\n\r\n.zero-axis {\r\n  stroke: rgba(255, 255, 255, 0.2);\r\n  stroke-width: 1;\r\n  stroke-dasharray: 2, 2;\r\n}\r\n</style> ","<template>\r\n  <div class=\"heatmap-controls\">\r\n    <label for=\"heatmap-select\">Heatmap:</label>\r\n    <select id=\"heatmap-select\" v-model=\"activeHeatmap\" class=\"styled-select\">\r\n      <option value=\"none\">None</option>\r\n      <option value=\"atomicMass\">Magnitude</option>\r\n      <option value=\"entropy\">Entropy</option>\r\n      <option value=\"stability\">Stability</option>\r\n    </select>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nconst { activeHeatmap } = usePeriodicTable();\r\n</script>\r\n\r\n<style scoped>\r\n.heatmap-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 1rem;\r\n  padding: 0 1rem;\r\n}\r\nlabel {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n.styled-select {\r\n  background-color: rgba(0,0,0,0.3);\r\n  color: white;\r\n  border: 1px solid rgba(255,255,255,0.2);\r\n  border-radius: 6px;\r\n  padding: 0.4rem 0.8rem;\r\n  font-size: 0.9rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n.styled-select:hover {\r\n  background-color: rgba(0,0,0,0.5);\r\n  border-color: #667eea;\r\n}\r\n</style> ","<template>\r\n  <div class=\"filter-controls\">\r\n    <div class=\"toggle-switch\">\r\n      <input type=\"checkbox\" id=\"show-placeholders\" v-model=\"showPlaceholders\" class=\"toggle-switch-checkbox\">\r\n      <label for=\"show-placeholders\" class=\"toggle-switch-label\">\r\n        <span class=\"toggle-switch-inner\" />\r\n        <span class=\"toggle-switch-switch\" />\r\n      </label>\r\n    </div>\r\n    <label for=\"show-placeholders\" class=\"toggle-label-text\">Show Undiscovered</label>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nconst { showPlaceholders } = usePeriodicTable();\r\n</script>\r\n\r\n<style scoped>\r\n.filter-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n}\r\n.toggle-label-text {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  color: rgba(255, 255, 255, 0.8);\r\n  cursor: pointer;\r\n}\r\n.toggle-switch {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 50px;\r\n  height: 28px;\r\n}\r\n.toggle-switch-checkbox {\r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n.toggle-switch-label {\r\n  display: block;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  height: 100%;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  border-radius: 14px;\r\n}\r\n.toggle-switch-inner {\r\n  display: block;\r\n  width: 200%;\r\n  margin-left: -100%;\r\n  transition: margin 0.2s ease-in 0s;\r\n}\r\n.toggle-switch-inner:before, .toggle-switch-inner:after {\r\n  display: block;\r\n  float: left;\r\n  width: 50%;\r\n  height: 28px;\r\n  padding: 0;\r\n  line-height: 28px;\r\n  font-size: 12px;\r\n  color: white;\r\n  box-sizing: border-box;\r\n}\r\n.toggle-switch-inner:before {\r\n  content: \"\";\r\n  padding-left: 10px;\r\n  background-color: #374151;\r\n}\r\n.toggle-switch-inner:after {\r\n  content: \"\";\r\n  padding-right: 10px;\r\n  background-color: #667eea;\r\n  text-align: right;\r\n}\r\n.toggle-switch-switch {\r\n  display: block;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin: 4px;\r\n  background: white;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 22px;\r\n  border-radius: 50%;\r\n  transition: all 0.2s ease-in 0s;\r\n}\r\n.toggle-switch-checkbox:checked + .toggle-switch-label .toggle-switch-inner {\r\n  margin-left: 0;\r\n}\r\n.toggle-switch-checkbox:checked + .toggle-switch-label .toggle-switch-switch {\r\n  right: 0px;\r\n}\r\n</style> ","<template>\r\n  <div class=\"highlight-controls\">\r\n    <span class=\"highlight-label\">Highlight Top 5:</span>\r\n    <div class=\"button-group\">\r\n      <button @click=\"setHighlight('atomicMass')\" title=\"Highest Magnitude\">Magnitude</button>\r\n      <button @click=\"setHighlight('excitatory')\" title=\"Most Excitatory\">Excitatory</button>\r\n      <button @click=\"setHighlight('inhibitory')\" title=\"Most Inhibitory\">Inhibitory</button>\r\n      <button @click=\"setHighlight('stability')\" title=\"Most Stable\">Stability</button>\r\n      <button @click=\"clearHighlight\" class=\"clear-btn\" title=\"Clear Highlight\">✖</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nconst { setHighlight, clearHighlight } = usePeriodicTable();\r\n</script>\r\n\r\n<style scoped>\r\n.highlight-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.highlight-label {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n.button-group {\r\n  display: flex;\r\n  background-color: rgba(0,0,0,0.3);\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n  border: 1px solid rgba(255,255,255,0.2);\r\n}\r\n.button-group button {\r\n  background-color: transparent;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.4rem 0.8rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n  border-left: 1px solid rgba(255,255,255,0.1);\r\n}\r\n.button-group button:first-child {\r\n  border-left: none;\r\n}\r\n.button-group button:hover {\r\n  background-color: #667eea;\r\n}\r\n.button-group button.clear-btn {\r\n  background-color: #ef4444;\r\n}\r\n.button-group button.clear-btn:hover {\r\n  background-color: #dc2626;\r\n}\r\n</style> ","<template>\r\n  <div class=\"periodic-table-tab-content\">\r\n    <div class=\"table-controls\">\r\n      <HeatmapControls />\r\n      <FilterControls />\r\n      <HighlightControls />\r\n    </div>\r\n    <PeriodicTable \r\n      v-if=\"vectorStore.vectors.length > 0\" \r\n      :key=\"vectorStore.vectors.length\"\r\n    />\r\n    <div class=\"info-panel-wrapper\">\r\n      <transition name=\"fade\" mode=\"out-in\">\r\n        <!-- Single Selection View -->\r\n        <div v-if=\"selectedElements.length === 1\" key=\"single-view\" class=\"selected-element-info-panel\">\r\n          <div class=\"panel-header\">\r\n            <span class=\"element-symbol\" :style=\"{ color: selectedElements[0].color }\">{{ selectedElements[0].symbol }}</span>\r\n            <h3>{{ selectedElements[0].name }}</h3>\r\n          </div>\r\n          <div class=\"panel-content\">\r\n            <div v-if=\"!selectedElements[0].isPlaceholder\" class=\"element-details-grid\">\r\n              <div class=\"details-column\">\r\n                <div class=\"info-grid\">\r\n                  <div><strong>ID:</strong> <span>{{ selectedElements[0].id }}</span></div>\r\n                  <div><strong>Magnitude:</strong> <span>{{ selectedElements[0].atomicMass }}</span></div>\r\n                  <div><strong>Entropy:</strong> <span>{{ selectedElements[0].entropy }}</span></div>\r\n                  <div><strong>Stability:</strong> <span>{{ selectedElements[0].stability }}</span></div>\r\n                </div>\r\n                <div class=\"quantum-details\">\r\n                  <h4>Quantum Profile</h4>\r\n                  <p><strong>Excitatory:</strong> {{ selectedElements[0].excitatory }}</p>\r\n                  <p><strong>Inhibitory:</strong> {{ selectedElements[0].inhibitory }}</p>\r\n                  <p><strong>Neutral:</strong> {{ selectedElements[0].neutral }}</p>\r\n                </div>\r\n              </div>\r\n              <div class=\"details-column\">\r\n                <div class=\"components-details\">\r\n                  <h4>Vector Components</h4>\r\n                  <div class=\"components-list\">\r\n                    <SparklineChart v-if=\"selectedElements[0].vector\" :components=\"selectedElements[0].vector.components\" />\r\n                  </div>\r\n                </div>\r\n                <div v-if=\"selectedElements[0].vectors && selectedElements[0].vectors.length > 1\" class=\"stacked-vectors-details\">\r\n                  <h4>Stacked Vectors ({{selectedElements[0].vectors.length}})</h4>\r\n                  <div class=\"stacked-vectors-list\">\r\n                    <p>Properties shown are averages for the stack.</p>\r\n                    <strong>IDs:</strong> {{ selectedElements[0].vectors.map(v => v.id).join(', ') }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div v-else class=\"placeholder-content\">\r\n              <div class=\"quantum-details\">\r\n                <h4>Quantum Profile</h4>\r\n                <p><strong>Excitatory:</strong> {{ selectedElements[0].excitatory }}</p>\r\n                <p><strong>Inhibitory:</strong> {{ selectedElements[0].inhibitory }}</p>\r\n                <p><strong>Neutral:</strong> {{ selectedElements[0].neutral }}</p>\r\n              </div>\r\n              <div class=\"undiscovered-text\">\r\n                This quantum state is not present in the current vector set.\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Two-Element Comparison View -->\r\n        <div v-else-if=\"selectedElements.length === 2\" key=\"comparison-view\" class=\"comparison-panel\">\r\n          <div class=\"comparison-column\" v-for=\"element in selectedElements\" :key=\"element.id\">\r\n            <div class=\"panel-header\">\r\n              <span class=\"element-symbol\" :style=\"{ color: element.color }\">{{ element.symbol }}</span>\r\n              <h3>{{ element.name }}</h3>\r\n            </div>\r\n            <div class=\"info-grid\">\r\n              <div><strong>Magnitude:</strong> <span :class=\"getComparisonClass('atomicMass', 0, 1)\">{{ element.atomicMass }}</span></div>\r\n              <div><strong>Entropy:</strong> <span :class=\"getComparisonClass('entropy', 0, 1)\">{{ element.entropy }}</span></div>\r\n              <div><strong>Stability:</strong> <span :class=\"getComparisonClass('stability', 0, 1)\">{{ element.stability }}</span></div>\r\n            </div>\r\n             <div class=\"quantum-details\">\r\n              <h4>Quantum Profile</h4>\r\n              <p><strong>Excitatory:</strong> <span :class=\"getComparisonClass('excitatory', 0, 1)\">{{ element.excitatory }}</span></p>\r\n              <p><strong>Inhibitory:</strong> <span :class=\"getComparisonClass('inhibitory', 0, 1)\">{{ element.inhibitory }}</span></p>\r\n              <p><strong>Neutral:</strong> <span>{{ element.neutral }}</span></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Multi-Selection > 2 View -->\r\n        <div v-else-if=\"selectedElements.length > 2\" key=\"multi-select-view\" class=\"multi-select-panel\">\r\n          <h3>{{ selectedElements.length }} Elements Selected</h3>\r\n          <div class=\"multi-select-list\">\r\n            <span v-for=\"el in selectedElements\" :key=\"el.id\" class=\"multi-select-item\" :style=\"{borderColor: el.color}\">\r\n              {{ el.name }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Default Placeholder View -->\r\n        <div v-else key=\"placeholder-view\" class=\"placeholder-panel\">\r\n          Select an element to see its details. (Ctrl+Click to select multiple)\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, computed } from 'vue';\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nimport { useVectorStore } from '../../stores/vectorStore';\r\nimport PeriodicTable from '../visualization/PeriodicTable.vue';\r\nimport SparklineChart from '../visualization/SparklineChart.vue';\r\nimport HeatmapControls from '../controls/HeatmapControls.vue';\r\nimport FilterControls from '../controls/FilterControls.vue';\r\nimport HighlightControls from '../controls/HighlightControls.vue';\r\n\r\nconst { getElementData } = usePeriodicTable();\r\nconst vectorStore = useVectorStore();\r\nconst selectedElements = ref([]);\r\n\r\nwatch(() => vectorStore.selectedVectorIds, (newIds) => {\r\n  const elements = [];\r\n  newIds.forEach(id => {\r\n    const elementData = getElementData(id);\r\n    if (elementData) {\r\n      elements.push(elementData);\r\n    }\r\n  });\r\n  selectedElements.value = elements;\r\n}, { deep: true, immediate: true });\r\n\r\nconst getComparisonClass = (property, index1, index2) => {\r\n  if (selectedElements.value.length !== 2) return '';\r\n  const val1 = selectedElements.value[index1][property];\r\n  const val2 = selectedElements.value[index2][property];\r\n  if (val1 > val2) return 'is-higher';\r\n  if (val2 > val1) return 'is-lower';\r\n  return 'is-same';\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.15s ease-in-out;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.periodic-table-tab-content {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(10, 20, 30, 0.5);\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  transition: background-color 0.5s ease;\r\n}\r\n\r\n.table-controls {\r\n  padding: 0.5rem 1rem;\r\n  background: rgba(0,0,0,0.2);\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 1rem 2rem;\r\n  align-items: center;\r\n}\r\n\r\n.info-panel-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  background: rgba(0,0,0,0.3);\r\n  border-top: 1px solid rgba(255,255,255,0.1);\r\n  min-height: 220px;\r\n}\r\n\r\n.selected-element-info-panel, .placeholder-panel {\r\n  background: rgba(0, 0, 0, 0.75);\r\n  color: white;\r\n  padding: 1.5rem 2rem;\r\n  border-radius: 12px;\r\n  width: 100%;\r\n  max-width: 800px;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  box-shadow: 0 8px 32px rgba(0,0,0,0.3);\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n.placeholder-panel {\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n  color: rgba(255,255,255,0.6);\r\n  border-bottom: none;\r\n}\r\n\r\n.panel-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid rgba(255,255,255,0.2);\r\n}\r\n\r\n.element-symbol {\r\n  font-size: 3rem;\r\n  font-weight: bold;\r\n  margin-right: 1rem;\r\n  line-height: 1;\r\n}\r\n\r\n.panel-header h3 {\r\n  margin: 0;\r\n  color: #fff;\r\n  font-size: 1.5rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.panel-content {\r\n  display: flex;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.element-details-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem 2rem;\r\n  width: 100%;\r\n}\r\n\r\n.details-column {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.info-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.info-grid div {\r\n  background: none;\r\n  padding: 0.25rem 0;\r\n  font-size: 0.95rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid rgba(255,255,255,0.05);\r\n}\r\n\r\n.info-grid strong {\r\n  opacity: 0.8;\r\n  color: #a0aec0;\r\n}\r\n\r\n.quantum-details, .components-details, .stacked-vectors-details {\r\n  margin-top: 0;\r\n}\r\n\r\nh4 {\r\n  margin-top: 0;\r\n  margin-bottom: 0.75rem;\r\n  color: #667eea;\r\n  border-bottom: 1px solid rgba(102, 126, 234, 0.3);\r\n  padding-bottom: 0.5rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.components-details {\r\n  margin-top: 0;\r\n}\r\n\r\n.components-list {\r\n  background: rgba(0,0,0,0.3);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  max-height: 100px;\r\n  overflow-y: auto;\r\n  font-family: 'Courier New', Courier, monospace;\r\n  font-size: 0.9rem;\r\n  word-break: break-all;\r\n  line-height: 1.4;\r\n}\r\n\r\n.placeholder-content {\r\n  width: 100%;\r\n}\r\n\r\n.undiscovered-text {\r\n  margin-top: 1rem;\r\n  padding: 1rem 1.5rem;\r\n  background: rgba(255,255,255,0.05);\r\n  border-radius: 6px;\r\n  text-align: center;\r\n  font-style: italic;\r\n  color: rgba(255,255,255,0.7);\r\n  line-height: 1.6;\r\n}\r\n\r\n.stacked-vectors-details {\r\n  margin-top: 0;\r\n}\r\n\r\n.stacked-vectors-list {\r\n  background: rgba(102, 126, 234, 0.1);\r\n  border: 1px solid rgba(102, 126, 234, 0.2);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  font-size: 0.9rem;\r\n  color: #bec8f1;\r\n  max-height: 100px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.stacked-vectors-list p {\r\n  margin: 0 0 0.5rem 0;\r\n  font-style: italic;\r\n  font-size: 0.85rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n.stacked-vectors-list strong {\r\n  font-weight: 600;\r\n}\r\n\r\n.comparison-panel {\r\n  display: flex;\r\n  gap: 2rem;\r\n  width: 100%;\r\n}\r\n.comparison-column {\r\n  flex: 1;\r\n  background: rgba(255,255,255,0.05);\r\n  padding: 1rem;\r\n  border-radius: 8px;\r\n}\r\n.is-higher { color: #34d399; font-weight: bold; }\r\n.is-lower { color: #f87171; }\r\n.is-same { color: #60a5fa; }\r\n\r\n.multi-select-panel {\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.multi-select-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n  margin-top: 1rem;\r\n}\r\n.multi-select-item {\r\n  background: rgba(255,255,255,0.1);\r\n  padding: 0.3rem 0.7rem;\r\n  border-radius: 4px;\r\n  border-left: 3px solid;\r\n}\r\n</style> ","<template>\r\n  <section class=\"vector-analysis-section\" ref=\"analysisRef\">\r\n    <div class=\"analysis-header\">\r\n      <h2>🔬 Vector Analysis Studio</h2>\r\n      <p>Deep dive into vector properties, relationships, and advanced analytics</p>\r\n      <div class=\"analysis-toggle-controls\">\r\n        <button \r\n          class=\"btn-compact btn-secondary\" \r\n          @click=\"toggleAnalysisView\"\r\n          :data-state=\"uiStore.analysisViewMode\"\r\n        >\r\n          <span class=\"btn-icon\">📊</span>\r\n          <span class=\"btn-text\">{{ uiStore.analysisViewMode === 'overview' ? 'Detailed View' : 'Overview' }}</span>\r\n        </button>\r\n        <button \r\n          class=\"btn-compact btn-accent\" \r\n          @click=\"compareVectors\"\r\n          :disabled=\"!canCompareVectors\"\r\n        >\r\n          <span class=\"btn-icon\">⚖️</span>\r\n          <span class=\"btn-text\">Compare Selected</span>\r\n        </button>\r\n        <button \r\n          class=\"btn-compact btn-primary\" \r\n          @click=\"exportAnalysis\"\r\n        >\r\n          <span class=\"btn-icon\">📄</span>\r\n          <span class=\"btn-text\">Export Report</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Analysis Content Container - this will be populated by the existing VectorAnalysisStudio module -->\r\n    <div class=\"analysis-content\" id=\"analysis-content\">\r\n      <!-- The existing analysis content will be inserted here -->\r\n      <div class=\"analysis-overview\" id=\"analysis-overview\">\r\n        <div class=\"overview-stats\">\r\n          <StatCard \r\n            icon=\"🎯\" \r\n            :value=\"vectorStore.vectorCount\" \r\n            label=\"Total Vectors\" \r\n          />\r\n          <StatCard \r\n            icon=\"📐\" \r\n            :value=\"configStore.dimensions\" \r\n            label=\"Dimensions\" \r\n          />\r\n          <StatCard \r\n            icon=\"⚡\" \r\n            :value=\"vectorStore.averageMagnitude.toFixed(2)\" \r\n            label=\"Avg Magnitude\" \r\n          />\r\n          <StatCard \r\n            icon=\"🌊\" \r\n            :value=\"vectorStore.maxSimilarity.toFixed(2)\" \r\n            label=\"Max Similarity\" \r\n          />\r\n        </div>\r\n\r\n        <!-- Existing analysis tabs structure will be preserved -->\r\n        <div class=\"analysis-tabs\">\r\n          <div class=\"tab-buttons\">\r\n            <button \r\n              v-for=\"tab in tabs\" \r\n              :key=\"tab.id\"\r\n              class=\"tab-btn\" \r\n              :class=\"{ active: uiStore.activeTab === tab.id }\"\r\n              @click=\"setActiveTab(tab.id)\"\r\n            >\r\n              {{ tab.label }}\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"tab-content\">\r\n            <!-- Tab panels will be handled by the existing framework -->\r\n            <div \r\n              v-for=\"tab in tabs\" \r\n              :key=\"tab.id\"\r\n              class=\"tab-panel\" \r\n              :class=\"{ active: uiStore.activeTab === tab.id }\"\r\n              :id=\"`${tab.id}-tab`\"\r\n            >\r\n              <IndividualAnalysisTab v-if=\"tab.id === 'individual'\" />\r\n              <RelationshipsTab v-if=\"tab.id === 'relationships'\" />\r\n              <ClusteringTab v-if=\"tab.id === 'clusters'\" />\r\n              <StatisticsTab v-if=\"tab.id === 'statistics'\" />\r\n              <PeriodicTableTab v-if=\"tab.id === 'periodic-table'\" />\r\n              <!-- Content populated by existing modules -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Detailed analysis view -->\r\n      <div \r\n        class=\"analysis-detailed\" \r\n        id=\"analysis-detailed\" \r\n        :style=\"{ display: uiStore.analysisViewMode === 'detailed' ? 'block' : 'none' }\"\r\n      >\r\n        <!-- Content populated by existing modules -->\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, inject } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport { useConfigStore } from '../stores/configStore'\r\nimport { useExportManager } from '../composables/useExportManager'\r\nimport { useVectorOperations } from '../composables/useVectorOperations'\r\nimport StatCard from './StatCard.vue'\r\nimport IndividualAnalysisTab from './tabs/IndividualAnalysisTab.vue'\r\nimport RelationshipsTab from './tabs/RelationshipsTab.vue'\r\nimport ClusteringTab from './tabs/ClusteringTab.vue'\r\nimport StatisticsTab from './tabs/StatisticsTab.vue'\r\nimport PeriodicTableTab from './tabs/PeriodicTableTab.vue'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\nconst configStore = useConfigStore()\r\nconst framework = computed(() => vectorStore.framework)\r\nconst analysisRef = ref(null)\r\nconst exportManager = useExportManager()\r\nconst vectorOps = useVectorOperations()\r\n\r\nconst tabs = ref([\r\n  { id: 'individual', label: 'Individual Analysis' },\r\n  { id: 'relationships', label: 'Relationships' },\r\n  { id: 'clusters', label: 'Clustering' },\r\n  { id: 'statistics', label: 'Statistics' },\r\n  { id: 'periodic-table', label: 'Periodic Table' }\r\n])\r\n\r\nconst canCompareVectors = computed(() => {\r\n  return vectorStore.selectedVector !== null && vectorStore.vectorCount > 1\r\n})\r\n\r\nconst toggleAnalysisView = () => {\r\n  const newMode = uiStore.analysisViewMode === 'overview' ? 'detailed' : 'overview'\r\n  uiStore.setAnalysisViewMode(newMode)\r\n}\r\n\r\nconst setActiveTab = (tabId) => {\r\n  uiStore.setActiveTab(tabId)\r\n}\r\n\r\nconst compareVectors = async () => {\r\n  if (canCompareVectors.value) {\r\n    const vectorA = vectorStore.selectedVector\r\n    // For now, just compare with the first other vector\r\n    const vectorB = vectorStore.vectors.find(v => v.id !== vectorA.id)\r\n\r\n    if (vectorA && vectorB) {\r\n      const dotProduct = await vectorOps.calculateDotProduct({ values: vectorA.components }, { values: vectorB.components })\r\n      const cosineSimilarity = await vectorOps.calculateCosineSimilarity({ values: vectorA.components }, { values: vectorB.components })\r\n      const euclideanDistance = await vectorOps.calculateDistance({ values: vectorA.components }, { values: vectorB.components })\r\n      \r\n      uiStore.showModal('vectorComparison', {\r\n        vectorA: { id: vectorA.id },\r\n        vectorB: { id: vectorB.id },\r\n        dotProduct,\r\n        cosineSimilarity,\r\n        euclideanDistance\r\n      })\r\n    } else {\r\n      uiStore.showError('Please select a vector and ensure at least one other vector exists.')\r\n    }\r\n  }\r\n}\r\n\r\nconst exportAnalysis = () => {\r\n  exportManager.exportSession()\r\n}\r\n\r\nonMounted(() => {\r\n  // The existing VectorAnalysisStudio will populate the content\r\n  // We just need to ensure the tab switching works with our Vue state\r\n  \r\n  // Set up tab button listeners for the existing content\r\n  setTimeout(() => {\r\n    const tabButtons = document.querySelectorAll('.tab-btn')\r\n    tabButtons.forEach((button, index) => {\r\n      button.addEventListener('click', () => {\r\n        const tabId = tabs.value[index]?.id\r\n        if (tabId) {\r\n          setActiveTab(tabId)\r\n        }\r\n      })\r\n    })\r\n  }, 100)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.vector-analysis-section {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 12px;\r\n  padding: 2rem;\r\n  margin-bottom: 2rem;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.analysis-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-header h2 {\r\n  font-size: 2rem;\r\n  margin: 0 0 0.5rem 0;\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  background-clip: text;\r\n}\r\n\r\n.analysis-header p {\r\n  color: #666;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.analysis-toggle-controls {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.overview-stats {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-tabs {\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  border: 1px solid rgba(255, 255, 255, 0.05);\r\n}\r\n\r\n.tab-buttons {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-bottom: 1rem;\r\n  border-bottom: 2px solid rgba(255, 255, 255, 0.1);\r\n  padding-bottom: 1rem;\r\n}\r\n\r\n.tab-btn {\r\n  padding: 0.8rem 1.2rem;\r\n  border: none;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  color: #666;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-weight: 500;\r\n}\r\n\r\n.tab-btn.active {\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  color: white;\r\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.tab-btn:hover:not(.active) {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: #333;\r\n}\r\n\r\n.tab-content {\r\n  min-height: 300px;\r\n}\r\n\r\n.tab-panel {\r\n  display: none;\r\n}\r\n\r\n.tab-panel.active {\r\n  display: block;\r\n}\r\n\r\n.btn-compact {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.6rem 1rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn-secondary {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: #333;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.btn-accent {\r\n  background: linear-gradient(135deg, #f093fb, #f5576c);\r\n  color: white;\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  color: white;\r\n}\r\n\r\n.btn-compact:hover:not(:disabled) {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.btn-compact:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .vector-analysis-section {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .analysis-toggle-controls {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  \r\n  .tab-buttons {\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .overview-stats {\r\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  }\r\n}\r\n</style> ","<template>\r\n  <aside class=\"info-sidebar\" :class=\"{ collapsed: uiStore.sidebarCollapsed }\">\r\n    <div class=\"sidebar-toggle\" @click=\"uiStore.toggleSidebar\">\r\n      <i class=\"arrow\" :class=\"{ left: !uiStore.sidebarCollapsed, right: uiStore.sidebarCollapsed }\"></i>\r\n    </div>\r\n    <div class=\"sidebar-content\">\r\n      <div v-if=\"selectedVector\" class=\"vector-details\">\r\n        <h4>Vector #{{ selectedVector.id }} Details</h4>\r\n        <div class=\"stats-grid\">\r\n          <div class=\"stat-item\">\r\n            <span>Magnitude</span>\r\n            <strong v-if=\"vectorStats.magnitude\" v-math=\"math.createMagnitudeFormula(vectorStats.magnitude)\"></strong>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span>Entropy</span>\r\n             <strong v-if=\"vectorStats.entropy\" v-math=\"math.createEntropyFormula(vectorStats.entropy)\"></strong>\r\n          </div>\r\n        </div>\r\n        \r\n        <h5>Components ({{ selectedVector.components.length }}D)</h5>\r\n        <div class=\"components-view\" v-math=\"math.createVectorNotation(selectedVector.components)\">\r\n        </div>\r\n\r\n        <h5>Similarities</h5>\r\n        <div v-if=\"similarities.length > 0\" class=\"similarities-list\">\r\n           <ul>\r\n            <li v-for=\"sim in similarities\" :key=\"sim.id\">\r\n              <span>vs #{{ sim.id }}</span>\r\n              <strong :style=\"{ color: sim.color }\">{{ sim.similarity.toFixed(3) }}</strong>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n         <div v-else class=\"no-data\">\r\n          No other vectors to compare.\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"no-selection\">\r\n        <p>Select a vector to see its details.</p>\r\n        <div v-math=\"math.createCosineSimilarityFormula()\"></div>\r\n      </div>\r\n    </div>\r\n  </aside>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, watch, ref } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport { useMathRenderer } from '../composables/useMathRenderer'\r\nimport { vectorStatistics, vectorOperations } from '../utils/vectorUtils'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\nconst math = useMathRenderer()\r\n\r\nconst selectedVector = computed(() => vectorStore.selectedVector)\r\n\r\nconst vectorStats = computed(() => {\r\n  if (!selectedVector.value) return {}\r\n  return {\r\n      magnitude: vectorOperations.magnitude(selectedVector.value.components),\r\n      entropy: vectorStatistics.entropy(selectedVector.value.components),\r\n  }\r\n})\r\n\r\nconst similarities = computed(() => {\r\n  if (!selectedVector.value) return []\r\n  return vectorStore.vectors\r\n    .filter(v => v.id !== selectedVector.value.id)\r\n    .map(v => {\r\n      const sim = vectorOperations.cosineSimilarity(selectedVector.value.components, v.components)\r\n      return {\r\n        id: v.id,\r\n        similarity: sim,\r\n        color: `hsl(${120 * sim}, 100%, 50%)`\r\n      }\r\n    })\r\n    .sort((a,b) => b.similarity - a.similarity)\r\n    .slice(0, 10)\r\n})\r\n\r\nconst vMath = {\r\n  mounted(el, binding) {\r\n    el.innerHTML = binding.value\r\n    math.renderMath(el)\r\n  },\r\n  updated(el, binding) {\r\n    if (binding.value !== binding.oldValue) {\r\n        el.innerHTML = binding.value\r\n        math.renderMath(el)\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.info-sidebar {\r\n  width: 300px;\r\n  background-color: var(--sidebar-bg);\r\n  color: var(--text-primary);\r\n  transition: width 0.3s ease;\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  border-left: 1px solid var(--border-color);\r\n}\r\n\r\n.info-sidebar.collapsed {\r\n  width: 20px;\r\n}\r\n\r\n.sidebar-toggle {\r\n  position: absolute;\r\n  left: -15px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  width: 30px;\r\n  height: 50px;\r\n  background-color: var(--sidebar-bg);\r\n  border: 1px solid var(--border-color);\r\n  border-right: none;\r\n  border-radius: 8px 0 0 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.sidebar-toggle:hover {\r\n  background-color: var(--primary);\r\n}\r\n.arrow {\r\n  border: solid var(--text-primary);\r\n  border-width: 0 3px 3px 0;\r\n  display: inline-block;\r\n  padding: 3px;\r\n  transition: transform 0.2s;\r\n}\r\n.left { transform: rotate(135deg); }\r\n.right { transform: rotate(-45deg); }\r\n\r\n\r\n.sidebar-content {\r\n  padding: 1rem;\r\n  overflow: hidden;\r\n  height: 100%;\r\n}\r\n\r\n.info-sidebar.collapsed .sidebar-content {\r\n  display: none;\r\n}\r\n\r\n.vector-details h4 {\r\n  margin-top: 0;\r\n  color: var(--primary);\r\n}\r\n.vector-details h5 {\r\n  margin-top: 1.5rem;\r\n  margin-bottom: 0.5rem;\r\n  color: var(--text-secondary);\r\n  text-transform: uppercase;\r\n  font-size: 0.8em;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.stat-item {\r\n    background-color: var(--bg-secondary);\r\n    padding: 0.75rem;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n}\r\n\r\n.stat-item span {\r\n  font-size: 0.8em;\r\n  color: var(--text-secondary);\r\n  display: block;\r\n}\r\n\r\n.stat-item strong {\r\n    font-size: 1.2em;\r\n    color: var(--text-primary);\r\n    display: block;\r\n    margin-top: 0.25rem;\r\n    min-height: 25px;\r\n}\r\n\r\n.components-view {\r\n  background-color: var(--bg-secondary);\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.similarities-list ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n.similarities-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  border-radius: 4px;\r\n}\r\n.similarities-list li:nth-child(odd) {\r\n  background-color: var(--bg-secondary);\r\n}\r\n\r\n.no-selection, .no-data {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n:deep(.katex) {\r\n  font-size: 1.1em !important;\r\n}\r\n\r\n:deep(.katex-display) {\r\n  margin: 0.5em 0 !important;\r\n}\r\n</style>\r\n","<template>\r\n  <Teleport to=\"body\">\r\n    <div class=\"modal-overlay\" @click=\"handleOverlayClick\">\r\n      <div class=\"modal-container\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3 class=\"modal-title\">{{ title }}</h3>\r\n          <button class=\"modal-close-btn\" @click=\"$emit('close')\">×</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <slot />\r\n        </div>\r\n        <div class=\"modal-footer\" v-if=\"$slots.footer\">\r\n          <slot name=\"footer\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Teleport>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, onUnmounted } from 'vue'\r\n\r\ndefineProps({\r\n  title: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['close'])\r\n\r\nconst handleOverlayClick = () => {\r\n  emit('close')\r\n}\r\n\r\nconst handleEscapeKey = (event) => {\r\n  if (event.key === 'Escape') {\r\n    emit('close')\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  document.addEventListener('keydown', handleEscapeKey)\r\n  document.body.style.overflow = 'hidden'\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('keydown', handleEscapeKey)\r\n  document.body.style.overflow = ''\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  backdrop-filter: blur(5px);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  animation: fadeIn 0.3s ease;\r\n}\r\n\r\n.modal-container {\r\n  background: #2c2c2e;\r\n  color: #f5f5f7;\r\n  border-radius: 12px;\r\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\r\n  max-width: 90vw;\r\n  max-height: 90vh;\r\n  width: 600px;\r\n  overflow: hidden;\r\n  animation: slideIn 0.3s ease;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem 1.5rem;\r\n  background: #1e1e1e;\r\n  color: white;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.modal-title {\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n  margin: 0;\r\n}\r\n\r\n.modal-close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: #a0a0a5;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.modal-close-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: white;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.modal-body {\r\n  padding: 1.5rem;\r\n  overflow-y: auto;\r\n  flex-grow: 1;\r\n}\r\n\r\n.modal-footer {\r\n  padding: 1rem 1.5rem;\r\n  background: #1e1e1e;\r\n  border-top: 1px solid #444;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from { opacity: 0; }\r\n  to { opacity: 1; }\r\n}\r\n\r\n@keyframes slideIn {\r\n  from { \r\n    opacity: 0;\r\n    transform: scale(0.95) translateY(-20px);\r\n  }\r\n  to { \r\n    opacity: 1;\r\n    transform: scale(1) translateY(0);\r\n  }\r\n}\r\n\r\n/* Scrollbar styling */\r\n.modal-body::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-track {\r\n  background: #2c2c2e;\r\n  border-radius: 4px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-thumb {\r\n  background: #555;\r\n  border-radius: 4px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-thumb:hover {\r\n  background: #777;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .modal-container {\r\n    width: 95vw;\r\n    margin: 1rem;\r\n    max-height: calc(100vh - 2rem);\r\n  }\r\n  \r\n  .modal-header,\r\n  .modal-body,\r\n  .modal-footer {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .modal-title {\r\n    font-size: 1.1rem;\r\n  }\r\n}\r\n</style> ","<template>\n  <div class=\"tutorial-content\">\n    <!-- Progress bar -->\n    <div class=\"tutorial-progress-container\">\n      <div class=\"tutorial-progress-bar\" :style=\"{ width: tutorialManager.progress + '%' }\"></div>\n    </div>\n    \n    <!-- Step indicator -->\n    <div class=\"tutorial-step-indicator\">\n      Step {{ tutorialManager.currentStep + 1 }} of {{ tutorialManager.tutorialSteps.length }}\n    </div>\n    \n    <!-- Current step content -->\n    <div v-if=\"tutorialManager.currentStepData\" class=\"tutorial-step\">\n      <h3 v-html=\"tutorialManager.currentStepData.title\"></h3>\n      <p v-html=\"tutorialManager.currentStepData.content\"></p>\n    </div>\n    \n    <!-- Navigation buttons -->\n    <div class=\"tutorial-navigation\">\n      <button \n        class=\"btn-compact btn-secondary\"\n        :disabled=\"tutorialManager.isFirstStep\"\n        @click=\"tutorialManager.previousStep\"\n      >\n        ← Previous\n      </button>\n      \n      <div class=\"tutorial-step-dots\">\n        <span \n          v-for=\"(step, index) in tutorialManager.tutorialSteps\" \n          :key=\"index\"\n          class=\"step-dot\"\n          :class=\"{ active: index === tutorialManager.currentStep, completed: index < tutorialManager.currentStep }\"\n          @click=\"tutorialManager.goToStep(index)\"\n        ></span>\n      </div>\n      \n      <button \n        class=\"btn-compact btn-primary\"\n        @click=\"tutorialManager.nextStep\"\n      >\n        {{ tutorialManager.isLastStep ? 'Finish 🎉' : 'Next →' }}\n      </button>\n    </div>\n    \n    <!-- Keyboard shortcuts help -->\n    <div class=\"tutorial-help\">\n      <small>\n        💡 Use arrow keys to navigate, numbers 1-9 for quick step access, or ESC to exit\n      </small>\n    </div>\n    \n    <!-- Classic tutorial features from original -->\n    <div class=\"tutorial-features\" v-if=\"tutorialManager.currentStep === 0\">\n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">🎯</span>\n          <div class=\"feature-text\">\n            <strong>Vector Elements:</strong> Each vector is represented as an atomic element with unique properties\n          </div>\n        </div>\n        \n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">⚡</span>\n          <div class=\"feature-text\">\n            <strong>Force Visualization:</strong> See relationships through various similarity metrics (cosine, correlation, etc.)\n          </div>\n        </div>\n        \n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">🧠</span>\n          <div class=\"feature-text\">\n            <strong>Neural Mode:</strong> Transform vectors into neural network representations with different activation functions\n          </div>\n        </div>\n        \n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">🔬</span>\n          <div class=\"feature-text\">\n            <strong>Analysis Studio:</strong> Deep dive into vector properties, clustering, and statistical analysis\n          </div>\n        </div>\n      </div>\n      \n    <!-- Quick tips for final step -->\n    <div class=\"tutorial-tips\" v-if=\"tutorialManager.isLastStep\">\n        <h5>Quick Tips:</h5>\n        <ul>\n          <li>Click on any vector element to view detailed properties</li>\n          <li>Use the controls toolbar to adjust dimensions and generate new vectors</li>\n          <li>Toggle forces to see vector relationships in real-time</li>\n          <li>Try Neural Mode for advanced visualization</li>\n          <li>Upload your own vector data in various formats</li>\n        <li>Press ? anytime to see keyboard shortcuts</li>\n        </ul>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useTutorialManager } from '../../composables/useTutorialManager'\n\nconst tutorialManager = useTutorialManager()\n</script>\n\n<style scoped>\n.tutorial-content {\n  padding: 0;\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n.tutorial-progress-container {\n  width: 100%;\n  height: 4px;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 2px;\n  margin-bottom: 20px;\n  overflow: hidden;\n}\n\n.tutorial-progress-bar {\n  height: 100%;\n  background: linear-gradient(90deg, var(--accent-secondary) 0%, var(--accent-primary) 100%);\n  border-radius: 2px;\n  transition: width 0.3s ease;\n}\n\n.tutorial-step-indicator {\n  text-align: center;\n  font-size: 0.9em;\n  opacity: 0.8;\n  margin-bottom: 15px;\n  color: var(--text-secondary);\n}\n\n.tutorial-step h3 {\n  margin: 0 0 15px 0;\n  font-size: 1.4em;\n  text-align: center;\n  color: var(--text-primary);\n}\n\n.tutorial-step p {\n  margin: 0 0 25px 0;\n  line-height: 1.6;\n  font-size: 1em;\n  text-align: center;\n  color: var(--text-secondary);\n}\n\n.tutorial-navigation {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 15px;\n  margin-bottom: 15px;\n}\n\n.tutorial-step-dots {\n  display: flex;\n  gap: 8px;\n  flex: 1;\n  justify-content: center;\n}\n\n.step-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.3);\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.step-dot.active {\n  background: var(--accent-primary);\n  transform: scale(1.3);\n}\n\n.step-dot.completed {\n  background: var(--success);\n}\n\n.step-dot:hover {\n  background: rgba(255, 255, 255, 0.6);\n  transform: scale(1.2);\n}\n\n.tutorial-help {\n  text-align: center;\n  padding-top: 15px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.tutorial-help small {\n  color: var(--text-secondary);\n  opacity: 0.8;\n}\n\n.tutorial-features {\n  margin-top: 20px;\n}\n\n.feature-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  border-left: 3px solid var(--accent-primary);\n}\n\n.feature-icon {\n  font-size: 1.2em;\n  min-width: 24px;\n}\n\n.feature-text {\n  flex: 1;\n}\n\n.feature-text strong {\n  color: var(--accent-primary);\n  display: block;\n  margin-bottom: 4px;\n}\n\n.tutorial-tips {\n  margin-top: 20px;\n  padding: 15px;\n  background: rgba(10, 132, 255, 0.1);\n  border-radius: 8px;\n  border-left: 3px solid var(--accent-primary);\n}\n\n.tutorial-tips h5 {\n  margin: 0 0 10px 0;\n  color: var(--accent-primary);\n  font-size: 1.1em;\n}\n\n.tutorial-tips ul {\n  margin: 0;\n  padding-left: 20px;\n}\n\n.tutorial-tips li {\n  margin-bottom: 6px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n\n.btn-compact:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Tutorial highlight animation */\n:global(.tutorial-highlight) {\n  animation: tutorialPulse 2s infinite;\n  border: 3px solid #ffd700 !important;\n  border-radius: 8px !important;\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.6) !important;\n}\n\n@keyframes tutorialPulse {\n  0%, 100% { \n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);\n    transform: scale(1);\n  }\n  50% { \n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.9);\n    transform: scale(1.02);\n  }\n}\n\n@media (max-width: 768px) {\n  .tutorial-navigation {\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .tutorial-step-dots {\n    order: -1;\n    margin-bottom: 10px;\n  }\n  \n  .feature-item {\n    flex-direction: column;\n    text-align: center;\n  }\n}\n</style> ","<template>\r\n  <div class=\"analysis-modal\">\r\n    <div class=\"modal-header\">\r\n      <h3>🔬 Advanced Analysis</h3>\r\n      <p>Perform comprehensive analysis on your vector dataset</p>\r\n    </div>\r\n\r\n    <!-- Analysis Type Selection -->\r\n    <div class=\"analysis-types\">\r\n      <div class=\"type-grid\">\r\n        <div\r\n          v-for=\"analysisType in analysisTypes\"\r\n          :key=\"analysisType.id\"\r\n          class=\"analysis-card\"\r\n          :class=\"{ \r\n            selected: selectedAnalysis === analysisType.id,\r\n            disabled: !analysisType.available \r\n          }\"\r\n          @click=\"selectAnalysis(analysisType.id)\"\r\n        >\r\n          <div class=\"card-icon\">{{ analysisType.icon }}</div>\r\n          <div class=\"card-title\">{{ analysisType.title }}</div>\r\n          <div class=\"card-description\">{{ analysisType.description }}</div>\r\n          <div v-if=\"!analysisType.available\" class=\"card-badge\">Coming Soon</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Analysis Configuration -->\r\n    <div v-if=\"selectedAnalysis\" class=\"analysis-config\">\r\n      <h4>{{ getAnalysisConfig(selectedAnalysis).title }} Configuration</h4>\r\n      \r\n      <!-- PCA Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'pca'\" class=\"config-section\">\r\n        <div class=\"config-group\">\r\n          <label for=\"pca-components\">Number of Components:</label>\r\n          <input\r\n            id=\"pca-components\"\r\n            v-model.number=\"pcaConfig.components\"\r\n            type=\"number\"\r\n            min=\"2\"\r\n            :max=\"Math.min(vectorStore.dimensions, vectorStore.vectorCount)\"\r\n            class=\"number-input\"\r\n          />\r\n        </div>\r\n        <div class=\"config-info\">\r\n          <p>PCA will reduce {{ vectorStore.dimensions }}D vectors to {{ pcaConfig.components }}D representation</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- K-Means Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'kmeans'\" class=\"config-section\">\r\n        <div class=\"config-group\">\r\n          <label for=\"kmeans-k\">Number of Clusters (k):</label>\r\n          <input\r\n            id=\"kmeans-k\"\r\n            v-model.number=\"kmeansConfig.k\"\r\n            type=\"number\"\r\n            min=\"2\"\r\n            :max=\"Math.min(10, vectorStore.vectorCount)\"\r\n            class=\"number-input\"\r\n          />\r\n        </div>\r\n        <div class=\"config-group\">\r\n          <label for=\"kmeans-iterations\">Max Iterations:</label>\r\n          <input\r\n            id=\"kmeans-iterations\"\r\n            v-model.number=\"kmeansConfig.maxIterations\"\r\n            type=\"number\"\r\n            min=\"10\"\r\n            max=\"1000\"\r\n            class=\"number-input\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Hierarchical Clustering Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'hierarchical'\" class=\"config-section\">\r\n        <div class=\"config-group\">\r\n          <label for=\"hierarchical-linkage\">Linkage Method:</label>\r\n          <select\r\n            id=\"hierarchical-linkage\"\r\n            v-model=\"hierarchicalConfig.linkage\"\r\n            class=\"select-input\"\r\n          >\r\n            <option value=\"single\">Single Linkage</option>\r\n            <option value=\"complete\">Complete Linkage</option>\r\n            <option value=\"average\">Average Linkage</option>\r\n            <option value=\"ward\">Ward Linkage</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Statistical Analysis Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'statistics'\" class=\"config-section\">\r\n        <div class=\"config-options\">\r\n          <label class=\"checkbox-label\">\r\n            <input v-model=\"statisticsConfig.includeCorrelation\" type=\"checkbox\" />\r\n            Include correlation matrix\r\n          </label>\r\n          <label class=\"checkbox-label\">\r\n            <input v-model=\"statisticsConfig.includeOutliers\" type=\"checkbox\" />\r\n            Detect outliers\r\n          </label>\r\n          <label class=\"checkbox-label\">\r\n            <input v-model=\"statisticsConfig.includeDistribution\" type=\"checkbox\" />\r\n            Analyze distribution\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Analysis Results -->\r\n    <div v-if=\"analytics.analysisResults\" class=\"results-section\">\r\n      <div class=\"results-header\">\r\n        <h4>Analysis Results</h4>\r\n        <div class=\"results-meta\">\r\n          <span>{{ analytics.analysisResults.type }}</span>\r\n          <span>•</span>\r\n          <span>{{ formatDate(analytics.analysisResults.timestamp) }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- PCA Results -->\r\n      <div v-if=\"analytics.analysisResults.type === 'PCA'\" class=\"results-content\">\r\n        <div class=\"result-stats\">\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Explained Variance:</span>\r\n            <span class=\"stat-value\">{{ (analytics.analysisResults.data.explainedVariance * 100).toFixed(1) }}%</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Components:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.components }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"eigenvalues\">\r\n          <h5>Eigenvalues:</h5>\r\n          <div class=\"eigenvalue-list\">\r\n            <span\r\n              v-for=\"(value, index) in analytics.analysisResults.data.eigenvalues\"\r\n              :key=\"index\"\r\n              class=\"eigenvalue-item\"\r\n            >\r\n              PC{{ index + 1 }}: {{ value.toFixed(3) }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- K-Means Results -->\r\n      <div v-if=\"analytics.analysisResults.type === 'K-Means'\" class=\"results-content\">\r\n        <div class=\"result-stats\">\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Clusters:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.clusters.length }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Silhouette Score:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.silhouetteScore.toFixed(3) }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Converged:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.converged ? 'Yes' : 'No' }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"cluster-info\">\r\n          <h5>Cluster Information:</h5>\r\n          <div class=\"cluster-list\">\r\n            <div\r\n              v-for=\"(cluster, index) in analytics.analysisResults.data.clusters\"\r\n              :key=\"index\"\r\n              class=\"cluster-item\"\r\n            >\r\n              <span class=\"cluster-label\">Cluster {{ cluster.id + 1 }}:</span>\r\n              <span class=\"cluster-size\">{{ cluster.size }} vectors</span>\r\n              <span class=\"cluster-distance\">Avg distance: {{ cluster.avgDistance.toFixed(3) }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Statistical Results -->\r\n      <div v-if=\"analytics.analysisResults.type === 'Statistical Analysis'\" class=\"results-content\">\r\n        <div class=\"result-stats\">\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Total Vectors:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.summary.totalVectors }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Dimensions:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.summary.dimensions }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Avg Magnitude:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.summary.averageMagnitude.toFixed(3) }}</span>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"analytics.analysisResults.data.outliers.length > 0\" class=\"outliers-info\">\r\n          <h5>Outliers Detected:</h5>\r\n          <div class=\"outlier-list\">\r\n            <span\r\n              v-for=\"outlier in analytics.analysisResults.data.outliers.slice(0, 5)\"\r\n              :key=\"outlier.vector.id\"\r\n              class=\"outlier-item\"\r\n            >\r\n              {{ outlier.vector.label || outlier.vector.id }}\r\n            </span>\r\n            <span v-if=\"analytics.analysisResults.data.outliers.length > 5\" class=\"more-outliers\">\r\n              +{{ analytics.analysisResults.data.outliers.length - 5 }} more\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Progress Indicator -->\r\n    <div v-if=\"analytics.isAnalyzing\" class=\"analysis-progress\">\r\n      <div class=\"progress-bar\">\r\n        <div class=\"progress-fill\" :style=\"{ width: analytics.analysisProgress + '%' }\"></div>\r\n      </div>\r\n      <div class=\"progress-text\">{{ getProgressText() }}</div>\r\n    </div>\r\n\r\n    <!-- Error Display -->\r\n    <div v-if=\"analytics.analysisError\" class=\"error-section\">\r\n      <div class=\"error-message\">\r\n        <span class=\"error-icon\">⚠️</span>\r\n        {{ analytics.analysisError }}\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal Actions -->\r\n    <div class=\"modal-actions\">\r\n      <button class=\"btn-secondary\" @click=\"$emit('close')\">\r\n        Close\r\n      </button>\r\n      <button\r\n        v-if=\"analytics.analysisResults\"\r\n        class=\"btn-utility\"\r\n        @click=\"exportResults\"\r\n      >\r\n        💾 Export Results\r\n      </button>\r\n      <button\r\n        class=\"btn-primary\"\r\n        :disabled=\"!selectedAnalysis || analytics.isAnalyzing || !analytics.hasVectors\"\r\n        @click=\"runAnalysis\"\r\n      >\r\n        <span v-if=\"analytics.isAnalyzing\">Analyzing...</span>\r\n        <span v-else>🔬 Run Analysis</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore.js'\r\nimport { useUIStore } from '../../stores/uiStore.js'\r\nimport { useAnalytics } from '../../composables/useAnalytics.js'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\nconst analytics = useAnalytics()\r\n\r\n// Reactive state\r\nconst selectedAnalysis = ref(null)\r\n\r\n// Analysis configurations\r\nconst pcaConfig = ref({\r\n  components: Math.min(3, vectorStore.dimensions)\r\n})\r\n\r\nconst kmeansConfig = ref({\r\n  k: Math.min(3, vectorStore.vectorCount),\r\n  maxIterations: 100\r\n})\r\n\r\nconst hierarchicalConfig = ref({\r\n  linkage: 'ward'\r\n})\r\n\r\nconst statisticsConfig = ref({\r\n  includeCorrelation: true,\r\n  includeOutliers: true,\r\n  includeDistribution: true\r\n})\r\n\r\n// Analysis types\r\nconst analysisTypes = [\r\n  {\r\n    id: 'pca',\r\n    title: 'Principal Component Analysis',\r\n    icon: '🔍',\r\n    description: 'Discover the main dimensions of variation in your vector space',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'kmeans',\r\n    title: 'K-Means Clustering',\r\n    icon: '🎯',\r\n    description: 'Group similar vectors using K-means clustering algorithm',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'hierarchical',\r\n    title: 'Hierarchical Clustering',\r\n    icon: '🌳',\r\n    description: 'Build a hierarchy of clusters using different linkage methods',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'statistics',\r\n    title: 'Statistical Analysis',\r\n    icon: '📊',\r\n    description: 'Comprehensive statistical overview of vector properties',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'tsne',\r\n    title: 't-SNE Visualization',\r\n    icon: '🗺️',\r\n    description: 'Non-linear dimensionality reduction for visualization',\r\n    available: false\r\n  },\r\n  {\r\n    id: 'anomaly',\r\n    title: 'Anomaly Detection',\r\n    icon: '🚨',\r\n    description: 'Detect unusual patterns and outliers in your data',\r\n    available: false\r\n  }\r\n]\r\n\r\n// Computed properties\r\nconst getAnalysisConfig = (type) => {\r\n  return analysisTypes.find(a => a.id === type) || {}\r\n}\r\n\r\n// Methods\r\nconst selectAnalysis = (type) => {\r\n  const analysisType = analysisTypes.find(a => a.id === type)\r\n  if (analysisType && analysisType.available) {\r\n    selectedAnalysis.value = type\r\n  }\r\n}\r\n\r\nconst runAnalysis = async () => {\r\n  if (!selectedAnalysis.value || analytics.isAnalyzing.value) return\r\n\r\n  try {\r\n    switch (selectedAnalysis.value) {\r\n      case 'pca':\r\n        await analytics.performPCA(pcaConfig.value.components)\r\n        break\r\n      case 'kmeans':\r\n        await analytics.performKMeans(kmeansConfig.value.k, kmeansConfig.value.maxIterations)\r\n        break\r\n      case 'hierarchical':\r\n        await analytics.performHierarchicalClustering(hierarchicalConfig.value.linkage)\r\n        break\r\n      case 'statistics':\r\n        await analytics.performStatisticalAnalysis()\r\n        break\r\n    }\r\n    \r\n    uiStore.showSuccess('Analysis completed successfully!')\r\n  } catch (error) {\r\n    uiStore.showError(`Analysis failed: ${error.message}`)\r\n  }\r\n}\r\n\r\nconst exportResults = () => {\r\n  const results = analytics.exportResults()\r\n  if (results) {\r\n    const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' })\r\n    const url = URL.createObjectURL(blob)\r\n    const link = document.createElement('a')\r\n    link.href = url\r\n    link.download = `analysis_${results.type.toLowerCase()}_${Date.now()}.json`\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    document.body.removeChild(link)\r\n    URL.revokeObjectURL(url)\r\n    \r\n    uiStore.showSuccess('Analysis results exported!')\r\n  }\r\n}\r\n\r\nconst getProgressText = () => {\r\n  if (!analytics.lastAnalysisType.value) return 'Initializing...'\r\n  \r\n  const progress = analytics.analysisProgress.value\r\n  if (progress < 25) return `Preparing ${analytics.lastAnalysisType.value}...`\r\n  if (progress < 50) return 'Processing data...'\r\n  if (progress < 75) return 'Calculating results...'\r\n  if (progress < 100) return 'Finalizing analysis...'\r\n  return 'Complete!'\r\n}\r\n\r\nconst formatDate = (date) => {\r\n  return new Date(date).toLocaleString()\r\n}\r\n\r\nconst emit = defineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.analysis-modal {\r\n  max-width: 700px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.modal-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.modal-header h3 {\r\n  color: var(--accent-primary);\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.modal-header p {\r\n  color: var(--text-secondary);\r\n  margin: 0;\r\n}\r\n\r\n.type-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-card {\r\n  padding: 1.5rem;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  text-align: center;\r\n  position: relative;\r\n  background-color: var(--bg-secondary);\r\n}\r\n\r\n.analysis-card:hover:not(.disabled) {\r\n  border-color: var(--accent-primary);\r\n  background: var(--bg-tertiary);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.analysis-card.selected {\r\n  border-color: var(--accent-primary);\r\n  background: var(--bg-tertiary);\r\n  box-shadow: 0 0 15px rgba(10, 132, 255, 0.3);\r\n}\r\n\r\n.analysis-card.disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.card-icon {\r\n  font-size: 2rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.card-title {\r\n  font-weight: 600;\r\n  margin-bottom: 0.5rem;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.card-description {\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.card-badge {\r\n  position: absolute;\r\n  top: 0.5rem;\r\n  right: 0.5rem;\r\n  background: #f59e0b;\r\n  color: white;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.75rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.analysis-config {\r\n  background: var(--bg-tertiary);\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-config h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--accent-primary);\r\n}\r\n\r\n.config-section {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.config-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.config-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.number-input, .select-input {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  background-color: var(--bg-secondary);\r\n  border: 1px solid var(--border-color);\r\n  color: var(--text-primary);\r\n  border-radius: 6px;\r\n  transition: border-color 0.2s, box-shadow 0.2s;\r\n}\r\n\r\n.number-input:focus, .select-input:focus {\r\n  outline: none;\r\n  border-color: var(--accent-primary);\r\n  box-shadow: 0 0 5px rgba(10, 132, 255, 0.5);\r\n}\r\n\r\n.config-info {\r\n  background: rgba(10, 132, 255, 0.1);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  margin-top: 1rem;\r\n  border-left: 3px solid var(--accent-primary);\r\n}\r\n\r\n.config-info p {\r\n  margin: 0;\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.config-options {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.checkbox-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  cursor: pointer;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.checkbox-label input[type=\"checkbox\"] {\r\n  accent-color: var(--accent-primary);\r\n  margin: 0;\r\n}\r\n\r\n.results-section {\r\n  background: var(--bg-tertiary);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.results-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid var(--border-color);\r\n}\r\n\r\n.results-header h4 {\r\n  margin: 0;\r\n  color: var(--accent-primary);\r\n}\r\n\r\n.results-meta {\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.result-stats {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.stat-item {\r\n  text-align: center;\r\n  background: var(--bg-secondary);\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n}\r\n\r\n.stat-label {\r\n  display: block;\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.stat-value {\r\n  display: block;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  font-size: 1.2em;\r\n}\r\n\r\n.eigenvalues, .cluster-info, .outliers-info {\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.eigenvalues h5, .cluster-info h5, .outliers-info h5 {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.eigenvalue-list, .cluster-list, .outlier-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.eigenvalue-item, .outlier-item {\r\n  background: rgba(10, 132, 255, 0.2);\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 15px;\r\n  font-size: 0.875rem;\r\n  color: var(--accent-primary);\r\n  font-weight: 500;\r\n}\r\n\r\n.cluster-item {\r\n  background: var(--bg-secondary);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  font-size: 0.875rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n  border-left: 3px solid #10b981;\r\n}\r\n\r\n.cluster-label {\r\n  font-weight: 500;\r\n  color: #10b981;\r\n}\r\n\r\n.cluster-size, .cluster-distance {\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.more-outliers {\r\n  color: var(--text-secondary);\r\n  font-style: italic;\r\n  padding: 0.25rem 0.5rem;\r\n}\r\n\r\n.analysis-progress {\r\n  margin-bottom: 2rem;\r\n  padding: 1rem;\r\n  background: var(--bg-tertiary);\r\n  border-radius: 8px;\r\n}\r\n\r\n.progress-bar {\r\n  width: 100%;\r\n  height: 8px;\r\n  background: var(--bg-secondary);\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.progress-fill {\r\n  height: 100%;\r\n  background: var(--accent-primary);\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.progress-text {\r\n  text-align: center;\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.error-section {\r\n  margin-bottom: 2rem;\r\n  padding: 1rem;\r\n  background: rgba(239, 68, 68, 0.1);\r\n  border: 1px solid rgba(239, 68, 68, 0.3);\r\n  border-radius: 8px;\r\n}\r\n\r\n.error-message {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  color: #ef4444;\r\n  font-weight: 500;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n  border-top: 1px solid var(--border-color);\r\n  padding-top: 1.5rem;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.btn-secondary, .btn-primary, .btn-utility {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #555;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #777;\r\n}\r\n\r\n.btn-utility {\r\n  background: #10b981;\r\n  color: white;\r\n}\r\n\r\n.btn-utility:hover {\r\n  background: #059669;\r\n}\r\n\r\n.btn-primary {\r\n  background: var(--accent-primary);\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: var(--accent-secondary);\r\n}\r\n\r\n.btn-primary:disabled {\r\n  background: #555;\r\n  color: #999;\r\n  cursor: not-allowed;\r\n  opacity: 0.6;\r\n}\r\n</style> ","import { ref, computed, watch } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore.js'\r\nimport { vectorOperations, vectorStatistics } from '../utils/vectorUtils.js'\r\n\r\n/**\r\n * Vue Composable for Advanced Vector Analytics\r\n * Provides clustering, PCA, statistical analysis, and pattern detection\r\n */\r\nexport function useAnalytics() {\r\n  const vectorStore = useVectorStore()\r\n  \r\n  // Reactive state\r\n  const isAnalyzing = ref(false)\r\n  const analysisResults = ref(null)\r\n  const lastAnalysisType = ref(null)\r\n  const analysisError = ref(null)\r\n  const analysisProgress = ref(0)\r\n  \r\n  // Computed properties\r\n  const vectors = computed(() => vectorStore.vectors)\r\n  const hasVectors = computed(() => vectors.value.length > 0)\r\n  const canAnalyze = computed(() => hasVectors.value && !isAnalyzing.value)\r\n  \r\n  // Watch for vector changes to invalidate cache\r\n  watch(vectors, () => {\r\n    if (analysisResults.value) {\r\n      analysisResults.value.isStale = true\r\n    }\r\n  }, { deep: true })\r\n  \r\n  /**\r\n   * Execute analysis with progress tracking\r\n   * @param {Function} analysisFunction - Analysis function to execute\r\n   * @param {string} analysisType - Type of analysis\r\n   * @returns {Promise} Analysis result\r\n   */\r\n  const executeAnalysis = async (analysisFunction, analysisType) => {\r\n    if (isAnalyzing.value) {\r\n      throw new Error('Analysis already in progress')\r\n    }\r\n    \r\n    isAnalyzing.value = true\r\n    analysisError.value = null\r\n    analysisProgress.value = 0\r\n    lastAnalysisType.value = analysisType\r\n    \r\n    try {\r\n      const result = await analysisFunction()\r\n      analysisResults.value = {\r\n        type: analysisType,\r\n        data: result,\r\n        timestamp: new Date(),\r\n        isStale: false,\r\n        vectorCount: vectors.value.length,\r\n        dimensions: vectors.value[0]?.values?.length || 0\r\n      }\r\n      analysisProgress.value = 100\r\n      return result\r\n    } catch (error) {\r\n      analysisError.value = error.message\r\n      throw error\r\n    } finally {\r\n      isAnalyzing.value = false\r\n    }\r\n  }\r\n  \r\n  // Principal Component Analysis\r\n  const performPCA = async (components = 2) => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for PCA')\r\n      }\r\n      \r\n      analysisProgress.value = 10\r\n      const matrix = vectors.value.map(v => v.values)\r\n      \r\n      // Center the data\r\n      analysisProgress.value = 20\r\n      const means = calculateColumnMeans(matrix)\r\n      const centered = matrix.map(row => \r\n        row.map((val, i) => val - means[i])\r\n      )\r\n      \r\n      // Calculate covariance matrix\r\n      analysisProgress.value = 40\r\n      const covariance = calculateCovarianceMatrix(centered)\r\n      \r\n      // Perform eigendecomposition (simplified)\r\n      analysisProgress.value = 60\r\n      const { eigenvalues, eigenvectors } = performEigendecomposition(covariance, components)\r\n      \r\n      // Project data onto principal components\r\n      analysisProgress.value = 80\r\n      const projectedData = centered.map(row => \r\n        eigenvectors.slice(0, components).map(eigenvector =>\r\n          row.reduce((sum, val, i) => sum + val * eigenvector[i], 0)\r\n        )\r\n      )\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        projectedData,\r\n        eigenvalues: eigenvalues.slice(0, components),\r\n        eigenvectors: eigenvectors.slice(0, components),\r\n        explainedVariance: calculateExplainedVariance(eigenvalues, components),\r\n        means,\r\n        components\r\n      }\r\n    }, 'PCA')\r\n  }\r\n  \r\n  // K-Means Clustering\r\n  const performKMeans = async (k = 3, maxIterations = 100) => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for clustering')\r\n      }\r\n      \r\n      if (k > vectors.value.length) {\r\n        throw new Error('Number of clusters cannot exceed number of vectors')\r\n      }\r\n      \r\n      analysisProgress.value = 10\r\n      const data = vectors.value.map(v => v.values)\r\n      \r\n      // Initialize centroids randomly\r\n      const centroids = initializeRandomCentroids(data, k)\r\n      let assignments = new Array(data.length).fill(0)\r\n      let hasConverged = false\r\n      let iteration = 0\r\n      \r\n      while (!hasConverged && iteration < maxIterations) {\r\n        analysisProgress.value = 10 + (iteration / maxIterations) * 80\r\n        \r\n        // Assign points to nearest centroid\r\n        const newAssignments = data.map(point => \r\n          findNearestCentroid(point, centroids)\r\n        )\r\n        \r\n        // Check for convergence\r\n        hasConverged = newAssignments.every((assignment, i) => \r\n          assignment === assignments[i]\r\n        )\r\n        \r\n        assignments = newAssignments\r\n        \r\n        // Update centroids\r\n        if (!hasConverged) {\r\n          updateCentroids(data, assignments, centroids, k)\r\n        }\r\n        \r\n        iteration++\r\n      }\r\n      \r\n      // Calculate cluster statistics\r\n      const clusters = calculateClusterStatistics(data, assignments, centroids, k)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        clusters,\r\n        assignments,\r\n        centroids,\r\n        iterations: iteration,\r\n        converged: hasConverged,\r\n        silhouetteScore: calculateSilhouetteScore(data, assignments, centroids)\r\n      }\r\n    }, 'K-Means')\r\n  }\r\n  \r\n  // Hierarchical Clustering\r\n  const performHierarchicalClustering = async (linkage = 'ward') => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for hierarchical clustering')\r\n      }\r\n      \r\n      analysisProgress.value = 10\r\n      const data = vectors.value.map(v => v.values)\r\n      const n = data.length\r\n      \r\n      // Calculate distance matrix\r\n      analysisProgress.value = 30\r\n      const distanceMatrix = calculateDistanceMatrix(data)\r\n      \r\n      // Perform hierarchical clustering\r\n      analysisProgress.value = 50\r\n      const dendrogram = buildDendrogram(distanceMatrix, linkage)\r\n      \r\n      // Generate clusters for different cut levels\r\n      analysisProgress.value = 80\r\n      const clusterLevels = generateClusterLevels(dendrogram, n)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        dendrogram,\r\n        distanceMatrix,\r\n        clusterLevels,\r\n        linkage\r\n      }\r\n    }, 'Hierarchical Clustering')\r\n  }\r\n  \r\n  // Statistical Analysis\r\n  const performStatisticalAnalysis = async () => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for statistical analysis')\r\n      }\r\n      \r\n      analysisProgress.value = 20\r\n      \r\n      // Calculate individual vector statistics\r\n      const vectorStats = vectors.value.map(vector => ({\r\n        id: vector.id,\r\n        ...vectorStatistics.calculate(vector.values)\r\n      }))\r\n      \r\n      analysisProgress.value = 40\r\n      \r\n      // Calculate global statistics\r\n      const allValues = vectors.value.flatMap(v => v.values)\r\n      const globalStats = vectorStatistics.calculate(allValues)\r\n      \r\n      analysisProgress.value = 60\r\n      \r\n      // Calculate correlation matrix\r\n      const correlationMatrix = calculateCorrelationMatrix(vectors.value)\r\n      \r\n      analysisProgress.value = 80\r\n      \r\n      // Detect outliers\r\n      const outliers = detectOutliers(vectors.value)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        vectorStatistics: vectorStats,\r\n        globalStatistics: globalStats,\r\n        correlationMatrix,\r\n        outliers,\r\n        summary: {\r\n          totalVectors: vectors.value.length,\r\n          dimensions: vectors.value[0]?.values?.length || 0,\r\n          averageMagnitude: vectorStats.reduce((sum, stat) => sum + stat.magnitude, 0) / vectorStats.length,\r\n          sparsityRange: {\r\n            min: Math.min(...vectorStats.map(s => s.sparsity)),\r\n            max: Math.max(...vectorStats.map(s => s.sparsity))\r\n          }\r\n        }\r\n      }\r\n    }, 'Statistical Analysis')\r\n  }\r\n  \r\n  // Pattern Detection\r\n  const detectPatterns = async () => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for pattern detection')\r\n      }\r\n      \r\n      analysisProgress.value = 25\r\n      const patterns = []\r\n      \r\n      // Detect linear relationships\r\n      const linearPatterns = detectLinearPatterns(vectors.value)\r\n      patterns.push(...linearPatterns)\r\n      \r\n      analysisProgress.value = 50\r\n      \r\n      // Detect clusters of similar vectors\r\n      const similarityGroups = detectSimilarityGroups(vectors.value)\r\n      patterns.push(...similarityGroups)\r\n      \r\n      analysisProgress.value = 75\r\n      \r\n      // Detect dimensional patterns\r\n      const dimensionalPatterns = detectDimensionalPatterns(vectors.value)\r\n      patterns.push(...dimensionalPatterns)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        patterns,\r\n        summary: {\r\n          totalPatterns: patterns.length,\r\n          patternTypes: [...new Set(patterns.map(p => p.type))],\r\n          confidence: patterns.reduce((sum, p) => sum + p.confidence, 0) / patterns.length\r\n        }\r\n      }\r\n    }, 'Pattern Detection')\r\n  }\r\n  \r\n  // Helper Functions\r\n  const calculateColumnMeans = (matrix) => {\r\n    const rows = matrix.length\r\n    const cols = matrix[0].length\r\n    const means = new Array(cols).fill(0)\r\n    \r\n    for (let j = 0; j < cols; j++) {\r\n      for (let i = 0; i < rows; i++) {\r\n        means[j] += matrix[i][j]\r\n      }\r\n      means[j] /= rows\r\n    }\r\n    \r\n    return means\r\n  }\r\n  \r\n  const calculateCovarianceMatrix = (centeredMatrix) => {\r\n    const rows = centeredMatrix.length\r\n    const cols = centeredMatrix[0].length\r\n    const covariance = Array(cols).fill().map(() => Array(cols).fill(0))\r\n    \r\n    for (let i = 0; i < cols; i++) {\r\n      for (let j = 0; j < cols; j++) {\r\n        let sum = 0\r\n        for (let k = 0; k < rows; k++) {\r\n          sum += centeredMatrix[k][i] * centeredMatrix[k][j]\r\n        }\r\n        covariance[i][j] = sum / (rows - 1)\r\n      }\r\n    }\r\n    \r\n    return covariance\r\n  }\r\n  \r\n  const performEigendecomposition = (matrix, components) => {\r\n    // Simplified eigendecomposition using power iteration\r\n    // In a production app, you'd use a proper linear algebra library\r\n    const size = matrix.length\r\n    const eigenvalues = []\r\n    const eigenvectors = []\r\n    \r\n    for (let i = 0; i < Math.min(components, size); i++) {\r\n      const { value, vector } = powerIteration(matrix, 100)\r\n      eigenvalues.push(value)\r\n      eigenvectors.push(vector)\r\n    }\r\n    \r\n    return { eigenvalues, eigenvectors }\r\n  }\r\n  \r\n  const powerIteration = (matrix, iterations) => {\r\n    const size = matrix.length\r\n    let vector = Array.from({ length: size }, () => Math.random())\r\n    \r\n    for (let i = 0; i < iterations; i++) {\r\n      // Multiply matrix by vector\r\n      const newVector = matrix.map(row => \r\n        row.reduce((sum, val, j) => sum + val * vector[j], 0)\r\n      )\r\n      \r\n      // Normalize\r\n      const norm = Math.sqrt(newVector.reduce((sum, val) => sum + val * val, 0))\r\n      vector = newVector.map(val => val / norm)\r\n    }\r\n    \r\n    // Calculate eigenvalue\r\n    const matrixVector = matrix.map(row => \r\n      row.reduce((sum, val, j) => sum + val * vector[j], 0)\r\n    )\r\n    const eigenvalue = vector.reduce((sum, val, i) => sum + val * matrixVector[i], 0)\r\n    \r\n    return { value: eigenvalue, vector }\r\n  }\r\n  \r\n  const calculateExplainedVariance = (eigenvalues, components) => {\r\n    const totalVariance = eigenvalues.reduce((sum, val) => sum + val, 0)\r\n    const explainedVariance = eigenvalues.slice(0, components).reduce((sum, val) => sum + val, 0)\r\n    return explainedVariance / totalVariance\r\n  }\r\n  \r\n  const initializeRandomCentroids = (data, k) => {\r\n    const dimensions = data[0].length\r\n    const centroids = []\r\n    \r\n    for (let i = 0; i < k; i++) {\r\n      const centroid = []\r\n      for (let j = 0; j < dimensions; j++) {\r\n        const min = Math.min(...data.map(point => point[j]))\r\n        const max = Math.max(...data.map(point => point[j]))\r\n        centroid.push(Math.random() * (max - min) + min)\r\n      }\r\n      centroids.push(centroid)\r\n    }\r\n    \r\n    return centroids\r\n  }\r\n  \r\n  const findNearestCentroid = (point, centroids) => {\r\n    let minDistance = Infinity\r\n    let nearestIndex = 0\r\n    \r\n    centroids.forEach((centroid, index) => {\r\n      const distance = vectorOperations.euclideanDistance(point, centroid)\r\n      if (distance < minDistance) {\r\n        minDistance = distance\r\n        nearestIndex = index\r\n      }\r\n    })\r\n    \r\n    return nearestIndex\r\n  }\r\n  \r\n  const updateCentroids = (data, assignments, centroids, k) => {\r\n    for (let i = 0; i < k; i++) {\r\n      const clusterPoints = data.filter((_, index) => assignments[index] === i)\r\n      \r\n      if (clusterPoints.length > 0) {\r\n        const dimensions = data[0].length\r\n        for (let j = 0; j < dimensions; j++) {\r\n          centroids[i][j] = clusterPoints.reduce((sum, point) => sum + point[j], 0) / clusterPoints.length\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  const calculateClusterStatistics = (data, assignments, centroids, k) => {\r\n    const clusters = []\r\n    \r\n    for (let i = 0; i < k; i++) {\r\n      const clusterPoints = data.filter((_, index) => assignments[index] === i)\r\n      const clusterIndices = assignments.map((assignment, index) => \r\n        assignment === i ? index : -1\r\n      ).filter(index => index !== -1)\r\n      \r\n      if (clusterPoints.length > 0) {\r\n        const distances = clusterPoints.map(point => \r\n          vectorOperations.euclideanDistance(point, centroids[i])\r\n        )\r\n        \r\n        clusters.push({\r\n          id: i,\r\n          centroid: centroids[i],\r\n          points: clusterPoints,\r\n          pointIndices: clusterIndices,\r\n          size: clusterPoints.length,\r\n          avgDistance: distances.reduce((sum, d) => sum + d, 0) / distances.length,\r\n          maxDistance: Math.max(...distances),\r\n          minDistance: Math.min(...distances)\r\n        })\r\n      }\r\n    }\r\n    \r\n    return clusters\r\n  }\r\n  \r\n  const calculateSilhouetteScore = (data, assignments, centroids) => {\r\n    // Simplified silhouette score calculation\r\n    let totalScore = 0\r\n    \r\n    for (let i = 0; i < data.length; i++) {\r\n      const point = data[i]\r\n      const cluster = assignments[i]\r\n      \r\n      // Calculate average distance to points in same cluster\r\n      const sameClusterPoints = data.filter((_, j) => assignments[j] === cluster && j !== i)\r\n      const avgIntraDistance = sameClusterPoints.length > 0 \r\n        ? sameClusterPoints.reduce((sum, p) => sum + vectorOperations.euclideanDistance(point, p), 0) / sameClusterPoints.length\r\n        : 0\r\n      \r\n      // Calculate average distance to nearest other cluster\r\n      let minInterDistance = Infinity\r\n      for (let c = 0; c < centroids.length; c++) {\r\n        if (c !== cluster) {\r\n          const otherClusterPoints = data.filter((_, j) => assignments[j] === c)\r\n          if (otherClusterPoints.length > 0) {\r\n            const avgDistance = otherClusterPoints.reduce((sum, p) => sum + vectorOperations.euclideanDistance(point, p), 0) / otherClusterPoints.length\r\n            minInterDistance = Math.min(minInterDistance, avgDistance)\r\n          }\r\n        }\r\n      }\r\n      \r\n      const silhouette = (minInterDistance - avgIntraDistance) / Math.max(minInterDistance, avgIntraDistance)\r\n      totalScore += silhouette\r\n    }\r\n    \r\n    return totalScore / data.length\r\n  }\r\n  \r\n  const calculateDistanceMatrix = (data) => {\r\n    const n = data.length\r\n    const matrix = Array(n).fill().map(() => Array(n).fill(0))\r\n    \r\n    for (let i = 0; i < n; i++) {\r\n      for (let j = i + 1; j < n; j++) {\r\n        const distance = vectorOperations.euclideanDistance(data[i], data[j])\r\n        matrix[i][j] = distance\r\n        matrix[j][i] = distance\r\n      }\r\n    }\r\n    \r\n    return matrix\r\n  }\r\n  \r\n  const buildDendrogram = (distanceMatrix, linkage) => {\r\n    // Simplified hierarchical clustering\r\n    const n = distanceMatrix.length\r\n    const clusters = Array.from({ length: n }, (_, i) => ({ id: i, members: [i], height: 0 }))\r\n    const dendrogram = []\r\n    \r\n    while (clusters.length > 1) {\r\n      // Find closest pair of clusters\r\n      let minDistance = Infinity\r\n      let mergeI = 0, mergeJ = 1\r\n      \r\n      for (let i = 0; i < clusters.length; i++) {\r\n        for (let j = i + 1; j < clusters.length; j++) {\r\n          const distance = calculateClusterDistance(clusters[i], clusters[j], distanceMatrix, linkage)\r\n          if (distance < minDistance) {\r\n            minDistance = distance\r\n            mergeI = i\r\n            mergeJ = j\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Merge clusters\r\n      const newCluster = {\r\n        id: n + dendrogram.length,\r\n        members: [...clusters[mergeI].members, ...clusters[mergeJ].members],\r\n        height: minDistance,\r\n        left: clusters[mergeI],\r\n        right: clusters[mergeJ]\r\n      }\r\n      \r\n      dendrogram.push(newCluster)\r\n      \r\n      // Remove merged clusters and add new one\r\n      clusters.splice(Math.max(mergeI, mergeJ), 1)\r\n      clusters.splice(Math.min(mergeI, mergeJ), 1)\r\n      clusters.push(newCluster)\r\n    }\r\n    \r\n    return dendrogram\r\n  }\r\n  \r\n  const calculateClusterDistance = (clusterA, clusterB, distanceMatrix, linkage) => {\r\n    const distances = []\r\n    \r\n    for (const i of clusterA.members) {\r\n      for (const j of clusterB.members) {\r\n        distances.push(distanceMatrix[i][j])\r\n      }\r\n    }\r\n    \r\n    switch (linkage) {\r\n      case 'single':\r\n        return Math.min(...distances)\r\n      case 'complete':\r\n        return Math.max(...distances)\r\n      case 'average':\r\n        return distances.reduce((sum, d) => sum + d, 0) / distances.length\r\n      case 'ward':\r\n      default:\r\n        return distances.reduce((sum, d) => sum + d, 0) / distances.length\r\n    }\r\n  }\r\n  \r\n  const generateClusterLevels = (dendrogram, n) => {\r\n    const levels = []\r\n    const maxHeight = Math.max(...dendrogram.map(node => node.height))\r\n    \r\n    for (let k = 2; k <= n; k++) {\r\n      const threshold = maxHeight * (k - 1) / (n - 1)\r\n      levels.push({\r\n        k,\r\n        threshold,\r\n        clusters: cutDendrogram(dendrogram[dendrogram.length - 1], threshold, [])\r\n      })\r\n    }\r\n    \r\n    return levels\r\n  }\r\n  \r\n  const cutDendrogram = (node, threshold, clusters) => {\r\n    if (node.height <= threshold || !node.left || !node.right) {\r\n      clusters.push(node.members)\r\n      return clusters\r\n    }\r\n    \r\n    cutDendrogram(node.left, threshold, clusters)\r\n    cutDendrogram(node.right, threshold, clusters)\r\n    return clusters\r\n  }\r\n  \r\n  const calculateCorrelationMatrix = (vectors) => {\r\n    const n = vectors.length\r\n    const matrix = Array(n).fill().map(() => Array(n).fill(0))\r\n    \r\n    for (let i = 0; i < n; i++) {\r\n      for (let j = 0; j < n; j++) {\r\n        if (i === j) {\r\n          matrix[i][j] = 1\r\n        } else {\r\n          matrix[i][j] = vectorOperations.cosineSimilarity(vectors[i].values, vectors[j].values)\r\n        }\r\n      }\r\n    }\r\n    \r\n    return matrix\r\n  }\r\n  \r\n  const detectOutliers = (vectors) => {\r\n    const magnitudes = vectors.map(v => vectorOperations.magnitude(v.values))\r\n    const mean = magnitudes.reduce((sum, mag) => sum + mag, 0) / magnitudes.length\r\n    const stdDev = Math.sqrt(magnitudes.reduce((sum, mag) => sum + Math.pow(mag - mean, 2), 0) / magnitudes.length)\r\n    \r\n    const threshold = 2 * stdDev\r\n    \r\n    return vectors.filter((vector, index) => {\r\n      const magnitude = magnitudes[index]\r\n      return Math.abs(magnitude - mean) > threshold\r\n    }).map((vector, originalIndex) => ({\r\n      vector,\r\n      originalIndex,\r\n      magnitude: vectorOperations.magnitude(vector.values),\r\n      deviationFromMean: Math.abs(vectorOperations.magnitude(vector.values) - mean)\r\n    }))\r\n  }\r\n  \r\n  const detectLinearPatterns = (vectors) => {\r\n    const patterns = []\r\n    \r\n    for (let i = 0; i < vectors.length; i++) {\r\n      for (let j = i + 1; j < vectors.length; j++) {\r\n        const similarity = vectorOperations.cosineSimilarity(vectors[i].values, vectors[j].values)\r\n        \r\n        if (Math.abs(similarity) > 0.95) {\r\n          patterns.push({\r\n            type: 'linear_relationship',\r\n            confidence: Math.abs(similarity),\r\n            vectors: [vectors[i].id, vectors[j].id],\r\n            description: similarity > 0 ? 'Highly positively correlated' : 'Highly negatively correlated'\r\n          })\r\n        }\r\n      }\r\n    }\r\n    \r\n    return patterns\r\n  }\r\n  \r\n  const detectSimilarityGroups = (vectors) => {\r\n    const threshold = 0.8\r\n    const groups = []\r\n    const visited = new Set()\r\n    \r\n    for (let i = 0; i < vectors.length; i++) {\r\n      if (visited.has(i)) continue\r\n      \r\n      const group = [i]\r\n      visited.add(i)\r\n      \r\n      for (let j = i + 1; j < vectors.length; j++) {\r\n        if (visited.has(j)) continue\r\n        \r\n        const similarity = vectorOperations.cosineSimilarity(vectors[i].values, vectors[j].values)\r\n        if (similarity > threshold) {\r\n          group.push(j)\r\n          visited.add(j)\r\n        }\r\n      }\r\n      \r\n      if (group.length > 1) {\r\n        groups.push({\r\n          type: 'similarity_group',\r\n          confidence: 0.8,\r\n          vectors: group.map(idx => vectors[idx].id),\r\n          description: `Group of ${group.length} similar vectors`\r\n        })\r\n      }\r\n    }\r\n    \r\n    return groups\r\n  }\r\n  \r\n  const detectDimensionalPatterns = (vectors) => {\r\n    const patterns = []\r\n    const dimensions = vectors[0].values.length\r\n    \r\n    // Check for consistently zero dimensions\r\n    for (let dim = 0; dim < dimensions; dim++) {\r\n      const values = vectors.map(v => v.values[dim])\r\n      const maxAbs = Math.max(...values.map(Math.abs))\r\n      \r\n      if (maxAbs < 1e-10) {\r\n        patterns.push({\r\n          type: 'zero_dimension',\r\n          confidence: 1.0,\r\n          dimension: dim,\r\n          description: `Dimension ${dim + 1} is consistently zero across all vectors`\r\n        })\r\n      }\r\n    }\r\n    \r\n    return patterns\r\n  }\r\n  \r\n  // Utility functions\r\n  const clearResults = () => {\r\n    analysisResults.value = null\r\n    analysisError.value = null\r\n    analysisProgress.value = 0\r\n  }\r\n  \r\n  const exportResults = () => {\r\n    if (!analysisResults.value) return null\r\n    \r\n    return {\r\n      ...analysisResults.value,\r\n      exportedAt: new Date()\r\n    }\r\n  }\r\n  \r\n  return {\r\n    // Reactive state\r\n    isAnalyzing,\r\n    analysisResults,\r\n    lastAnalysisType,\r\n    analysisError,\r\n    analysisProgress,\r\n    \r\n    // Computed properties\r\n    hasVectors,\r\n    canAnalyze,\r\n    \r\n    // Analysis methods\r\n    performPCA,\r\n    performKMeans,\r\n    performHierarchicalClustering,\r\n    performStatisticalAnalysis,\r\n    detectPatterns,\r\n    \r\n    // Utility methods\r\n    clearResults,\r\n    exportResults\r\n  }\r\n} ","<template>\r\n  <div class=\"upload-help-content\">\r\n    <h4>📁 Supported File Formats</h4>\r\n    <div class=\"format-list\">\r\n      <div class=\"format-item\">\r\n        <strong>.txt</strong> - Plain text with space/comma separated values\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.csv</strong> - Comma-separated values\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.json</strong> - JSON array format\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.npy</strong> - NumPy array format\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.mat</strong> - MATLAB matrix format\r\n      </div>\r\n    </div>\r\n    \r\n    <h4>📋 Example Formats</h4>\r\n    <div class=\"example-section\">\r\n      <h5>CSV Format:</h5>\r\n      <pre class=\"code-example\">1.2, 0.5, -0.8, 2.1\r\n0.3, 1.7, 0.2, -1.0\r\n-0.5, 0.1, 1.9, 0.7</pre>\r\n      \r\n      <h5>JSON Format:</h5>\r\n      <pre class=\"code-example\">[[1.2, 0.5, -0.8, 2.1],\r\n [0.3, 1.7, 0.2, -1.0],\r\n [-0.5, 0.1, 1.9, 0.7]]</pre>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Upload help modal\r\n</script>\r\n\r\n<style scoped>\r\n.upload-help-content {\r\n  color: #333;\r\n}\r\n\r\n.format-list {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.format-item {\r\n  padding: 0.5rem;\r\n  margin: 0.5rem 0;\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 4px;\r\n}\r\n\r\n.example-section {\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.code-example {\r\n  background: #f5f5f5;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 0.9rem;\r\n  overflow-x: auto;\r\n  border-left: 3px solid #667eea;\r\n}\r\n</style> ","<template>\r\n  <div class=\"activation-help-content\">\r\n    <h4>🔌 Neural Activation Functions</h4>\r\n    <div class=\"activation-list\">\r\n      <div class=\"activation-item\">\r\n        <h5>Sigmoid</h5>\r\n        <p>Smooth S-curve, outputs between 0 and 1</p>\r\n        <div class=\"formula\">σ(x) = 1 / (1 + e^(-x))</div>\r\n      </div>\r\n      \r\n      <div class=\"activation-item\">\r\n        <h5>Tanh</h5>\r\n        <p>Hyperbolic tangent, outputs between -1 and 1</p>\r\n        <div class=\"formula\">tanh(x) = (e^x - e^(-x)) / (e^x + e^(-x))</div>\r\n      </div>\r\n      \r\n      <div class=\"activation-item\">\r\n        <h5>ReLU</h5>\r\n        <p>Rectified Linear Unit, simple and effective</p>\r\n        <div class=\"formula\">ReLU(x) = max(0, x)</div>\r\n      </div>\r\n      \r\n      <div class=\"activation-item\">\r\n        <h5>Leaky ReLU</h5>\r\n        <p>Modified ReLU allowing small negative values</p>\r\n        <div class=\"formula\">LeakyReLU(x) = max(0.01x, x)</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Activation functions help\r\n</script>\r\n\r\n<style scoped>\r\n.activation-help-content {\r\n  color: #333;\r\n}\r\n\r\n.activation-list {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.activation-item {\r\n  margin-bottom: 1.5rem;\r\n  padding: 1rem;\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n}\r\n\r\n.activation-item h5 {\r\n  color: #667eea;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.activation-item p {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #666;\r\n}\r\n\r\n.formula {\r\n  background: #f5f5f5;\r\n  padding: 0.5rem;\r\n  border-radius: 4px;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 0.9rem;\r\n  border-left: 3px solid #667eea;\r\n}\r\n</style> ","<template>\r\n  <div class=\"shortcuts-content\">\r\n    <div class=\"shortcuts-grid\">\r\n      <div class=\"shortcuts-section\">\r\n        <h4>🚀 Quick Actions</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+G</kbd>\r\n          <span>Generate new vectors</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+R</kbd>\r\n          <span>Reset visualization</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+E</kbd>\r\n          <span>Export data</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+A</kbd>\r\n          <span>Open analysis modal</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+H</kbd>\r\n          <span>Show help/tutorial</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"shortcuts-section\">\r\n        <h4>🎯 Navigation</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Tab</kbd>\r\n          <span>Navigate between controls</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>↑ ↓ ← →</kbd>\r\n          <span>Navigate between vectors</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Enter</kbd>\r\n          <span>Select vector</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Space</kbd>\r\n          <span>Activate button/control</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Escape</kbd>\r\n          <span>Close modals</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"shortcuts-section\">\r\n        <h4>📊 Analysis</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>P</kbd>\r\n          <span>Run PCA analysis</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>K</kbd>\r\n          <span>Run K-means clustering</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>S</kbd>\r\n          <span>Similarity analysis</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>T</kbd>\r\n          <span>Statistical analysis</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>N</kbd>\r\n          <span>Toggle neural mode</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"shortcuts-section\">\r\n        <h4>⚙️ Controls</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>F</kbd>\r\n          <span>Toggle force visualization</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>3</kbd>\r\n          <span>Toggle 3D mode</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>+</kbd>\r\n          <span>Increase dimensions</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>-</kbd>\r\n          <span>Decrease dimensions</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>?</kbd>\r\n          <span>Show this help</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"shortcuts-footer\">\r\n      <p class=\"shortcuts-tip\">\r\n        💡 <strong>Tip:</strong> Most shortcuts work when you're not typing in input fields\r\n      </p>\r\n      <button class=\"btn-primary\" @click=\"emit('close')\">\r\n        Got it! 👍\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.shortcuts-content {\r\n  max-width: 700px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.shortcuts-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.shortcuts-section h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--primary);\r\n  font-size: 1.1em;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.shortcut-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  margin-bottom: 0.75rem;\r\n  padding: 0.5rem;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 6px;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.shortcut-item:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\nkbd {\r\n  background: var(--primary);\r\n  color: white;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\r\n  font-size: 0.85em;\r\n  font-weight: 600;\r\n  min-width: 60px;\r\n  text-align: center;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.shortcut-item span {\r\n  flex: 1;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.shortcuts-footer {\r\n  text-align: center;\r\n  padding-top: 1.5rem;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.shortcuts-tip {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--text-secondary);\r\n  font-size: 0.9em;\r\n}\r\n\r\n.shortcuts-tip strong {\r\n  color: var(--primary);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .shortcuts-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .shortcut-item {\r\n    flex-direction: column;\r\n    text-align: center;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  kbd {\r\n    min-width: auto;\r\n    width: fit-content;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <div class=\"add-vector-modal\">\r\n    <div class=\"modal-header\">\r\n      <h3>➕ Add Custom Vector</h3>\r\n      <p>Enter vector components to create a new vector</p>\r\n    </div>\r\n\r\n    <div class=\"form-section\">\r\n      <div class=\"form-group\">\r\n        <label for=\"vector-input\">Vector Components</label>\r\n        <div class=\"input-help\">\r\n          Enter comma-separated values (e.g., 1, -2, 3.5, 4)\r\n        </div>\r\n        <textarea\r\n          id=\"vector-input\"\r\n          v-model=\"vectorInput\"\r\n          class=\"vector-input\"\r\n          :class=\"{ error: hasError }\"\r\n          placeholder=\"1, 2, 3, 4\"\r\n          rows=\"3\"\r\n          @input=\"validateInput\"\r\n        ></textarea>\r\n        <div v-if=\"errorMessage\" class=\"error-message\">\r\n          {{ errorMessage }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"vector-label\">Vector Label (Optional)</label>\r\n        <input\r\n          id=\"vector-label\"\r\n          v-model=\"vectorLabel\"\r\n          type=\"text\"\r\n          class=\"label-input\"\r\n          placeholder=\"My Custom Vector\"\r\n          maxlength=\"50\"\r\n        />\r\n      </div>\r\n\r\n      <div v-if=\"parsedVector\" class=\"preview-section\">\r\n        <h4>Preview</h4>\r\n        <div class=\"vector-stats\">\r\n          <span>Dimensions: {{ parsedVector.length }}</span>\r\n          <span>Magnitude: {{ magnitude.toFixed(3) }}</span>\r\n        </div>\r\n        <div class=\"components-preview\">\r\n          <span \r\n            v-for=\"(val, i) in parsedVector.slice(0, 8)\" \r\n            :key=\"i\"\r\n            class=\"component\"\r\n            :class=\"componentClass(val)\"\r\n          >\r\n            {{ val.toFixed(2) }}\r\n          </span>\r\n          <span v-if=\"parsedVector.length > 8\" class=\"more\">\r\n            +{{ parsedVector.length - 8 }} more\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"modal-actions\">\r\n      <button class=\"btn-cancel\" @click=\"$emit('close')\">\r\n        Cancel\r\n      </button>\r\n      <button \r\n        class=\"btn-add\" \r\n        :disabled=\"!canAdd\"\r\n        @click=\"addVector\"\r\n      >\r\n        Add Vector\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore.js'\r\nimport { useUIStore } from '../../stores/uiStore.js'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\n\r\n// Reactive state\r\nconst vectorInput = ref('')\r\nconst vectorLabel = ref('')\r\nconst parsedVector = ref(null)\r\nconst hasError = ref(false)\r\nconst errorMessage = ref('')\r\n\r\n// Computed properties\r\nconst magnitude = computed(() => {\r\n  if (!parsedVector.value) return 0\r\n  return Math.sqrt(parsedVector.value.reduce((sum, val) => sum + val * val, 0))\r\n})\r\n\r\nconst canAdd = computed(() => {\r\n  return parsedVector.value && !hasError.value\r\n})\r\n\r\n// Methods\r\nconst validateInput = () => {\r\n  const input = vectorInput.value.trim()\r\n  \r\n  if (!input) {\r\n    parsedVector.value = null\r\n    hasError.value = false\r\n    errorMessage.value = ''\r\n    return\r\n  }\r\n\r\n  try {\r\n    // Try JSON format first\r\n    if (input.startsWith('[') && input.endsWith(']')) {\r\n      const parsed = JSON.parse(input)\r\n      if (Array.isArray(parsed) && parsed.every(v => typeof v === 'number' && !isNaN(v))) {\r\n        parsedVector.value = parsed\r\n        hasError.value = false\r\n        errorMessage.value = ''\r\n        return\r\n      }\r\n    }\r\n\r\n    // Try comma-separated values\r\n    const values = input.split(',').map(v => parseFloat(v.trim()))\r\n    \r\n    if (values.some(isNaN)) {\r\n      throw new Error('All values must be valid numbers')\r\n    }\r\n    \r\n    if (values.length < 2) {\r\n      throw new Error('Vector must have at least 2 components')\r\n    }\r\n    \r\n    if (values.length > 50) {\r\n      throw new Error('Vector cannot have more than 50 components')\r\n    }\r\n\r\n    parsedVector.value = values\r\n    hasError.value = false\r\n    errorMessage.value = ''\r\n    \r\n  } catch (error) {\r\n    hasError.value = true\r\n    errorMessage.value = error.message\r\n    parsedVector.value = null\r\n  }\r\n}\r\n\r\nconst componentClass = (value) => {\r\n  if (value > 0) return 'positive'\r\n  if (value < 0) return 'negative'\r\n  return 'zero'\r\n}\r\n\r\nconst addVector = () => {\r\n  if (!canAdd.value) return\r\n\r\n  try {\r\n    if (vectorStore.framework) {\r\n      const newVector = {\r\n        id: `custom_${Date.now()}`,\r\n        values: parsedVector.value,\r\n        label: vectorLabel.value || `Custom Vector ${Date.now()}`,\r\n        type: 'custom',\r\n        created: new Date()\r\n      }\r\n      \r\n      // Add through the framework's state manager\r\n      vectorStore.framework.stateManager.addCustomVector(newVector)\r\n      uiStore.showSuccess('Vector added successfully!')\r\n    }\r\n    \r\n    // Clear form and close\r\n    vectorInput.value = ''\r\n    vectorLabel.value = ''\r\n    parsedVector.value = null\r\n    emit('close')\r\n    \r\n  } catch (error) {\r\n    uiStore.showError(`Failed to add vector: ${error.message}`)\r\n  }\r\n}\r\n\r\nconst emit = defineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.add-vector-modal {\r\n  max-width: 500px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.modal-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.modal-header h3 {\r\n  color: #667eea;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.modal-header p {\r\n  color: #666;\r\n  margin: 0;\r\n}\r\n\r\n.form-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.input-help {\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.vector-input {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 2px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  font-family: monospace;\r\n  resize: vertical;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.vector-input:focus {\r\n  outline: none;\r\n  border-color: #667eea;\r\n}\r\n\r\n.vector-input.error {\r\n  border-color: #ef4444;\r\n}\r\n\r\n.label-input {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 2px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.label-input:focus {\r\n  outline: none;\r\n  border-color: #667eea;\r\n}\r\n\r\n.error-message {\r\n  color: #ef4444;\r\n  font-size: 0.875rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.preview-section {\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.preview-section h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #667eea;\r\n}\r\n\r\n.vector-stats {\r\n  display: flex;\r\n  gap: 2rem;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n}\r\n\r\n.components-preview {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.component {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-family: monospace;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.component.positive {\r\n  background: rgba(239, 68, 68, 0.1);\r\n  color: #dc2626;\r\n}\r\n\r\n.component.negative {\r\n  background: rgba(59, 130, 246, 0.1);\r\n  color: #2563eb;\r\n}\r\n\r\n.component.zero {\r\n  background: rgba(156, 163, 175, 0.1);\r\n  color: #6b7280;\r\n}\r\n\r\n.more {\r\n  padding: 0.25rem 0.5rem;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.btn-cancel, .btn-add {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.btn-cancel {\r\n  background: #6b7280;\r\n  color: white;\r\n}\r\n\r\n.btn-cancel:hover {\r\n  background: #4b5563;\r\n}\r\n\r\n.btn-add {\r\n  background: #667eea;\r\n  color: white;\r\n}\r\n\r\n.btn-add:hover:not(:disabled) {\r\n  background: #5a67d8;\r\n}\r\n\r\n.btn-add:disabled {\r\n  background: #9ca3af;\r\n  cursor: not-allowed;\r\n}\r\n</style> ","/**\r\n * Format Utilities\r\n * Helper functions for formatting numbers, data, and display elements\r\n */\r\n\r\n// Number Formatting\r\nexport const numberFormat = {\r\n  /**\r\n   * Format a number with specified decimal places\r\n   * @param {number} value - Number to format\r\n   * @param {number} decimals - Number of decimal places\r\n   * @returns {string} Formatted number\r\n   */\r\n  decimal(value, decimals = 2) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return value.toFixed(decimals)\r\n  },\r\n\r\n  /**\r\n   * Format a number in scientific notation\r\n   * @param {number} value - Number to format\r\n   * @param {number} precision - Number of significant digits\r\n   * @returns {string} Scientific notation\r\n   */\r\n  scientific(value, precision = 3) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return value.toExponential(precision)\r\n  },\r\n\r\n  /**\r\n   * Format percentage with specified decimals\r\n   * @param {number} value - Value between 0 and 1\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted percentage\r\n   */\r\n  percentage(value, decimals = 1) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return `${(value * 100).toFixed(decimals)}%`\r\n  },\r\n\r\n  /**\r\n   * Format large numbers with appropriate units\r\n   * @param {number} value - Number to format\r\n   * @returns {string} Formatted number with units\r\n   */\r\n  compact(value) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    \r\n    const abs = Math.abs(value)\r\n    const sign = value < 0 ? '-' : ''\r\n    \r\n    if (abs >= 1e9) return `${sign}${(abs / 1e9).toFixed(1)}B`\r\n    if (abs >= 1e6) return `${sign}${(abs / 1e6).toFixed(1)}M`\r\n    if (abs >= 1e3) return `${sign}${(abs / 1e3).toFixed(1)}K`\r\n    return value.toString()\r\n  },\r\n\r\n  /**\r\n   * Format number with thousand separators\r\n   * @param {number} value - Number to format\r\n   * @param {string} separator - Thousand separator\r\n   * @returns {string} Formatted number\r\n   */\r\n  thousands(value, separator = ',') {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, separator)\r\n  }\r\n}\r\n\r\n// Vector Formatting\r\nexport const vectorFormat = {\r\n  /**\r\n   * Format vector components for display\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted vector string\r\n   */\r\n  components(vector, decimals = 3) {\r\n    if (!Array.isArray(vector)) return 'Invalid Vector'\r\n    const formatted = vector.map(val => numberFormat.decimal(val, decimals))\r\n    return `[${formatted.join(', ')}]`\r\n  },\r\n\r\n  /**\r\n   * Format vector with dimension labels\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted vector with labels\r\n   */\r\n  labeled(vector, decimals = 3) {\r\n    if (!Array.isArray(vector)) return 'Invalid Vector'\r\n    const formatted = vector.map((val, i) => \r\n      `x${i + 1}: ${numberFormat.decimal(val, decimals)}`\r\n    )\r\n    return formatted.join(', ')\r\n  },\r\n\r\n  /**\r\n   * Format vector magnitude\r\n   * @param {number[]} vector - Vector to calculate magnitude\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted magnitude\r\n   */\r\n  magnitude(vector, decimals = 3) {\r\n    if (!Array.isArray(vector)) return 'N/A'\r\n    const mag = Math.sqrt(vector.reduce((sum, val) => sum + val * val, 0))\r\n    return numberFormat.decimal(mag, decimals)\r\n  },\r\n\r\n  /**\r\n   * Format vector for CSV export\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {string} separator - CSV separator\r\n   * @returns {string} CSV formatted vector\r\n   */\r\n  csv(vector, separator = ',') {\r\n    if (!Array.isArray(vector)) return ''\r\n    return vector.join(separator)\r\n  }\r\n}\r\n\r\n// Time Formatting\r\nexport const timeFormat = {\r\n  /**\r\n   * Format duration in milliseconds to human readable\r\n   * @param {number} ms - Duration in milliseconds\r\n   * @returns {string} Human readable duration\r\n   */\r\n  duration(ms) {\r\n    if (typeof ms !== 'number' || ms < 0) return '0ms'\r\n    \r\n    const units = [\r\n      { name: 'd', value: 86400000 },\r\n      { name: 'h', value: 3600000 },\r\n      { name: 'm', value: 60000 },\r\n      { name: 's', value: 1000 },\r\n      { name: 'ms', value: 1 }\r\n    ]\r\n    \r\n    for (const unit of units) {\r\n      if (ms >= unit.value) {\r\n        const value = Math.floor(ms / unit.value)\r\n        return `${value}${unit.name}`\r\n      }\r\n    }\r\n    \r\n    return '0ms'\r\n  },\r\n\r\n  /**\r\n   * Format timestamp to readable format\r\n   * @param {number|Date} timestamp - Timestamp or Date object\r\n   * @returns {string} Formatted timestamp\r\n   */\r\n  timestamp(timestamp) {\r\n    try {\r\n      const date = new Date(timestamp)\r\n      return date.toLocaleString()\r\n    } catch {\r\n      return 'Invalid Date'\r\n    }\r\n  }\r\n}\r\n\r\n// Color Formatting\r\nexport const colorFormat = {\r\n  /**\r\n   * Convert value to HSL color based on range\r\n   * @param {number} value - Value to convert\r\n   * @param {number} min - Minimum value in range\r\n   * @param {number} max - Maximum value in range\r\n   * @returns {string} HSL color string\r\n   */\r\n  valueToHSL(value, min, max) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'hsl(0, 0%, 50%)'\r\n    \r\n    const normalized = (value - min) / (max - min)\r\n    const hue = Math.floor((1 - normalized) * 240) // Blue to Red\r\n    return `hsl(${hue}, 70%, 50%)`\r\n  },\r\n\r\n  /**\r\n   * Get color for vector component based on value\r\n   * @param {number} value - Component value\r\n   * @param {number} max - Maximum absolute value\r\n   * @returns {string} Color string\r\n   */\r\n  componentColor(value, max) {\r\n    if (typeof value !== 'number' || isNaN(value)) return '#666'\r\n    \r\n    const intensity = Math.abs(value) / max\r\n    const alpha = Math.min(0.3 + intensity * 0.7, 1)\r\n    \r\n    if (value > 0) {\r\n      return `rgba(239, 68, 68, ${alpha})` // Red for positive\r\n    } else if (value < 0) {\r\n      return `rgba(59, 130, 246, ${alpha})` // Blue for negative\r\n    } else {\r\n      return `rgba(156, 163, 175, ${alpha})` // Gray for zero\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert hex color to RGBA\r\n   * @param {string} hex - Hex color string\r\n   * @param {number} alpha - Alpha value (0-1)\r\n   * @returns {string} RGBA color string\r\n   */\r\n  hexToRGBA(hex, alpha = 1) {\r\n    const r = parseInt(hex.slice(1, 3), 16)\r\n    const g = parseInt(hex.slice(3, 5), 16)\r\n    const b = parseInt(hex.slice(5, 7), 16)\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`\r\n  }\r\n}\r\n\r\n// Text Formatting\r\nexport const textFormat = {\r\n  /**\r\n   * Truncate text with ellipsis\r\n   * @param {string} text - Text to truncate\r\n   * @param {number} maxLength - Maximum length\r\n   * @returns {string} Truncated text\r\n   */\r\n  truncate(text, maxLength = 50) {\r\n    if (typeof text !== 'string') return ''\r\n    if (text.length <= maxLength) return text\r\n    return text.slice(0, maxLength - 3) + '...'\r\n  },\r\n\r\n  /**\r\n   * Capitalize first letter of each word\r\n   * @param {string} text - Text to capitalize\r\n   * @returns {string} Capitalized text\r\n   */\r\n  titleCase(text) {\r\n    if (typeof text !== 'string') return ''\r\n    return text.replace(/\\w\\S*/g, (txt) => \r\n      txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\r\n    )\r\n  },\r\n\r\n  /**\r\n   * Convert camelCase to readable format\r\n   * @param {string} text - CamelCase text\r\n   * @returns {string} Readable text\r\n   */\r\n  camelToWords(text) {\r\n    if (typeof text !== 'string') return ''\r\n    return text.replace(/([A-Z])/g, ' $1').trim()\r\n  },\r\n\r\n  /**\r\n   * Pluralize word based on count\r\n   * @param {string} word - Word to pluralize\r\n   * @param {number} count - Count value\r\n   * @param {string} plural - Custom plural form\r\n   * @returns {string} Pluralized word\r\n   */\r\n  pluralize(word, count, plural = null) {\r\n    if (count === 1) return word\r\n    return plural || word + 's'\r\n  }\r\n}\r\n\r\n// Mathematical Formatting\r\nexport const mathFormat = {\r\n  /**\r\n   * Format mathematical expression with LaTeX\r\n   * @param {string} expression - Mathematical expression\r\n   * @returns {string} LaTeX formatted expression\r\n   */\r\n  latex(expression) {\r\n    return `\\\\(${expression}\\\\)`\r\n  },\r\n\r\n  /**\r\n   * Format vector in mathematical notation\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {string} symbol - Vector symbol\r\n   * @returns {string} LaTeX vector notation\r\n   */\r\n  vectorNotation(vector, symbol = 'v') {\r\n    if (!Array.isArray(vector)) return ''\r\n    const components = vector.map(val => numberFormat.decimal(val, 3))\r\n    return `\\\\vec{${symbol}} = \\\\begin{pmatrix} ${components.join(' \\\\\\\\ ')} \\\\end{pmatrix}`\r\n  },\r\n\r\n  /**\r\n   * Format matrix in mathematical notation\r\n   * @param {number[][]} matrix - Matrix to format\r\n   * @returns {string} LaTeX matrix notation\r\n   */\r\n  matrixNotation(matrix) {\r\n    if (!Array.isArray(matrix) || !Array.isArray(matrix[0])) return ''\r\n    const rows = matrix.map(row => \r\n      row.map(val => numberFormat.decimal(val, 3)).join(' & ')\r\n    )\r\n    return `\\\\begin{pmatrix} ${rows.join(' \\\\\\\\ ')} \\\\end{pmatrix}`\r\n  }\r\n}\r\n\r\n// File Size Formatting\r\nexport const fileSizeFormat = {\r\n  /**\r\n   * Format bytes to human readable format\r\n   * @param {number} bytes - File size in bytes\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted file size\r\n   */\r\n  bytes(bytes, decimals = 2) {\r\n    if (bytes === 0) return '0 Bytes'\r\n    \r\n    const k = 1024\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n    \r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + ' ' + sizes[i]\r\n  }\r\n}\r\n\r\n// Export all formatters as default\r\nexport default {\r\n  number: numberFormat,\r\n  vector: vectorFormat,\r\n  time: timeFormat,\r\n  color: colorFormat,\r\n  text: textFormat,\r\n  math: mathFormat,\r\n  fileSize: fileSizeFormat\r\n} ","<template>\r\n  <div class=\"export-modal\">\r\n    <div class=\"modal-header\">\r\n      <h3>💾 Export Data</h3>\r\n      <p>Export your vectors, analysis results, and visualizations</p>\r\n    </div>\r\n\r\n    <!-- Export Type Selection -->\r\n    <div class=\"export-sections\">\r\n      <div class=\"section-tabs\">\r\n        <button\r\n          v-for=\"section in exportSections\"\r\n          :key=\"section.id\"\r\n          class=\"tab-btn\"\r\n          :class=\"{ active: activeSection === section.id }\"\r\n          @click=\"setActiveSection(section.id)\"\r\n        >\r\n          <span class=\"tab-icon\">{{ section.icon }}</span>\r\n          {{ section.label }}\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Vector Data Export -->\r\n      <div v-if=\"activeSection === 'vectors'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Vector Data Export</h4>\r\n          <p>Export your current vector dataset</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"vectorExport.includeGenerated\" type=\"checkbox\" />\r\n              Include generated vectors ({{ generatedVectorCount }})\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"vectorExport.includeCustom\" type=\"checkbox\" />\r\n              Include custom vectors ({{ customVectorCount }})\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"vectorExport.includeMetadata\" type=\"checkbox\" />\r\n              Include metadata (labels, timestamps, etc.)\r\n            </label>\r\n          </div>\r\n\r\n          <div class=\"format-selection\">\r\n            <label>Export Format:</label>\r\n            <select v-model=\"vectorExport.format\" class=\"format-select\">\r\n              <option value=\"json\">JSON (.json)</option>\r\n              <option value=\"csv\">CSV (.csv)</option>\r\n              <option value=\"txt\">Text (.txt)</option>\r\n              <option value=\"numpy\">NumPy Array (.npy)</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"preview-info\">\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Vectors to export:</span>\r\n            <span class=\"info-value\">{{ selectedVectorCount }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Dimensions:</span>\r\n            <span class=\"info-value\">{{ vectorStore.dimensions }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">File size estimate:</span>\r\n            <span class=\"info-value\">{{ estimatedFileSize }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Analysis Results Export -->\r\n      <div v-if=\"activeSection === 'analysis'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Analysis Results Export</h4>\r\n          <p>Export analysis reports and statistical data</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeStatistics\" type=\"checkbox\" />\r\n              Include statistical analysis\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeCorrelations\" type=\"checkbox\" />\r\n              Include correlation matrix\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeClusters\" type=\"checkbox\" />\r\n              Include clustering results\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeCharts\" type=\"checkbox\" />\r\n              Include chart data\r\n            </label>\r\n          </div>\r\n\r\n          <div class=\"format-selection\">\r\n            <label>Report Format:</label>\r\n            <select v-model=\"analysisExport.format\" class=\"format-select\">\r\n              <option value=\"json\">JSON Data (.json)</option>\r\n              <option value=\"pdf\">PDF Report (.pdf)</option>\r\n              <option value=\"html\">HTML Report (.html)</option>\r\n              <option value=\"txt\">Text Report (.txt)</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Visualization Export -->\r\n      <div v-if=\"activeSection === 'visualization'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Visualization Export</h4>\r\n          <p>Export the current visualization as an image</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <div class=\"resolution-group\">\r\n              <label>Resolution:</label>\r\n              <select v-model=\"visualizationExport.resolution\" class=\"resolution-select\">\r\n                <option value=\"1x\">Current Size (1x)</option>\r\n                <option value=\"2x\">High Resolution (2x)</option>\r\n                <option value=\"4x\">Print Quality (4x)</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div class=\"format-selection\">\r\n              <label>Image Format:</label>\r\n              <select v-model=\"visualizationExport.format\" class=\"format-select\">\r\n                <option value=\"png\">PNG (Transparent background)</option>\r\n                <option value=\"jpg\">JPEG (White background)</option>\r\n                <option value=\"svg\">SVG (Vector graphics)</option>\r\n              </select>\r\n            </div>\r\n\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"visualizationExport.includeUI\" type=\"checkbox\" />\r\n              Include UI controls in export\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Configuration Export -->\r\n      <div v-if=\"activeSection === 'config'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Configuration Export</h4>\r\n          <p>Export current settings and preferences</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeVectorSettings\" type=\"checkbox\" />\r\n              Vector space configuration\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeVisualizationSettings\" type=\"checkbox\" />\r\n              Visualization settings\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeNeuralSettings\" type=\"checkbox\" />\r\n              Neural network settings\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeUIPreferences\" type=\"checkbox\" />\r\n              UI preferences\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Export Actions -->\r\n    <div class=\"modal-actions\">\r\n      <button class=\"btn-secondary\" @click=\"$emit('close')\">\r\n        Cancel\r\n      </button>\r\n      <button \r\n        class=\"btn-primary\" \r\n        :disabled=\"!canExport || isExporting\"\r\n        @click=\"performExport\"\r\n      >\r\n        <span v-if=\"isExporting\">Exporting...</span>\r\n        <span v-else>💾 Export {{ activeSection }}</span>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Export Progress -->\r\n    <div v-if=\"isExporting\" class=\"export-progress\">\r\n      <div class=\"progress-bar\">\r\n        <div class=\"progress-fill\" :style=\"{ width: exportProgress + '%' }\"></div>\r\n      </div>\r\n      <div class=\"progress-text\">{{ exportStatus }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore.js'\r\nimport { useUIStore } from '../../stores/uiStore.js'\r\nimport { fileSizeFormat } from '../../utils/formatUtils.js'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\n\r\n// Reactive state\r\nconst activeSection = ref('vectors')\r\nconst isExporting = ref(false)\r\nconst exportProgress = ref(0)\r\nconst exportStatus = ref('')\r\n\r\n// Export configurations\r\nconst vectorExport = ref({\r\n  includeGenerated: true,\r\n  includeCustom: true,\r\n  includeMetadata: true,\r\n  format: 'json'\r\n})\r\n\r\nconst analysisExport = ref({\r\n  includeStatistics: true,\r\n  includeCorrelations: true,\r\n  includeClusters: true,\r\n  includeCharts: false,\r\n  format: 'json'\r\n})\r\n\r\nconst visualizationExport = ref({\r\n  resolution: '2x',\r\n  format: 'png',\r\n  includeUI: false\r\n})\r\n\r\nconst configExport = ref({\r\n  includeVectorSettings: true,\r\n  includeVisualizationSettings: true,\r\n  includeNeuralSettings: true,\r\n  includeUIPreferences: false\r\n})\r\n\r\n// Export sections\r\nconst exportSections = [\r\n  { id: 'vectors', label: 'Vectors', icon: '🎯' },\r\n  { id: 'analysis', label: 'Analysis', icon: '📊' },\r\n  { id: 'visualization', label: 'Image', icon: '🖼️' },\r\n  { id: 'config', label: 'Settings', icon: '⚙️' }\r\n]\r\n\r\n// Computed properties\r\nconst generatedVectorCount = computed(() => {\r\n  return vectorStore.vectors.filter(v => v.type !== 'custom').length\r\n})\r\n\r\nconst customVectorCount = computed(() => {\r\n  return vectorStore.vectors.filter(v => v.type === 'custom').length\r\n})\r\n\r\nconst selectedVectorCount = computed(() => {\r\n  let count = 0\r\n  if (vectorExport.value.includeGenerated) count += generatedVectorCount.value\r\n  if (vectorExport.value.includeCustom) count += customVectorCount.value\r\n  return count\r\n})\r\n\r\nconst estimatedFileSize = computed(() => {\r\n  const vectorCount = selectedVectorCount.value\r\n  const dimensions = vectorStore.dimensions\r\n  const baseSize = vectorCount * dimensions * 8 // 8 bytes per number\r\n  const metadataSize = vectorExport.value.includeMetadata ? vectorCount * 100 : 0\r\n  const totalSize = baseSize + metadataSize\r\n  \r\n  return fileSizeFormat.bytes(totalSize)\r\n})\r\n\r\nconst canExport = computed(() => {\r\n  switch (activeSection.value) {\r\n    case 'vectors':\r\n      return selectedVectorCount.value > 0\r\n    case 'analysis':\r\n      return Object.values(analysisExport.value).some(v => v === true)\r\n    case 'visualization':\r\n      return true\r\n    case 'config':\r\n      return Object.values(configExport.value).some(v => v === true)\r\n    default:\r\n      return false\r\n  }\r\n})\r\n\r\n// Methods\r\nconst setActiveSection = (section) => {\r\n  activeSection.value = section\r\n}\r\n\r\nconst performExport = async () => {\r\n  if (!canExport.value || isExporting.value) return\r\n\r\n  isExporting.value = true\r\n  exportProgress.value = 0\r\n\r\n  try {\r\n    switch (activeSection.value) {\r\n      case 'vectors':\r\n        await exportVectors()\r\n        break\r\n      case 'analysis':\r\n        await exportAnalysis()\r\n        break\r\n      case 'visualization':\r\n        await exportVisualization()\r\n        break\r\n      case 'config':\r\n        await exportConfiguration()\r\n        break\r\n    }\r\n\r\n    uiStore.showSuccess('Export completed successfully!')\r\n    emit('close')\r\n\r\n  } catch (error) {\r\n    uiStore.showError(`Export failed: ${error.message}`)\r\n  } finally {\r\n    isExporting.value = false\r\n    exportProgress.value = 0\r\n    exportStatus.value = ''\r\n  }\r\n}\r\n\r\nconst exportVectors = async () => {\r\n  exportStatus.value = 'Preparing vector data...'\r\n  exportProgress.value = 10\r\n\r\n  const vectors = vectorStore.vectors.filter(vector => {\r\n    if (vector.type === 'custom' && !vectorExport.value.includeCustom) return false\r\n    if (vector.type !== 'custom' && !vectorExport.value.includeGenerated) return false\r\n    return true\r\n  })\r\n\r\n  exportProgress.value = 30\r\n  exportStatus.value = 'Formatting data...'\r\n\r\n  let exportData\r\n  let fileName\r\n  let mimeType\r\n\r\n  switch (vectorExport.value.format) {\r\n    case 'json':\r\n      exportData = JSON.stringify({\r\n        metadata: {\r\n          exportedAt: new Date().toISOString(),\r\n          vectorCount: vectors.length,\r\n          dimensions: vectorStore.dimensions,\r\n          includeMetadata: vectorExport.value.includeMetadata\r\n        },\r\n        vectors: vectors.map(v => vectorExport.value.includeMetadata ? v : { values: v.values })\r\n      }, null, 2)\r\n      fileName = `vectors_${Date.now()}.json`\r\n      mimeType = 'application/json'\r\n      break\r\n\r\n    case 'csv':\r\n      const headers = vectorExport.value.includeMetadata \r\n        ? ['id', 'label', 'type', ...Array.from({length: vectorStore.dimensions}, (_, i) => `dim_${i+1}`)]\r\n        : Array.from({length: vectorStore.dimensions}, (_, i) => `dim_${i+1}`)\r\n      \r\n      const csvRows = vectors.map(v => {\r\n        const row = vectorExport.value.includeMetadata \r\n          ? [v.id, v.label || '', v.type || '', ...v.values]\r\n          : v.values\r\n        return row.join(',')\r\n      })\r\n      \r\n      exportData = [headers.join(','), ...csvRows].join('\\n')\r\n      fileName = `vectors_${Date.now()}.csv`\r\n      mimeType = 'text/csv'\r\n      break\r\n\r\n    case 'txt':\r\n      exportData = vectors.map(v => {\r\n        const vectorStr = v.values.join(', ')\r\n        return vectorExport.value.includeMetadata \r\n          ? `${v.label || v.id}: [${vectorStr}]`\r\n          : `[${vectorStr}]`\r\n      }).join('\\n')\r\n      fileName = `vectors_${Date.now()}.txt`\r\n      mimeType = 'text/plain'\r\n      break\r\n  }\r\n\r\n  exportProgress.value = 80\r\n  exportStatus.value = 'Downloading file...'\r\n\r\n  downloadFile(exportData, fileName, mimeType)\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst exportAnalysis = async () => {\r\n  exportStatus.value = 'Gathering analysis data...'\r\n  exportProgress.value = 20\r\n\r\n  const analysisData = {\r\n    metadata: {\r\n      exportedAt: new Date().toISOString(),\r\n      vectorCount: vectorStore.vectors.length,\r\n      dimensions: vectorStore.dimensions\r\n    }\r\n  }\r\n\r\n  if (analysisExport.value.includeStatistics) {\r\n    // Get statistics from the framework if available\r\n    analysisData.statistics = vectorStore.framework ? \r\n      vectorStore.framework.modules.analysisEngine.getStatistics() : {}\r\n  }\r\n\r\n  exportProgress.value = 60\r\n  exportStatus.value = 'Formatting report...'\r\n\r\n  let exportData\r\n  let fileName\r\n  let mimeType\r\n\r\n  switch (analysisExport.value.format) {\r\n    case 'json':\r\n      exportData = JSON.stringify(analysisData, null, 2)\r\n      fileName = `analysis_${Date.now()}.json`\r\n      mimeType = 'application/json'\r\n      break\r\n\r\n    case 'txt':\r\n      exportData = generateTextReport(analysisData)\r\n      fileName = `analysis_report_${Date.now()}.txt`\r\n      mimeType = 'text/plain'\r\n      break\r\n  }\r\n\r\n  exportProgress.value = 90\r\n  downloadFile(exportData, fileName, mimeType)\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst exportVisualization = async () => {\r\n  exportStatus.value = 'Capturing visualization...'\r\n  exportProgress.value = 30\r\n\r\n  // Get the SVG element from the visualization\r\n  const svgElement = document.querySelector('#main-viz')\r\n  if (!svgElement) {\r\n    throw new Error('Visualization not found')\r\n  }\r\n\r\n  exportProgress.value = 60\r\n  exportStatus.value = 'Processing image...'\r\n\r\n  const serializer = new XMLSerializer()\r\n  const svgString = serializer.serializeToString(svgElement)\r\n\r\n  let fileName\r\n  let mimeType\r\n\r\n  switch (visualizationExport.value.format) {\r\n    case 'svg':\r\n      downloadFile(svgString, `visualization_${Date.now()}.svg`, 'image/svg+xml')\r\n      break\r\n\r\n    case 'png':\r\n    case 'jpg':\r\n      // Convert SVG to canvas and then to image\r\n      await exportAsImage(svgString, visualizationExport.value.format)\r\n      break\r\n  }\r\n\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst exportConfiguration = async () => {\r\n  exportStatus.value = 'Collecting configuration...'\r\n  exportProgress.value = 30\r\n\r\n  const config = {\r\n    metadata: {\r\n      exportedAt: new Date().toISOString(),\r\n      version: '1.0.0'\r\n    }\r\n  }\r\n\r\n  if (configExport.value.includeVectorSettings) {\r\n    config.vectorSettings = {\r\n      dimensions: vectorStore.dimensions,\r\n      numVectors: vectorStore.numVectors,\r\n      forceType: vectorStore.forceType\r\n    }\r\n  }\r\n\r\n  if (configExport.value.includeNeuralSettings) {\r\n    config.neuralSettings = {\r\n      activationFunction: vectorStore.activationFunction,\r\n      learningRate: vectorStore.learningRate\r\n    }\r\n  }\r\n\r\n  exportProgress.value = 80\r\n  const exportData = JSON.stringify(config, null, 2)\r\n  downloadFile(exportData, `config_${Date.now()}.json`, 'application/json')\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst downloadFile = (content, fileName, mimeType) => {\r\n  const blob = new Blob([content], { type: mimeType })\r\n  const url = URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = fileName\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\nconst exportAsImage = async (svgString, format) => {\r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas')\r\n    const ctx = canvas.getContext('2d')\r\n    const img = new Image()\r\n\r\n    img.onload = () => {\r\n      const multiplier = parseInt(visualizationExport.value.resolution.replace('x', ''))\r\n      canvas.width = img.width * multiplier\r\n      canvas.height = img.height * multiplier\r\n\r\n      if (format === 'jpg') {\r\n        ctx.fillStyle = 'white'\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n      }\r\n\r\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\r\n\r\n      canvas.toBlob((blob) => {\r\n        const url = URL.createObjectURL(blob)\r\n        const link = document.createElement('a')\r\n        link.href = url\r\n        link.download = `visualization_${Date.now()}.${format}`\r\n        document.body.appendChild(link)\r\n        link.click()\r\n        document.body.removeChild(link)\r\n        URL.revokeObjectURL(url)\r\n        resolve()\r\n      }, `image/${format}`)\r\n    }\r\n\r\n    img.onerror = reject\r\n    img.src = 'data:image/svg+xml;base64,' + btoa(svgString)\r\n  })\r\n}\r\n\r\nconst generateTextReport = (data) => {\r\n  let report = 'VECTOVERSE ANALYSIS REPORT\\n'\r\n  report += '=' .repeat(30) + '\\n\\n'\r\n  report += `Generated: ${data.metadata.exportedAt}\\n`\r\n  report += `Vectors: ${data.metadata.vectorCount}\\n`\r\n  report += `Dimensions: ${data.metadata.dimensions}\\n\\n`\r\n  \r\n  if (data.statistics) {\r\n    report += 'STATISTICS\\n'\r\n    report += '-' .repeat(15) + '\\n'\r\n    Object.entries(data.statistics).forEach(([key, value]) => {\r\n      report += `${key}: ${value}\\n`\r\n    })\r\n  }\r\n  \r\n  return report\r\n}\r\n\r\nconst emit = defineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.export-modal {\r\n  max-width: 650px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.modal-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.modal-header h3 {\r\n  color: #667eea;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.modal-header p {\r\n  color: #666;\r\n  margin: 0;\r\n}\r\n\r\n.section-tabs {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-bottom: 2rem;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 8px;\r\n  padding: 0.25rem;\r\n}\r\n\r\n.tab-btn {\r\n  flex: 1;\r\n  padding: 0.75rem 1rem;\r\n  border: none;\r\n  background: transparent;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  color: #666;\r\n}\r\n\r\n.tab-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: #333;\r\n}\r\n\r\n.tab-btn.active {\r\n  background: #667eea;\r\n  color: white;\r\n}\r\n\r\n.export-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.section-header {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.section-header h4 {\r\n  color: #333;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.section-header p {\r\n  color: #666;\r\n  margin: 0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.export-options {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.option-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.checkbox-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0.75rem;\r\n  cursor: pointer;\r\n  color: #333;\r\n}\r\n\r\n.checkbox-label input[type=\"checkbox\"] {\r\n  margin: 0;\r\n}\r\n\r\n.format-selection, .resolution-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.format-selection label, .resolution-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.format-select, .resolution-select {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 2px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.format-select:focus, .resolution-select:focus {\r\n  outline: none;\r\n  border-color: #667eea;\r\n}\r\n\r\n.preview-info {\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.info-item {\r\n  text-align: center;\r\n}\r\n\r\n.info-label {\r\n  display: block;\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.info-value {\r\n  display: block;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.btn-secondary, .btn-primary {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6b7280;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #4b5563;\r\n}\r\n\r\n.btn-primary {\r\n  background: #667eea;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #5a67d8;\r\n}\r\n\r\n.btn-primary:disabled {\r\n  background: #9ca3af;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.export-progress {\r\n  margin-top: 1rem;\r\n  padding: 1rem;\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n}\r\n\r\n.progress-bar {\r\n  width: 100%;\r\n  height: 8px;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.progress-fill {\r\n  height: 100%;\r\n  background: #667eea;\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.progress-text {\r\n  text-align: center;\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n}\r\n</style> ","<template>\r\n  <div>\r\n    <div class=\"new-preset-form\">\r\n      <input v-model=\"newPresetName\" placeholder=\"New preset name...\" class=\"form-input\" />\r\n      <button @click=\"saveCurrentPreset\" :disabled=\"!newPresetName\" class=\"btn btn-primary\">Save Current</button>\r\n    </div>\r\n\r\n    <div class=\"presets-list\">\r\n      <h4 class=\"list-header\">Saved Presets</h4>\r\n      <div v-if=\"!controls.presets.value || controls.presets.value.length === 0\" class=\"no-presets\">\r\n        No presets saved yet.\r\n      </div>\r\n      <ul v-else>\r\n        <li v-for=\"preset in controls.presets.value\" :key=\"preset.name\">\r\n          <span class=\"preset-name\">{{ preset.name }}</span>\r\n          <div class=\"preset-actions\">\r\n            <button class=\"btn btn-secondary\" @click=\"loadSelectedPreset(preset.name)\">Load</button>\r\n            <button class=\"btn btn-danger\" @click=\"deleteSelectedPreset(preset.name)\">Delete</button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useControls } from '../../composables/useControls'\r\nimport { useUIStore } from '../../stores/uiStore'\r\n\r\nconst controls = useControls()\r\nconst uiStore = useUIStore()\r\nconst newPresetName = ref('')\r\n\r\ndefineEmits(['close'])\r\n\r\nconst saveCurrentPreset = () => {\r\n  if (!newPresetName.value) return;\r\n  const presetName = newPresetName.value;\r\n  controls.savePreset(presetName)\r\n  newPresetName.value = ''\r\n  uiStore.showSuccess(`Preset \"${presetName}\" saved!`)\r\n}\r\n\r\nconst loadSelectedPreset = (name) => {\r\n  controls.loadPreset(name)\r\n  uiStore.showSuccess(`Preset \"${name}\" loaded!`)\r\n  emit('close');\r\n}\r\n\r\nconst deleteSelectedPreset = (name) => {\r\n    controls.deletePreset(name);\r\n    uiStore.showSuccess(`Preset \"${name}\" deleted!`);\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.new-preset-form {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-input {\r\n  flex-grow: 1;\r\n  padding: 0.75rem;\r\n  background: #1e1e1e;\r\n  border: 1px solid #444;\r\n  border-radius: 6px;\r\n  color: #f5f5f7;\r\n  font-size: 1rem;\r\n}\r\n\r\n.form-input::placeholder {\r\n  color: #888;\r\n}\r\n\r\n.btn {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  transition: background-color 0.2s ease, opacity 0.2s ease;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #007aff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.btn:disabled {\r\n  background-color: #555;\r\n  color: #999;\r\n  cursor: not-allowed;\r\n  opacity: 0.6;\r\n}\r\n\r\n.list-header {\r\n  margin: 0 0 0.75rem 0;\r\n  color: #a0a0a5;\r\n  text-transform: uppercase;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n  letter-spacing: 0.05em;\r\n}\r\n\r\n.presets-list ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n  border: 1px solid #444;\r\n  border-radius: 6px;\r\n}\r\n\r\n.presets-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #444;\r\n}\r\n\r\n.presets-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.presets-list li:hover {\r\n  background-color: #3a3a3c;\r\n}\r\n\r\n.preset-name {\r\n  font-weight: 500;\r\n  color: #f5f5f7;\r\n}\r\n\r\n.preset-actions {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #555;\r\n  color: white;\r\n  padding: 0.4rem 0.8rem;\r\n  font-size: 0.9rem;\r\n}\r\n.btn-secondary:hover {\r\n  background-color: #777;\r\n}\r\n\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n  padding: 0.4rem 0.8rem;\r\n  font-size: 0.9rem;\r\n}\r\n.btn-danger:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\n.no-presets {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #888;\r\n  font-style: italic;\r\n  border: 1px dashed #555;\r\n  border-radius: 6px;\r\n}\r\n</style> ","<template>\r\n  <Teleport to=\"body\">\r\n    <div class=\"notification\" :class=\"type\" @click=\"$emit('close')\">\r\n      <div class=\"notification-icon\">\r\n        {{ type === 'error' ? '❌' : '✅' }}\r\n      </div>\r\n      <div class=\"notification-message\">\r\n        {{ message }}\r\n      </div>\r\n      <button class=\"notification-close\" @click.stop=\"$emit('close')\">×</button>\r\n    </div>\r\n  </Teleport>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps({\r\n  type: {\r\n    type: String,\r\n    required: true,\r\n    validator: (value) => ['success', 'error'].includes(value)\r\n  },\r\n  message: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\ndefineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.notification {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  padding: 1rem 1.5rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  z-index: 1100;\r\n  cursor: pointer;\r\n  max-width: 400px;\r\n  animation: slideIn 0.3s ease;\r\n}\r\n\r\n.notification.success {\r\n  background: rgba(76, 175, 80, 0.9);\r\n  color: white;\r\n  border: 1px solid rgba(76, 175, 80, 0.3);\r\n}\r\n\r\n.notification.error {\r\n  background: rgba(244, 67, 54, 0.9);\r\n  color: white;\r\n  border: 1px solid rgba(244, 67, 54, 0.3);\r\n}\r\n\r\n.notification-icon {\r\n  font-size: 1.2rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.notification-message {\r\n  flex: 1;\r\n  font-weight: 500;\r\n}\r\n\r\n.notification-close {\r\n  background: none;\r\n  border: none;\r\n  color: inherit;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 20px;\r\n  height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  opacity: 0.7;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.notification-close:hover {\r\n  opacity: 1;\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateX(100%);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .notification {\r\n    top: 10px;\r\n    right: 10px;\r\n    left: 10px;\r\n    max-width: none;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <div class=\"error-notification\" :class=\"`error-${notification.severity || 'application'}`\">\r\n    <div class=\"error-content\">\r\n      <div class=\"error-icon\">{{ getErrorIcon(notification.severity) }}</div>\r\n      <div class=\"error-text\">\r\n        <strong>Oops! Something went wrong.</strong>\r\n        <p>{{ notification.message }}</p>\r\n      </div>\r\n      <button class=\"error-close\" aria-label=\"Close\" @click=\"close\">&times;</button>\r\n    </div>\r\n    <div v-if=\"notification.actions && notification.actions.length > 0\" class=\"error-actions\">\r\n      <button\r\n        v-for=\"(action, index) in notification.actions\"\r\n        :key=\"index\"\r\n        class=\"btn-compact error-action\"\r\n        @click=\"() => executeAction(action.action)\"\r\n      >\r\n        {{ action.text }}\r\n      </button>\r\n    </div>\r\n     <div class=\"error-progress\" :style=\"{ width: `${progress}%` }\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nconst props = defineProps({\r\n  notification: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst uiStore = useUIStore()\r\nconst progress = ref(100)\r\nlet timer = null;\r\n\r\nconst close = () => {\r\n  uiStore.hideError()\r\n}\r\n\r\nconst executeAction = (action) => {\r\n  if (typeof action === 'function') {\r\n    action();\r\n  }\r\n  close();\r\n}\r\n\r\nconst getErrorIcon = (severity) => {\r\n  switch (severity) {\r\n    case 'network': return '🌐';\r\n    case 'permission': return '🔒';\r\n    case 'memory': return '💾';\r\n    case 'validation': return '⚠️';\r\n    case 'timeout': return '⏱️';\r\n    default: return '🔥';\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  const duration = 10000; // 10 seconds\r\n  const interval = 100; // update every 100ms\r\n  const steps = duration / interval;\r\n  const decrement = 100 / steps;\r\n\r\n  timer = setInterval(() => {\r\n    progress.value -= decrement;\r\n    if (progress.value <= 0) {\r\n      close();\r\n    }\r\n  }, interval);\r\n})\r\n\r\nonUnmounted(() => {\r\n  clearInterval(timer)\r\n})\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.error-notification {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 350px;\r\n  background: #333;\r\n  color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 5px 15px rgba(0,0,0,0.3);\r\n  overflow: hidden;\r\n  z-index: 2000;\r\n  border-left: 4px solid #f44336;\r\n  animation: slideInUp 0.5s ease-out;\r\n}\r\n\r\n.error-notification.error-network { border-left-color: #2196F3; }\r\n.error-notification.error-permission { border-left-color: #FFC107; }\r\n.error-notification.error-memory { border-left-color: #9C27B0; }\r\n.error-notification.error-validation { border-left-color: #FF9800; }\r\n.error-notification.error-timeout { border-left-color: #607D8B; }\r\n\r\n.error-content {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 1rem;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 1.5rem;\r\n  margin-right: 1rem;\r\n}\r\n\r\n.error-text {\r\n  flex-grow: 1;\r\n}\r\n\r\n.error-text strong {\r\n  display: block;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.error-text p {\r\n  margin: 0;\r\n  font-size: 0.9em;\r\n  opacity: 0.9;\r\n  line-height: 1.4;\r\n}\r\n\r\n.error-close {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  opacity: 0.7;\r\n  transition: opacity 0.2s;\r\n}\r\n.error-close:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.error-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 0.5rem;\r\n  padding: 0 1rem 0.75rem;\r\n}\r\n\r\n.error-action {\r\n  background-color: rgba(255,255,255,0.1);\r\n  color: white;\r\n  border: 1px solid rgba(255,255,255,0.2);\r\n}\r\n.error-action:hover {\r\n  background-color: rgba(255,255,255,0.2);\r\n}\r\n\r\n.error-progress {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  height: 4px;\r\n  background-color: rgba(255,255,255,0.5);\r\n  transition: width 0.1s linear;\r\n}\r\n\r\n@keyframes slideInUp {\r\n  from {\r\n    transform: translateY(100px);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <ModalBase title=\"Settings\" v-if=\"show\" @close=\"closeModal\">\r\n    <p>Settings will be available here soon.</p>\r\n    <template #footer>\r\n      <button @click=\"closeModal\" class=\"btn btn-secondary\">Close</button>\r\n    </template>\r\n  </ModalBase>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\nimport { useUIStore } from '../../stores/uiStore';\r\nimport ModalBase from './ModalBase.vue';\r\n\r\nconst uiStore = useUIStore();\r\n\r\nconst show = computed(() => uiStore.isModalOpen && uiStore.modalName === 'settings');\r\n\r\nconst closeModal = () => {\r\n  uiStore.closeModal();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn-secondary {\r\n  background-color: #555;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #777;\r\n}\r\n</style> ","<template>\r\n  <transition name=\"fade\">\r\n    <div class=\"modal-overlay\" v-if=\"show\" @click.self=\"closeModal\">\r\n      <div class=\"modal-content\">\r\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\r\n        <h2 class=\"modal-title\">Vector Comparison</h2>\r\n        <div v-if=\"comparisonResults\" class=\"results-container\">\r\n          <p>Comparison between <strong>{{ comparisonResults.vectorA.id }}</strong> and <strong>{{ comparisonResults.vectorB.id }}</strong></p>\r\n          <ul class=\"results-list\">\r\n            <li><strong>Cosine Similarity:</strong> <span>{{ comparisonResults.cosineSimilarity.toFixed(4) }}</span></li>\r\n            <li><strong>Euclidean Distance:</strong> <span>{{ comparisonResults.euclideanDistance.toFixed(4) }}</span></li>\r\n            <li><strong>Dot Product:</strong> <span>{{ comparisonResults.dotProduct.toFixed(4) }}</span></li>\r\n          </ul>\r\n        </div>\r\n        <div v-else>\r\n          <p>Select two vectors to compare.</p>\r\n        </div>\r\n        <div class=\"modal-actions\">\r\n          <button @click=\"closeModal\" class=\"btn btn-primary\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\nimport { useUIStore } from '../../stores/uiStore';\r\n\r\nconst uiStore = useUIStore();\r\n\r\nconst show = computed(() => uiStore.isModalOpen && uiStore.modalName === 'vectorComparison');\r\nconst comparisonResults = computed(() => uiStore.modalData);\r\n\r\nconst closeModal = () => {\r\n  uiStore.closeModal();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.modal-content {\r\n  background: #2c2c2e;\r\n  color: #f5f5f7;\r\n  padding: 2rem;\r\n  border-radius: 12px;\r\n  max-width: 500px;\r\n  width: 90%;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n  position: relative;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.modal-title {\r\n  margin-top: 0;\r\n  color: #fff;\r\n  font-size: 1.5rem;\r\n  border-bottom: 1px solid #444;\r\n  padding-bottom: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.close-button {\r\n  position: absolute;\r\n  top: 1rem;\r\n  right: 1rem;\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  color: #aaa;\r\n  cursor: pointer;\r\n  transition: color 0.2s ease;\r\n}\r\n\r\n.close-button:hover {\r\n  color: #fff;\r\n}\r\n\r\n.results-container {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.results-list {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.results-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #444;\r\n}\r\n\r\n.results-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.results-list strong {\r\n  color: #a0a0a5;\r\n}\r\n\r\n.results-list span {\r\n  font-weight: bold;\r\n  color: #f5f5f7;\r\n}\r\n\r\n.modal-actions {\r\n  text-align: right;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #007aff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.fade-enter-from, .fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.fade-enter-active .modal-content,\r\n.fade-leave-active .modal-content {\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.fade-enter-from .modal-content,\r\n.fade-leave-to .modal-content {\r\n  transform: scale(0.95);\r\n}\r\n</style> ","<template>\r\n  <!-- Tutorial Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'tutorial'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"Welcome to the Vectoverse!\"\r\n  >\r\n    <TutorialModal />\r\n  </ModalBase>\r\n\r\n  <!-- Analysis Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'analysis'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"🔬 Advanced Analysis\"\r\n  >\r\n    <AnalysisModal />\r\n  </ModalBase>\r\n\r\n  <!-- Upload Help Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'uploadHelp'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"📁 Vector Matrix Upload Guide\"\r\n  >\r\n    <UploadHelpModal />\r\n  </ModalBase>\r\n\r\n  <!-- Activation Help Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'activationHelp'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"🔌 Neural Activation Functions Guide\"\r\n  >\r\n    <ActivationHelpModal />\r\n  </ModalBase>\r\n\r\n  <!-- Add Vector Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'addVector'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"➕ Add Custom Vector\"\r\n  >\r\n    <AddVectorModal />\r\n  </ModalBase>\r\n\r\n  <!-- Export Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'export'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"💾 Export Data\"\r\n  >\r\n    <ExportModal />\r\n  </ModalBase>\r\n\r\n  <!-- Presets Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'presets'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"📁 Vector Matrix Presets\"\r\n  >\r\n    <PresetsModal @close=\"uiStore.hideModal\" />\r\n  </ModalBase>\r\n\r\n  <!-- Keyboard Shortcuts Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'shortcuts'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"⌨️ Keyboard Shortcuts\"\r\n  >\r\n    <ShortcutsModal />\r\n  </ModalBase>\r\n\r\n  <!-- Error/Success Notifications -->\r\n  <Notification \r\n    v-if=\"uiStore.hasSuccess\"\r\n    type=\"success\"\r\n    :message=\"uiStore.successMessage\"\r\n    @close=\"uiStore.hideSuccess\"\r\n  />\r\n\r\n  <ErrorNotification\r\n    v-if=\"uiStore.hasError\"\r\n    :notification=\"uiStore.errorDetails\"\r\n    @close=\"uiStore.hideError\"\r\n  />\r\n\r\n  <!-- Other Modals -->\r\n  <SettingsModal />\r\n  <VectorComparisonModal />\r\n</template>\r\n\r\n<script setup>\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport ModalBase from './modals/ModalBase.vue'\r\nimport TutorialModal from './modals/TutorialModal.vue'\r\nimport AnalysisModal from './modals/AnalysisModal.vue'\r\nimport UploadHelpModal from './modals/UploadHelpModal.vue'\r\nimport ActivationHelpModal from './modals/ActivationHelpModal.vue'\r\nimport ShortcutsModal from './modals/ShortcutsModal.vue'\r\nimport AddVectorModal from './modals/AddVectorModal.vue'\r\nimport ExportModal from './modals/ExportModal.vue'\r\nimport PresetsModal from './modals/PresetsModal.vue'\r\nimport Notification from './Notification.vue'\r\nimport ErrorNotification from './ErrorNotification.vue'\r\nimport SettingsModal from './modals/SettingsModal.vue'\r\nimport VectorComparisonModal from './modals/VectorComparisonModal.vue'\r\n\r\nconst uiStore = useUIStore()\r\n</script> ","<template>\r\n  <div id=\"app\" class=\"vectoverse-app\">\r\n    <div class=\"container\">\r\n      <!-- Header Component -->\r\n      <AppHeader class=\"app-header\" />\r\n\r\n      <main class=\"app-main\">\r\n        <!-- Main Visualization Container -->\r\n        <VisualizationContainer />\r\n\r\n        <!-- Vector Analysis Studio -->\r\n        <VectorAnalysisStudio />\r\n      </main>\r\n\r\n      <!-- Sidebar -->\r\n      <InfoSidebar class=\"info-sidebar\" />\r\n    </div>\r\n\r\n    <!-- Modals -->\r\n    <ModalContainer />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, provide, nextTick } from 'vue'\r\nimport { useVectorStore } from './stores/vectorStore'\r\nimport { useUIStore } from './stores/uiStore'\r\nimport { useKeyboardShortcuts } from './composables/useKeyboardShortcuts'\r\nimport { useTutorialManager } from './composables/useTutorialManager'\r\nimport { useAccessibility } from './composables/useAccessibility'\r\nimport { usePerformanceOptimizer } from './composables/usePerformanceOptimizer'\r\nimport { usePeriodicTable } from './composables/usePeriodicTable'\r\nimport { useExportManager } from './composables/useExportManager'\r\nimport { useErrorHandler } from './composables/useErrorHandler'\r\nimport { useMathRenderer } from './composables/useMathRenderer'\r\nimport { useControls } from './composables/useControls'\r\n\r\n// Components\r\nimport AppHeader from './components/AppHeader.vue'\r\nimport VisualizationContainer from './components/VisualizationContainer.vue'\r\nimport VectorAnalysisStudio from './components/VectorAnalysisStudio.vue'\r\nimport InfoSidebar from './components/InfoSidebar.vue'\r\nimport ModalContainer from './components/ModalContainer.vue'\r\n\r\n// Stores\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\n\r\n// Composables\r\nconst keyboardShortcuts = useKeyboardShortcuts()\r\nconst tutorialManager = useTutorialManager()\r\nconst accessibility = useAccessibility()\r\nconst performanceOptimizer = usePerformanceOptimizer()\r\nconst periodicTable = usePeriodicTable()\r\nconst exportManager = useExportManager()\r\nconst errorHandler = useErrorHandler()\r\nconst mathRenderer = useMathRenderer()\r\nconst controls = useControls()\r\n\r\nonMounted(async () => {\r\n  try {\r\n    await nextTick()\r\n    \r\n    // Initialize the vectors in the store\r\n    vectorStore.generateVectors()\r\n    \r\n    // Initialize accessibility features\r\n    accessibility.initialize()\r\n    \r\n    console.log('VectoVerse Vue app initialized successfully.')\r\n    \r\n    // Re-render math after framework initialization\r\n    setTimeout(() => {\r\n      if (window.renderMath) {\r\n        window.renderMath()\r\n      }\r\n    }, 100)\r\n\r\n  } catch (error) {\r\n    console.error('Failed to initialize VectoVerse:', error)\r\n    uiStore.showError('Failed to initialize VectoVerse. Please refresh and try again.')\r\n  }\r\n})\r\n\r\n// Provide composables to child components\r\nprovide('tutorialManager', tutorialManager)\r\nprovide('accessibility', accessibility)\r\nprovide('performanceOptimizer', performanceOptimizer)\r\nprovide('periodicTable', periodicTable)\r\nprovide('exportManager', exportManager)\r\nprovide('errorHandler', errorHandler)\r\nprovide('mathRenderer', mathRenderer)\r\nprovide('controls', controls)\r\n</script> ","import { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function usePerformanceOptimizer() {\r\n  const uiStore = useUIStore()\r\n  \r\n  // Performance metrics\r\n  const frameRate = ref(60)\r\n  const renderQueue = ref([])\r\n  const isRendering = ref(false)\r\n  const performanceMetrics = ref({\r\n    fps: 0,\r\n    renderTime: 0,\r\n    memoryUsage: 0,\r\n    vectorCount: 0\r\n  })\r\n\r\n  // Performance tracking\r\n  let lastTime = performance.now()\r\n  let frameCount = 0\r\n  let animationFrameId = null\r\n\r\n  // Computed properties\r\n  const isLowPerformance = computed(() => performanceMetrics.value.fps < 30)\r\n  const isHighMemoryUsage = computed(() => performanceMetrics.value.memoryUsage > 100)\r\n  const shouldReduceComplexity = computed(() => {\r\n    const isMobile = window.innerWidth < 768\r\n    const isLowMemory = performanceMetrics.value.memoryUsage > 50\r\n    const isLowFPS = performanceMetrics.value.fps < 20\r\n    const tooManyVectors = performanceMetrics.value.vectorCount > (isMobile ? 30 : 100)\r\n    \r\n    return isMobile || isLowMemory || isLowFPS || tooManyVectors\r\n  })\r\n\r\n  // FPS tracking\r\n  const trackFPS = () => {\r\n    frameCount++\r\n    const currentTime = performance.now()\r\n    \r\n    if (currentTime - lastTime >= 1000) {\r\n      performanceMetrics.value.fps = Math.round(frameCount * 1000 / (currentTime - lastTime))\r\n      frameCount = 0\r\n      lastTime = currentTime\r\n      \r\n      // Adjust rendering quality based on FPS\r\n      adjustRenderingQuality()\r\n    }\r\n    \r\n    animationFrameId = requestAnimationFrame(trackFPS)\r\n  }\r\n\r\n  // Monitor memory usage\r\n  const monitorMemory = () => {\r\n    if (performance.memory) {\r\n      performanceMetrics.value.memoryUsage = Math.round(\r\n        performance.memory.usedJSHeapSize / 1024 / 1024\r\n      )\r\n    }\r\n  }\r\n\r\n  // Adjust rendering quality based on performance\r\n  const adjustRenderingQuality = () => {\r\n    if (performanceMetrics.value.fps < 30) {\r\n      optimizeForLowPerformance()\r\n    } else if (performanceMetrics.value.fps > 50) {\r\n      restoreHighQuality()\r\n    }\r\n    \r\n    // Show performance warning if needed\r\n    if (performanceMetrics.value.vectorCount > 100 && performanceMetrics.value.fps < 15) {\r\n      uiStore.showError('Performance warning: Too many vectors. Consider reducing the count.')\r\n    }\r\n  }\r\n\r\n  // Optimize for low performance devices\r\n  const optimizeForLowPerformance = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    if (svg) {\r\n      svg.style.shapeRendering = 'optimizeSpeed'\r\n      svg.style.textRendering = 'optimizeSpeed'\r\n    }\r\n\r\n    // Reduce animation frequency\r\n    frameRate.value = 30\r\n    \r\n    // Disable expensive visual effects\r\n    document.querySelectorAll('.vector-atom').forEach(atom => {\r\n      atom.style.filter = 'none'\r\n    })\r\n\r\n    // Reduce force line complexity\r\n    document.querySelectorAll('.force-line').forEach(line => {\r\n      line.style.strokeDasharray = 'none'\r\n    })\r\n  }\r\n\r\n  // Restore high quality rendering\r\n  const restoreHighQuality = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    if (svg) {\r\n      svg.style.shapeRendering = 'auto'\r\n      svg.style.textRendering = 'auto'\r\n    }\r\n\r\n    frameRate.value = 60\r\n    \r\n    // Re-enable visual effects\r\n    document.querySelectorAll('.vector-atom').forEach(atom => {\r\n      atom.style.filter = ''\r\n    })\r\n  }\r\n\r\n  // Throttle function execution\r\n  const throttleRender = (renderFunction, delay = 16) => {\r\n    let lastRender = 0\r\n    \r\n    return (...args) => {\r\n      const now = performance.now()\r\n      \r\n      if (now - lastRender >= delay) {\r\n        lastRender = now\r\n        return renderFunction(...args)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Debounce function execution\r\n  const debounceRender = (renderFunction, delay = 100) => {\r\n    let timeoutId\r\n    \r\n    return (...args) => {\r\n      clearTimeout(timeoutId)\r\n      timeoutId = setTimeout(() => renderFunction(...args), delay)\r\n    }\r\n  }\r\n\r\n  // Batch render updates for efficiency\r\n  const batchRenderUpdates = (updates) => {\r\n    renderQueue.value.push(...updates)\r\n    \r\n    if (!isRendering.value) {\r\n      isRendering.value = true\r\n      requestAnimationFrame(() => processRenderQueue())\r\n    }\r\n  }\r\n\r\n  // Process render queue\r\n  const processRenderQueue = () => {\r\n    const startTime = performance.now()\r\n    \r\n    // Process updates in batches\r\n    const batchSize = shouldReduceComplexity.value ? 5 : 10\r\n    const batch = renderQueue.value.splice(0, batchSize)\r\n    \r\n    batch.forEach(update => {\r\n      try {\r\n        if (typeof update === 'function') {\r\n          update()\r\n        }\r\n      } catch (error) {\r\n        console.error('Render queue error:', error)\r\n      }\r\n    })\r\n    \r\n    // Continue processing if queue is not empty\r\n    if (renderQueue.value.length > 0) {\r\n      requestAnimationFrame(() => processRenderQueue())\r\n    } else {\r\n      isRendering.value = false\r\n    }\r\n    \r\n    performanceMetrics.value.renderTime = performance.now() - startTime\r\n  }\r\n\r\n  // Optimize vector rendering with level-of-detail\r\n  const optimizeVectorRendering = (vectors) => {\r\n    if (vectors.length > 50) {\r\n      return applyLevelOfDetail(vectors)\r\n    }\r\n    return vectors\r\n  }\r\n\r\n  // Apply level-of-detail rendering\r\n  const applyLevelOfDetail = (vectors) => {\r\n    const viewBox = getViewBox()\r\n    \r\n    return vectors.map(vector => {\r\n      const distance = getDistanceFromCenter(vector, viewBox)\r\n      const shouldSimplify = distance > viewBox.width * 0.4\r\n      \r\n      return {\r\n        ...vector,\r\n        simplified: shouldSimplify,\r\n        renderDetail: shouldSimplify ? 'low' : 'high'\r\n      }\r\n    })\r\n  }\r\n\r\n  // Get current view box\r\n  const getViewBox = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    if (!svg) return { x: 0, y: 0, width: 800, height: 600, centerX: 400, centerY: 300 }\r\n    \r\n    const rect = svg.getBoundingClientRect()\r\n    return {\r\n      x: 0,\r\n      y: 0,\r\n      width: rect.width,\r\n      height: rect.height,\r\n      centerX: rect.width / 2,\r\n      centerY: rect.height / 2\r\n    }\r\n  }\r\n\r\n  // Calculate distance from center\r\n  const getDistanceFromCenter = (vector, viewBox) => {\r\n    const dx = vector.x - viewBox.centerX\r\n    const dy = vector.y - viewBox.centerY\r\n    return Math.sqrt(dx * dx + dy * dy)\r\n  }\r\n\r\n  // Memory management\r\n  const manageMemory = () => {\r\n    cleanupDOMElements()\r\n    clearCaches()\r\n    \r\n    // Force garbage collection if available (dev only)\r\n    if (window.gc && process.env.NODE_ENV === 'development') {\r\n      window.gc()\r\n    }\r\n  }\r\n\r\n  // Clean up unused DOM elements\r\n  const cleanupDOMElements = () => {\r\n    // Remove orphaned tooltips\r\n    document.querySelectorAll('.vector-tooltip, .force-tooltip, .periodic-tooltip').forEach(tooltip => {\r\n      if (!tooltip.style.display || tooltip.style.display === 'none') {\r\n        tooltip.remove()\r\n      }\r\n    })\r\n    \r\n    // Remove old error notifications\r\n    const errorNotifications = document.querySelectorAll('.error-notification')\r\n    if (errorNotifications.length > 3) {\r\n      errorNotifications[0].remove()\r\n    }\r\n    \r\n    // Clean up modal overlays\r\n    document.querySelectorAll('.modal-overlay').forEach(modal => {\r\n      if (!modal.parentNode) {\r\n        modal.remove()\r\n      }\r\n    })\r\n  }\r\n\r\n  // Clear caches\r\n  const clearCaches = () => {\r\n    // Clear any cached calculations\r\n    if (window.VectoVerse?.clearCache) {\r\n      window.VectoVerse.clearCache()\r\n    }\r\n  }\r\n\r\n  // Get optimized configuration\r\n  const getOptimizedConfig = (baseConfig) => {\r\n    if (shouldReduceComplexity.value) {\r\n      return {\r\n        ...baseConfig,\r\n        numVectors: Math.min(baseConfig.numVectors || 20, 20),\r\n        dimensions: Math.min(baseConfig.dimensions || 5, 5),\r\n        showForces: false,\r\n        animationSpeed: 0.5\r\n      }\r\n    }\r\n    \r\n    return baseConfig\r\n  }\r\n\r\n  // Get performance recommendations\r\n  const getPerformanceRecommendations = () => {\r\n    const recommendations = []\r\n    \r\n    if (performanceMetrics.value.fps < 30) {\r\n      recommendations.push('Reduce the number of vectors for better performance')\r\n    }\r\n    \r\n    if (performanceMetrics.value.memoryUsage > 100) {\r\n      recommendations.push('Consider reducing dimensions or clearing old data')\r\n    }\r\n    \r\n    if (performanceMetrics.value.vectorCount > 50) {\r\n      recommendations.push('Large datasets may impact performance on mobile devices')\r\n    }\r\n    \r\n    if (renderQueue.value.length > 20) {\r\n      recommendations.push('Consider reducing animation frequency')\r\n    }\r\n    \r\n    return recommendations\r\n  }\r\n\r\n  // Get performance report\r\n  const getPerformanceReport = () => {\r\n    return {\r\n      metrics: performanceMetrics.value,\r\n      recommendations: getPerformanceRecommendations(),\r\n      systemInfo: {\r\n        isMobile: window.innerWidth < 768,\r\n        devicePixelRatio: window.devicePixelRatio || 1,\r\n        hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',\r\n        memory: navigator.deviceMemory || 'unknown'\r\n      },\r\n      currentLoad: {\r\n        vectors: performanceMetrics.value.vectorCount,\r\n        renderQueueSize: renderQueue.value.length,\r\n        isRendering: isRendering.value\r\n      }\r\n    }\r\n  }\r\n\r\n  // Wrap function with performance monitoring\r\n  const wrapWithPerformanceCheck = (fn, name) => {\r\n    return (...args) => {\r\n      const start = performance.now()\r\n      const result = fn(...args)\r\n      const duration = performance.now() - start\r\n      \r\n      if (duration > 16) { // Longer than one frame\r\n        console.warn(`Performance warning: ${name} took ${duration.toFixed(2)}ms`)\r\n      }\r\n      \r\n      return result\r\n    }\r\n  }\r\n\r\n  // Create optimized animation frame\r\n  const createAnimationFrame = (callback) => {\r\n    const frameCallback = (timestamp) => {\r\n      if (performanceMetrics.value.fps > 15) {\r\n        callback(timestamp)\r\n      }\r\n    }\r\n    \r\n    return requestAnimationFrame(frameCallback)\r\n  }\r\n\r\n  // Update vector count for monitoring\r\n  const updateVectorCount = (count) => {\r\n    performanceMetrics.value.vectorCount = count\r\n  }\r\n\r\n  // Lifecycle management\r\n  onMounted(() => {\r\n    // Start performance monitoring\r\n    trackFPS()\r\n    \r\n    // Monitor memory usage periodically\r\n    const memoryInterval = setInterval(monitorMemory, 5000)\r\n    \r\n    // Cleanup on unmount\r\n    onUnmounted(() => {\r\n      if (animationFrameId) {\r\n        cancelAnimationFrame(animationFrameId)\r\n      }\r\n      clearInterval(memoryInterval)\r\n      manageMemory()\r\n    })\r\n  })\r\n\r\n  return {\r\n    // State\r\n    frameRate,\r\n    renderQueue,\r\n    isRendering,\r\n    performanceMetrics,\r\n    \r\n    // Computed\r\n    isLowPerformance,\r\n    isHighMemoryUsage,\r\n    shouldReduceComplexity,\r\n    \r\n    // Methods\r\n    throttleRender,\r\n    debounceRender,\r\n    batchRenderUpdates,\r\n    optimizeVectorRendering,\r\n    manageMemory,\r\n    getOptimizedConfig,\r\n    getPerformanceReport,\r\n    getPerformanceRecommendations,\r\n    wrapWithPerformanceCheck,\r\n    createAnimationFrame,\r\n    updateVectorCount,\r\n    optimizeForLowPerformance,\r\n    restoreHighQuality,\r\n    adjustRenderingQuality\r\n  }\r\n} ","import katex from '../katex.mjs';\n\n/* eslint no-constant-condition:0 */\nvar findEndOfMath = function findEndOfMath(delimiter, text, startIndex) {\n  // Adapted from\n  // https://github.com/Khan/perseus/blob/master/src/perseus-markdown.jsx\n  var index = startIndex;\n  var braceLevel = 0;\n  var delimLength = delimiter.length;\n\n  while (index < text.length) {\n    var character = text[index];\n\n    if (braceLevel <= 0 && text.slice(index, index + delimLength) === delimiter) {\n      return index;\n    } else if (character === \"\\\\\") {\n      index++;\n    } else if (character === \"{\") {\n      braceLevel++;\n    } else if (character === \"}\") {\n      braceLevel--;\n    }\n\n    index++;\n  }\n\n  return -1;\n};\n\nvar escapeRegex = function escapeRegex(string) {\n  return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n};\n\nvar amsRegex = /^\\\\begin{/;\n\nvar splitAtDelimiters = function splitAtDelimiters(text, delimiters) {\n  var index;\n  var data = [];\n  var regexLeft = new RegExp(\"(\" + delimiters.map(x => escapeRegex(x.left)).join(\"|\") + \")\");\n\n  while (true) {\n    index = text.search(regexLeft);\n\n    if (index === -1) {\n      break;\n    }\n\n    if (index > 0) {\n      data.push({\n        type: \"text\",\n        data: text.slice(0, index)\n      });\n      text = text.slice(index); // now text starts with delimiter\n    } // ... so this always succeeds:\n\n\n    var i = delimiters.findIndex(delim => text.startsWith(delim.left));\n    index = findEndOfMath(delimiters[i].right, text, delimiters[i].left.length);\n\n    if (index === -1) {\n      break;\n    }\n\n    var rawData = text.slice(0, index + delimiters[i].right.length);\n    var math = amsRegex.test(rawData) ? rawData : text.slice(delimiters[i].left.length, index);\n    data.push({\n      type: \"math\",\n      data: math,\n      rawData,\n      display: delimiters[i].display\n    });\n    text = text.slice(index + delimiters[i].right.length);\n  }\n\n  if (text !== \"\") {\n    data.push({\n      type: \"text\",\n      data: text\n    });\n  }\n\n  return data;\n};\n\n/* eslint no-console:0 */\n/* Note: optionsCopy is mutated by this method. If it is ever exposed in the\n * API, we should copy it before mutating.\n */\n\nvar renderMathInText = function renderMathInText(text, optionsCopy) {\n  var data = splitAtDelimiters(text, optionsCopy.delimiters);\n\n  if (data.length === 1 && data[0].type === 'text') {\n    // There is no formula in the text.\n    // Let's return null which means there is no need to replace\n    // the current text node with a new one.\n    return null;\n  }\n\n  var fragment = document.createDocumentFragment();\n\n  for (var i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      fragment.appendChild(document.createTextNode(data[i].data));\n    } else {\n      var span = document.createElement(\"span\");\n      var math = data[i].data; // Override any display mode defined in the settings with that\n      // defined by the text itself\n\n      optionsCopy.displayMode = data[i].display;\n\n      try {\n        if (optionsCopy.preProcess) {\n          math = optionsCopy.preProcess(math);\n        }\n\n        katex.render(math, span, optionsCopy);\n      } catch (e) {\n        if (!(e instanceof katex.ParseError)) {\n          throw e;\n        }\n\n        optionsCopy.errorCallback(\"KaTeX auto-render: Failed to parse `\" + data[i].data + \"` with \", e);\n        fragment.appendChild(document.createTextNode(data[i].rawData));\n        continue;\n      }\n\n      fragment.appendChild(span);\n    }\n  }\n\n  return fragment;\n};\n\nvar renderElem = function renderElem(elem, optionsCopy) {\n  for (var i = 0; i < elem.childNodes.length; i++) {\n    var childNode = elem.childNodes[i];\n\n    if (childNode.nodeType === 3) {\n      // Text node\n      // Concatenate all sibling text nodes.\n      // Webkit browsers split very large text nodes into smaller ones,\n      // so the delimiters may be split across different nodes.\n      var textContentConcat = childNode.textContent;\n      var sibling = childNode.nextSibling;\n      var nSiblings = 0;\n\n      while (sibling && sibling.nodeType === Node.TEXT_NODE) {\n        textContentConcat += sibling.textContent;\n        sibling = sibling.nextSibling;\n        nSiblings++;\n      }\n\n      var frag = renderMathInText(textContentConcat, optionsCopy);\n\n      if (frag) {\n        // Remove extra text nodes\n        for (var j = 0; j < nSiblings; j++) {\n          childNode.nextSibling.remove();\n        }\n\n        i += frag.childNodes.length - 1;\n        elem.replaceChild(frag, childNode);\n      } else {\n        // If the concatenated text does not contain math\n        // the siblings will not either\n        i += nSiblings;\n      }\n    } else if (childNode.nodeType === 1) {\n      (function () {\n        // Element node\n        var className = ' ' + childNode.className + ' ';\n        var shouldRender = optionsCopy.ignoredTags.indexOf(childNode.nodeName.toLowerCase()) === -1 && optionsCopy.ignoredClasses.every(x => className.indexOf(' ' + x + ' ') === -1);\n\n        if (shouldRender) {\n          renderElem(childNode, optionsCopy);\n        }\n      })();\n    } // Otherwise, it's something else, and ignore it.\n\n  }\n};\n\nvar renderMathInElement = function renderMathInElement(elem, options) {\n  if (!elem) {\n    throw new Error(\"No element provided to render\");\n  }\n\n  var optionsCopy = {}; // Object.assign(optionsCopy, option)\n\n  for (var option in options) {\n    if (options.hasOwnProperty(option)) {\n      optionsCopy[option] = options[option];\n    }\n  } // default options\n\n\n  optionsCopy.delimiters = optionsCopy.delimiters || [{\n    left: \"$$\",\n    right: \"$$\",\n    display: true\n  }, {\n    left: \"\\\\(\",\n    right: \"\\\\)\",\n    display: false\n  }, // LaTeX uses $…$, but it ruins the display of normal `$` in text:\n  // {left: \"$\", right: \"$\", display: false},\n  // $ must come after $$\n  // Render AMS environments even if outside $$…$$ delimiters.\n  {\n    left: \"\\\\begin{equation}\",\n    right: \"\\\\end{equation}\",\n    display: true\n  }, {\n    left: \"\\\\begin{align}\",\n    right: \"\\\\end{align}\",\n    display: true\n  }, {\n    left: \"\\\\begin{alignat}\",\n    right: \"\\\\end{alignat}\",\n    display: true\n  }, {\n    left: \"\\\\begin{gather}\",\n    right: \"\\\\end{gather}\",\n    display: true\n  }, {\n    left: \"\\\\begin{CD}\",\n    right: \"\\\\end{CD}\",\n    display: true\n  }, {\n    left: \"\\\\[\",\n    right: \"\\\\]\",\n    display: true\n  }];\n  optionsCopy.ignoredTags = optionsCopy.ignoredTags || [\"script\", \"noscript\", \"style\", \"textarea\", \"pre\", \"code\", \"option\"];\n  optionsCopy.ignoredClasses = optionsCopy.ignoredClasses || [];\n  optionsCopy.errorCallback = optionsCopy.errorCallback || console.error; // Enable sharing of global macros defined via `\\gdef` between different\n  // math elements within a single call to `renderMathInElement`.\n\n  optionsCopy.macros = optionsCopy.macros || {};\n  renderElem(elem, optionsCopy);\n};\n\nexport { renderMathInElement as default };\n","import { createApp } from 'vue'\r\nimport { createPinia } from 'pinia'\r\nimport App from './App.vue'\r\nimport './assets/styles/studio-theme.css'\r\nimport './assets/styles/layout.css'\r\n\r\n// Import KaTeX and D3 globally\r\nimport * as d3 from 'd3'\r\nimport katex from 'katex'\r\nimport renderMathInElement from 'katex/dist/contrib/auto-render.mjs'\r\nimport 'katex/dist/katex.css'\r\n\r\n// Make D3 and KaTeX available globally for existing modules\r\nwindow.d3 = d3\r\nwindow.katex = katex\r\nwindow.renderMathInElement = renderMathInElement\r\n\r\n// Initialize KaTeX globally\r\nfunction initializeKaTeX() {\r\n    try {\r\n        // Configure and render math\r\n        renderMathInElement(document.body, {\r\n            delimiters: [\r\n                {left: '$$', right: '$$', display: true},\r\n                {left: '$', right: '$', display: false},\r\n                {left: '\\\\(', right: '\\\\)', display: false},\r\n                {left: '\\\\[', right: '\\\\]', display: true}\r\n            ],\r\n            throwOnError: false,\r\n            errorColor: '#cc0000',\r\n            strict: false,\r\n            trust: true,\r\n            macros: {\r\n                \"\\\\vec\": \"\\\\mathbf{#1}\",\r\n                \"\\\\norm\": \"\\\\left\\\\|#1\\\\right\\\\|\",\r\n                \"\\\\cos\": \"\\\\text{cos}\",\r\n                \"\\\\sin\": \"\\\\text{sin}\",\r\n                \"\\\\dot\": \"\\\\cdot\"\r\n            }\r\n        })\r\n        \r\n        // Create global renderMath function\r\n        window.renderMath = function(element = document.body) {\r\n            try {\r\n                renderMathInElement(element, {\r\n                    delimiters: [\r\n                        {left: '$$', right: '$$', display: true},\r\n                        {left: '$', right: '$', display: false},\r\n                        {left: '\\\\(', right: '\\\\)', display: false},\r\n                        {left: '\\\\[', right: '\\\\]', display: true}\r\n                    ],\r\n                    throwOnError: false,\r\n                    errorColor: '#cc0000',\r\n                    strict: false,\r\n                    macros: {\r\n                        \"\\\\vec\": \"\\\\mathbf{#1}\",\r\n                        \"\\\\norm\": \"\\\\left\\\\|#1\\\\right\\\\|\",\r\n                        \"\\\\cos\": \"\\\\text{cos}\",\r\n                        \"\\\\sin\": \"\\\\text{sin}\",\r\n                        \"\\\\dot\": \"\\\\cdot\"\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                console.warn('Math rendering error:', error)\r\n            }\r\n        }\r\n        \r\n        console.log('KaTeX initialized successfully')\r\n        return true\r\n    } catch (error) {\r\n        console.error('KaTeX initialization failed:', error)\r\n        return false\r\n    }\r\n}\r\n\r\n// Initialize the Vue app\r\nconst app = createApp(App)\r\nconst pinia = createPinia()\r\n\r\n// Use Pinia\r\napp.use(pinia)\r\n\r\n// Initialize KaTeX before mounting\r\ninitializeKaTeX()\r\n\r\n// Mount the app\r\napp.mount('#app') "],"names":["activePinia","setActivePinia","pinia","piniaSymbol","Symbol","isPlainObject","o","Object","prototype","toString","call","toJSON","MutationType","noop","addSubscription","subscriptions","callback","detached","onCleanup","push","removeSubscription","idx","indexOf","splice","getCurrentScope","onScopeDispose","triggerSubscriptions","args","slice","forEach","fallbackRunWithContext","fn","ACTION_MARKER","ACTION_NAME","mergeReactiveObjects","target","patchToApply","Map","value","key","set","Set","add","hasOwnProperty","subPatch","targetValue","isRef","isReactive","skipHydrateSymbol","assign","createSetupStore","$id","setup","options","hot","isOptionsStore","scope","optionsForPlugin","actions","$subscribeOptions","deep","isListening","isSyncListening","debuggerEvents","actionSubscriptions","initialState","state","activeListener","$patch","partialStateOrMutator","subscriptionMutation","type","patchFunction","storeId","events","patchObject","payload","myListenerId","nextTick","then","ref","$reset","newState","this","$state","action","name","wrappedAction","Array","from","arguments","afterCallbackList","onErrorCallbackList","ret","store","after","onError","apply","error","Promise","catch","reject","partialStore","_p","$onAction","bind","$subscribe","stopWatcher","run","watch","flush","direct","$dispose","stop","_s","delete","reactive","setupStore","_a","runWithContext","_e","effectScope","prop","effect","obj","actionValue","toRaw","defineProperty","get","extender","app","hydrate","defineStore","idOrOptions","setupOptions","id","isSetupStore","useStore","hasContext","hasInjectionContext","inject","has","getters","localState","toRefs","keys","reduce","computedGetters","markRaw","computed","createOptionsStore","useConfigStore","width","height","dimensions","numVectors","showForces","showLabels","showGrid","rainbowMode","neuronMode","forceStrength","linkDistance","charge","particleSize","updateConfig","vectorOperations","a","b","length","Error","map","val","i","subtract","scale","vector","scalar","dotProduct","sum","magnitude","Math","sqrt","normalize","mag","cosineSimilarity","dotProd","magA","magB","euclideanDistance","diff","manhattanDistance","abs","vectorGeneration","random","min","max","zero","fill","unit","activeIndex","normal","mean","stdDev","boxMullerRandom","u1","u2","log","cos","PI","vectorValidation","isValid","input","isArray","every","isNaN","sameDimensions","validateDimensions","expectedDimensions","isFinite","Number","vectorStatistics","calculate","variance","entropy","standardDeviation","sparsity","componentInsights","effectiveDimensionality","informationDensity","m","pow","threshold","filter","squared","v","sumSquared","s","p","log2","positiveCount","negativeCount","zeroCount","positiveRatio","negativeRatio","len","maxEntropy","kmeans","vectors","k","maxIterations","centroids","assignments","iterations","newAssignments","minDistance","Infinity","closestCentroidIndex","centroid","index","distance","JSON","stringify","clusters","cluster","floor","meanVector","useVectorStore","selectedVectorIds","inputVector","forceType","activationFunction","learningRate","selectedVectors","vectorCount","averageMagnitude","acc","components","c","availableForceTypes","availableActivationFunctions","maxSimilarity","j","sim","generateVectors","configStore","newVectors","x","y","d","clear","selectVector","vectorId","isMultiSelect","size","addInputVector","newIV","isInput","removeInputVector","randomizeInputVector","updateInputVectorComponent","removeVector","addCustomVector","isCustom","setVectorCustomColor","color","find","customColor","setVectorScale","setForceType","setActivationFunction","func","setLearningRate","rate","useUIStore","activeModal","errorMessage","successMessage","errorDetails","isLoading","sidebarCollapsed","activeTab","analysisViewMode","neuralModeActive","forcesVisible","selectedAnalysisType","analysisResults","isAnalyzing","tutorialStep","tutorialActive","shortcutsVisible","hasError","hasSuccess","isModalOpen","showModal","modalName","hideModal","showError","message","hideError","showSuccess","duration","setTimeout","hideSuccess","setAnalysisResults","results","setAnalyzing","analyzing","shortcutsData","setLoading","loading","toggleSidebar","setActiveTab","tabName","setAnalysisViewMode","mode","setNeuralModeActive","active","setForcesVisible","visible","setAnalysisType","runAnalysis","async","analysisFunction","startTutorial","nextTutorialStep","previousTutorialStep","endTutorial","toggleShortcuts","showTutorialModal","showAnalysisModal","showUploadHelpModal","showActivationHelpModal","showAddVectorModal","showExportModal","showShortcutsModal","shortcuts","showPresetsModal","closeAllModals","showInfo","useKeyboardShortcuts","vectorStore","uiStore","isEnabled","defaultShortcuts","ctrl","alt","shift","description","toggleNeuralMode","toggleForces","exportData","triggerFileInput","undo","redo","deleteSelectedVector","confirmCurrentAction","selectPreviousVector","selectNextVector","navigateTab","toggleVectorSelection","toggleFullscreen","createShortcutKey","shortcut","modifiers","toLowerCase","join","handleKeyDown","event","isInputElement","createEventKey","preventDefault","stopPropagation","console","ctrlKey","metaKey","altKey","shiftKey","element","contentEditable","includes","tagName","data","config","timestamp","Date","toISOString","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","now","body","appendChild","click","removeChild","revokeObjectURL","fileInput","getElementById","selectedVectorId","querySelector","confirmButton","currentIndex","findIndex","previousIndex","nextIndex","direction","tabs","newIndex","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","getAllShortcuts","values","keyDisplay","formatShortcutDisplay","parts","onMounted","addEventListener","onUnmounted","removeEventListener","addShortcut","shortcutKey","removeShortcut","enableShortcuts","disableShortcuts","showShortcutsHelp","useTutorialManager","isActive","currentStep","announcements","tutorialSteps","title","content","highlight","progress","currentStepData","isFirstStep","isLastStep","trackEvent","announce","nextStep","performStepAction","step","previousStep","goToStep","stepIndex","clearHighlights","localStorage","setItem","completed_steps","total_steps","firstVector","focus","highlightElement","selector","classList","scrollIntoView","behavior","block","inline","remove","querySelectorAll","el","eventName","window","gtag","custom_parameter","priority","shouldShowTutorial","hasSeenTutorial","getItem","hasVisited","autoStartIfNew","handleKeydown","stepNum","parseInt","useAccessibility","highContrastMode","liveRegion","setAttribute","textContent","handleKeyboardShortcuts","generateBtn","resetBtn","manageFocus","focusedElement","contains","announceVectorFocus","vectorElement","getAttribute","trapFocusInModal","modal","focusableElements","firstElement","lastElement","setupHighContrastMode","highContrastQuery","matchMedia","updateHighContrast","matches","toggle","e","addAriaLabelsToControls","entries","label","updateVisualizationDescription","svg","vectorElements","handleFocusIn","closest","ensureColorContrast","style","head","initialize","createAriaLiveRegion","region","className","cssText","cleanup","highContrastStyle","showKeyboardShortcuts","getAccessibilityReport","ariaLabels","screenReaderSupport","landmarks","headings","calculateVectorStatistics","calculateMagnitude","calculateEntropy","stability","calculateStability","total","getInformationQuantums","excitatory","inhibitory","neutral","prefixes","excitatoryRoots","inhibitoryRoots","balancedRoots","generateElementName","activeDimensions","root","charAt","toUpperCase","activeHeatmap","dataRanges","showPlaceholders","highlightedElementIds","usePeriodicTable","periodicData","elementWidth","elementHeight","padding","fontSize","symbolFontSize","tableDimensions","rows","cols","getElementColor","stats","quantumData","updatePeriodicData","mappedTable","table","vectorGroups","vectorsForElement","isPlaceholder","present","atomicMass","round","mapVectorsToTable","generateFullPeriodicTable","newTable","row","col","neutralCount","symbol","atomicNumber","position","presentElements","magnitudes","entropies","stabilities","calculateDataRanges","immediate","getElementData","startsWith","setHighlight","property","count","sorted","sort","valA","valB","topIds","clearHighlight","useExportManager","isExporting","exportProgress","formats","json","extension","mimeType","csv","png","latex","python","txt","hasVectors","canExport","v1","v2","mag1","mag2","generateAnalysisData","averageEntropy","ent","generateLaTeXVectorTable","maxComponents","toFixed","getSVGStyles","getTimestamp","replace","downloadFile","filename","exportJSON","metadata","version","source","analysis","exportCSV","headers","inputRow","exportSimilarityMatrix","similarity","exportSVG","clonedSvg","cloneNode","styleElement","createElementNS","insertBefore","firstChild","svgString","XMLSerializer","serializeToString","exportPNG","canvas","ctx","getContext","rect","getBoundingClientRect","svgData","img","Image","promise","resolve","onload","drawImage","toBlob","onerror","svgBlob","src","exportLaTeX","toLocaleDateString","trim","exportPython","pythonCode","exportSession","sessionData","theme","useErrorHandler","errorLog","handleError","context","errorInfo","substring","stack","severity","classifyError","friendlyMessage","getFriendlyMessage","getSuggestedActions","text","location","reload","lineno","colno","reason","wrapAsync","useMathRenderer","isKaTeXReady","waitForKaTeX","katex","renderMathInElement","renderMath","defaultOptions","delimiters","left","right","display","throwOnError","errorColor","macros","warn","createVectorNotation","componentStr","createMagnitudeFormula","createEntropyFormula","createCosineSimilarityFormula","createEuclideanDistanceFormula","useControls","controls","group","icon","history","historyIndex","recordHistory","oldValue","newValue","presets","persistPresets","getCurrentControlValues","loadPresets","savedPresets","parse","getControlsByGroup","lastChange","nextChange","canUndo","canRedo","savePreset","newPreset","existingIndex","loadPreset","preset","deletePreset","props","__props","controlId","_createElementBlock","class","_normalizeClass","modelValue","onClick","_cache","$event","$emit","_toDisplayString","_hoisted_1","_Fragment","for","_hoisted_2","_createElementVNode","_hoisted_3","onInput","parseFloat","_hoisted_5","_openBlock","_hoisted_6","checked","onChange","_hoisted_8","_renderList","option","_hoisted_10","appActions","useAppActions","_unref","_hoisted_4","_createBlock","Control","disabled","_hoisted_7","Constants","POSITIVE","NEGATIVE","NEUTRAL","INPUT","forceCalculator","epsilon","temperature","distanceSquared","calculateSelectedMetric","metricType","correlation","calculateForces","forces","force","x1","y1","x2","y2","getEnhancedVectorAnalysis","applyActivation","useForceCalculator","container","svgElement","tooltip","resize","attr","render","selectAll","particles","d3.range","r","enter","append","renderBackgroundParticles","on","getVectorRadius","each","renderDimensionArcs","d3.select","renderVectors","renderForces","iv","inputGroup","radius","renderInputVector","classed","angleStep","component","dimIndex","angle","intensity","segmentRadius","arc","d3.arc","innerRadius","outerRadius","startAngle","endAngle","newVectorId","node","select","empty","feMerge","analysisResult","result","colors","d3.scaleOrdinal","d3.schemeCategory10","clusterId","xScale","d3.scaleLinear","domain","d3.extent","range","yScale","transition","bus","eventBus","off","callbacks","emit","newResult","_createVNode","D3Visualization","useVectorOperations","isCalculating","lastError","operationHistory","selectedVector","allVectors","currentDimensions","executeOperation","operation","operationName","unshift","success","analyzeVector","createRandomVector","dims","created","createZeroVector","createUnitVector","createNormalVector","parameters","addVectors","vectorA","vectorB","operands","subtractVectors","scaleVector","normalizeVector","calculateDotProduct","calculateCosineSimilarity","calculateDistance","metric","analyzeBatch","analyses","all","avgMagnitude","maxMagnitude","minMagnitude","vectorAnalyses","batchStatistics","totalMagnitude","calculateSimilarityMatrix","n","matrix","clearHistory","clearError","getOperationHistory","limit","undoLastOperation","lastOp","StatCard","vectorOps","vectorStats","activeSubTab","subTabs","newVector","tab","AnalysisOverview","ComponentAnalysis","AdvancedStats","relationships","calculateRelationships","otherVectors","rels","otherVector","rel","isClustering","runKMeans","res","vectorMap","clusteredVectors","vectorComponents","useClustering","maxK","runClustering","number","calculateGlobalStats","magMean","magVariance","magStdDev","getHeatmapColor","color1","color2","factor","r1","g1","b1","r2","g2","b2","g","padStart","interpolateColor","isSelected","isHighlighted","fillColor","undefined","dynamicFontSize","baseSize","nameLength","__emit","onMouseEnter","onMouseLeave","transform","onMouseenter","onMouseleave","positionStyles","top","quantumTotal","excitPct","inhibPct","neuPct","_normalizeStyle","quantumKey","background","_hoisted_11","_hoisted_12","tableContainerRef","visibleElements","tableWidth","tableHeight","onShowTooltip","containerRect","onHideTooltip","PeriodicElement","PeriodicElementTooltip","path","scaleY","scaleX","zeroAxis","viewBox","preserveAspectRatio","selectedElements","newIds","elements","elementData","getComparisonClass","index1","index2","val1","val2","HeatmapControls","FilterControls","HighlightControls","PeriodicTable","_Transition","_hoisted_16","_hoisted_17","_hoisted_9","_hoisted_13","SparklineChart","_hoisted_14","_hoisted_15","_createTextVNode","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","borderColor","_hoisted_24","framework","analysisRef","exportManager","canCompareVectors","toggleAnalysisView","newMode","tabId","compareVectors","exportAnalysis","button","IndividualAnalysisTab","RelationshipsTab","ClusteringTab","StatisticsTab","PeriodicTableTab","math","similarities","vMath","mounted","binding","innerHTML","updated","collapsed","_withDirectives","handleOverlayClick","handleEscapeKey","overflow","_Teleport","to","_renderSlot","_ctx","$slots","footer","tutorialManager","completed","analytics","lastAnalysisType","analysisError","analysisProgress","canAnalyze","isStale","executeAnalysis","analysisType","calculateColumnMeans","means","calculateCovarianceMatrix","centeredMatrix","covariance","performEigendecomposition","eigenvalues","eigenvectors","powerIteration","norm","matrixVector","calculateExplainedVariance","totalVariance","initializeRandomCentroids","point","findNearestCentroid","nearestIndex","updateCentroids","clusterPoints","_","calculateClusterStatistics","clusterIndices","assignment","distances","points","pointIndices","avgDistance","maxDistance","calculateSilhouetteScore","totalScore","sameClusterPoints","avgIntraDistance","minInterDistance","otherClusterPoints","calculateDistanceMatrix","buildDendrogram","distanceMatrix","linkage","members","dendrogram","mergeI","mergeJ","calculateClusterDistance","newCluster","clusterA","clusterB","generateClusterLevels","levels","maxHeight","cutDendrogram","calculateCorrelationMatrix","detectOutliers","originalIndex","deviationFromMean","detectLinearPatterns","patterns","confidence","detectSimilarityGroups","groups","visited","detectDimensionalPatterns","dim","dimension","performPCA","centered","projectedData","eigenvector","explainedVariance","performKMeans","hasConverged","iteration","converged","silhouetteScore","performHierarchicalClustering","clusterLevels","performStatisticalAnalysis","allValues","flatMap","globalStats","correlationMatrix","outliers","globalStatistics","summary","totalVectors","stat","sparsityRange","detectPatterns","linearPatterns","similarityGroups","dimensionalPatterns","totalPatterns","patternTypes","clearResults","exportResults","exportedAt","useAnalytics","selectedAnalysis","pcaConfig","kmeansConfig","hierarchicalConfig","statisticsConfig","includeCorrelation","includeOutliers","includeDistribution","analysisTypes","available","getProgressText","selectAnalysis","_vModelSelect","_vModelCheckbox","_hoisted_25","_hoisted_26","_hoisted_27","date","toLocaleString","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","outlier","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","vectorInput","vectorLabel","parsedVector","canAdd","validateInput","endsWith","parsed","split","some","addVector","stateManager","placeholder","maxlength","fileSizeFormat","bytes","decimals","activeSection","exportStatus","vectorExport","includeGenerated","includeCustom","includeMetadata","format","analysisExport","includeStatistics","includeCorrelations","includeClusters","includeCharts","visualizationExport","resolution","includeUI","configExport","includeVectorSettings","includeVisualizationSettings","includeNeuralSettings","includeUIPreferences","exportSections","generatedVectorCount","customVectorCount","selectedVectorCount","estimatedFileSize","totalSize","performExport","exportVectors","exportVisualization","exportConfiguration","fileName","csvRows","vectorStr","analysisData","statistics","modules","analysisEngine","getStatistics","generateTextReport","exportAsImage","vectorSettings","neuralSettings","multiplier","fillStyle","fillRect","btoa","report","repeat","section","setActiveSection","newPresetName","saveCurrentPreset","presetName","loadSelectedPreset","deleteSelectedPreset","timer","close","getErrorIcon","setInterval","clearInterval","notification","executeAction","show","closeModal","ModalBase","onClose","comparisonResults","modalData","TutorialModal","AnalysisModal","UploadHelpModal","ActivationHelpModal","AddVectorModal","ExportModal","PresetsModal","ShortcutsModal","Notification","ErrorNotification","SettingsModal","VectorComparisonModal","accessibility","performanceOptimizer","frameRate","renderQueue","isRendering","performanceMetrics","fps","renderTime","memoryUsage","lastTime","performance","frameCount","animationFrameId","isLowPerformance","isHighMemoryUsage","shouldReduceComplexity","isMobile","innerWidth","isLowMemory","isLowFPS","tooManyVectors","trackFPS","currentTime","adjustRenderingQuality","requestAnimationFrame","monitorMemory","memory","usedJSHeapSize","optimizeForLowPerformance","restoreHighQuality","shapeRendering","textRendering","atom","line","strokeDasharray","processRenderQueue","startTime","batchSize","update","applyLevelOfDetail","getViewBox","shouldSimplify","getDistanceFromCenter","simplified","renderDetail","centerX","centerY","dx","dy","manageMemory","cleanupDOMElements","clearCaches","errorNotifications","parentNode","VectoVerse","clearCache","getPerformanceRecommendations","recommendations","memoryInterval","cancelAnimationFrame","throttleRender","renderFunction","delay","lastRender","debounceRender","timeoutId","clearTimeout","batchRenderUpdates","updates","optimizeVectorRendering","getOptimizedConfig","baseConfig","animationSpeed","getPerformanceReport","metrics","systemInfo","devicePixelRatio","hardwareConcurrency","navigator","deviceMemory","currentLoad","renderQueueSize","wrapWithPerformanceCheck","start","createAnimationFrame","updateVectorCount","usePerformanceOptimizer","periodicTable","errorHandler","mathRenderer","provide","AppHeader","VisualizationContainer","VectorAnalysisStudio","InfoSidebar","ModalContainer","findEndOfMath","delimiter","startIndex","braceLevel","delimLength","character","amsRegex","renderMathInText","optionsCopy","regexLeft","RegExp","search","delim","rawData","test","splitAtDelimiters","fragment","createDocumentFragment","createTextNode","span","displayMode","preProcess","ParseError","errorCallback","renderElem","elem","childNodes","childNode","nodeType","textContentConcat","sibling","nextSibling","nSiblings","Node","TEXT_NODE","frag","replaceChild","ignoredTags","nodeName","ignoredClasses","d3","createApp","App","toBeInstalled","install","globalProperties","$pinia","plugin","use","createPinia","strict","trust","initializeKaTeX","mount"],"mappings":"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","x_google_ignoreList":[0,62]}