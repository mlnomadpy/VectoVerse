{"version":3,"file":"main-Chg3a6F4.js","sources":["../../node_modules/pinia/dist/pinia.mjs","../../src/stores/configStore.js","../../src/utils/vectorUtils.js","../../src/stores/vectorStore.js","../../src/stores/uiStore.js","../../src/composables/useKeyboardShortcuts.js","../../src/composables/useTutorialManager.js","../../src/composables/useAccessibility.js","../../src/composables/usePerformanceOptimizer.js","../../src/utils/periodicTableCalculations.js","../../src/utils/nameGenerator.js","../../src/composables/usePeriodicTable.js","../../src/composables/useExportManager.js","../../src/composables/useErrorHandler.js","../../src/composables/useMathRenderer.js","../../src/composables/useControls.js","../../src/composables/useAppActions.js","../../src/components/Control.vue","../../src/components/AppHeader.vue","../../src/utils/Constants.js","../../src/composables/useForceCalculator.js","../../src/components/visualization/D3Visualization.vue","../../src/composables/useEventBus.js","../../src/components/VisualizationContainer.vue","../../src/composables/useVectorOperations.js","../../src/components/StatCard.vue","../../src/components/tabs/individual/AnalysisOverview.vue","../../src/components/tabs/individual/ComponentAnalysis.vue","../../src/components/tabs/individual/AdvancedStats.vue","../../src/components/tabs/IndividualAnalysisTab.vue","../../src/components/tabs/RelationshipsTab.vue","../../src/composables/useClustering.js","../../src/components/tabs/ClusteringTab.vue","../../src/components/tabs/StatisticsTab.vue","../../src/utils/colors.js","../../src/components/visualization/PeriodicElement.vue","../../src/components/visualization/PeriodicElementTooltip.vue","../../src/components/visualization/PeriodicTable.vue","../../src/components/visualization/SparklineChart.vue","../../src/components/controls/HeatmapControls.vue","../../src/components/controls/FilterControls.vue","../../src/components/controls/HighlightControls.vue","../../src/components/tabs/PeriodicTableTab.vue","../../src/components/VectorAnalysisStudio.vue","../../src/components/InfoSidebar.vue","../../src/components/modals/ModalBase.vue","../../src/components/modals/TutorialModal.vue","../../src/composables/useAnalytics.js","../../src/components/modals/AnalysisModal.vue","../../src/components/modals/UploadHelpModal.vue","../../src/components/modals/ActivationHelpModal.vue","../../src/components/modals/ShortcutsModal.vue","../../src/components/modals/AddVectorModal.vue","../../src/utils/formatUtils.js","../../src/components/modals/ExportModal.vue","../../src/components/modals/PresetsModal.vue","../../src/components/Notification.vue","../../src/components/ErrorNotification.vue","../../src/components/modals/SettingsModal.vue","../../src/components/modals/VectorComparisonModal.vue","../../src/components/ModalContainer.vue","../../src/App.vue","../../node_modules/katex/dist/contrib/auto-render.mjs","../../src/main.js"],"sourcesContent":["/*!\n * pinia v2.3.1\n * (c) 2025 Eduardo San Martin Morote\n * @license MIT\n */\nimport { hasInjectionContext, inject, toRaw, watch, unref, markRaw, effectScope, ref, isVue2, isRef, isReactive, set, getCurrentScope, onScopeDispose, getCurrentInstance, reactive, toRef, del, nextTick, computed, toRefs } from 'vue-demi';\nimport { setupDevtoolsPlugin } from '@vue/devtools-api';\n\n/**\n * setActivePinia must be called to handle SSR at the top of functions like\n * `fetch`, `setup`, `serverPrefetch` and others\n */\nlet activePinia;\n/**\n * Sets or unsets the active pinia. Used in SSR and internally when calling\n * actions and getters\n *\n * @param pinia - Pinia instance\n */\n// @ts-expect-error: cannot constrain the type of the return\nconst setActivePinia = (pinia) => (activePinia = pinia);\n/**\n * Get the currently active pinia if there is any.\n */\nconst getActivePinia = () => (hasInjectionContext() && inject(piniaSymbol)) || activePinia;\nconst piniaSymbol = ((process.env.NODE_ENV !== 'production') ? Symbol('pinia') : /* istanbul ignore next */ Symbol());\n\nfunction isPlainObject(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\no) {\n    return (o &&\n        typeof o === 'object' &&\n        Object.prototype.toString.call(o) === '[object Object]' &&\n        typeof o.toJSON !== 'function');\n}\n// type DeepReadonly<T> = { readonly [P in keyof T]: DeepReadonly<T[P]> }\n// TODO: can we change these to numbers?\n/**\n * Possible types for SubscriptionCallback\n */\nvar MutationType;\n(function (MutationType) {\n    /**\n     * Direct mutation of the state:\n     *\n     * - `store.name = 'new name'`\n     * - `store.$state.name = 'new name'`\n     * - `store.list.push('new item')`\n     */\n    MutationType[\"direct\"] = \"direct\";\n    /**\n     * Mutated the state with `$patch` and an object\n     *\n     * - `store.$patch({ name: 'newName' })`\n     */\n    MutationType[\"patchObject\"] = \"patch object\";\n    /**\n     * Mutated the state with `$patch` and a function\n     *\n     * - `store.$patch(state => state.name = 'newName')`\n     */\n    MutationType[\"patchFunction\"] = \"patch function\";\n    // maybe reset? for $state = {} and $reset\n})(MutationType || (MutationType = {}));\n\nconst IS_CLIENT = typeof window !== 'undefined';\n\n/*\n * FileSaver.js A saveAs() FileSaver implementation.\n *\n * Originally by Eli Grey, adapted as an ESM module by Eduardo San Martin\n * Morote.\n *\n * License : MIT\n */\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nconst _global = /*#__PURE__*/ (() => typeof window === 'object' && window.window === window\n    ? window\n    : typeof self === 'object' && self.self === self\n        ? self\n        : typeof global === 'object' && global.global === global\n            ? global\n            : typeof globalThis === 'object'\n                ? globalThis\n                : { HTMLElement: null })();\nfunction bom(blob, { autoBom = false } = {}) {\n    // prepend BOM for UTF-8 XML and text/* types (including HTML)\n    // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n    if (autoBom &&\n        /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n        return new Blob([String.fromCharCode(0xfeff), blob], { type: blob.type });\n    }\n    return blob;\n}\nfunction download(url, name, opts) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        saveAs(xhr.response, name, opts);\n    };\n    xhr.onerror = function () {\n        console.error('could not download file');\n    };\n    xhr.send();\n}\nfunction corsEnabled(url) {\n    const xhr = new XMLHttpRequest();\n    // use sync to avoid popup blocker\n    xhr.open('HEAD', url, false);\n    try {\n        xhr.send();\n    }\n    catch (e) { }\n    return xhr.status >= 200 && xhr.status <= 299;\n}\n// `a.click()` doesn't work for all browsers (#465)\nfunction click(node) {\n    try {\n        node.dispatchEvent(new MouseEvent('click'));\n    }\n    catch (e) {\n        const evt = document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n        node.dispatchEvent(evt);\n    }\n}\nconst _navigator = typeof navigator === 'object' ? navigator : { userAgent: '' };\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nconst isMacOSWebView = /*#__PURE__*/ (() => /Macintosh/.test(_navigator.userAgent) &&\n    /AppleWebKit/.test(_navigator.userAgent) &&\n    !/Safari/.test(_navigator.userAgent))();\nconst saveAs = !IS_CLIENT\n    ? () => { } // noop\n    : // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program\n        typeof HTMLAnchorElement !== 'undefined' &&\n            'download' in HTMLAnchorElement.prototype &&\n            !isMacOSWebView\n            ? downloadSaveAs\n            : // Use msSaveOrOpenBlob as a second approach\n                'msSaveOrOpenBlob' in _navigator\n                    ? msSaveAs\n                    : // Fallback to using FileReader and a popup\n                        fileSaverSaveAs;\nfunction downloadSaveAs(blob, name = 'download', opts) {\n    const a = document.createElement('a');\n    a.download = name;\n    a.rel = 'noopener'; // tabnabbing\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n    if (typeof blob === 'string') {\n        // Support regular links\n        a.href = blob;\n        if (a.origin !== location.origin) {\n            if (corsEnabled(a.href)) {\n                download(blob, name, opts);\n            }\n            else {\n                a.target = '_blank';\n                click(a);\n            }\n        }\n        else {\n            click(a);\n        }\n    }\n    else {\n        // Support blobs\n        a.href = URL.createObjectURL(blob);\n        setTimeout(function () {\n            URL.revokeObjectURL(a.href);\n        }, 4e4); // 40s\n        setTimeout(function () {\n            click(a);\n        }, 0);\n    }\n}\nfunction msSaveAs(blob, name = 'download', opts) {\n    if (typeof blob === 'string') {\n        if (corsEnabled(blob)) {\n            download(blob, name, opts);\n        }\n        else {\n            const a = document.createElement('a');\n            a.href = blob;\n            a.target = '_blank';\n            setTimeout(function () {\n                click(a);\n            });\n        }\n    }\n    else {\n        // @ts-ignore: works on windows\n        navigator.msSaveOrOpenBlob(bom(blob, opts), name);\n    }\n}\nfunction fileSaverSaveAs(blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank');\n    if (popup) {\n        popup.document.title = popup.document.body.innerText = 'downloading...';\n    }\n    if (typeof blob === 'string')\n        return download(blob, name, opts);\n    const force = blob.type === 'application/octet-stream';\n    const isSafari = /constructor/i.test(String(_global.HTMLElement)) || 'safari' in _global;\n    const isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) &&\n        typeof FileReader !== 'undefined') {\n        // Safari doesn't allow downloading of blob URLs\n        const reader = new FileReader();\n        reader.onloadend = function () {\n            let url = reader.result;\n            if (typeof url !== 'string') {\n                popup = null;\n                throw new Error('Wrong reader.result type');\n            }\n            url = isChromeIOS\n                ? url\n                : url.replace(/^data:[^;]*;/, 'data:attachment/file;');\n            if (popup) {\n                popup.location.href = url;\n            }\n            else {\n                location.assign(url);\n            }\n            popup = null; // reverse-tabnabbing #460\n        };\n        reader.readAsDataURL(blob);\n    }\n    else {\n        const url = URL.createObjectURL(blob);\n        if (popup)\n            popup.location.assign(url);\n        else\n            location.href = url;\n        popup = null; // reverse-tabnabbing #460\n        setTimeout(function () {\n            URL.revokeObjectURL(url);\n        }, 4e4); // 40s\n    }\n}\n\n/**\n * Shows a toast or console.log\n *\n * @param message - message to log\n * @param type - different color of the tooltip\n */\nfunction toastMessage(message, type) {\n    const piniaMessage = 'ðŸ ' + message;\n    if (typeof __VUE_DEVTOOLS_TOAST__ === 'function') {\n        // No longer available :(\n        __VUE_DEVTOOLS_TOAST__(piniaMessage, type);\n    }\n    else if (type === 'error') {\n        console.error(piniaMessage);\n    }\n    else if (type === 'warn') {\n        console.warn(piniaMessage);\n    }\n    else {\n        console.log(piniaMessage);\n    }\n}\nfunction isPinia(o) {\n    return '_a' in o && 'install' in o;\n}\n\n/**\n * This file contain devtools actions, they are not Pinia actions.\n */\n// ---\nfunction checkClipboardAccess() {\n    if (!('clipboard' in navigator)) {\n        toastMessage(`Your browser doesn't support the Clipboard API`, 'error');\n        return true;\n    }\n}\nfunction checkNotFocusedError(error) {\n    if (error instanceof Error &&\n        error.message.toLowerCase().includes('document is not focused')) {\n        toastMessage('You need to activate the \"Emulate a focused page\" setting in the \"Rendering\" panel of devtools.', 'warn');\n        return true;\n    }\n    return false;\n}\nasync function actionGlobalCopyState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));\n        toastMessage('Global state copied to clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to serialize the state. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalPasteState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));\n        toastMessage('Global state pasted from clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalSaveState(pinia) {\n    try {\n        saveAs(new Blob([JSON.stringify(pinia.state.value)], {\n            type: 'text/plain;charset=utf-8',\n        }), 'pinia-state.json');\n    }\n    catch (error) {\n        toastMessage(`Failed to export the state as JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nlet fileInput;\nfunction getFileOpener() {\n    if (!fileInput) {\n        fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = '.json';\n    }\n    function openFile() {\n        return new Promise((resolve, reject) => {\n            fileInput.onchange = async () => {\n                const files = fileInput.files;\n                if (!files)\n                    return resolve(null);\n                const file = files.item(0);\n                if (!file)\n                    return resolve(null);\n                return resolve({ text: await file.text(), file });\n            };\n            // @ts-ignore: TODO: changed from 4.3 to 4.4\n            fileInput.oncancel = () => resolve(null);\n            fileInput.onerror = reject;\n            fileInput.click();\n        });\n    }\n    return openFile;\n}\nasync function actionGlobalOpenStateFile(pinia) {\n    try {\n        const open = getFileOpener();\n        const result = await open();\n        if (!result)\n            return;\n        const { text, file } = result;\n        loadStoresState(pinia, JSON.parse(text));\n        toastMessage(`Global state imported from \"${file.name}\".`);\n    }\n    catch (error) {\n        toastMessage(`Failed to import the state from JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nfunction loadStoresState(pinia, state) {\n    for (const key in state) {\n        const storeState = pinia.state.value[key];\n        // store is already instantiated, patch it\n        if (storeState) {\n            Object.assign(storeState, state[key]);\n        }\n        else {\n            // store is not instantiated, set the initial state\n            pinia.state.value[key] = state[key];\n        }\n    }\n}\n\nfunction formatDisplay(display) {\n    return {\n        _custom: {\n            display,\n        },\n    };\n}\nconst PINIA_ROOT_LABEL = 'ðŸ Pinia (root)';\nconst PINIA_ROOT_ID = '_root';\nfunction formatStoreForInspectorTree(store) {\n    return isPinia(store)\n        ? {\n            id: PINIA_ROOT_ID,\n            label: PINIA_ROOT_LABEL,\n        }\n        : {\n            id: store.$id,\n            label: store.$id,\n        };\n}\nfunction formatStoreForInspectorState(store) {\n    if (isPinia(store)) {\n        const storeNames = Array.from(store._s.keys());\n        const storeMap = store._s;\n        const state = {\n            state: storeNames.map((storeId) => ({\n                editable: true,\n                key: storeId,\n                value: store.state.value[storeId],\n            })),\n            getters: storeNames\n                .filter((id) => storeMap.get(id)._getters)\n                .map((id) => {\n                const store = storeMap.get(id);\n                return {\n                    editable: false,\n                    key: id,\n                    value: store._getters.reduce((getters, key) => {\n                        getters[key] = store[key];\n                        return getters;\n                    }, {}),\n                };\n            }),\n        };\n        return state;\n    }\n    const state = {\n        state: Object.keys(store.$state).map((key) => ({\n            editable: true,\n            key,\n            value: store.$state[key],\n        })),\n    };\n    // avoid adding empty getters\n    if (store._getters && store._getters.length) {\n        state.getters = store._getters.map((getterName) => ({\n            editable: false,\n            key: getterName,\n            value: store[getterName],\n        }));\n    }\n    if (store._customProperties.size) {\n        state.customProperties = Array.from(store._customProperties).map((key) => ({\n            editable: true,\n            key,\n            value: store[key],\n        }));\n    }\n    return state;\n}\nfunction formatEventData(events) {\n    if (!events)\n        return {};\n    if (Array.isArray(events)) {\n        // TODO: handle add and delete for arrays and objects\n        return events.reduce((data, event) => {\n            data.keys.push(event.key);\n            data.operations.push(event.type);\n            data.oldValue[event.key] = event.oldValue;\n            data.newValue[event.key] = event.newValue;\n            return data;\n        }, {\n            oldValue: {},\n            keys: [],\n            operations: [],\n            newValue: {},\n        });\n    }\n    else {\n        return {\n            operation: formatDisplay(events.type),\n            key: formatDisplay(events.key),\n            oldValue: events.oldValue,\n            newValue: events.newValue,\n        };\n    }\n}\nfunction formatMutationType(type) {\n    switch (type) {\n        case MutationType.direct:\n            return 'mutation';\n        case MutationType.patchFunction:\n            return '$patch';\n        case MutationType.patchObject:\n            return '$patch';\n        default:\n            return 'unknown';\n    }\n}\n\n// timeline can be paused when directly changing the state\nlet isTimelineActive = true;\nconst componentStateTypes = [];\nconst MUTATIONS_LAYER_ID = 'pinia:mutations';\nconst INSPECTOR_ID = 'pinia';\nconst { assign: assign$1 } = Object;\n/**\n * Gets the displayed name of a store in devtools\n *\n * @param id - id of the store\n * @returns a formatted string\n */\nconst getStoreType = (id) => 'ðŸ ' + id;\n/**\n * Add the pinia plugin without any store. Allows displaying a Pinia plugin tab\n * as soon as it is added to the application.\n *\n * @param app - Vue application\n * @param pinia - pinia instance\n */\nfunction registerPiniaDevtools(app, pinia) {\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ðŸ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n    }, (api) => {\n        if (typeof api.now !== 'function') {\n            toastMessage('You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.');\n        }\n        api.addTimelineLayer({\n            id: MUTATIONS_LAYER_ID,\n            label: `Pinia ðŸ`,\n            color: 0xe5df88,\n        });\n        api.addInspector({\n            id: INSPECTOR_ID,\n            label: 'Pinia ðŸ',\n            icon: 'storage',\n            treeFilterPlaceholder: 'Search stores',\n            actions: [\n                {\n                    icon: 'content_copy',\n                    action: () => {\n                        actionGlobalCopyState(pinia);\n                    },\n                    tooltip: 'Serialize and copy the state',\n                },\n                {\n                    icon: 'content_paste',\n                    action: async () => {\n                        await actionGlobalPasteState(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Replace the state with the content of your clipboard',\n                },\n                {\n                    icon: 'save',\n                    action: () => {\n                        actionGlobalSaveState(pinia);\n                    },\n                    tooltip: 'Save the state as a JSON file',\n                },\n                {\n                    icon: 'folder_open',\n                    action: async () => {\n                        await actionGlobalOpenStateFile(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Import the state from a JSON file',\n                },\n            ],\n            nodeActions: [\n                {\n                    icon: 'restore',\n                    tooltip: 'Reset the state (with \"$reset\")',\n                    action: (nodeId) => {\n                        const store = pinia._s.get(nodeId);\n                        if (!store) {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it wasn't found.`, 'warn');\n                        }\n                        else if (typeof store.$reset !== 'function') {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it doesn't have a \"$reset\" method implemented.`, 'warn');\n                        }\n                        else {\n                            store.$reset();\n                            toastMessage(`Store \"${nodeId}\" reset.`);\n                        }\n                    },\n                },\n            ],\n        });\n        api.on.inspectComponent((payload, ctx) => {\n            const proxy = (payload.componentInstance &&\n                payload.componentInstance.proxy);\n            if (proxy && proxy._pStores) {\n                const piniaStores = payload.componentInstance.proxy._pStores;\n                Object.values(piniaStores).forEach((store) => {\n                    payload.instanceData.state.push({\n                        type: getStoreType(store.$id),\n                        key: 'state',\n                        editable: true,\n                        value: store._isOptionsAPI\n                            ? {\n                                _custom: {\n                                    value: toRaw(store.$state),\n                                    actions: [\n                                        {\n                                            icon: 'restore',\n                                            tooltip: 'Reset the state of this store',\n                                            action: () => store.$reset(),\n                                        },\n                                    ],\n                                },\n                            }\n                            : // NOTE: workaround to unwrap transferred refs\n                                Object.keys(store.$state).reduce((state, key) => {\n                                    state[key] = store.$state[key];\n                                    return state;\n                                }, {}),\n                    });\n                    if (store._getters && store._getters.length) {\n                        payload.instanceData.state.push({\n                            type: getStoreType(store.$id),\n                            key: 'getters',\n                            editable: false,\n                            value: store._getters.reduce((getters, key) => {\n                                try {\n                                    getters[key] = store[key];\n                                }\n                                catch (error) {\n                                    // @ts-expect-error: we just want to show it in devtools\n                                    getters[key] = error;\n                                }\n                                return getters;\n                            }, {}),\n                        });\n                    }\n                });\n            }\n        });\n        api.on.getInspectorTree((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                let stores = [pinia];\n                stores = stores.concat(Array.from(pinia._s.values()));\n                payload.rootNodes = (payload.filter\n                    ? stores.filter((store) => '$id' in store\n                        ? store.$id\n                            .toLowerCase()\n                            .includes(payload.filter.toLowerCase())\n                        : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase()))\n                    : stores).map(formatStoreForInspectorTree);\n            }\n        });\n        // Expose pinia instance as $pinia to window\n        globalThis.$pinia = pinia;\n        api.on.getInspectorState((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    // this could be the selected store restored for a different project\n                    // so it's better not to say anything here\n                    return;\n                }\n                if (inspectedStore) {\n                    // Expose selected store as $store to window\n                    if (payload.nodeId !== PINIA_ROOT_ID)\n                        globalThis.$store = toRaw(inspectedStore);\n                    payload.state = formatStoreForInspectorState(inspectedStore);\n                }\n            }\n        });\n        api.on.editInspectorState((payload, ctx) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    return toastMessage(`store \"${payload.nodeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (!isPinia(inspectedStore)) {\n                    // access only the state\n                    if (path.length !== 1 ||\n                        !inspectedStore._customProperties.has(path[0]) ||\n                        path[0] in inspectedStore.$state) {\n                        path.unshift('$state');\n                    }\n                }\n                else {\n                    // Root access, we can omit the `.value` because the devtools API does it for us\n                    path.unshift('state');\n                }\n                isTimelineActive = false;\n                payload.set(inspectedStore, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n        api.on.editComponentState((payload) => {\n            if (payload.type.startsWith('ðŸ')) {\n                const storeId = payload.type.replace(/^ðŸ\\s*/, '');\n                const store = pinia._s.get(storeId);\n                if (!store) {\n                    return toastMessage(`store \"${storeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (path[0] !== 'state') {\n                    return toastMessage(`Invalid path for store \"${storeId}\":\\n${path}\\nOnly state can be modified.`);\n                }\n                // rewrite the first entry to be able to directly set the state as\n                // well as any other path\n                path[0] = '$state';\n                isTimelineActive = false;\n                payload.set(store, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n    });\n}\nfunction addStoreToDevtools(app, store) {\n    if (!componentStateTypes.includes(getStoreType(store.$id))) {\n        componentStateTypes.push(getStoreType(store.$id));\n    }\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ðŸ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n        settings: {\n            logStoreChanges: {\n                label: 'Notify about new/deleted stores',\n                type: 'boolean',\n                defaultValue: true,\n            },\n            // useEmojis: {\n            //   label: 'Use emojis in messages âš¡ï¸',\n            //   type: 'boolean',\n            //   defaultValue: true,\n            // },\n        },\n    }, (api) => {\n        // gracefully handle errors\n        const now = typeof api.now === 'function' ? api.now.bind(api) : Date.now;\n        store.$onAction(({ after, onError, name, args }) => {\n            const groupId = runningActionId++;\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: 'ðŸ›« ' + name,\n                    subtitle: 'start',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        action: formatDisplay(name),\n                        args,\n                    },\n                    groupId,\n                },\n            });\n            after((result) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        title: 'ðŸ›¬ ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            result,\n                        },\n                        groupId,\n                    },\n                });\n            });\n            onError((error) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        logType: 'error',\n                        title: 'ðŸ’¥ ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            error,\n                        },\n                        groupId,\n                    },\n                });\n            });\n        }, true);\n        store._customProperties.forEach((name) => {\n            watch(() => unref(store[name]), (newValue, oldValue) => {\n                api.notifyComponentUpdate();\n                api.sendInspectorState(INSPECTOR_ID);\n                if (isTimelineActive) {\n                    api.addTimelineEvent({\n                        layerId: MUTATIONS_LAYER_ID,\n                        event: {\n                            time: now(),\n                            title: 'Change',\n                            subtitle: name,\n                            data: {\n                                newValue,\n                                oldValue,\n                            },\n                            groupId: activeAction,\n                        },\n                    });\n                }\n            }, { deep: true });\n        });\n        store.$subscribe(({ events, type }, state) => {\n            api.notifyComponentUpdate();\n            api.sendInspectorState(INSPECTOR_ID);\n            if (!isTimelineActive)\n                return;\n            // rootStore.state[store.id] = state\n            const eventData = {\n                time: now(),\n                title: formatMutationType(type),\n                data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),\n                groupId: activeAction,\n            };\n            if (type === MutationType.patchFunction) {\n                eventData.subtitle = 'â¤µï¸';\n            }\n            else if (type === MutationType.patchObject) {\n                eventData.subtitle = 'ðŸ§©';\n            }\n            else if (events && !Array.isArray(events)) {\n                eventData.subtitle = events.type;\n            }\n            if (events) {\n                eventData.data['rawEvent(s)'] = {\n                    _custom: {\n                        display: 'DebuggerEvent',\n                        type: 'object',\n                        tooltip: 'raw DebuggerEvent[]',\n                        value: events,\n                    },\n                };\n            }\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: eventData,\n            });\n        }, { detached: true, flush: 'sync' });\n        const hotUpdate = store._hotUpdate;\n        store._hotUpdate = markRaw((newStore) => {\n            hotUpdate(newStore);\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: 'ðŸ”¥ ' + store.$id,\n                    subtitle: 'HMR update',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        info: formatDisplay(`HMR update`),\n                    },\n                },\n            });\n            // update the devtools too\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n        });\n        const { $dispose } = store;\n        store.$dispose = () => {\n            $dispose();\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n            api.getSettings().logStoreChanges &&\n                toastMessage(`Disposed \"${store.$id}\" store ðŸ—‘`);\n        };\n        // trigger an update so it can display new registered stores\n        api.notifyComponentUpdate();\n        api.sendInspectorTree(INSPECTOR_ID);\n        api.sendInspectorState(INSPECTOR_ID);\n        api.getSettings().logStoreChanges &&\n            toastMessage(`\"${store.$id}\" store installed ðŸ†•`);\n    });\n}\nlet runningActionId = 0;\nlet activeAction;\n/**\n * Patches a store to enable action grouping in devtools by wrapping the store with a Proxy that is passed as the\n * context of all actions, allowing us to set `runningAction` on each access and effectively associating any state\n * mutation to the action.\n *\n * @param store - store to patch\n * @param actionNames - list of actionst to patch\n */\nfunction patchActionForGrouping(store, actionNames, wrapWithProxy) {\n    // original actions of the store as they are given by pinia. We are going to override them\n    const actions = actionNames.reduce((storeActions, actionName) => {\n        // use toRaw to avoid tracking #541\n        storeActions[actionName] = toRaw(store)[actionName];\n        return storeActions;\n    }, {});\n    for (const actionName in actions) {\n        store[actionName] = function () {\n            // the running action id is incremented in a before action hook\n            const _actionId = runningActionId;\n            const trackedStore = wrapWithProxy\n                ? new Proxy(store, {\n                    get(...args) {\n                        activeAction = _actionId;\n                        return Reflect.get(...args);\n                    },\n                    set(...args) {\n                        activeAction = _actionId;\n                        return Reflect.set(...args);\n                    },\n                })\n                : store;\n            // For Setup Stores we need https://github.com/tc39/proposal-async-context\n            activeAction = _actionId;\n            const retValue = actions[actionName].apply(trackedStore, arguments);\n            // this is safer as async actions in Setup Stores would associate mutations done outside of the action\n            activeAction = undefined;\n            return retValue;\n        };\n    }\n}\n/**\n * pinia.use(devtoolsPlugin)\n */\nfunction devtoolsPlugin({ app, store, options }) {\n    // HMR module\n    if (store.$id.startsWith('__hot:')) {\n        return;\n    }\n    // detect option api vs setup api\n    store._isOptionsAPI = !!options.state;\n    // Do not overwrite actions mocked by @pinia/testing (#2298)\n    if (!store._p._testing) {\n        patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);\n        // Upgrade the HMR to also update the new actions\n        const originalHotUpdate = store._hotUpdate;\n        toRaw(store)._hotUpdate = function (newStore) {\n            originalHotUpdate.apply(this, arguments);\n            patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);\n        };\n    }\n    addStoreToDevtools(app, \n    // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?\n    store);\n}\n\n/**\n * Creates a Pinia instance to be used by the application\n */\nfunction createPinia() {\n    const scope = effectScope(true);\n    // NOTE: here we could check the window object for a state and directly set it\n    // if there is anything like it with Vue 3 SSR\n    const state = scope.run(() => ref({}));\n    let _p = [];\n    // plugins added before calling app.use(pinia)\n    let toBeInstalled = [];\n    const pinia = markRaw({\n        install(app) {\n            // this allows calling useStore() outside of a component setup after\n            // installing pinia's plugin\n            setActivePinia(pinia);\n            if (!isVue2) {\n                pinia._a = app;\n                app.provide(piniaSymbol, pinia);\n                app.config.globalProperties.$pinia = pinia;\n                /* istanbul ignore else */\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(app, pinia);\n                }\n                toBeInstalled.forEach((plugin) => _p.push(plugin));\n                toBeInstalled = [];\n            }\n        },\n        use(plugin) {\n            if (!this._a && !isVue2) {\n                toBeInstalled.push(plugin);\n            }\n            else {\n                _p.push(plugin);\n            }\n            return this;\n        },\n        _p,\n        // it's actually undefined here\n        // @ts-expect-error\n        _a: null,\n        _e: scope,\n        _s: new Map(),\n        state,\n    });\n    // pinia devtools rely on dev only features so they cannot be forced unless\n    // the dev build of Vue is used. Avoid old browsers like IE11.\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT && typeof Proxy !== 'undefined') {\n        pinia.use(devtoolsPlugin);\n    }\n    return pinia;\n}\n/**\n * Dispose a Pinia instance by stopping its effectScope and removing the state, plugins and stores. This is mostly\n * useful in tests, with both a testing pinia or a regular pinia and in applications that use multiple pinia instances.\n * Once disposed, the pinia instance cannot be used anymore.\n *\n * @param pinia - pinia instance\n */\nfunction disposePinia(pinia) {\n    pinia._e.stop();\n    pinia._s.clear();\n    pinia._p.splice(0);\n    pinia.state.value = {};\n    // @ts-expect-error: non valid\n    pinia._a = null;\n}\n\n/**\n * Checks if a function is a `StoreDefinition`.\n *\n * @param fn - object to test\n * @returns true if `fn` is a StoreDefinition\n */\nconst isUseStore = (fn) => {\n    return typeof fn === 'function' && typeof fn.$id === 'string';\n};\n/**\n * Mutates in place `newState` with `oldState` to _hot update_ it. It will\n * remove any key not existing in `newState` and recursively merge plain\n * objects.\n *\n * @param newState - new state object to be patched\n * @param oldState - old state that should be used to patch newState\n * @returns - newState\n */\nfunction patchObject(newState, oldState) {\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in oldState) {\n        const subPatch = oldState[key];\n        // skip the whole sub tree\n        if (!(key in newState)) {\n            continue;\n        }\n        const targetValue = newState[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            newState[key] = patchObject(targetValue, subPatch);\n        }\n        else {\n            // objects are either a bit more complex (e.g. refs) or primitives, so we\n            // just set the whole thing\n            if (isVue2) {\n                set(newState, key, subPatch);\n            }\n            else {\n                newState[key] = subPatch;\n            }\n        }\n    }\n    return newState;\n}\n/**\n * Creates an _accept_ function to pass to `import.meta.hot` in Vite applications.\n *\n * @example\n * ```js\n * const useUser = defineStore(...)\n * if (import.meta.hot) {\n *   import.meta.hot.accept(acceptHMRUpdate(useUser, import.meta.hot))\n * }\n * ```\n *\n * @param initialUseStore - return of the defineStore to hot update\n * @param hot - `import.meta.hot`\n */\nfunction acceptHMRUpdate(initialUseStore, hot) {\n    // strip as much as possible from iife.prod\n    if (!(process.env.NODE_ENV !== 'production')) {\n        return () => { };\n    }\n    return (newModule) => {\n        const pinia = hot.data.pinia || initialUseStore._pinia;\n        if (!pinia) {\n            // this store is still not used\n            return;\n        }\n        // preserve the pinia instance across loads\n        hot.data.pinia = pinia;\n        // console.log('got data', newStore)\n        for (const exportName in newModule) {\n            const useStore = newModule[exportName];\n            // console.log('checking for', exportName)\n            if (isUseStore(useStore) && pinia._s.has(useStore.$id)) {\n                // console.log('Accepting update for', useStore.$id)\n                const id = useStore.$id;\n                if (id !== initialUseStore.$id) {\n                    console.warn(`The id of the store changed from \"${initialUseStore.$id}\" to \"${id}\". Reloading.`);\n                    // return import.meta.hot.invalidate()\n                    return hot.invalidate();\n                }\n                const existingStore = pinia._s.get(id);\n                if (!existingStore) {\n                    console.log(`[Pinia]: skipping hmr because store doesn't exist yet`);\n                    return;\n                }\n                useStore(pinia, existingStore);\n            }\n        }\n    };\n}\n\nconst noop = () => { };\nfunction addSubscription(subscriptions, callback, detached, onCleanup = noop) {\n    subscriptions.push(callback);\n    const removeSubscription = () => {\n        const idx = subscriptions.indexOf(callback);\n        if (idx > -1) {\n            subscriptions.splice(idx, 1);\n            onCleanup();\n        }\n    };\n    if (!detached && getCurrentScope()) {\n        onScopeDispose(removeSubscription);\n    }\n    return removeSubscription;\n}\nfunction triggerSubscriptions(subscriptions, ...args) {\n    subscriptions.slice().forEach((callback) => {\n        callback(...args);\n    });\n}\n\nconst fallbackRunWithContext = (fn) => fn();\n/**\n * Marks a function as an action for `$onAction`\n * @internal\n */\nconst ACTION_MARKER = Symbol();\n/**\n * Action name symbol. Allows to add a name to an action after defining it\n * @internal\n */\nconst ACTION_NAME = Symbol();\nfunction mergeReactiveObjects(target, patchToApply) {\n    // Handle Map instances\n    if (target instanceof Map && patchToApply instanceof Map) {\n        patchToApply.forEach((value, key) => target.set(key, value));\n    }\n    else if (target instanceof Set && patchToApply instanceof Set) {\n        // Handle Set instances\n        patchToApply.forEach(target.add, target);\n    }\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in patchToApply) {\n        if (!patchToApply.hasOwnProperty(key))\n            continue;\n        const subPatch = patchToApply[key];\n        const targetValue = target[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            target.hasOwnProperty(key) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            // NOTE: here I wanted to warn about inconsistent types but it's not possible because in setup stores one might\n            // start the value of a property as a certain type e.g. a Map, and then for some reason, during SSR, change that\n            // to `undefined`. When trying to hydrate, we want to override the Map with `undefined`.\n            target[key] = mergeReactiveObjects(targetValue, subPatch);\n        }\n        else {\n            // @ts-expect-error: subPatch is a valid value\n            target[key] = subPatch;\n        }\n    }\n    return target;\n}\nconst skipHydrateSymbol = (process.env.NODE_ENV !== 'production')\n    ? Symbol('pinia:skipHydration')\n    : /* istanbul ignore next */ Symbol();\n/**\n * Tells Pinia to skip the hydration process of a given object. This is useful in setup stores (only) when you return a\n * stateful object in the store but it isn't really state. e.g. returning a router instance in a setup store.\n *\n * @param obj - target object\n * @returns obj\n */\nfunction skipHydrate(obj) {\n    return Object.defineProperty(obj, skipHydrateSymbol, {});\n}\n/**\n * Returns whether a value should be hydrated\n *\n * @param obj - target variable\n * @returns true if `obj` should be hydrated\n */\nfunction shouldHydrate(obj) {\n    return !isPlainObject(obj) || !obj.hasOwnProperty(skipHydrateSymbol);\n}\nconst { assign } = Object;\nfunction isComputed(o) {\n    return !!(isRef(o) && o.effect);\n}\nfunction createOptionsStore(id, options, pinia, hot) {\n    const { state, actions, getters } = options;\n    const initialState = pinia.state.value[id];\n    let store;\n    function setup() {\n        if (!initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(pinia.state.value, id, state ? state() : {});\n            }\n            else {\n                pinia.state.value[id] = state ? state() : {};\n            }\n        }\n        // avoid creating a state in pinia.state.value\n        const localState = (process.env.NODE_ENV !== 'production') && hot\n            ? // use ref() to unwrap refs inside state TODO: check if this is still necessary\n                toRefs(ref(state ? state() : {}).value)\n            : toRefs(pinia.state.value[id]);\n        return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {\n            if ((process.env.NODE_ENV !== 'production') && name in localState) {\n                console.warn(`[ðŸ]: A getter cannot have the same name as another state property. Rename one of them. Found with \"${name}\" in store \"${id}\".`);\n            }\n            computedGetters[name] = markRaw(computed(() => {\n                setActivePinia(pinia);\n                // it was created just before\n                const store = pinia._s.get(id);\n                // allow cross using stores\n                /* istanbul ignore if */\n                if (isVue2 && !store._r)\n                    return;\n                // @ts-expect-error\n                // return getters![name].call(context, context)\n                // TODO: avoid reading the getter while assigning with a global variable\n                return getters[name].call(store, store);\n            }));\n            return computedGetters;\n        }, {}));\n    }\n    store = createSetupStore(id, setup, options, pinia, hot, true);\n    return store;\n}\nfunction createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {\n    let scope;\n    const optionsForPlugin = assign({ actions: {} }, options);\n    /* istanbul ignore if */\n    if ((process.env.NODE_ENV !== 'production') && !pinia._e.active) {\n        throw new Error('Pinia destroyed');\n    }\n    // watcher options for $subscribe\n    const $subscribeOptions = { deep: true };\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production') && !isVue2) {\n        $subscribeOptions.onTrigger = (event) => {\n            /* istanbul ignore else */\n            if (isListening) {\n                debuggerEvents = event;\n                // avoid triggering this while the store is being built and the state is being set in pinia\n            }\n            else if (isListening == false && !store._hotUpdating) {\n                // let patch send all the events together later\n                /* istanbul ignore else */\n                if (Array.isArray(debuggerEvents)) {\n                    debuggerEvents.push(event);\n                }\n                else {\n                    console.error('ðŸ debuggerEvents should be an array. This is most likely an internal Pinia bug.');\n                }\n            }\n        };\n    }\n    // internal state\n    let isListening; // set to true at the end\n    let isSyncListening; // set to true at the end\n    let subscriptions = [];\n    let actionSubscriptions = [];\n    let debuggerEvents;\n    const initialState = pinia.state.value[$id];\n    // avoid setting the state for option stores if it is set\n    // by the setup\n    if (!isOptionsStore && !initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n        /* istanbul ignore if */\n        if (isVue2) {\n            set(pinia.state.value, $id, {});\n        }\n        else {\n            pinia.state.value[$id] = {};\n        }\n    }\n    const hotState = ref({});\n    // avoid triggering too many listeners\n    // https://github.com/vuejs/pinia/issues/1129\n    let activeListener;\n    function $patch(partialStateOrMutator) {\n        let subscriptionMutation;\n        isListening = isSyncListening = false;\n        // reset the debugger events since patches are sync\n        /* istanbul ignore else */\n        if ((process.env.NODE_ENV !== 'production')) {\n            debuggerEvents = [];\n        }\n        if (typeof partialStateOrMutator === 'function') {\n            partialStateOrMutator(pinia.state.value[$id]);\n            subscriptionMutation = {\n                type: MutationType.patchFunction,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        else {\n            mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);\n            subscriptionMutation = {\n                type: MutationType.patchObject,\n                payload: partialStateOrMutator,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        const myListenerId = (activeListener = Symbol());\n        nextTick().then(() => {\n            if (activeListener === myListenerId) {\n                isListening = true;\n            }\n        });\n        isSyncListening = true;\n        // because we paused the watcher, we need to manually call the subscriptions\n        triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);\n    }\n    const $reset = isOptionsStore\n        ? function $reset() {\n            const { state } = options;\n            const newState = state ? state() : {};\n            // we use a patch to group all changes into one single subscription\n            this.$patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, newState);\n            });\n        }\n        : /* istanbul ignore next */\n            (process.env.NODE_ENV !== 'production')\n                ? () => {\n                    throw new Error(`ðŸ: Store \"${$id}\" is built using the setup syntax and does not implement $reset().`);\n                }\n                : noop;\n    function $dispose() {\n        scope.stop();\n        subscriptions = [];\n        actionSubscriptions = [];\n        pinia._s.delete($id);\n    }\n    /**\n     * Helper that wraps function so it can be tracked with $onAction\n     * @param fn - action to wrap\n     * @param name - name of the action\n     */\n    const action = (fn, name = '') => {\n        if (ACTION_MARKER in fn) {\n            fn[ACTION_NAME] = name;\n            return fn;\n        }\n        const wrappedAction = function () {\n            setActivePinia(pinia);\n            const args = Array.from(arguments);\n            const afterCallbackList = [];\n            const onErrorCallbackList = [];\n            function after(callback) {\n                afterCallbackList.push(callback);\n            }\n            function onError(callback) {\n                onErrorCallbackList.push(callback);\n            }\n            // @ts-expect-error\n            triggerSubscriptions(actionSubscriptions, {\n                args,\n                name: wrappedAction[ACTION_NAME],\n                store,\n                after,\n                onError,\n            });\n            let ret;\n            try {\n                ret = fn.apply(this && this.$id === $id ? this : store, args);\n                // handle sync errors\n            }\n            catch (error) {\n                triggerSubscriptions(onErrorCallbackList, error);\n                throw error;\n            }\n            if (ret instanceof Promise) {\n                return ret\n                    .then((value) => {\n                    triggerSubscriptions(afterCallbackList, value);\n                    return value;\n                })\n                    .catch((error) => {\n                    triggerSubscriptions(onErrorCallbackList, error);\n                    return Promise.reject(error);\n                });\n            }\n            // trigger after callbacks\n            triggerSubscriptions(afterCallbackList, ret);\n            return ret;\n        };\n        wrappedAction[ACTION_MARKER] = true;\n        wrappedAction[ACTION_NAME] = name; // will be set later\n        // @ts-expect-error: we are intentionally limiting the returned type to just Fn\n        // because all the added properties are internals that are exposed through `$onAction()` only\n        return wrappedAction;\n    };\n    const _hmrPayload = /*#__PURE__*/ markRaw({\n        actions: {},\n        getters: {},\n        state: [],\n        hotState,\n    });\n    const partialStore = {\n        _p: pinia,\n        // _s: scope,\n        $id,\n        $onAction: addSubscription.bind(null, actionSubscriptions),\n        $patch,\n        $reset,\n        $subscribe(callback, options = {}) {\n            const removeSubscription = addSubscription(subscriptions, callback, options.detached, () => stopWatcher());\n            const stopWatcher = scope.run(() => watch(() => pinia.state.value[$id], (state) => {\n                if (options.flush === 'sync' ? isSyncListening : isListening) {\n                    callback({\n                        storeId: $id,\n                        type: MutationType.direct,\n                        events: debuggerEvents,\n                    }, state);\n                }\n            }, assign({}, $subscribeOptions, options)));\n            return removeSubscription;\n        },\n        $dispose,\n    };\n    /* istanbul ignore if */\n    if (isVue2) {\n        // start as non ready\n        partialStore._r = false;\n    }\n    const store = reactive((process.env.NODE_ENV !== 'production') || ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT)\n        ? assign({\n            _hmrPayload,\n            _customProperties: markRaw(new Set()), // devtools custom properties\n        }, partialStore\n        // must be added later\n        // setupStore\n        )\n        : partialStore);\n    // store the partial store now so the setup of stores can instantiate each other before they are finished without\n    // creating infinite loops.\n    pinia._s.set($id, store);\n    const runWithContext = (pinia._a && pinia._a.runWithContext) || fallbackRunWithContext;\n    // TODO: idea create skipSerialize that marks properties as non serializable and they are skipped\n    const setupStore = runWithContext(() => pinia._e.run(() => (scope = effectScope()).run(() => setup({ action }))));\n    // overwrite existing actions to support $onAction\n    for (const key in setupStore) {\n        const prop = setupStore[key];\n        if ((isRef(prop) && !isComputed(prop)) || isReactive(prop)) {\n            // mark it as a piece of state to be serialized\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                set(hotState.value, key, toRef(setupStore, key));\n                // createOptionStore directly sets the state in pinia.state.value so we\n                // can just skip that\n            }\n            else if (!isOptionsStore) {\n                // in setup stores we must hydrate the state and sync pinia state tree with the refs the user just created\n                if (initialState && shouldHydrate(prop)) {\n                    if (isRef(prop)) {\n                        prop.value = initialState[key];\n                    }\n                    else {\n                        // probably a reactive object, lets recursively assign\n                        // @ts-expect-error: prop is unknown\n                        mergeReactiveObjects(prop, initialState[key]);\n                    }\n                }\n                // transfer the ref to the pinia state to keep everything in sync\n                /* istanbul ignore if */\n                if (isVue2) {\n                    set(pinia.state.value[$id], key, prop);\n                }\n                else {\n                    pinia.state.value[$id][key] = prop;\n                }\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.state.push(key);\n            }\n            // action\n        }\n        else if (typeof prop === 'function') {\n            const actionValue = (process.env.NODE_ENV !== 'production') && hot ? prop : action(prop, key);\n            // this a hot module replacement store because the hotUpdate method needs\n            // to do it with the right context\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(setupStore, key, actionValue);\n            }\n            else {\n                // @ts-expect-error\n                setupStore[key] = actionValue;\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.actions[key] = prop;\n            }\n            // list actions so they can be used in plugins\n            // @ts-expect-error\n            optionsForPlugin.actions[key] = prop;\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            // add getters for devtools\n            if (isComputed(prop)) {\n                _hmrPayload.getters[key] = isOptionsStore\n                    ? // @ts-expect-error\n                        options.getters[key]\n                    : prop;\n                if (IS_CLIENT) {\n                    const getters = setupStore._getters ||\n                        // @ts-expect-error: same\n                        (setupStore._getters = markRaw([]));\n                    getters.push(key);\n                }\n            }\n        }\n    }\n    // add the state, getters, and action properties\n    /* istanbul ignore if */\n    if (isVue2) {\n        Object.keys(setupStore).forEach((key) => {\n            set(store, key, setupStore[key]);\n        });\n    }\n    else {\n        assign(store, setupStore);\n        // allows retrieving reactive objects with `storeToRefs()`. Must be called after assigning to the reactive object.\n        // Make `storeToRefs()` work with `reactive()` #799\n        assign(toRaw(store), setupStore);\n    }\n    // use this instead of a computed with setter to be able to create it anywhere\n    // without linking the computed lifespan to wherever the store is first\n    // created.\n    Object.defineProperty(store, '$state', {\n        get: () => ((process.env.NODE_ENV !== 'production') && hot ? hotState.value : pinia.state.value[$id]),\n        set: (state) => {\n            /* istanbul ignore if */\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                throw new Error('cannot set hotState');\n            }\n            $patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, state);\n            });\n        },\n    });\n    // add the hotUpdate before plugins to allow them to override it\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production')) {\n        store._hotUpdate = markRaw((newStore) => {\n            store._hotUpdating = true;\n            newStore._hmrPayload.state.forEach((stateKey) => {\n                if (stateKey in store.$state) {\n                    const newStateTarget = newStore.$state[stateKey];\n                    const oldStateSource = store.$state[stateKey];\n                    if (typeof newStateTarget === 'object' &&\n                        isPlainObject(newStateTarget) &&\n                        isPlainObject(oldStateSource)) {\n                        patchObject(newStateTarget, oldStateSource);\n                    }\n                    else {\n                        // transfer the ref\n                        newStore.$state[stateKey] = oldStateSource;\n                    }\n                }\n                // patch direct access properties to allow store.stateProperty to work as\n                // store.$state.stateProperty\n                set(store, stateKey, toRef(newStore.$state, stateKey));\n            });\n            // remove deleted state properties\n            Object.keys(store.$state).forEach((stateKey) => {\n                if (!(stateKey in newStore.$state)) {\n                    del(store, stateKey);\n                }\n            });\n            // avoid devtools logging this as a mutation\n            isListening = false;\n            isSyncListening = false;\n            pinia.state.value[$id] = toRef(newStore._hmrPayload, 'hotState');\n            isSyncListening = true;\n            nextTick().then(() => {\n                isListening = true;\n            });\n            for (const actionName in newStore._hmrPayload.actions) {\n                const actionFn = newStore[actionName];\n                set(store, actionName, action(actionFn, actionName));\n            }\n            // TODO: does this work in both setup and option store?\n            for (const getterName in newStore._hmrPayload.getters) {\n                const getter = newStore._hmrPayload.getters[getterName];\n                const getterValue = isOptionsStore\n                    ? // special handling of options api\n                        computed(() => {\n                            setActivePinia(pinia);\n                            return getter.call(store, store);\n                        })\n                    : getter;\n                set(store, getterName, getterValue);\n            }\n            // remove deleted getters\n            Object.keys(store._hmrPayload.getters).forEach((key) => {\n                if (!(key in newStore._hmrPayload.getters)) {\n                    del(store, key);\n                }\n            });\n            // remove old actions\n            Object.keys(store._hmrPayload.actions).forEach((key) => {\n                if (!(key in newStore._hmrPayload.actions)) {\n                    del(store, key);\n                }\n            });\n            // update the values used in devtools and to allow deleting new properties later on\n            store._hmrPayload = newStore._hmrPayload;\n            store._getters = newStore._getters;\n            store._hotUpdating = false;\n        });\n    }\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n        const nonEnumerable = {\n            writable: true,\n            configurable: true,\n            // avoid warning on devtools trying to display this property\n            enumerable: false,\n        };\n        ['_p', '_hmrPayload', '_getters', '_customProperties'].forEach((p) => {\n            Object.defineProperty(store, p, assign({ value: store[p] }, nonEnumerable));\n        });\n    }\n    /* istanbul ignore if */\n    if (isVue2) {\n        // mark the store as ready before plugins\n        store._r = true;\n    }\n    // apply all plugins\n    pinia._p.forEach((extender) => {\n        /* istanbul ignore else */\n        if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n            const extensions = scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            }));\n            Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));\n            assign(store, extensions);\n        }\n        else {\n            assign(store, scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            })));\n        }\n    });\n    if ((process.env.NODE_ENV !== 'production') &&\n        store.$state &&\n        typeof store.$state === 'object' &&\n        typeof store.$state.constructor === 'function' &&\n        !store.$state.constructor.toString().includes('[native code]')) {\n        console.warn(`[ðŸ]: The \"state\" must be a plain object. It cannot be\\n` +\n            `\\tstate: () => new MyClass()\\n` +\n            `Found in store \"${store.$id}\".`);\n    }\n    // only apply hydrate to option stores with an initial state in pinia\n    if (initialState &&\n        isOptionsStore &&\n        options.hydrate) {\n        options.hydrate(store.$state, initialState);\n    }\n    isListening = true;\n    isSyncListening = true;\n    return store;\n}\n// allows unused stores to be tree shaken\n/*! #__NO_SIDE_EFFECTS__ */\nfunction defineStore(\n// TODO: add proper types from above\nidOrOptions, setup, setupOptions) {\n    let id;\n    let options;\n    const isSetupStore = typeof setup === 'function';\n    if (typeof idOrOptions === 'string') {\n        id = idOrOptions;\n        // the option store setup will contain the actual options in this case\n        options = isSetupStore ? setupOptions : setup;\n    }\n    else {\n        options = idOrOptions;\n        id = idOrOptions.id;\n        if ((process.env.NODE_ENV !== 'production') && typeof id !== 'string') {\n            throw new Error(`[ðŸ]: \"defineStore()\" must be passed a store id as its first argument.`);\n        }\n    }\n    function useStore(pinia, hot) {\n        const hasContext = hasInjectionContext();\n        pinia =\n            // in test mode, ignore the argument provided as we can always retrieve a\n            // pinia instance with getActivePinia()\n            ((process.env.NODE_ENV === 'test') && activePinia && activePinia._testing ? null : pinia) ||\n                (hasContext ? inject(piniaSymbol, null) : null);\n        if (pinia)\n            setActivePinia(pinia);\n        if ((process.env.NODE_ENV !== 'production') && !activePinia) {\n            throw new Error(`[ðŸ]: \"getActivePinia()\" was called but there was no active Pinia. Are you trying to use a store before calling \"app.use(pinia)\"?\\n` +\n                `See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.\\n` +\n                `This will fail in production.`);\n        }\n        pinia = activePinia;\n        if (!pinia._s.has(id)) {\n            // creating the store registers it in `pinia._s`\n            if (isSetupStore) {\n                createSetupStore(id, setup, options, pinia);\n            }\n            else {\n                createOptionsStore(id, options, pinia);\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                // @ts-expect-error: not the right inferred type\n                useStore._pinia = pinia;\n            }\n        }\n        const store = pinia._s.get(id);\n        if ((process.env.NODE_ENV !== 'production') && hot) {\n            const hotId = '__hot:' + id;\n            const newStore = isSetupStore\n                ? createSetupStore(hotId, setup, options, pinia, true)\n                : createOptionsStore(hotId, assign({}, options), pinia, true);\n            hot._hotUpdate(newStore);\n            // cleanup the state properties and the store from the cache\n            delete pinia.state.value[hotId];\n            pinia._s.delete(hotId);\n        }\n        if ((process.env.NODE_ENV !== 'production') && IS_CLIENT) {\n            const currentInstance = getCurrentInstance();\n            // save stores in instances to access them devtools\n            if (currentInstance &&\n                currentInstance.proxy &&\n                // avoid adding stores that are just built for hot module replacement\n                !hot) {\n                const vm = currentInstance.proxy;\n                const cache = '_pStores' in vm ? vm._pStores : (vm._pStores = {});\n                cache[id] = store;\n            }\n        }\n        // StoreGeneric cannot be casted towards Store\n        return store;\n    }\n    useStore.$id = id;\n    return useStore;\n}\n\nlet mapStoreSuffix = 'Store';\n/**\n * Changes the suffix added by `mapStores()`. Can be set to an empty string.\n * Defaults to `\"Store\"`. Make sure to extend the MapStoresCustomization\n * interface if you are using TypeScript.\n *\n * @param suffix - new suffix\n */\nfunction setMapStoreSuffix(suffix // could be 'Store' but that would be annoying for JS\n) {\n    mapStoreSuffix = suffix;\n}\n/**\n * Allows using stores without the composition API (`setup()`) by generating an\n * object to be spread in the `computed` field of a component. It accepts a list\n * of store definitions.\n *\n * @example\n * ```js\n * export default {\n *   computed: {\n *     // other computed properties\n *     ...mapStores(useUserStore, useCartStore)\n *   },\n *\n *   created() {\n *     this.userStore // store with id \"user\"\n *     this.cartStore // store with id \"cart\"\n *   }\n * }\n * ```\n *\n * @param stores - list of stores to map to an object\n */\nfunction mapStores(...stores) {\n    if ((process.env.NODE_ENV !== 'production') && Array.isArray(stores[0])) {\n        console.warn(`[ðŸ]: Directly pass all stores to \"mapStores()\" without putting them in an array:\\n` +\n            `Replace\\n` +\n            `\\tmapStores([useAuthStore, useCartStore])\\n` +\n            `with\\n` +\n            `\\tmapStores(useAuthStore, useCartStore)\\n` +\n            `This will fail in production if not fixed.`);\n        stores = stores[0];\n    }\n    return stores.reduce((reduced, useStore) => {\n        // @ts-expect-error: $id is added by defineStore\n        reduced[useStore.$id + mapStoreSuffix] = function () {\n            return useStore(this.$pinia);\n        };\n        return reduced;\n    }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = function () {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key];\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function () {\n                const store = useStore(this.$pinia);\n                const storeKey = keysOrMapper[key];\n                // for some reason TS is unable to infer the type of storeKey to be a\n                // function\n                return typeof storeKey === 'function'\n                    ? storeKey.call(this, store)\n                    : // @ts-expect-error: FIXME: should work?\n                        store[storeKey];\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Alias for `mapState()`. You should use `mapState()` instead.\n * @deprecated use `mapState()` instead.\n */\nconst mapGetters = mapState;\n/**\n * Allows directly using actions from your store without using the composition\n * API (`setup()`) by generating an object to be spread in the `methods` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapActions(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key](...args);\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[keysOrMapper[key]](...args);\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapWritableState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[key];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[key] = value);\n                },\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[keysOrMapper[key]];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[keysOrMapper[key]] = value);\n                },\n            };\n            return reduced;\n        }, {});\n}\n\n/**\n * Creates an object of references with all the state, getters, and plugin-added\n * state properties of the store. Similar to `toRefs()` but specifically\n * designed for Pinia stores so methods and non reactive properties are\n * completely ignored.\n *\n * @param store - store to extract the refs from\n */\nfunction storeToRefs(store) {\n    // See https://github.com/vuejs/pinia/issues/852\n    // It's easier to just use toRefs() even if it includes more stuff\n    if (isVue2) {\n        // @ts-expect-error: toRefs include methods and others\n        return toRefs(store);\n    }\n    else {\n        const rawStore = toRaw(store);\n        const refs = {};\n        for (const key in rawStore) {\n            const value = rawStore[key];\n            // There is no native method to check for a computed\n            // https://github.com/vuejs/core/pull/4165\n            if (value.effect) {\n                // @ts-expect-error: too hard to type correctly\n                refs[key] =\n                    // ...\n                    computed({\n                        get: () => store[key],\n                        set(value) {\n                            store[key] = value;\n                        },\n                    });\n            }\n            else if (isRef(value) || isReactive(value)) {\n                // @ts-expect-error: the key is state or getter\n                refs[key] =\n                    // ---\n                    toRef(store, key);\n            }\n        }\n        return refs;\n    }\n}\n\n/**\n * Vue 2 Plugin that must be installed for pinia to work. Note **you don't need\n * this plugin if you are using Nuxt.js**. Use the `buildModule` instead:\n * https://pinia.vuejs.org/ssr/nuxt.html.\n *\n * @example\n * ```js\n * import Vue from 'vue'\n * import { PiniaVuePlugin, createPinia } from 'pinia'\n *\n * Vue.use(PiniaVuePlugin)\n * const pinia = createPinia()\n *\n * new Vue({\n *   el: '#app',\n *   // ...\n *   pinia,\n * })\n * ```\n *\n * @param _Vue - `Vue` imported from 'vue'.\n */\nconst PiniaVuePlugin = function (_Vue) {\n    // Equivalent of\n    // app.config.globalProperties.$pinia = pinia\n    _Vue.mixin({\n        beforeCreate() {\n            const options = this.$options;\n            if (options.pinia) {\n                const pinia = options.pinia;\n                // HACK: taken from provide(): https://github.com/vuejs/composition-api/blob/main/src/apis/inject.ts#L31\n                /* istanbul ignore else */\n                if (!this._provided) {\n                    const provideCache = {};\n                    Object.defineProperty(this, '_provided', {\n                        get: () => provideCache,\n                        set: (v) => Object.assign(provideCache, v),\n                    });\n                }\n                this._provided[piniaSymbol] = pinia;\n                // propagate the pinia instance in an SSR friendly way\n                // avoid adding it to nuxt twice\n                /* istanbul ignore else */\n                if (!this.$pinia) {\n                    this.$pinia = pinia;\n                }\n                pinia._a = this;\n                if (IS_CLIENT) {\n                    // this allows calling useStore() outside of a component setup after\n                    // installing pinia's plugin\n                    setActivePinia(pinia);\n                }\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(pinia._a, pinia);\n                }\n            }\n            else if (!this.$pinia && options.parent && options.parent.$pinia) {\n                this.$pinia = options.parent.$pinia;\n            }\n        },\n        destroyed() {\n            delete this._pStores;\n        },\n    });\n};\n\nexport { MutationType, PiniaVuePlugin, acceptHMRUpdate, createPinia, defineStore, disposePinia, getActivePinia, mapActions, mapGetters, mapState, mapStores, mapWritableState, setActivePinia, setMapStoreSuffix, shouldHydrate, skipHydrate, storeToRefs };\n","import { defineStore } from 'pinia';\r\n\r\nexport const useConfigStore = defineStore('config', {\r\n  state: () => ({\r\n    width: 800,\r\n    height: 600,\r\n    dimensions: 4,\r\n    numVectors: 6,\r\n    showForces: true,\r\n    showLabels: false,\r\n    showGrid: true,\r\n    rainbowMode: false,\r\n    neuronMode: false,\r\n    forceStrength: 50,\r\n    linkDistance: 100,\r\n    charge: -30,\r\n    particleSize: 5,\r\n  }),\r\n  actions: {\r\n    updateConfig(key, value) {\r\n      if (Object.prototype.hasOwnProperty.call(this, key)) {\r\n        this[key] = value;\r\n      }\r\n    },\r\n  },\r\n}); ","/**\r\n * Vector Utility Functions\r\n * Comprehensive helper functions for vector operations, validation, and manipulation\r\n */\r\n\r\n// Vector Mathematical Operations\r\nexport const vectorOperations = {\r\n  /**\r\n   * Add two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number[]} Result vector\r\n   */\r\n  add(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.map((val, i) => val + b[i])\r\n  },\r\n\r\n  /**\r\n   * Subtract two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number[]} Result vector\r\n   */\r\n  subtract(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.map((val, i) => val - b[i])\r\n  },\r\n\r\n  /**\r\n   * Scale a vector by a scalar\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} scalar - Scaling factor\r\n   * @returns {number[]} Scaled vector\r\n   */\r\n  scale(vector, scalar) {\r\n    return vector.map(val => val * scalar)\r\n  },\r\n\r\n  /**\r\n   * Calculate dot product of two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Dot product\r\n   */\r\n  dotProduct(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.reduce((sum, val, i) => sum + val * b[i], 0)\r\n  },\r\n\r\n  /**\r\n   * Calculate vector magnitude (L2 norm)\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number} Magnitude\r\n   */\r\n  magnitude(vector) {\r\n    return Math.sqrt(vector.reduce((sum, val) => sum + val * val, 0))\r\n  },\r\n\r\n  /**\r\n   * Normalize a vector to unit length\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number[]} Normalized vector\r\n   */\r\n  normalize(vector) {\r\n    const mag = this.magnitude(vector)\r\n    if (mag === 0) return vector.slice() // Return copy of zero vector\r\n    return vector.map(val => val / mag)\r\n  },\r\n\r\n  /**\r\n   * Calculate cosine similarity between two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Cosine similarity (-1 to 1)\r\n   */\r\n  cosineSimilarity(a, b) {\r\n    const dotProd = this.dotProduct(a, b)\r\n    const magA = this.magnitude(a)\r\n    const magB = this.magnitude(b)\r\n    \r\n    if (magA === 0 || magB === 0) return 0\r\n    return dotProd / (magA * magB)\r\n  },\r\n\r\n  /**\r\n   * Calculate Euclidean distance between two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Euclidean distance\r\n   */\r\n  euclideanDistance(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    const diff = this.subtract(a, b)\r\n    return this.magnitude(diff)\r\n  },\r\n\r\n  /**\r\n   * Calculate Manhattan distance between two vectors\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {number} Manhattan distance\r\n   */\r\n  manhattanDistance(a, b) {\r\n    if (a.length !== b.length) throw new Error('Vector dimensions must match')\r\n    return a.reduce((sum, val, i) => sum + Math.abs(val - b[i]), 0)\r\n  }\r\n}\r\n\r\n// Vector Generation Utilities\r\nexport const vectorGeneration = {\r\n  /**\r\n   * Generate a random vector with specified dimensions\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @param {number} min - Minimum value\r\n   * @param {number} max - Maximum value\r\n   * @returns {number[]} Random vector\r\n   */\r\n  random(dimensions, min = -1, max = 1) {\r\n    return Array.from({ length: dimensions }, () => \r\n      Math.random() * (max - min) + min\r\n    )\r\n  },\r\n\r\n  /**\r\n   * Generate a zero vector\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @returns {number[]} Zero vector\r\n   */\r\n  zero(dimensions) {\r\n    return new Array(dimensions).fill(0)\r\n  },\r\n\r\n  /**\r\n   * Generate a unit vector (one-hot)\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @param {number} activeIndex - Index of the active dimension\r\n   * @returns {number[]} Unit vector\r\n   */\r\n  unit(dimensions, activeIndex) {\r\n    const vector = this.zero(dimensions)\r\n    if (activeIndex >= 0 && activeIndex < dimensions) {\r\n      vector[activeIndex] = 1\r\n    }\r\n    return vector\r\n  },\r\n\r\n  /**\r\n   * Generate vectors with normal distribution\r\n   * @param {number} dimensions - Number of dimensions\r\n   * @param {number} mean - Mean value\r\n   * @param {number} stdDev - Standard deviation\r\n   * @returns {number[]} Normally distributed vector\r\n   */\r\n  normal(dimensions, mean = 0, stdDev = 1) {\r\n    return Array.from({ length: dimensions }, () => \r\n      this.boxMullerRandom() * stdDev + mean\r\n    )\r\n  },\r\n\r\n  /**\r\n   * Box-Muller transformation for normal distribution\r\n   * @returns {number} Normally distributed random number\r\n   */\r\n  boxMullerRandom() {\r\n    const u1 = Math.random()\r\n    const u2 = Math.random()\r\n    return Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2)\r\n  }\r\n}\r\n\r\n// Vector Validation\r\nexport const vectorValidation = {\r\n  /**\r\n   * Check if input is a valid vector\r\n   * @param {any} input - Input to validate\r\n   * @returns {boolean} True if valid vector\r\n   */\r\n  isValid(input) {\r\n    return Array.isArray(input) && \r\n           input.length > 0 && \r\n           input.every(val => typeof val === 'number' && !isNaN(val))\r\n  },\r\n\r\n  /**\r\n   * Check if two vectors have same dimensions\r\n   * @param {number[]} a - First vector\r\n   * @param {number[]} b - Second vector\r\n   * @returns {boolean} True if same dimensions\r\n   */\r\n  sameDimensions(a, b) {\r\n    return this.isValid(a) && this.isValid(b) && a.length === b.length\r\n  },\r\n\r\n  /**\r\n   * Validate vector dimensions\r\n   * @param {number[]} vector - Vector to validate\r\n   * @param {number} expectedDimensions - Expected number of dimensions\r\n   * @returns {boolean} True if dimensions match\r\n   */\r\n  validateDimensions(vector, expectedDimensions) {\r\n    return this.isValid(vector) && vector.length === expectedDimensions\r\n  },\r\n\r\n  /**\r\n   * Check if vector contains only finite numbers\r\n   * @param {number[]} vector - Vector to check\r\n   * @returns {boolean} True if all values are finite\r\n   */\r\n  isFinite(vector) {\r\n    return this.isValid(vector) && vector.every(val => Number.isFinite(val))\r\n  }\r\n}\r\n\r\n// Vector Statistics\r\nexport const vectorStatistics = {\r\n  /**\r\n   * Calculate vector statistics\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {Object} Statistics object\r\n   */\r\n  calculate(vector) {\r\n    if (!vectorValidation.isValid(vector)) {\r\n      throw new Error('Invalid vector input')\r\n    }\r\n\r\n    const mean = this.mean(vector)\r\n    const variance = this.variance(vector, mean)\r\n    const stdDev = Math.sqrt(variance)\r\n    const entropy = this.entropy(vector)\r\n    const dimensions = vector.length\r\n\r\n    return {\r\n      mean,\r\n      variance,\r\n      standardDeviation: stdDev,\r\n      min: Math.min(...vector),\r\n      max: Math.max(...vector),\r\n      magnitude: vectorOperations.magnitude(vector),\r\n      sparsity: this.sparsity(vector),\r\n      entropy,\r\n      componentInsights: this.componentInsights(vector),\r\n      effectiveDimensionality: this.effectiveDimensionality(entropy),\r\n      informationDensity: this.informationDensity(entropy, dimensions),\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Calculate mean of vector components\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number} Mean value\r\n   */\r\n  mean(vector) {\r\n    return vector.reduce((sum, val) => sum + val, 0) / vector.length\r\n  },\r\n\r\n  /**\r\n   * Calculate variance of vector components\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} mean - Pre-calculated mean (optional)\r\n   * @returns {number} Variance\r\n   */\r\n  variance(vector, mean = null) {\r\n    const m = mean !== null ? mean : this.mean(vector)\r\n    return vector.reduce((sum, val) => sum + Math.pow(val - m, 2), 0) / vector.length\r\n  },\r\n\r\n  /**\r\n   * Calculate sparsity of a vector\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} [threshold=1e-10] - Threshold for considering a value as zero\r\n   * @returns {number} Sparsity (0 to 1)\r\n   */\r\n  sparsity(vector, threshold = 1e-10) {\r\n    if (!vectorValidation.isValid(vector) || vector.length === 0) return 0\r\n    const zeroCount = vector.filter(val => Math.abs(val) < threshold).length\r\n    return zeroCount / vector.length\r\n  },\r\n\r\n  /**\r\n   * Calculate Shannon entropy of a vector's component distribution\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {number} Shannon entropy\r\n   */\r\n  entropy(vector) {\r\n    if (!vectorValidation.isValid(vector) || vector.length === 0) return 0\r\n\r\n    const squared = vector.map(v => v * v)\r\n    const sumSquared = squared.reduce((s, v) => s + v, 0)\r\n\r\n    if (sumSquared === 0) return 0\r\n\r\n    const probabilities = squared.map(v => v / sumSquared)\r\n\r\n    return -probabilities.reduce((s, p) => {\r\n      return p > 0 ? s + p * Math.log2(p) : s\r\n    }, 0)\r\n  },\r\n\r\n  /**\r\n   * Calculate component insights for a vector\r\n   * @param {number[]} vector - Input vector\r\n   * @returns {object} Component insights\r\n   */\r\n  componentInsights(vector) {\r\n    if (!vectorValidation.isValid(vector)) {\r\n      return {\r\n        positiveCount: 0,\r\n        negativeCount: 0,\r\n        zeroCount: 0,\r\n        positiveRatio: 0,\r\n        negativeRatio: 0,\r\n      }\r\n    }\r\n    const len = vector.length\r\n    if (len === 0) return { positiveCount: 0, negativeCount: 0, zeroCount: 0, positiveRatio: 0, negativeRatio: 0 }\r\n\r\n    let positiveCount = 0\r\n    let negativeCount = 0\r\n    let zeroCount = 0\r\n\r\n    for (const v of vector) {\r\n      if (v > 0) positiveCount++\r\n      else if (v < 0) negativeCount++\r\n      else zeroCount++\r\n    }\r\n\r\n    return {\r\n      positiveCount,\r\n      negativeCount,\r\n      zeroCount,\r\n      positiveRatio: positiveCount / len,\r\n      negativeRatio: negativeCount / len,\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Calculate effective dimensionality of a vector\r\n   * @param {number} entropy - Pre-calculated Shannon entropy\r\n   * @returns {number} Effective dimensionality\r\n   */\r\n  effectiveDimensionality(entropy) {\r\n    return Math.pow(2, entropy)\r\n  },\r\n\r\n  /**\r\n   * Calculate information density of a vector\r\n   * @param {number} entropy - Pre-calculated Shannon entropy\r\n   * @param {number} dimensions - The number of dimensions in the vector\r\n   * @returns {number} Information density\r\n   */\r\n  informationDensity(entropy, dimensions) {\r\n    if (dimensions <= 1) return 1\r\n    // We use log2(dimensions) because entropy is in base 2.\r\n    // This gives a normalized value between 0 and 1.\r\n    const maxEntropy = Math.log2(dimensions)\r\n    if (maxEntropy === 0) return 1 // if dimensions is 1, entropy is 0, it's fully \"dense\" for its dimension.\r\n    return entropy / maxEntropy\r\n  },\r\n\r\n  /**\r\n   * Perform k-means clustering on a set of vectors\r\n   * @param {Array<number[]>} vectors - Array of vectors\r\n   * @param {number} k - Number of clusters\r\n   * @param {number} maxIterations - Max iterations to prevent infinite loops\r\n   * @returns {Object} Clustered data\r\n   */\r\n  kmeans(vectors, k, maxIterations = 100) {\r\n    if (vectors.length < k) {\r\n      throw new Error('Number of vectors cannot be less than k.')\r\n    }\r\n\r\n    // 1. Initialize centroids randomly\r\n    let centroids = vectors.slice(0, k).map(v => v.slice())\r\n\r\n    let assignments = []\r\n    let iterations = 0\r\n\r\n    while (iterations < maxIterations) {\r\n      // 2. Assign each vector to the closest centroid\r\n      const newAssignments = vectors.map(vector => {\r\n        let minDistance = Infinity\r\n        let closestCentroidIndex = 0\r\n        centroids.forEach((centroid, index) => {\r\n          const distance = vectorOperations.euclideanDistance(vector, centroid)\r\n          if (distance < minDistance) {\r\n            minDistance = distance\r\n            closestCentroidIndex = index\r\n          }\r\n        })\r\n        return closestCentroidIndex\r\n      })\r\n\r\n      // Check for convergence\r\n      if (JSON.stringify(assignments) === JSON.stringify(newAssignments)) {\r\n        break\r\n      }\r\n      assignments = newAssignments\r\n\r\n      // 3. Recalculate centroids\r\n      const clusters = Array.from({ length: k }, () => [])\r\n      vectors.forEach((vector, i) => {\r\n        clusters[assignments[i]].push(vector)\r\n      })\r\n\r\n      centroids = clusters.map(cluster => {\r\n        if (cluster.length === 0) {\r\n          // Re-initialize empty clusters to a random vector\r\n          return vectors[Math.floor(Math.random() * vectors.length)].slice()\r\n        }\r\n        const meanVector = Array(vectors[0].length).fill(0)\r\n        cluster.forEach(vector => {\r\n          for (let i = 0; i < vector.length; i++) {\r\n            meanVector[i] += vector[i]\r\n          }\r\n        })\r\n        return meanVector.map(val => val / cluster.length)\r\n      })\r\n\r\n      iterations++\r\n    }\r\n\r\n    const clusters = Array.from({ length: k }, () => [])\r\n      vectors.forEach((vector, i) => {\r\n        clusters[assignments[i]].push(vector)\r\n      })\r\n\r\n    return {\r\n      centroids,\r\n      assignments,\r\n      clusters\r\n    }\r\n  }\r\n}\r\n\r\n// Vector Conversion Utilities\r\nexport const vectorConversion = {\r\n  /**\r\n   * Convert vector to string representation\r\n   * @param {number[]} vector - Input vector\r\n   * @param {number} precision - Decimal precision\r\n   * @returns {string} String representation\r\n   */\r\n  toString(vector, precision = 3) {\r\n    const formatted = vector.map(val => val.toFixed(precision))\r\n    return `[${formatted.join(', ')}]`\r\n  },\r\n\r\n  /**\r\n   * Parse vector from string\r\n   * @param {string} str - String representation\r\n   * @returns {number[]} Parsed vector\r\n   */\r\n  fromString(str) {\r\n    try {\r\n      // Remove brackets and split by comma\r\n      const cleaned = str.replace(/[\\[\\]]/g, '').trim()\r\n      if (!cleaned) return []\r\n      \r\n      return cleaned.split(',').map(val => {\r\n        const num = parseFloat(val.trim())\r\n        if (isNaN(num)) throw new Error(`Invalid number: ${val}`)\r\n        return num\r\n      })\r\n    } catch (error) {\r\n      throw new Error(`Failed to parse vector: ${error.message}`)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert vector to CSV row\r\n   * @param {number[]} vector - Input vector\r\n   * @param {string} separator - CSV separator\r\n   * @returns {string} CSV row\r\n   */\r\n  toCSV(vector, separator = ',') {\r\n    return vector.join(separator)\r\n  },\r\n\r\n  /**\r\n   * Parse vector from CSV row\r\n   * @param {string} csvRow - CSV row string\r\n   * @param {string} separator - CSV separator\r\n   * @returns {number[]} Parsed vector\r\n   */\r\n  fromCSV(csvRow, separator = ',') {\r\n    return csvRow.split(separator).map(val => {\r\n      const num = parseFloat(val.trim())\r\n      if (isNaN(num)) throw new Error(`Invalid number: ${val}`)\r\n      return num\r\n    })\r\n  }\r\n} ","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport { useConfigStore } from './configStore'\r\nimport { vectorOperations } from '../utils/vectorUtils'\r\n\r\nexport const useVectorStore = defineStore('vector', () => {\r\n  // State\r\n  const vectors = ref([])\r\n  const selectedVectorIds = ref(new Set());\r\n  const inputVector = ref(null)\r\n  const forceType = ref('resonance')\r\n  const activationFunction = ref('sigmoid')\r\n  const learningRate = ref(0.01)\r\n\r\n  // Getters\r\n  const selectedVectors = computed(() => {\r\n    return vectors.value.filter(v => selectedVectorIds.value.has(v.id))\r\n  })\r\n\r\n  const selectedVector = computed(() => {\r\n    return selectedVectors.value.length > 0 ? selectedVectors.value[0] : null\r\n  })\r\n\r\n  const vectorCount = computed(() => vectors.value.length)\r\n\r\n  const averageMagnitude = computed(() => {\r\n    if (!vectors.value.length) return 0;\r\n    const sum = vectors.value.reduce((acc, v) => {\r\n        const magnitude = Math.sqrt(v.components.reduce((sum, c) => sum + c*c, 0));\r\n        return acc + (magnitude || 0);\r\n    }, 0);\r\n    return sum / vectors.value.length;\r\n  });\r\n\r\n  const availableForceTypes = computed(() => ['resonance', 'gravity', 'repulsion'])\r\n\r\n  const availableActivationFunctions = computed(() => [\r\n    'sigmoid', 'tanh', 'relu', 'leaky_relu', 'softplus', 'swish', 'softmax', 'softermax', 'soft_sigmoid'\r\n  ])\r\n\r\n  const maxSimilarity = computed(() => {\r\n    if (vectors.value.length < 2) return 0\r\n    let max = 0\r\n    for (let i = 0; i < vectors.value.length; i++) {\r\n      for (let j = i + 1; j < vectors.value.length; j++) {\r\n        const sim = vectorOperations.cosineSimilarity(\r\n          vectors.value[i].components,\r\n          vectors.value[j].components\r\n        )\r\n        if (sim > max) max = sim\r\n      }\r\n    }\r\n    return max\r\n  })\r\n\r\n  // Actions\r\n  function generateVectors() {\r\n    const configStore = useConfigStore()\r\n    const newVectors = []\r\n    const margin = 80\r\n\r\n    for (let i = 0; i < configStore.numVectors; i++) {\r\n      const vector = {\r\n        id: i,\r\n        components: [],\r\n        x: Math.random() * (configStore.width - 2 * margin) + margin,\r\n        y: Math.random() * (configStore.height - 2 * margin) + margin,\r\n      }\r\n\r\n      for (let d = 0; d < configStore.dimensions; d++) {\r\n        vector.components.push((Math.random() - 0.5) * 2)\r\n      }\r\n      newVectors.push(vector)\r\n    }\r\n    vectors.value = newVectors\r\n    selectedVectorIds.value.clear();\r\n    inputVector.value = null\r\n  }\r\n\r\n  function selectVector(vectorId, isMultiSelect = false) {\r\n    if (!isMultiSelect) {\r\n      if (selectedVectorIds.value.has(vectorId) && selectedVectorIds.value.size === 1) {\r\n        selectedVectorIds.value.clear();\r\n      } else {\r\n        selectedVectorIds.value.clear();\r\n        selectedVectorIds.value.add(vectorId);\r\n      }\r\n    } else {\r\n      if (selectedVectorIds.value.has(vectorId)) {\r\n        selectedVectorIds.value.delete(vectorId);\r\n      } else {\r\n        selectedVectorIds.value.add(vectorId);\r\n      }\r\n    }\r\n  }\r\n\r\n  function addInputVector() {\r\n    const configStore = useConfigStore()\r\n    const newIV = {\r\n      id: 'input',\r\n      components: [],\r\n      x: Math.random() * (configStore.width - 100) + 50,\r\n      y: Math.random() * (configStore.height - 100) + 50,\r\n      isInput: true,\r\n    }\r\n    for (let d = 0; d < configStore.dimensions; d++) {\r\n      newIV.components.push((Math.random() - 0.5) * 2)\r\n    }\r\n    inputVector.value = newIV\r\n  }\r\n\r\n  function removeInputVector() {\r\n    inputVector.value = null\r\n  }\r\n\r\n  function randomizeInputVector() {\r\n    if (!inputVector.value) return\r\n    for (let i = 0; i < inputVector.value.components.length; i++) {\r\n      inputVector.value.components[i] = (Math.random() - 0.5) * 2\r\n    }\r\n  }\r\n\r\n  function updateInputVectorComponent(index, value) {\r\n    if (!inputVector.value) return\r\n    inputVector.value.components[index] = value\r\n  }\r\n\r\n  function removeVector(vectorId) {\r\n    vectors.value = vectors.value.filter(v => v.id !== vectorId)\r\n    selectedVectorIds.value.delete(vectorId);\r\n  }\r\n\r\n  function addCustomVector(components) {\r\n    const configStore = useConfigStore()\r\n    const margin = 80\r\n    const vector = {\r\n      id: vectors.value.length > 0 ? Math.max(...vectors.value.map(v => v.id)) + 1 : 0,\r\n      components: components,\r\n      x: Math.random() * (configStore.width - 2 * margin) + margin,\r\n      y: Math.random() * (configStore.height - 2 * margin) + margin,\r\n      isCustom: true\r\n    }\r\n    vectors.value.push(vector)\r\n    configStore.updateConfig('numVectors', vectors.value.length)\r\n  }\r\n\r\n  function setVectorCustomColor(vectorId, color) {\r\n    const vector = vectors.value.find(v => v.id === vectorId)\r\n    if (vector) {\r\n      vector.customColor = color\r\n    }\r\n  }\r\n\r\n  function setVectorScale(vectorId, scale) {\r\n    const vector = vectors.value.find(v => v.id === vectorId)\r\n    if (vector) {\r\n      vector.scale = scale\r\n    }\r\n  }\r\n\r\n  function setForceType(type) {\r\n    forceType.value = type\r\n  }\r\n\r\n  function setActivationFunction(func) {\r\n    activationFunction.value = func\r\n  }\r\n\r\n  function setLearningRate(rate) {\r\n    learningRate.value = rate\r\n  }\r\n\r\n  return {\r\n    // State\r\n    vectors,\r\n    selectedVectorIds,\r\n    inputVector,\r\n    forceType,\r\n    activationFunction,\r\n    learningRate,\r\n    // Getters\r\n    selectedVectors,\r\n    selectedVector,\r\n    vectorCount,\r\n    averageMagnitude,\r\n    availableForceTypes,\r\n    availableActivationFunctions,\r\n    maxSimilarity,\r\n    // Actions\r\n    generateVectors,\r\n    selectVector,\r\n    addInputVector,\r\n    removeInputVector,\r\n    randomizeInputVector,\r\n    updateInputVectorComponent,\r\n    removeVector,\r\n    addCustomVector,\r\n    setVectorCustomColor,\r\n    setVectorScale,\r\n    setForceType,\r\n    setActivationFunction,\r\n    setLearningRate\r\n  }\r\n}) ","import { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport const useUIStore = defineStore('ui', () => {\r\n  // State\r\n  const activeModal = ref(null)\r\n  const errorMessage = ref('')\r\n  const successMessage = ref('')\r\n  const errorDetails = ref(null)\r\n  const isLoading = ref(false)\r\n  const sidebarCollapsed = ref(false)\r\n  const activeTab = ref('individual')\r\n  const analysisViewMode = ref('overview') // 'overview' or 'detailed'\r\n  const neuralModeActive = ref(false)\r\n  const forcesVisible = ref(false)\r\n  \r\n  // Analysis state\r\n  const selectedAnalysisType = ref('pca')\r\n  const analysisResults = ref(null)\r\n  const isAnalyzing = ref(false)\r\n  \r\n  // Tutorial state\r\n  const tutorialStep = ref(0)\r\n  const tutorialActive = ref(false)\r\n  \r\n  // Keyboard shortcuts state\r\n  const shortcutsVisible = ref(false)\r\n\r\n  // Getters\r\n  const hasError = computed(() => !!errorMessage.value)\r\n  const hasSuccess = computed(() => !!successMessage.value)\r\n  const isModalOpen = computed(() => !!activeModal.value)\r\n\r\n  // Actions\r\n  const showModal = (modalName) => {\r\n    activeModal.value = modalName\r\n  }\r\n\r\n  const hideModal = () => {\r\n    activeModal.value = null\r\n  }\r\n\r\n  const showError = (message, actions = []) => {\r\n    errorMessage.value = message\r\n    errorDetails.value = { message, actions }\r\n    successMessage.value = ''\r\n  }\r\n\r\n  const hideError = () => {\r\n    errorMessage.value = ''\r\n    errorDetails.value = null\r\n  }\r\n\r\n  const showSuccess = (message, duration = 3000) => {\r\n    successMessage.value = message\r\n    if (duration > 0) {\r\n      setTimeout(() => {\r\n        successMessage.value = ''\r\n      }, duration)\r\n    }\r\n  }\r\n\r\n  const hideSuccess = () => {\r\n    successMessage.value = ''\r\n  }\r\n\r\n  const setLoading = (loading) => {\r\n    isLoading.value = loading\r\n  }\r\n\r\n  const toggleSidebar = () => {\r\n    sidebarCollapsed.value = !sidebarCollapsed.value\r\n  }\r\n\r\n  const setActiveTab = (tabName) => {\r\n    activeTab.value = tabName\r\n  }\r\n\r\n  const setAnalysisViewMode = (mode) => {\r\n    analysisViewMode.value = mode\r\n  }\r\n\r\n  const setNeuralModeActive = (active) => {\r\n    neuralModeActive.value = active\r\n  }\r\n\r\n  const setForcesVisible = (visible) => {\r\n    forcesVisible.value = visible\r\n  }\r\n\r\n  // Analysis methods\r\n  const setAnalysisType = (type) => {\r\n    selectedAnalysisType.value = type\r\n  }\r\n\r\n  const setAnalysisResults = (results) => {\r\n    analysisResults.value = results\r\n  }\r\n\r\n  const setAnalyzing = (analyzing) => {\r\n    isAnalyzing.value = analyzing\r\n  }\r\n\r\n  const runAnalysis = async (analysisFunction) => {\r\n    setAnalyzing(true)\r\n    try {\r\n      const results = await analysisFunction()\r\n      setAnalysisResults(results)\r\n      showSuccess('Analysis completed successfully!')\r\n    } catch (error) {\r\n      showError(`Analysis failed: ${error.message}`)\r\n    } finally {\r\n      setAnalyzing(false)\r\n    }\r\n  }\r\n\r\n  // Tutorial methods\r\n  const startTutorial = () => {\r\n    tutorialActive.value = true\r\n    tutorialStep.value = 0\r\n  }\r\n\r\n  const nextTutorialStep = () => {\r\n    tutorialStep.value++\r\n  }\r\n\r\n  const previousTutorialStep = () => {\r\n    if (tutorialStep.value > 0) {\r\n      tutorialStep.value--\r\n    }\r\n  }\r\n\r\n  const endTutorial = () => {\r\n    tutorialActive.value = false\r\n    tutorialStep.value = 0\r\n  }\r\n\r\n  const toggleShortcuts = () => {\r\n    shortcutsVisible.value = !shortcutsVisible.value\r\n    if (shortcutsVisible.value) {\r\n      showModal('shortcuts')\r\n    } else {\r\n      hideModal()\r\n    }\r\n  }\r\n\r\n  // Modal management helpers\r\n  const showTutorialModal = () => showModal('tutorial')\r\n  const showAnalysisModal = () => showModal('analysis')\r\n  const showUploadHelpModal = () => showModal('uploadHelp')\r\n  const showActivationHelpModal = () => showModal('activationHelp')\r\n  const showAddVectorModal = () => showModal('addVector')\r\n  const showExportModal = () => showModal('export')\r\n  const showShortcutsModal = (shortcuts) => {\r\n    shortcutsData.value = shortcuts\r\n    showModal('shortcuts')\r\n  }\r\n  const showPresetsModal = () => showModal('presets')\r\n\r\n  // Additional UI helpers\r\n  const closeAllModals = () => {\r\n    hideModal()\r\n    hideError()\r\n    hideSuccess()\r\n  }\r\n\r\n  const showInfo = (message, duration = 3000) => {\r\n    // Use success for info messages with different styling\r\n    showSuccess(message, duration)\r\n  }\r\n\r\n  // Shortcuts data\r\n  const shortcutsData = ref([])\r\n\r\n  return {\r\n    // State\r\n    activeModal,\r\n    errorMessage,\r\n    successMessage,\r\n    errorDetails,\r\n    isLoading,\r\n    sidebarCollapsed,\r\n    activeTab,\r\n    analysisViewMode,\r\n    neuralModeActive,\r\n    forcesVisible,\r\n    selectedAnalysisType,\r\n    analysisResults,\r\n    isAnalyzing,\r\n    tutorialStep,\r\n    tutorialActive,\r\n    shortcutsVisible,\r\n    shortcutsData,\r\n    \r\n    // Getters\r\n    hasError,\r\n    hasSuccess,\r\n    isModalOpen,\r\n    \r\n    // Actions\r\n    showModal,\r\n    hideModal,\r\n    showError,\r\n    hideError,\r\n    showSuccess,\r\n    hideSuccess,\r\n    setLoading,\r\n    toggleSidebar,\r\n    setActiveTab,\r\n    setAnalysisViewMode,\r\n    setNeuralModeActive,\r\n    setForcesVisible,\r\n    setAnalysisType,\r\n    setAnalysisResults,\r\n    setAnalyzing,\r\n    runAnalysis,\r\n    startTutorial,\r\n    nextTutorialStep,\r\n    previousTutorialStep,\r\n    endTutorial,\r\n    toggleShortcuts,\r\n    \r\n    // Modal helpers\r\n    showTutorialModal,\r\n    showAnalysisModal,\r\n    showUploadHelpModal,\r\n    showActivationHelpModal,\r\n    showAddVectorModal,\r\n    showExportModal,\r\n    showShortcutsModal,\r\n    showPresetsModal,\r\n    closeAllModals,\r\n    showInfo\r\n  }\r\n}) ","import { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useVectorStore } from '@/stores/vectorStore'\r\nimport { useUIStore } from '@/stores/uiStore'\r\n\r\nexport function useKeyboardShortcuts() {\r\n  const vectorStore = useVectorStore()\r\n  const uiStore = useUIStore()\r\n  \r\n  const isEnabled = ref(true)\r\n  const shortcuts = ref(new Map())\r\n  \r\n  // Default keyboard shortcuts\r\n  const defaultShortcuts = [\r\n    {\r\n      key: 'g',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Generate new vectors',\r\n      action: () => vectorStore.generateVectors()\r\n    },\r\n    {\r\n      key: 'a',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Add custom vector',\r\n      action: () => uiStore.showAddVectorModal()\r\n    },\r\n    {\r\n      key: 'n',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle neural mode',\r\n      action: () => vectorStore.toggleNeuralMode()\r\n    },\r\n    {\r\n      key: 'f',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle forces visualization',\r\n      action: () => vectorStore.toggleForces()\r\n    },\r\n    {\r\n      key: 'r',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Run analysis',\r\n      action: () => uiStore.showAnalysisModal()\r\n    },\r\n    {\r\n      key: 'h',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Show help',\r\n      action: () => uiStore.showTutorialModal()\r\n    },\r\n    {\r\n      key: 'Escape',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Close modals/cancel',\r\n      action: () => uiStore.closeAllModals()\r\n    },\r\n    {\r\n      key: 's',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Save/Export data',\r\n      action: () => exportData()\r\n    },\r\n    {\r\n      key: 'o',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Open/Import data',\r\n      action: () => triggerFileInput()\r\n    },\r\n    {\r\n      key: 'z',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Undo last action',\r\n      action: () => vectorStore.undo()\r\n    },\r\n    {\r\n      key: 'y',\r\n      ctrl: true,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Redo last action',\r\n      action: () => vectorStore.redo()\r\n    },\r\n    {\r\n      key: 'Delete',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Delete selected vector',\r\n      action: () => deleteSelectedVector()\r\n    },\r\n    {\r\n      key: 'Enter',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Confirm action',\r\n      action: () => confirmCurrentAction()\r\n    },\r\n    {\r\n      key: '1',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to vectors tab',\r\n      action: () => uiStore.setActiveTab('vectors')\r\n    },\r\n    {\r\n      key: '2',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to analysis tab',\r\n      action: () => uiStore.setActiveTab('analysis')\r\n    },\r\n    {\r\n      key: '3',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to visualization tab',\r\n      action: () => uiStore.setActiveTab('visualization')\r\n    },\r\n    {\r\n      key: '4',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Switch to neural tab',\r\n      action: () => uiStore.setActiveTab('neural')\r\n    },\r\n    {\r\n      key: 'ArrowUp',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Select previous vector',\r\n      action: () => selectPreviousVector()\r\n    },\r\n    {\r\n      key: 'ArrowDown',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Select next vector',\r\n      action: () => selectNextVector()\r\n    },\r\n    {\r\n      key: 'ArrowLeft',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Previous tab',\r\n      action: () => navigateTab(-1)\r\n    },\r\n    {\r\n      key: 'ArrowRight',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Next tab',\r\n      action: () => navigateTab(1)\r\n    },\r\n    {\r\n      key: ' ',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle selection',\r\n      action: () => toggleVectorSelection()\r\n    },\r\n    {\r\n      key: 'F11',\r\n      ctrl: false,\r\n      alt: false,\r\n      shift: false,\r\n      description: 'Toggle fullscreen',\r\n      action: () => toggleFullscreen()\r\n    }\r\n  ]\r\n  \r\n  // Initialize shortcuts\r\n  const initializeShortcuts = () => {\r\n    defaultShortcuts.forEach(shortcut => {\r\n      const key = createShortcutKey(shortcut)\r\n      shortcuts.value.set(key, shortcut)\r\n    })\r\n  }\r\n  \r\n  // Create unique key for shortcut mapping\r\n  const createShortcutKey = (shortcut) => {\r\n    const modifiers = []\r\n    if (shortcut.ctrl) modifiers.push('ctrl')\r\n    if (shortcut.alt) modifiers.push('alt')\r\n    if (shortcut.shift) modifiers.push('shift')\r\n    return [...modifiers, shortcut.key.toLowerCase()].join('+')\r\n  }\r\n  \r\n  // Handle keyboard events\r\n  const handleKeyDown = (event) => {\r\n    if (!isEnabled.value) return\r\n    \r\n    // Don't trigger shortcuts when typing in inputs\r\n    if (isInputElement(event.target)) return\r\n    \r\n    const key = createEventKey(event)\r\n    const shortcut = shortcuts.value.get(key)\r\n    \r\n    if (shortcut) {\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n      \r\n      try {\r\n        shortcut.action()\r\n        uiStore.showInfo(`Keyboard shortcut: ${shortcut.description}`)\r\n      } catch (error) {\r\n        console.error('Shortcut execution error:', error)\r\n        uiStore.showError('Failed to execute keyboard shortcut')\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Create event key from keyboard event\r\n  const createEventKey = (event) => {\r\n    const modifiers = []\r\n    if (event.ctrlKey || event.metaKey) modifiers.push('ctrl')\r\n    if (event.altKey) modifiers.push('alt')\r\n    if (event.shiftKey) modifiers.push('shift')\r\n    return [...modifiers, event.key.toLowerCase()].join('+')\r\n  }\r\n  \r\n  // Check if element is an input where we shouldn't trigger shortcuts\r\n  const isInputElement = (element) => {\r\n    const inputElements = ['input', 'textarea', 'select']\r\n    const contentEditable = element.contentEditable === 'true'\r\n    return inputElements.includes(element.tagName.toLowerCase()) || contentEditable\r\n  }\r\n  \r\n  // Shortcut action implementations\r\n  const exportData = () => {\r\n    try {\r\n      const data = {\r\n        vectors: vectorStore.vectors,\r\n        config: {\r\n          dimensions: vectorStore.dimensions,\r\n          forceType: vectorStore.forceType,\r\n          activationFunction: vectorStore.activationFunction\r\n        },\r\n        timestamp: new Date().toISOString()\r\n      }\r\n      \r\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\r\n      const url = URL.createObjectURL(blob)\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.download = `vectoverse-export-${Date.now()}.json`\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      URL.revokeObjectURL(url)\r\n    } catch (error) {\r\n      console.error('Export error:', error)\r\n      uiStore.showError('Failed to export data')\r\n    }\r\n  }\r\n  \r\n  const triggerFileInput = () => {\r\n    const fileInput = document.getElementById('vector-file')\r\n    if (fileInput) {\r\n      fileInput.click()\r\n    }\r\n  }\r\n  \r\n  const deleteSelectedVector = () => {\r\n    if (vectorStore.selectedVectorId) {\r\n      vectorStore.removeVector(vectorStore.selectedVectorId)\r\n      uiStore.showSuccess('Selected vector deleted')\r\n    }\r\n  }\r\n  \r\n  const confirmCurrentAction = () => {\r\n    // Find active modal and trigger its confirm button\r\n    const activeModal = document.querySelector('.modal.active')\r\n    if (activeModal) {\r\n      const confirmButton = activeModal.querySelector('.btn-primary, .confirm-btn')\r\n      if (confirmButton) {\r\n        confirmButton.click()\r\n      }\r\n    }\r\n  }\r\n  \r\n  const selectPreviousVector = () => {\r\n    const vectors = vectorStore.vectors\r\n    if (vectors.length === 0) return\r\n    \r\n    const currentIndex = vectors.findIndex(v => v.id === vectorStore.selectedVectorId)\r\n    const previousIndex = currentIndex > 0 ? currentIndex - 1 : vectors.length - 1\r\n    vectorStore.selectVector(vectors[previousIndex].id)\r\n  }\r\n  \r\n  const selectNextVector = () => {\r\n    const vectors = vectorStore.vectors\r\n    if (vectors.length === 0) return\r\n    \r\n    const currentIndex = vectors.findIndex(v => v.id === vectorStore.selectedVectorId)\r\n    const nextIndex = currentIndex < vectors.length - 1 ? currentIndex + 1 : 0\r\n    vectorStore.selectVector(vectors[nextIndex].id)\r\n  }\r\n  \r\n  const navigateTab = (direction) => {\r\n    const tabs = ['vectors', 'analysis', 'visualization', 'neural']\r\n    const currentIndex = tabs.indexOf(uiStore.activeTab)\r\n    const newIndex = (currentIndex + direction + tabs.length) % tabs.length\r\n    uiStore.setActiveTab(tabs[newIndex])\r\n  }\r\n  \r\n  const toggleVectorSelection = () => {\r\n    if (vectorStore.selectedVectorId) {\r\n      vectorStore.selectVector(null)\r\n    } else if (vectorStore.vectors.length > 0) {\r\n      vectorStore.selectVector(vectorStore.vectors[0].id)\r\n    }\r\n  }\r\n  \r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      document.documentElement.requestFullscreen()\r\n    } else {\r\n      document.exitFullscreen()\r\n    }\r\n  }\r\n  \r\n  // Add custom shortcut\r\n  const addShortcut = (key, ctrl = false, alt = false, shift = false, description, action) => {\r\n    const shortcut = { key, ctrl, alt, shift, description, action }\r\n    const shortcutKey = createShortcutKey(shortcut)\r\n    shortcuts.value.set(shortcutKey, shortcut)\r\n  }\r\n  \r\n  // Remove shortcut\r\n  const removeShortcut = (key, ctrl = false, alt = false, shift = false) => {\r\n    const shortcutKey = createShortcutKey({ key, ctrl, alt, shift })\r\n    shortcuts.value.delete(shortcutKey)\r\n  }\r\n  \r\n  // Enable/disable shortcuts\r\n  const enableShortcuts = () => {\r\n    isEnabled.value = true\r\n  }\r\n  \r\n  const disableShortcuts = () => {\r\n    isEnabled.value = false\r\n  }\r\n  \r\n  // Get all shortcuts for help display\r\n  const getAllShortcuts = () => {\r\n    return Array.from(shortcuts.value.values()).map(shortcut => ({\r\n      ...shortcut,\r\n      keyDisplay: formatShortcutDisplay(shortcut)\r\n    }))\r\n  }\r\n  \r\n  // Format shortcut for display\r\n  const formatShortcutDisplay = (shortcut) => {\r\n    const parts = []\r\n    if (shortcut.ctrl) parts.push('Ctrl')\r\n    if (shortcut.alt) parts.push('Alt')\r\n    if (shortcut.shift) parts.push('Shift')\r\n    parts.push(shortcut.key)\r\n    return parts.join(' + ')\r\n  }\r\n  \r\n  // Show shortcuts help\r\n  const showShortcutsHelp = () => {\r\n    const shortcuts = getAllShortcuts()\r\n    uiStore.showShortcutsModal(shortcuts)\r\n  }\r\n  \r\n  // Lifecycle\r\n  onMounted(() => {\r\n    initializeShortcuts()\r\n    document.addEventListener('keydown', handleKeyDown)\r\n  })\r\n  \r\n  onUnmounted(() => {\r\n    document.removeEventListener('keydown', handleKeyDown)\r\n  })\r\n  \r\n  return {\r\n    isEnabled,\r\n    addShortcut,\r\n    removeShortcut,\r\n    enableShortcuts,\r\n    disableShortcuts,\r\n    getAllShortcuts,\r\n    showShortcutsHelp\r\n  }\r\n} ","import { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useTutorialManager() {\r\n  const uiStore = useUIStore()\r\n  \r\n  // Tutorial state\r\n  const isActive = ref(false)\r\n  const currentStep = ref(0)\r\n  const announcements = ref([])\r\n  \r\n  // Tutorial steps\r\n  const tutorialSteps = ref([\r\n    {\r\n      title: \"Welcome to the Vectoverse! ðŸŒŒ\",\r\n      content: \"Welcome to an interactive environment for visualizing n-dimensional vectors as 'information atoms'. Let's explore the atomic-inspired world of vector mathematics!\",\r\n      target: null,\r\n      action: null,\r\n      highlight: false\r\n    },\r\n    {\r\n      title: \"Understanding Vector Atoms âš›ï¸\", \r\n      content: \"Each glowing sphere represents a vector in n-dimensional space. The size represents magnitude (like atomic mass) and the pulsing represents energy states.\",\r\n      target: \"#main-viz\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Vector Components ðŸ”¢\",\r\n      content: \"Click on any vector to see its components and properties. Each component is like an electron with positive or negative charge.\",\r\n      target: \".vector-atom\",\r\n      action: \"clickVector\",\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Tab Navigation ðŸ“‹\",\r\n      content: \"Use the tab system to explore different views: Vectors, Analysis, Visualization, and Neural Network modes.\",\r\n      target: \".tab-container\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Generating New Vectors ðŸŽ²\",\r\n      content: \"Use the floating action button or controls to create new random vectors. Try changing dimensions and vector count!\",\r\n      target: \".floating-action-button\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"3D Visualization ðŸŒ\",\r\n      content: \"Switch to 3D mode for immersive vector exploration with camera controls and interactive features.\",\r\n      target: \".three-js-visualization\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Vector Operations ðŸ› ï¸\",\r\n      content: \"Perform mathematical operations like addition, subtraction, dot product, and normalization on your vectors.\",\r\n      target: \".vectors-panel\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Analysis Tools ðŸ”¬\",\r\n      content: \"Run advanced analysis including PCA, K-means clustering, and similarity analysis to discover patterns.\",\r\n      target: \".analysis-panel\",\r\n      action: null,\r\n      highlight: true\r\n    },\r\n    {\r\n      title: \"Keyboard Shortcuts âŒ¨ï¸\",\r\n      content: \"Press ? to see all keyboard shortcuts. Navigate efficiently with Ctrl+G (generate), Ctrl+E (export), and more!\",\r\n      target: null,\r\n      action: \"showShortcuts\",\r\n      highlight: false\r\n    },\r\n    {\r\n      title: \"Export Your Data ðŸ“\",\r\n      content: \"Export your vectors in multiple formats: JSON, CSV, Python, LaTeX, and more! Perfect for research and analysis.\",\r\n      target: null,\r\n      action: null,\r\n      highlight: false\r\n    },\r\n    {\r\n      title: \"You're Ready to Explore! ðŸš€\",\r\n      content: \"Congratulations! You now understand the basics of VectoVerse. Explore different dimensions, analyze patterns, and discover the hidden relationships in vector space!\",\r\n      target: null,\r\n      action: null,\r\n      highlight: false\r\n    }\r\n  ])\r\n\r\n  // Computed properties\r\n  const progress = computed(() => {\r\n    if (tutorialSteps.value.length === 0) return 0\r\n    return ((currentStep.value + 1) / tutorialSteps.value.length) * 100\r\n  })\r\n\r\n  const currentStepData = computed(() => {\r\n    return tutorialSteps.value[currentStep.value] || null\r\n  })\r\n\r\n  const isFirstStep = computed(() => currentStep.value === 0)\r\n  const isLastStep = computed(() => currentStep.value === tutorialSteps.value.length - 1)\r\n\r\n  // Methods\r\n  const startTutorial = () => {\r\n    isActive.value = true\r\n    currentStep.value = 0\r\n    uiStore.showTutorialModal()\r\n    trackEvent('tutorial_started')\r\n    announce('Tutorial started. Use arrow keys to navigate.')\r\n  }\r\n\r\n  const nextStep = () => {\r\n    if (currentStep.value < tutorialSteps.value.length - 1) {\r\n      currentStep.value++\r\n      performStepAction()\r\n      trackEvent('tutorial_step', { step: currentStep.value + 1 })\r\n    } else {\r\n      endTutorial()\r\n    }\r\n  }\r\n\r\n  const previousStep = () => {\r\n    if (currentStep.value > 0) {\r\n      currentStep.value--\r\n    }\r\n  }\r\n\r\n  const goToStep = (stepIndex) => {\r\n    if (stepIndex >= 0 && stepIndex < tutorialSteps.value.length) {\r\n      currentStep.value = stepIndex\r\n    }\r\n  }\r\n\r\n  const endTutorial = () => {\r\n    isActive.value = false\r\n    currentStep.value = 0\r\n    uiStore.hideModal()\r\n    clearHighlights()\r\n    \r\n    // Mark tutorial as completed\r\n    localStorage.setItem('vectoverse-tutorial-completed', 'true')\r\n    \r\n    trackEvent('tutorial_completed', {\r\n      completed_steps: currentStep.value + 1,\r\n      total_steps: tutorialSteps.value.length\r\n    })\r\n    \r\n    uiStore.showSuccess('Tutorial completed! Happy exploring! ðŸš€')\r\n  }\r\n\r\n  const performStepAction = () => {\r\n    const step = currentStepData.value\r\n    if (!step || !step.action) return\r\n\r\n    switch (step.action) {\r\n      case 'clickVector':\r\n        // Highlight the first vector if available\r\n        setTimeout(() => {\r\n          const firstVector = document.querySelector('.vector-atom')\r\n          if (firstVector) {\r\n            firstVector.focus()\r\n            highlightElement(firstVector)\r\n          }\r\n        }, 1000)\r\n        break\r\n        \r\n      case 'showShortcuts':\r\n        setTimeout(() => {\r\n          uiStore.toggleShortcuts()\r\n        }, 500)\r\n        break\r\n    }\r\n  }\r\n\r\n  const highlightElement = (selector) => {\r\n    clearHighlights()\r\n    \r\n    let element\r\n    if (typeof selector === 'string') {\r\n      element = document.querySelector(selector)\r\n    } else {\r\n      element = selector\r\n    }\r\n    \r\n    if (!element) return\r\n\r\n    element.classList.add('tutorial-highlight')\r\n    element.scrollIntoView({ \r\n      behavior: 'smooth', \r\n      block: 'center',\r\n      inline: 'center'\r\n    })\r\n\r\n    // Remove highlight after 3 seconds\r\n    setTimeout(() => {\r\n      element.classList.remove('tutorial-highlight')\r\n    }, 3000)\r\n  }\r\n\r\n  const clearHighlights = () => {\r\n    document.querySelectorAll('.tutorial-highlight').forEach(el => {\r\n      el.classList.remove('tutorial-highlight')\r\n    })\r\n  }\r\n\r\n  const trackEvent = (eventName, data = {}) => {\r\n    console.log(`Tutorial Event: ${eventName}`, data)\r\n    \r\n    // Could integrate with analytics services\r\n    if (window.gtag) {\r\n      window.gtag('event', eventName, {\r\n        custom_parameter: data\r\n      })\r\n    }\r\n  }\r\n\r\n  const announce = (message, priority = 'polite') => {\r\n    announcements.value.push({\r\n      message,\r\n      priority,\r\n      timestamp: new Date().toISOString()\r\n    })\r\n\r\n    // Limit announcements array size\r\n    if (announcements.value.length > 20) {\r\n      announcements.value = announcements.value.slice(-20)\r\n    }\r\n  }\r\n\r\n  const shouldShowTutorial = () => {\r\n    const hasSeenTutorial = localStorage.getItem('vectoverse-tutorial-completed')\r\n    const hasVisited = localStorage.getItem('vectoverse-visited')\r\n    return !hasSeenTutorial && !hasVisited\r\n  }\r\n\r\n  const autoStartIfNew = () => {\r\n    if (shouldShowTutorial()) {\r\n      setTimeout(() => {\r\n        startTutorial()\r\n        localStorage.setItem('vectoverse-visited', 'true')\r\n      }, 2000)\r\n    }\r\n  }\r\n\r\n  // Keyboard navigation\r\n  const handleKeydown = (event) => {\r\n    if (!isActive.value) return\r\n\r\n    switch (event.key) {\r\n      case 'ArrowRight':\r\n      case ' ':\r\n        event.preventDefault()\r\n        nextStep()\r\n        break\r\n      case 'ArrowLeft':\r\n        event.preventDefault()\r\n        previousStep()\r\n        break\r\n      case 'Escape':\r\n        event.preventDefault()\r\n        endTutorial()\r\n        break\r\n      case '1':\r\n      case '2':\r\n      case '3':\r\n      case '4':\r\n      case '5':\r\n      case '6':\r\n      case '7':\r\n      case '8':\r\n      case '9':\r\n        event.preventDefault()\r\n        const stepNum = parseInt(event.key) - 1\r\n        if (stepNum < tutorialSteps.value.length) {\r\n          goToStep(stepNum)\r\n        }\r\n        break\r\n    }\r\n  }\r\n\r\n  // Lifecycle\r\n  onMounted(() => {\r\n    document.addEventListener('keydown', handleKeydown)\r\n    \r\n    // Auto-start tutorial for new users\r\n    autoStartIfNew()\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    document.removeEventListener('keydown', handleKeydown)\r\n    clearHighlights()\r\n  })\r\n\r\n  return {\r\n    // State\r\n    isActive,\r\n    currentStep,\r\n    tutorialSteps,\r\n    announcements,\r\n    \r\n    // Computed\r\n    progress,\r\n    currentStepData,\r\n    isFirstStep,\r\n    isLastStep,\r\n    \r\n    // Methods\r\n    startTutorial,\r\n    nextStep,\r\n    previousStep,\r\n    goToStep,\r\n    endTutorial,\r\n    performStepAction,\r\n    highlightElement,\r\n    clearHighlights,\r\n    trackEvent,\r\n    announce,\r\n    shouldShowTutorial,\r\n    autoStartIfNew\r\n  }\r\n} ","import { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useAccessibility() {\r\n  const uiStore = useUIStore()\r\n  \r\n  // State\r\n  const announcements = ref([])\r\n  const highContrastMode = ref(false)\r\n  const liveRegion = ref(null)\r\n  const focusableElements = ref([])\r\n\r\n  // Create ARIA live region for screen reader announcements\r\n  const createAriaLiveRegion = () => {\r\n    if (liveRegion.value) return\r\n\r\n    const region = document.createElement('div')\r\n    region.id = 'vectoverse-announcements'\r\n    region.setAttribute('aria-live', 'polite')\r\n    region.setAttribute('aria-atomic', 'true')\r\n    region.className = 'sr-only'\r\n    region.style.cssText = `\r\n      position: absolute !important;\r\n      width: 1px !important;\r\n      height: 1px !important;\r\n      padding: 0 !important;\r\n      margin: -1px !important;\r\n      overflow: hidden !important;\r\n      clip: rect(0, 0, 0, 0) !important;\r\n      white-space: nowrap !important;\r\n      border: 0 !important;\r\n    `\r\n    \r\n    document.body.appendChild(region)\r\n    liveRegion.value = region\r\n  }\r\n\r\n  // Announce message to screen readers\r\n  const announce = (message, priority = 'polite') => {\r\n    if (!liveRegion.value) return\r\n\r\n    liveRegion.value.setAttribute('aria-live', priority)\r\n    liveRegion.value.textContent = message\r\n    \r\n    // Track announcement\r\n    announcements.value.push({\r\n      message,\r\n      priority,\r\n      timestamp: new Date().toISOString()\r\n    })\r\n    \r\n    // Limit announcements history\r\n    if (announcements.value.length > 50) {\r\n      announcements.value = announcements.value.slice(-50)\r\n    }\r\n    \r\n    // Clear after announcement to allow repeated messages\r\n    setTimeout(() => {\r\n      if (liveRegion.value) {\r\n        liveRegion.value.textContent = ''\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  // Keyboard shortcut handlers\r\n  const handleKeyboardShortcuts = (event) => {\r\n    // Skip if user is typing in an input\r\n    if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {\r\n      return\r\n    }\r\n\r\n    // Handle keyboard shortcuts\r\n    if (event.ctrlKey || event.metaKey) {\r\n      switch (event.key) {\r\n        case 'g':\r\n          event.preventDefault()\r\n          // Generate vectors action\r\n          const generateBtn = document.querySelector('[data-action=\"generate\"]')\r\n          if (generateBtn) {\r\n            generateBtn.click()\r\n            announce('Generated new vectors')\r\n          }\r\n          break\r\n        case 'r':\r\n          event.preventDefault()\r\n          // Reset visualization\r\n          const resetBtn = document.querySelector('[data-action=\"reset\"]')\r\n          if (resetBtn) {\r\n            resetBtn.click()\r\n            announce('Reset visualization')\r\n          }\r\n          break\r\n        case 'e':\r\n          event.preventDefault()\r\n          uiStore.showExportModal()\r\n          announce('Export options opened')\r\n          break\r\n        case 'a':\r\n          event.preventDefault()\r\n          uiStore.showAnalysisModal()\r\n          announce('Analysis modal opened')\r\n          break\r\n        case 'h':\r\n          event.preventDefault()\r\n          uiStore.showTutorialModal()\r\n          announce('Help modal opened')\r\n          break\r\n      }\r\n    } else {\r\n      switch (event.key) {\r\n        case '?':\r\n          event.preventDefault()\r\n          uiStore.toggleShortcuts()\r\n          announce('Keyboard shortcuts displayed')\r\n          break\r\n        case 'Escape':\r\n          uiStore.hideModal()\r\n          announce('Modal closed')\r\n          break\r\n        case 'Tab':\r\n          manageFocus(event)\r\n          break\r\n      }\r\n    }\r\n  }\r\n\r\n  // Focus management\r\n  const manageFocus = (event) => {\r\n    const focusedElement = event.target\r\n    \r\n    // Ensure vector focus is announced\r\n    if (focusedElement.classList.contains('vector-atom')) {\r\n      announceVectorFocus(focusedElement)\r\n    }\r\n    \r\n    // Ensure focused element is visible\r\n    if (focusedElement.scrollIntoView) {\r\n      focusedElement.scrollIntoView({ \r\n        behavior: 'smooth', \r\n        block: 'center',\r\n        inline: 'center'\r\n      })\r\n    }\r\n  }\r\n\r\n  // Announce vector focus for screen readers\r\n  const announceVectorFocus = (vectorElement) => {\r\n    const vectorId = vectorElement.getAttribute('data-id')\r\n    if (vectorId) {\r\n      const message = `Vector ${parseInt(vectorId) + 1} focused. Use Enter to select, arrow keys to navigate.`\r\n      announce(message)\r\n    }\r\n  }\r\n\r\n  // Focus trap for modals\r\n  const trapFocusInModal = (modal, event) => {\r\n    const focusableElements = modal.querySelectorAll(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    )\r\n    const firstElement = focusableElements[0]\r\n    const lastElement = focusableElements[focusableElements.length - 1]\r\n\r\n    if (event.shiftKey && event.target === firstElement) {\r\n      event.preventDefault()\r\n      lastElement?.focus()\r\n    } else if (!event.shiftKey && event.target === lastElement) {\r\n      event.preventDefault()\r\n      firstElement?.focus()\r\n    }\r\n  }\r\n\r\n  // Setup high contrast mode\r\n  const setupHighContrastMode = () => {\r\n    // Detect high contrast preference\r\n    const highContrastQuery = window.matchMedia('(prefers-contrast: high)')\r\n    \r\n    const updateHighContrast = (matches) => {\r\n      highContrastMode.value = matches\r\n      document.body.classList.toggle('high-contrast', matches)\r\n      announce(matches ? 'High contrast mode enabled' : 'High contrast mode disabled')\r\n    }\r\n    \r\n    updateHighContrast(highContrastQuery.matches)\r\n    \r\n    // Listen for changes\r\n    highContrastQuery.addEventListener('change', (e) => {\r\n      updateHighContrast(e.matches)\r\n    })\r\n  }\r\n\r\n  // Add ARIA labels to controls\r\n  const addAriaLabelsToControls = () => {\r\n    const controls = {\r\n      '#dimensions-slider': 'Number of dimensions',\r\n      '#num-vectors-slider': 'Number of vectors',\r\n      '#regenerate': 'Generate new random vectors',\r\n      '#toggle-forces': 'Toggle force visualization',\r\n      '#run-analysis': 'Open analysis modal',\r\n      '#file-upload': 'Upload vector data file',\r\n      '.theme-switcher': 'Switch between light and dark theme',\r\n      '.floating-action-button': 'Quick actions menu',\r\n      '.tab-button': 'Tab navigation'\r\n    }\r\n\r\n    Object.entries(controls).forEach(([selector, label]) => {\r\n      const elements = document.querySelectorAll(selector)\r\n      elements.forEach(element => {\r\n        if (!element.getAttribute('aria-label')) {\r\n          element.setAttribute('aria-label', label)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  // Update visualization description for screen readers\r\n  const updateVisualizationDescription = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    const vectorElements = document.querySelectorAll('.vector-atom')\r\n    \r\n    if (svg) {\r\n      const description = `Vector visualization with ${vectorElements.length} vectors. Use arrow keys to navigate between vectors, Enter to select, and ? for keyboard shortcuts.`\r\n      svg.setAttribute('aria-label', description)\r\n      svg.setAttribute('role', 'img')\r\n    }\r\n  }\r\n\r\n  // Handle focus events\r\n  const handleFocusIn = (event) => {\r\n    const modal = event.target.closest('.modal-overlay')\r\n    if (modal) {\r\n      trapFocusInModal(modal, event)\r\n    }\r\n  }\r\n\r\n  // Show keyboard shortcuts modal\r\n  const showKeyboardShortcuts = () => {\r\n    const shortcuts = [\r\n      { key: 'Ctrl+G', action: 'Generate new vectors' },\r\n      { key: 'Ctrl+R', action: 'Reset visualization' },\r\n      { key: 'Ctrl+E', action: 'Export data' },\r\n      { key: 'Ctrl+A', action: 'Open analysis modal' },\r\n      { key: 'Ctrl+H', action: 'Show help' },\r\n      { key: 'Arrow Keys', action: 'Navigate between vectors' },\r\n      { key: 'Enter/Space', action: 'Select vector' },\r\n      { key: 'Escape', action: 'Close modals' },\r\n      { key: '?', action: 'Show keyboard shortcuts' },\r\n      { key: 'Tab', action: 'Navigate between controls' }\r\n    ]\r\n\r\n    uiStore.showShortcutsModal(shortcuts)\r\n  }\r\n\r\n  // Ensure color contrast\r\n  const ensureColorContrast = () => {\r\n    // Add high contrast styles if needed\r\n    if (highContrastMode.value) {\r\n      const style = document.createElement('style')\r\n      style.id = 'accessibility-high-contrast'\r\n      style.textContent = `\r\n        .high-contrast .vector-atom {\r\n          stroke: #000 !important;\r\n          stroke-width: 2px !important;\r\n        }\r\n        .high-contrast .force-line {\r\n          stroke: #000 !important;\r\n          stroke-width: 3px !important;\r\n        }\r\n        .high-contrast .modal-content {\r\n          background: #fff !important;\r\n          color: #000 !important;\r\n          border: 3px solid #000 !important;\r\n        }\r\n      `\r\n      document.head.appendChild(style)\r\n    }\r\n  }\r\n\r\n  // Get accessibility report\r\n  const getAccessibilityReport = () => {\r\n    return {\r\n      announcements: announcements.value,\r\n      focusableElements: document.querySelectorAll('[tabindex], button, input, select, textarea, a[href]').length,\r\n      ariaLabels: document.querySelectorAll('[aria-label]').length,\r\n      highContrastMode: highContrastMode.value,\r\n      screenReaderSupport: {\r\n        liveRegion: !!liveRegion.value,\r\n        landmarks: document.querySelectorAll('[role]').length,\r\n        headings: document.querySelectorAll('h1, h2, h3, h4, h5, h6').length\r\n      }\r\n    }\r\n  }\r\n\r\n  // Initialize accessibility features\r\n  const initialize = () => {\r\n    createAriaLiveRegion()\r\n    setupHighContrastMode()\r\n    addAriaLabelsToControls()\r\n    ensureColorContrast()\r\n    updateVisualizationDescription()\r\n    \r\n    announce('VectoVerse visualization loaded. Press ? for keyboard shortcuts.')\r\n  }\r\n\r\n  // Cleanup\r\n  const cleanup = () => {\r\n    if (liveRegion.value) {\r\n      document.body.removeChild(liveRegion.value)\r\n      liveRegion.value = null\r\n    }\r\n    \r\n    const highContrastStyle = document.getElementById('accessibility-high-contrast')\r\n    if (highContrastStyle) {\r\n      document.head.removeChild(highContrastStyle)\r\n    }\r\n  }\r\n\r\n  // Lifecycle\r\n  onMounted(() => {\r\n    initialize()\r\n    document.addEventListener('keydown', handleKeyboardShortcuts)\r\n    document.addEventListener('focusin', handleFocusIn)\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    cleanup()\r\n    document.removeEventListener('keydown', handleKeyboardShortcuts)\r\n    document.removeEventListener('focusin', handleFocusIn)\r\n  })\r\n\r\n  return {\r\n    // State\r\n    announcements,\r\n    highContrastMode,\r\n    \r\n    // Methods\r\n    announce,\r\n    manageFocus,\r\n    announceVectorFocus,\r\n    trapFocusInModal,\r\n    setupHighContrastMode,\r\n    addAriaLabelsToControls,\r\n    updateVisualizationDescription,\r\n    showKeyboardShortcuts,\r\n    ensureColorContrast,\r\n    getAccessibilityReport,\r\n    initialize,\r\n    cleanup\r\n  }\r\n} ","import { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function usePerformanceOptimizer() {\r\n  const uiStore = useUIStore()\r\n  \r\n  // Performance metrics\r\n  const frameRate = ref(60)\r\n  const renderQueue = ref([])\r\n  const isRendering = ref(false)\r\n  const performanceMetrics = ref({\r\n    fps: 0,\r\n    renderTime: 0,\r\n    memoryUsage: 0,\r\n    vectorCount: 0\r\n  })\r\n\r\n  // Performance tracking\r\n  let lastTime = performance.now()\r\n  let frameCount = 0\r\n  let animationFrameId = null\r\n\r\n  // Computed properties\r\n  const isLowPerformance = computed(() => performanceMetrics.value.fps < 30)\r\n  const isHighMemoryUsage = computed(() => performanceMetrics.value.memoryUsage > 100)\r\n  const shouldReduceComplexity = computed(() => {\r\n    const isMobile = window.innerWidth < 768\r\n    const isLowMemory = performanceMetrics.value.memoryUsage > 50\r\n    const isLowFPS = performanceMetrics.value.fps < 20\r\n    const tooManyVectors = performanceMetrics.value.vectorCount > (isMobile ? 30 : 100)\r\n    \r\n    return isMobile || isLowMemory || isLowFPS || tooManyVectors\r\n  })\r\n\r\n  // FPS tracking\r\n  const trackFPS = () => {\r\n    frameCount++\r\n    const currentTime = performance.now()\r\n    \r\n    if (currentTime - lastTime >= 1000) {\r\n      performanceMetrics.value.fps = Math.round(frameCount * 1000 / (currentTime - lastTime))\r\n      frameCount = 0\r\n      lastTime = currentTime\r\n      \r\n      // Adjust rendering quality based on FPS\r\n      adjustRenderingQuality()\r\n    }\r\n    \r\n    animationFrameId = requestAnimationFrame(trackFPS)\r\n  }\r\n\r\n  // Monitor memory usage\r\n  const monitorMemory = () => {\r\n    if (performance.memory) {\r\n      performanceMetrics.value.memoryUsage = Math.round(\r\n        performance.memory.usedJSHeapSize / 1024 / 1024\r\n      )\r\n    }\r\n  }\r\n\r\n  // Adjust rendering quality based on performance\r\n  const adjustRenderingQuality = () => {\r\n    if (performanceMetrics.value.fps < 30) {\r\n      optimizeForLowPerformance()\r\n    } else if (performanceMetrics.value.fps > 50) {\r\n      restoreHighQuality()\r\n    }\r\n    \r\n    // Show performance warning if needed\r\n    if (performanceMetrics.value.vectorCount > 100 && performanceMetrics.value.fps < 15) {\r\n      uiStore.showError('Performance warning: Too many vectors. Consider reducing the count.')\r\n    }\r\n  }\r\n\r\n  // Optimize for low performance devices\r\n  const optimizeForLowPerformance = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    if (svg) {\r\n      svg.style.shapeRendering = 'optimizeSpeed'\r\n      svg.style.textRendering = 'optimizeSpeed'\r\n    }\r\n\r\n    // Reduce animation frequency\r\n    frameRate.value = 30\r\n    \r\n    // Disable expensive visual effects\r\n    document.querySelectorAll('.vector-atom').forEach(atom => {\r\n      atom.style.filter = 'none'\r\n    })\r\n\r\n    // Reduce force line complexity\r\n    document.querySelectorAll('.force-line').forEach(line => {\r\n      line.style.strokeDasharray = 'none'\r\n    })\r\n  }\r\n\r\n  // Restore high quality rendering\r\n  const restoreHighQuality = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    if (svg) {\r\n      svg.style.shapeRendering = 'auto'\r\n      svg.style.textRendering = 'auto'\r\n    }\r\n\r\n    frameRate.value = 60\r\n    \r\n    // Re-enable visual effects\r\n    document.querySelectorAll('.vector-atom').forEach(atom => {\r\n      atom.style.filter = ''\r\n    })\r\n  }\r\n\r\n  // Throttle function execution\r\n  const throttleRender = (renderFunction, delay = 16) => {\r\n    let lastRender = 0\r\n    \r\n    return (...args) => {\r\n      const now = performance.now()\r\n      \r\n      if (now - lastRender >= delay) {\r\n        lastRender = now\r\n        return renderFunction(...args)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Debounce function execution\r\n  const debounceRender = (renderFunction, delay = 100) => {\r\n    let timeoutId\r\n    \r\n    return (...args) => {\r\n      clearTimeout(timeoutId)\r\n      timeoutId = setTimeout(() => renderFunction(...args), delay)\r\n    }\r\n  }\r\n\r\n  // Batch render updates for efficiency\r\n  const batchRenderUpdates = (updates) => {\r\n    renderQueue.value.push(...updates)\r\n    \r\n    if (!isRendering.value) {\r\n      isRendering.value = true\r\n      requestAnimationFrame(() => processRenderQueue())\r\n    }\r\n  }\r\n\r\n  // Process render queue\r\n  const processRenderQueue = () => {\r\n    const startTime = performance.now()\r\n    \r\n    // Process updates in batches\r\n    const batchSize = shouldReduceComplexity.value ? 5 : 10\r\n    const batch = renderQueue.value.splice(0, batchSize)\r\n    \r\n    batch.forEach(update => {\r\n      try {\r\n        if (typeof update === 'function') {\r\n          update()\r\n        }\r\n      } catch (error) {\r\n        console.error('Render queue error:', error)\r\n      }\r\n    })\r\n    \r\n    // Continue processing if queue is not empty\r\n    if (renderQueue.value.length > 0) {\r\n      requestAnimationFrame(() => processRenderQueue())\r\n    } else {\r\n      isRendering.value = false\r\n    }\r\n    \r\n    performanceMetrics.value.renderTime = performance.now() - startTime\r\n  }\r\n\r\n  // Optimize vector rendering with level-of-detail\r\n  const optimizeVectorRendering = (vectors) => {\r\n    if (vectors.length > 50) {\r\n      return applyLevelOfDetail(vectors)\r\n    }\r\n    return vectors\r\n  }\r\n\r\n  // Apply level-of-detail rendering\r\n  const applyLevelOfDetail = (vectors) => {\r\n    const viewBox = getViewBox()\r\n    \r\n    return vectors.map(vector => {\r\n      const distance = getDistanceFromCenter(vector, viewBox)\r\n      const shouldSimplify = distance > viewBox.width * 0.4\r\n      \r\n      return {\r\n        ...vector,\r\n        simplified: shouldSimplify,\r\n        renderDetail: shouldSimplify ? 'low' : 'high'\r\n      }\r\n    })\r\n  }\r\n\r\n  // Get current view box\r\n  const getViewBox = () => {\r\n    const svg = document.querySelector('#main-viz')\r\n    if (!svg) return { x: 0, y: 0, width: 800, height: 600, centerX: 400, centerY: 300 }\r\n    \r\n    const rect = svg.getBoundingClientRect()\r\n    return {\r\n      x: 0,\r\n      y: 0,\r\n      width: rect.width,\r\n      height: rect.height,\r\n      centerX: rect.width / 2,\r\n      centerY: rect.height / 2\r\n    }\r\n  }\r\n\r\n  // Calculate distance from center\r\n  const getDistanceFromCenter = (vector, viewBox) => {\r\n    const dx = vector.x - viewBox.centerX\r\n    const dy = vector.y - viewBox.centerY\r\n    return Math.sqrt(dx * dx + dy * dy)\r\n  }\r\n\r\n  // Memory management\r\n  const manageMemory = () => {\r\n    cleanupDOMElements()\r\n    clearCaches()\r\n    \r\n    // Force garbage collection if available (dev only)\r\n    if (window.gc && process.env.NODE_ENV === 'development') {\r\n      window.gc()\r\n    }\r\n  }\r\n\r\n  // Clean up unused DOM elements\r\n  const cleanupDOMElements = () => {\r\n    // Remove orphaned tooltips\r\n    document.querySelectorAll('.vector-tooltip, .force-tooltip, .periodic-tooltip').forEach(tooltip => {\r\n      if (!tooltip.style.display || tooltip.style.display === 'none') {\r\n        tooltip.remove()\r\n      }\r\n    })\r\n    \r\n    // Remove old error notifications\r\n    const errorNotifications = document.querySelectorAll('.error-notification')\r\n    if (errorNotifications.length > 3) {\r\n      errorNotifications[0].remove()\r\n    }\r\n    \r\n    // Clean up modal overlays\r\n    document.querySelectorAll('.modal-overlay').forEach(modal => {\r\n      if (!modal.parentNode) {\r\n        modal.remove()\r\n      }\r\n    })\r\n  }\r\n\r\n  // Clear caches\r\n  const clearCaches = () => {\r\n    // Clear any cached calculations\r\n    if (window.VectoVerse?.clearCache) {\r\n      window.VectoVerse.clearCache()\r\n    }\r\n  }\r\n\r\n  // Get optimized configuration\r\n  const getOptimizedConfig = (baseConfig) => {\r\n    if (shouldReduceComplexity.value) {\r\n      return {\r\n        ...baseConfig,\r\n        numVectors: Math.min(baseConfig.numVectors || 20, 20),\r\n        dimensions: Math.min(baseConfig.dimensions || 5, 5),\r\n        showForces: false,\r\n        animationSpeed: 0.5\r\n      }\r\n    }\r\n    \r\n    return baseConfig\r\n  }\r\n\r\n  // Get performance recommendations\r\n  const getPerformanceRecommendations = () => {\r\n    const recommendations = []\r\n    \r\n    if (performanceMetrics.value.fps < 30) {\r\n      recommendations.push('Reduce the number of vectors for better performance')\r\n    }\r\n    \r\n    if (performanceMetrics.value.memoryUsage > 100) {\r\n      recommendations.push('Consider reducing dimensions or clearing old data')\r\n    }\r\n    \r\n    if (performanceMetrics.value.vectorCount > 50) {\r\n      recommendations.push('Large datasets may impact performance on mobile devices')\r\n    }\r\n    \r\n    if (renderQueue.value.length > 20) {\r\n      recommendations.push('Consider reducing animation frequency')\r\n    }\r\n    \r\n    return recommendations\r\n  }\r\n\r\n  // Get performance report\r\n  const getPerformanceReport = () => {\r\n    return {\r\n      metrics: performanceMetrics.value,\r\n      recommendations: getPerformanceRecommendations(),\r\n      systemInfo: {\r\n        isMobile: window.innerWidth < 768,\r\n        devicePixelRatio: window.devicePixelRatio || 1,\r\n        hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',\r\n        memory: navigator.deviceMemory || 'unknown'\r\n      },\r\n      currentLoad: {\r\n        vectors: performanceMetrics.value.vectorCount,\r\n        renderQueueSize: renderQueue.value.length,\r\n        isRendering: isRendering.value\r\n      }\r\n    }\r\n  }\r\n\r\n  // Wrap function with performance monitoring\r\n  const wrapWithPerformanceCheck = (fn, name) => {\r\n    return (...args) => {\r\n      const start = performance.now()\r\n      const result = fn(...args)\r\n      const duration = performance.now() - start\r\n      \r\n      if (duration > 16) { // Longer than one frame\r\n        console.warn(`Performance warning: ${name} took ${duration.toFixed(2)}ms`)\r\n      }\r\n      \r\n      return result\r\n    }\r\n  }\r\n\r\n  // Create optimized animation frame\r\n  const createAnimationFrame = (callback) => {\r\n    const frameCallback = (timestamp) => {\r\n      if (performanceMetrics.value.fps > 15) {\r\n        callback(timestamp)\r\n      }\r\n    }\r\n    \r\n    return requestAnimationFrame(frameCallback)\r\n  }\r\n\r\n  // Update vector count for monitoring\r\n  const updateVectorCount = (count) => {\r\n    performanceMetrics.value.vectorCount = count\r\n  }\r\n\r\n  // Lifecycle management\r\n  onMounted(() => {\r\n    // Start performance monitoring\r\n    trackFPS()\r\n    \r\n    // Monitor memory usage periodically\r\n    const memoryInterval = setInterval(monitorMemory, 5000)\r\n    \r\n    // Cleanup on unmount\r\n    onUnmounted(() => {\r\n      if (animationFrameId) {\r\n        cancelAnimationFrame(animationFrameId)\r\n      }\r\n      clearInterval(memoryInterval)\r\n      manageMemory()\r\n    })\r\n  })\r\n\r\n  return {\r\n    // State\r\n    frameRate,\r\n    renderQueue,\r\n    isRendering,\r\n    performanceMetrics,\r\n    \r\n    // Computed\r\n    isLowPerformance,\r\n    isHighMemoryUsage,\r\n    shouldReduceComplexity,\r\n    \r\n    // Methods\r\n    throttleRender,\r\n    debounceRender,\r\n    batchRenderUpdates,\r\n    optimizeVectorRendering,\r\n    manageMemory,\r\n    getOptimizedConfig,\r\n    getPerformanceReport,\r\n    getPerformanceRecommendations,\r\n    wrapWithPerformanceCheck,\r\n    createAnimationFrame,\r\n    updateVectorCount,\r\n    optimizeForLowPerformance,\r\n    restoreHighQuality,\r\n    adjustRenderingQuality\r\n  }\r\n} ","/**\r\n * Calculations for the Vector Periodic Table.\r\n * These functions handle the transformation of raw vectors into \"elemental\" properties.\r\n */\r\n\r\n// Calculate vector statistics\r\nexport const calculateVectorStatistics = (vector) => {\r\n  const magnitude = calculateMagnitude(vector.components)\r\n  const entropy = calculateEntropy(vector.components)\r\n  const stability = calculateStability(vector.components)\r\n  \r\n  return { magnitude, entropy, stability }\r\n}\r\n\r\n// Calculate magnitude\r\nexport const calculateMagnitude = (components) => {\r\n  return Math.sqrt(components.reduce((sum, c) => sum + c * c, 0))\r\n}\r\n\r\n// Calculate entropy\r\nexport const calculateEntropy = (components) => {\r\n  const total = components.reduce((sum, c) => sum + Math.abs(c), 0)\r\n  if (total === 0) return 0\r\n  \r\n  const probabilities = components.map(c => Math.abs(c) / total)\r\n  return -probabilities.reduce((sum, p) => {\r\n    return p > 0 ? sum + p * Math.log2(p) : sum\r\n  }, 0)\r\n}\r\n\r\n// Calculate stability\r\nexport const calculateStability = (components) => {\r\n  const mean = components.reduce((sum, c) => sum + c, 0) / components.length\r\n  const variance = components.reduce((sum, c) => sum + Math.pow(c - mean, 2), 0) / components.length\r\n  return 1 / (1 + variance) // Higher stability for lower variance\r\n}\r\n\r\nconst QUANTUM_THRESHOLD = 0.2;\r\n\r\n// Get information quantums\r\nexport const getInformationQuantums = (vector) => {\r\n  const components = vector.components\r\n  const excitatory = components.filter(c => c > QUANTUM_THRESHOLD).length\r\n  const inhibitory = components.filter(c => c < -QUANTUM_THRESHOLD).length\r\n  const neutral = components.filter(c => c >= -QUANTUM_THRESHOLD && c <= QUANTUM_THRESHOLD).length\r\n  \r\n  return { excitatory, inhibitory, neutral }\r\n} ","const prefixes = [\r\n    // 1-10\r\n    'Mono', 'Di', 'Tri', 'Tetra', 'Penta', 'Hexa', 'Hepta', 'Octa', 'Nona', 'Deca',\r\n    // 11-20\r\n    'Undeca', 'Dodeca', 'Trideca', 'Tetradeca', 'Pentadeca', 'Hexadeca', 'Heptadeca', 'Octadeca', 'Nonadeca', 'Icosa'\r\n  ];\r\n  \r\n  // ðŸ”¥ Excitatory roots (Energy, Fire, Force)\r\n  const excitatoryRoots = [\r\n    'Aether',       // Greek: divine spark\r\n    'Agni',         // Sanskrit: fire deity\r\n    'Raijin',       // Japanese: thunder god\r\n    'Shango',       // Yoruba: lightning/fire deity\r\n    'Surtr',        // Norse: fire giant\r\n    'Sekhem',       // Egyptian: power/life force\r\n    'Itztli',       // Aztec: obsidian, energy blade\r\n    'Pele',         // Hawaiian: volcano goddess\r\n    'Huitzilopochtli', // Aztec: sun/war god\r\n    'Brigid',       // Celtic: fire and fertility\r\n    'Hephaestus',   // Greek: god of forge\r\n    'Amaterasu'     // Japanese: sun goddess\r\n  ];\r\n  \r\n  // â„ï¸ Inhibitory roots (Darkness, Cold, Void)\r\n  const inhibitoryRoots = [\r\n    'Frigus',       // Latin: cold\r\n    'Tamasa',       // Sanskrit: inertia/darkness\r\n    'Yami',         // Japanese: darkness\r\n    'Nu',           // Egyptian: primordial void\r\n    'Morana',       // Slavic: goddess of winter/death\r\n    'Tenebris',     // Latin: shadow\r\n    'Noctis',       // Latin: night\r\n    'Chione',       // Greek: goddess of snow\r\n    'Izanami',      // Japanese: goddess of death\r\n    'Hel',          // Norse: underworld deity\r\n    'Kali',         // Sanskrit: destruction, time\r\n    'Ereshkigal'    // Sumerian: queen of the underworld\r\n  ];\r\n  \r\n  // âš–ï¸ Balanced roots (Harmony, Equilibrium, Law)\r\n  const balancedRoots = [\r\n    'Zhong',        // Chinese: center/balance\r\n    'Sattva',       // Sanskrit: harmony/purity\r\n    'Sophrosyne',   // Greek: moderation\r\n    'Nkwa',         // Akan: life force\r\n    'Wa',           // Japanese: peace/harmony\r\n    'Dharma',       // Sanskrit: cosmic law\r\n    'Ma\\'at',       // Egyptian: balance, truth\r\n    'Asha',         // Persian (Zoroastrian): truth/order\r\n    'Rta',          // Vedic: natural law\r\n    'Tao',          // Chinese: the way\r\n    'Heka',         // Egyptian: magical order\r\n    'Ubuntu'        // Bantu: harmony through humanity\r\n  ];\r\n  \r\n  /**\r\n   * Generates a procedural name for a vector element based on its quantum properties.\r\n   * @param {number} excitatory - The number of excitatory components.\r\n   * @param {number} inhibitory - The number of inhibitory components.\r\n   * @returns {string} The generated element name.\r\n   */\r\n  export function generateElementName(excitatory, inhibitory) {\r\n    const activeDimensions = excitatory + inhibitory;\r\n  \r\n    if (activeDimensions === 0) {\r\n      return 'Amorphium'; // A neutral placeholder for zero-dimensional elements\r\n    }\r\n  \r\n    // Get the numeric prefix, default to \"Poly\" for high-dimensional vectors\r\n    const prefix = prefixes[activeDimensions - 1] || 'Poly';\r\n  \r\n    let root;\r\n  \r\n    if (excitatory > inhibitory) {\r\n      root = excitatoryRoots[excitatory % excitatoryRoots.length];\r\n    } else if (inhibitory > excitatory) {\r\n      root = inhibitoryRoots[inhibitory % inhibitoryRoots.length];\r\n    } else {\r\n      // Balanced case\r\n      root = balancedRoots[(excitatory + inhibitory) % balancedRoots.length];\r\n    }\r\n  \r\n    // Combine and capitalize\r\n    const name = prefix + root;\r\n    return name.charAt(0).toUpperCase() + name.slice(1);\r\n  }\r\n  ","import { ref, watch, computed } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useConfigStore } from '../stores/configStore'\r\nimport { \r\n  calculateVectorStatistics, \r\n  getInformationQuantums \r\n} from '../utils/periodicTableCalculations'\r\nimport { generateElementName } from '../utils/nameGenerator'\r\n\r\n// --- State should be defined outside the function to be a singleton ---\r\nconst activeHeatmap = ref('none'); // none, magnitude, entropy, stability\r\nconst dataRanges = ref({\r\n  magnitude: { min: 0, max: 1 },\r\n  entropy: { min: 0, max: 1 },\r\n  stability: { min: 0, max: 1 }\r\n});\r\nconst showPlaceholders = ref(true);\r\nconst highlightedElementIds = ref(new Set());\r\n// --- End of singleton state ---\r\n\r\nexport function usePeriodicTable() {\r\n  const vectorStore = useVectorStore()\r\n  const configStore = useConfigStore()\r\n  \r\n  const periodicData = ref([])\r\n  \r\n  const config = ref({\r\n    elementWidth: 70, // Increased width\r\n    elementHeight: 70, // Increased height\r\n    padding: 4,\r\n    fontSize: 9,\r\n    symbolFontSize: 16\r\n  })\r\n\r\n  const tableDimensions = computed(() => {\r\n    return {\r\n      rows: configStore.dimensions + 1,\r\n      cols: configStore.dimensions + 1\r\n    }\r\n  });\r\n\r\n  const generateFullPeriodicTable = () => {\r\n    const { dimensions } = configStore;\r\n    const newTable = [];\r\n\r\n    for (let row = 0; row <= dimensions; row++) { // Excitatory\r\n      for (let col = 0; col <= dimensions; col++) { // Inhibitory\r\n        \r\n        const neutralCount = dimensions - row - col;\r\n        if (neutralCount < 0) continue;\r\n\r\n        const x = 50 + col * (config.value.elementWidth + config.value.padding + 15);\r\n        const y = 40 + row * (config.value.elementHeight + config.value.padding + 15);\r\n\r\n        const element = {\r\n          id: `p_${row}_${col}`,\r\n          isPlaceholder: true,\r\n          symbol: `E${row}I${col}`,\r\n          name: generateElementName(row, col),\r\n          atomicNumber: row * (dimensions + 1) + col + 1,\r\n          atomicMass: 0,\r\n          excitatory: row,\r\n          inhibitory: col,\r\n          neutral: neutralCount,\r\n          entropy: 0,\r\n          stability: 0,\r\n          color: '#333', // Placeholder color\r\n          position: { row, col, x, y },\r\n          vector: null,\r\n          present: false, // Indicates if a vector from the store occupies this slot\r\n          vectors: [] // To hold multiple vectors if they map to the same slot\r\n        };\r\n        newTable.push(element);\r\n      }\r\n    }\r\n    return newTable;\r\n  }\r\n\r\n  const mapVectorsToTable = (table) => {\r\n    const vectors = vectorStore.vectors;\r\n    const mappedTable = table; \r\n\r\n    const vectorGroups = new Map();\r\n    vectors.forEach(vector => {\r\n      const quantumData = getInformationQuantums(vector);\r\n      const key = `${quantumData.excitatory}_${quantumData.inhibitory}`;\r\n      if (!vectorGroups.has(key)) {\r\n        vectorGroups.set(key, []);\r\n      }\r\n      vectorGroups.get(key).push(vector);\r\n    });\r\n\r\n    mappedTable.forEach(element => {\r\n      const key = `${element.excitatory}_${element.inhibitory}`;\r\n      const vectorsForElement = vectorGroups.get(key);\r\n\r\n      if (vectorsForElement && vectorsForElement.length > 0) {\r\n        const firstVector = vectorsForElement[0];\r\n        const quantumData = getInformationQuantums(firstVector);\r\n        let stats;\r\n\r\n        if (vectorsForElement.length > 1) {\r\n          // Calculate average stats for stacked vectors\r\n          const avgMagnitude = vectorsForElement.reduce((sum, v) => sum + calculateVectorStatistics(v).magnitude, 0) / vectorsForElement.length;\r\n          const avgEntropy = vectorsForElement.reduce((sum, v) => sum + calculateVectorStatistics(v).entropy, 0) / vectorsForElement.length;\r\n          const avgStability = vectorsForElement.reduce((sum, v) => sum + calculateVectorStatistics(v).stability, 0) / vectorsForElement.length;\r\n          stats = { magnitude: avgMagnitude, entropy: avgEntropy, stability: avgStability };\r\n        } else {\r\n          stats = calculateVectorStatistics(firstVector);\r\n        }\r\n\r\n        element.id = firstVector.id; \r\n        element.isPlaceholder = false;\r\n        element.present = true;\r\n        element.name = generateElementName(quantumData.excitatory, quantumData.inhibitory);\r\n        element.atomicMass = Math.round(stats.magnitude * 100) / 100;\r\n        element.entropy = Math.round(stats.entropy * 1000) / 1000;\r\n        element.stability = Math.round(stats.stability * 1000) / 1000;\r\n        element.color = getElementColor(firstVector, stats, quantumData);\r\n        element.vector = firstVector;\r\n        element.vectors = vectorsForElement;\r\n      }\r\n    });\r\n\r\n    return mappedTable;\r\n  }\r\n  \r\n  const getElementColor = (vector, stats, quantumData) => {\r\n    if (quantumData.excitatory > quantumData.inhibitory) {\r\n      return '#ff6b6b' // Red for excitatory dominant\r\n    } else if (quantumData.inhibitory > quantumData.excitatory) {\r\n      return '#4ecdc4' // Cyan for inhibitory dominant\r\n    } else {\r\n      return '#f39c12' // Orange for balanced or neutral\r\n    }\r\n  }\r\n\r\n  const calculateDataRanges = (table) => {\r\n    const presentElements = table.filter(el => el.present);\r\n    if (presentElements.length === 0) return;\r\n\r\n    const magnitudes = presentElements.map(el => el.atomicMass);\r\n    const entropies = presentElements.map(el => el.entropy);\r\n    const stabilities = presentElements.map(el => el.stability);\r\n\r\n    dataRanges.value = {\r\n      magnitude: { min: Math.min(...magnitudes), max: Math.max(...magnitudes) },\r\n      entropy: { min: Math.min(...entropies), max: Math.max(...entropies) },\r\n      stability: { min: Math.min(...stabilities), max: Math.max(...stabilities) },\r\n    }\r\n  }\r\n\r\n  const setHighlight = (property, direction = 'desc', count = 5) => {\r\n    const sorted = [...periodicData.value]\r\n      .filter(el => el.present)\r\n      .sort((a, b) => {\r\n        const valA = property === 'excitatory' || property === 'inhibitory' ? a[property] : a.atomicMass;\r\n        const valB = property === 'excitatory' || property === 'inhibitory' ? b[property] : b.atomicMass;\r\n        return direction === 'desc' ? valB - valA : valA - valB;\r\n      });\r\n    \r\n    const topIds = new Set(sorted.slice(0, count).map(el => el.id));\r\n    highlightedElementIds.value = topIds;\r\n  };\r\n\r\n  const clearHighlight = () => {\r\n    highlightedElementIds.value.clear();\r\n  };\r\n\r\n  const updatePeriodicData = () => {\r\n    const fullTable = generateFullPeriodicTable();\r\n    const mappedTable = mapVectorsToTable(fullTable);\r\n    calculateDataRanges(mappedTable);\r\n    periodicData.value = mappedTable;\r\n  }\r\n\r\n  const getElementData = (vectorId) => {\r\n    if (typeof vectorId === 'string' && vectorId.startsWith('p_')) {\r\n        // It's a placeholder\r\n        return periodicData.value.find(element => element.id === vectorId)\r\n    }\r\n    return periodicData.value.find(element => !element.isPlaceholder && element.id === vectorId)\r\n  }\r\n\r\n  watch(\r\n    () => vectorStore.vectors,\r\n    () => {\r\n      updatePeriodicData();\r\n    },\r\n    { deep: true, immediate: true }\r\n  );\r\n\r\n  watch(\r\n    () => configStore.dimensions,\r\n    () => {\r\n      updatePeriodicData();\r\n    },\r\n    { immediate: true }\r\n  );\r\n\r\n  return {\r\n    periodicData,\r\n    config,\r\n    getElementData,\r\n    tableDimensions,\r\n    activeHeatmap,\r\n    dataRanges,\r\n    showPlaceholders,\r\n    highlightedElementIds,\r\n    setHighlight,\r\n    clearHighlight\r\n  }\r\n} ","import { ref, computed } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useExportManager() {\r\n  const vectorStore = useVectorStore()\r\n  const uiStore = useUIStore()\r\n  \r\n  // State\r\n  const isExporting = ref(false)\r\n  const exportProgress = ref(0)\r\n\r\n  // Export formats\r\n  const formats = ref({\r\n    json: { name: 'JSON', extension: '.json', mimeType: 'application/json' },\r\n    csv: { name: 'CSV', extension: '.csv', mimeType: 'text/csv' },\r\n    svg: { name: 'SVG', extension: '.svg', mimeType: 'image/svg+xml' },\r\n    png: { name: 'PNG', extension: '.png', mimeType: 'image/png' },\r\n    latex: { name: 'LaTeX', extension: '.tex', mimeType: 'text/plain' },\r\n    python: { name: 'Python', extension: '.py', mimeType: 'text/plain' },\r\n    txt: { name: 'Text Report', extension: '.txt', mimeType: 'text/plain' }\r\n  })\r\n\r\n  // Computed properties\r\n  const hasVectors = computed(() => vectorStore.vectors.length > 0)\r\n  const canExport = computed(() => hasVectors.value && !isExporting.value)\r\n\r\n  // Export JSON with metadata\r\n  const exportJSON = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const exportData = {\r\n        metadata: {\r\n          version: \"2.0\",\r\n          timestamp: new Date().toISOString(),\r\n          source: \"VectoVerse\",\r\n          description: \"Vector visualization data export\"\r\n        },\r\n        config: {\r\n          dimensions: vectorStore.vectors[0]?.components.length || 0,\r\n          numVectors: vectorStore.vectors.length\r\n        },\r\n        vectors: vectorStore.vectors.map(v => ({\r\n          id: v.id,\r\n          components: v.components,\r\n          position: { x: v.x || 0, y: v.y || 0 },\r\n          type: v.type || 'generated',\r\n          metadata: {\r\n            magnitude: calculateMagnitude(v.components),\r\n            entropy: calculateEntropy(v.components)\r\n          }\r\n        })),\r\n        inputVector: vectorStore.inputVector ? {\r\n          components: vectorStore.inputVector.components,\r\n          position: { x: vectorStore.inputVector.x || 0, y: vectorStore.inputVector.y || 0 }\r\n        } : null,\r\n        analysis: generateAnalysisData()\r\n      }\r\n\r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        JSON.stringify(exportData, null, 2),\r\n        `vectoverse-export-${getTimestamp()}.json`,\r\n        'application/json'\r\n      )\r\n\r\n      uiStore.showSuccess('JSON export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`JSON export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export CSV format\r\n  const exportCSV = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      if (vectors.length === 0) {\r\n        throw new Error('No vectors to export')\r\n      }\r\n      \r\n      const dimensions = vectors[0].components.length\r\n      \r\n      // Create headers\r\n      const headers = [\r\n        'vector_id', 'type', 'x_position', 'y_position', \r\n        'magnitude', 'entropy'\r\n      ]\r\n      \r\n      // Add dimension headers\r\n      for (let i = 0; i < dimensions; i++) {\r\n        headers.push(`component_${i + 1}`)\r\n      }\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Create rows\r\n      const rows = [headers.join(',')]\r\n      \r\n      vectors.forEach(vector => {\r\n        const row = [\r\n          vector.id,\r\n          vector.type || 'generated',\r\n          (vector.x || 0).toFixed(2),\r\n          (vector.y || 0).toFixed(2),\r\n          calculateMagnitude(vector.components).toFixed(6),\r\n          calculateEntropy(vector.components).toFixed(6),\r\n          ...vector.components.map(c => c.toFixed(6))\r\n        ]\r\n        rows.push(row.join(','))\r\n      })\r\n      \r\n      // Add input vector if exists\r\n      if (vectorStore.inputVector) {\r\n        const inputRow = [\r\n          'input',\r\n          'input',\r\n          (vectorStore.inputVector.x || 0).toFixed(2),\r\n          (vectorStore.inputVector.y || 0).toFixed(2),\r\n          calculateMagnitude(vectorStore.inputVector.components).toFixed(6),\r\n          calculateEntropy(vectorStore.inputVector.components).toFixed(6),\r\n          ...vectorStore.inputVector.components.map(c => c.toFixed(6))\r\n        ]\r\n        rows.push(inputRow.join(','))\r\n      }\r\n      \r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        rows.join('\\n'),\r\n        `vectoverse-data-${getTimestamp()}.csv`,\r\n        'text/csv'\r\n      )\r\n\r\n      uiStore.showSuccess('CSV export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`CSV export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export similarity matrix as CSV\r\n  const exportSimilarityMatrix = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      if (vectors.length === 0) return\r\n\r\n      // Create header with vector IDs\r\n      const headers = ['vector_id', ...vectors.map(v => v.id)]\r\n      const rows = [headers.join(',')]\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Calculate similarity matrix\r\n      vectors.forEach((v1, i) => {\r\n        const row = [v1.id]\r\n        vectors.forEach(v2 => {\r\n          const similarity = cosineSimilarity(v1.components, v2.components)\r\n          row.push(similarity.toFixed(4))\r\n        })\r\n        rows.push(row.join(','))\r\n        exportProgress.value = 30 + (i / vectors.length) * 50\r\n      })\r\n      \r\n      downloadFile(\r\n        rows.join('\\n'),\r\n        `vectoverse-similarity-matrix-${getTimestamp()}.csv`,\r\n        'text/csv'\r\n      )\r\n\r\n      uiStore.showSuccess('Similarity matrix exported successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`Similarity matrix export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as SVG\r\n  const exportSVG = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const svg = document.querySelector('#main-viz')\r\n      if (!svg) {\r\n        throw new Error('No visualization found to export')\r\n      }\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Clone the SVG to avoid modifying the original\r\n      const clonedSvg = svg.cloneNode(true)\r\n      \r\n      // Add styles inline for standalone SVG\r\n      const styleElement = document.createElementNS('http://www.w3.org/2000/svg', 'style')\r\n      styleElement.textContent = getSVGStyles()\r\n      clonedSvg.insertBefore(styleElement, clonedSvg.firstChild)\r\n      \r\n      exportProgress.value = 70\r\n      \r\n      // Serialize SVG\r\n      const serializer = new XMLSerializer()\r\n      const svgString = serializer.serializeToString(clonedSvg)\r\n      \r\n      downloadFile(\r\n        svgString,\r\n        `vectoverse-visualization-${getTimestamp()}.svg`,\r\n        'image/svg+xml'\r\n      )\r\n\r\n      uiStore.showSuccess('SVG export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`SVG export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as PNG\r\n  const exportPNG = async (scale = 2) => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const svg = document.querySelector('#main-viz')\r\n      if (!svg) {\r\n        throw new Error('No visualization found to export')\r\n      }\r\n      \r\n      const canvas = document.createElement('canvas')\r\n      const ctx = canvas.getContext('2d')\r\n      const rect = svg.getBoundingClientRect()\r\n      \r\n      canvas.width = rect.width * scale\r\n      canvas.height = rect.height * scale\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      // Create image from SVG\r\n      const svgData = new XMLSerializer().serializeToString(svg)\r\n      const img = new Image()\r\n      \r\n      const promise = new Promise((resolve, reject) => {\r\n        img.onload = () => {\r\n          ctx.scale(scale, scale)\r\n          ctx.drawImage(img, 0, 0)\r\n          \r\n          exportProgress.value = 80\r\n          \r\n          canvas.toBlob(blob => {\r\n            if (blob) {\r\n              const url = URL.createObjectURL(blob)\r\n              const a = document.createElement('a')\r\n              a.href = url\r\n              a.download = `vectoverse-visualization-${getTimestamp()}.png`\r\n              a.click()\r\n              URL.revokeObjectURL(url)\r\n              resolve()\r\n            } else {\r\n              reject(new Error('Failed to create PNG blob'))\r\n            }\r\n          })\r\n        }\r\n        \r\n        img.onerror = () => reject(new Error('Failed to load SVG for PNG export'))\r\n      })\r\n      \r\n      const svgBlob = new Blob([svgData], { type: 'image/svg+xml' })\r\n      const url = URL.createObjectURL(svgBlob)\r\n      img.src = url\r\n      \r\n      await promise\r\n      URL.revokeObjectURL(url)\r\n\r\n      uiStore.showSuccess('PNG export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`PNG export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as LaTeX document\r\n  const exportLaTeX = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      const analysis = generateAnalysisData()\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      const latex = `\r\n\\\\documentclass{article}\r\n\\\\usepackage{amsmath}\r\n\\\\usepackage{amsfonts}\r\n\\\\usepackage{booktabs}\r\n\\\\usepackage{geometry}\r\n\\\\geometry{margin=1in}\r\n\r\n\\\\title{VectoVerse Vector Analysis Report}\r\n\\\\author{Generated by VectoVerse}\r\n\\\\date{${new Date().toLocaleDateString()}}\r\n\r\n\\\\begin{document}\r\n\\\\maketitle\r\n\r\n\\\\section{Dataset Overview}\r\nThis report contains analysis of ${vectors.length} vectors in ${vectors[0]?.components.length || 0}-dimensional space.\r\n\r\n\\\\section{Vector Statistics}\r\n\\\\begin{table}[h]\r\n\\\\centering\r\n\\\\begin{tabular}{lr}\r\n\\\\toprule\r\nMetric & Value \\\\\\\\\r\n\\\\midrule\r\nNumber of Vectors & ${vectors.length} \\\\\\\\\r\nDimensions & ${vectors[0]?.components.length || 0} \\\\\\\\\r\nAverage Magnitude & ${analysis.averageMagnitude.toFixed(4)} \\\\\\\\\r\nAverage Entropy & ${analysis.averageEntropy.toFixed(4)} \\\\\\\\\r\n\\\\bottomrule\r\n\\\\end{tabular}\r\n\\\\caption{Basic vector statistics}\r\n\\\\end{table}\r\n\r\n\\\\section{Mathematical Formulations}\r\nThe following formulas were used in the analysis:\r\n\r\n\\\\subsection{Vector Magnitude}\r\n\\\\begin{equation}\r\n||\\\\mathbf{v}|| = \\\\sqrt{\\\\sum_{i=1}^{n} v_i^2}\r\n\\\\end{equation}\r\n\r\n\\\\subsection{Cosine Similarity}\r\n\\\\begin{equation}\r\n\\\\text{sim}(\\\\mathbf{u}, \\\\mathbf{v}) = \\\\frac{\\\\mathbf{u} \\\\cdot \\\\mathbf{v}}{||\\\\mathbf{u}|| \\\\cdot ||\\\\mathbf{v}||}\r\n\\\\end{equation}\r\n\r\n\\\\subsection{Information Entropy}\r\n\\\\begin{equation}\r\nH(\\\\mathbf{v}) = -\\\\sum_{i=1}^{n} p(v_i) \\\\log_2(p(v_i))\r\n\\\\end{equation}\r\n\r\n\\\\section{Vector Components}\r\n${generateLaTeXVectorTable(vectors.slice(0, 10))}\r\n\r\n\\\\end{document}\r\n      `.trim()\r\n      \r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        latex,\r\n        `vectoverse-analysis-${getTimestamp()}.tex`,\r\n        'text/plain'\r\n      )\r\n\r\n      uiStore.showSuccess('LaTeX export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`LaTeX export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export as Python NumPy script\r\n  const exportPython = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const vectors = vectorStore.vectors\r\n      if (vectors.length === 0) return\r\n      \r\n      exportProgress.value = 30\r\n      \r\n      const pythonCode = `\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nfrom datetime import datetime\r\n\r\n# VectoVerse Export\r\n# Generated on: ${new Date().toISOString()}\r\n\r\n# Vector data\r\nvectors = np.array([\r\n${vectors.map(v => `    [${v.components.map(c => c.toFixed(6)).join(', ')}]`).join(',\\n')}\r\n])\r\n\r\n# Vector metadata\r\nvector_ids = [${vectors.map(v => `'${v.id}'`).join(', ')}]\r\npositions = np.array([\r\n${vectors.map(v => `    [${(v.x || 0).toFixed(2)}, ${(v.y || 0).toFixed(2)}]`).join(',\\n')}\r\n])\r\n\r\n${vectorStore.inputVector ? `\r\n# Input vector\r\ninput_vector = np.array([${vectorStore.inputVector.components.map(c => c.toFixed(6)).join(', ')}])\r\ninput_position = np.array([${(vectorStore.inputVector.x || 0).toFixed(2)}, ${(vectorStore.inputVector.y || 0).toFixed(2)}])\r\n` : '# No input vector'}\r\n\r\n# Basic analysis functions\r\ndef calculate_magnitude(v):\r\n    return np.linalg.norm(v)\r\n\r\ndef cosine_similarity(v1, v2):\r\n    return np.dot(v1, v2) / (np.linalg.norm(v1) * np.linalg.norm(v2))\r\n\r\ndef euclidean_distance(v1, v2):\r\n    return np.linalg.norm(v1 - v2)\r\n\r\n# Calculate similarity matrix\r\nsimilarity_matrix = np.zeros((len(vectors), len(vectors)))\r\nfor i in range(len(vectors)):\r\n    for j in range(len(vectors)):\r\n        similarity_matrix[i, j] = cosine_similarity(vectors[i], vectors[j])\r\n\r\nprint(f\"Loaded {len(vectors)} vectors with {vectors.shape[1]} dimensions\")\r\nprint(f\"Average magnitude: {np.mean([calculate_magnitude(v) for v in vectors]):.4f}\")\r\n\r\n# Example visualization\r\nplt.figure(figsize=(10, 8))\r\nplt.imshow(similarity_matrix, cmap='viridis')\r\nplt.colorbar(label='Cosine Similarity')\r\nplt.title('Vector Similarity Matrix')\r\nplt.xlabel('Vector Index')\r\nplt.ylabel('Vector Index')\r\nplt.show()\r\n      `.trim()\r\n      \r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        pythonCode,\r\n        `vectoverse-export-${getTimestamp()}.py`,\r\n        'text/plain'\r\n      )\r\n\r\n      uiStore.showSuccess('Python export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`Python export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Export session data\r\n  const exportSession = async () => {\r\n    if (!canExport.value) return\r\n\r\n    isExporting.value = true\r\n    exportProgress.value = 10\r\n\r\n    try {\r\n      const sessionData = {\r\n        metadata: {\r\n          version: \"2.0\",\r\n          timestamp: new Date().toISOString(),\r\n          source: \"VectoVerse Session Export\"\r\n        },\r\n        config: {\r\n          dimensions: vectorStore.vectors[0]?.components.length || 0,\r\n          numVectors: vectorStore.vectors.length,\r\n          theme: localStorage.getItem('vectoverse-theme') || 'dark'\r\n        },\r\n        vectors: vectorStore.vectors.map(v => ({\r\n          id: v.id,\r\n          components: v.components,\r\n          position: { x: v.x || 0, y: v.y || 0 },\r\n          type: v.type || 'generated',\r\n          customColor: v.customColor,\r\n          scale: v.scale\r\n        })),\r\n        inputVector: vectorStore.inputVector ? {\r\n          components: vectorStore.inputVector.components,\r\n          position: { x: vectorStore.inputVector.x || 0, y: vectorStore.inputVector.y || 0 }\r\n        } : null,\r\n        selectedVectorId: vectorStore.selectedVectorId\r\n      }\r\n\r\n      exportProgress.value = 80\r\n      \r\n      downloadFile(\r\n        JSON.stringify(sessionData, null, 2),\r\n        `vectoverse-session-${getTimestamp()}.json`,\r\n        'application/json'\r\n      )\r\n\r\n      uiStore.showSuccess('Session export completed successfully!')\r\n    } catch (error) {\r\n      uiStore.showError(`Session export failed: ${error.message}`)\r\n    } finally {\r\n      isExporting.value = false\r\n      exportProgress.value = 0\r\n    }\r\n  }\r\n\r\n  // Helper functions\r\n  const calculateMagnitude = (components) => {\r\n    return Math.sqrt(components.reduce((sum, c) => sum + c * c, 0))\r\n  }\r\n\r\n  const calculateEntropy = (components) => {\r\n    const total = components.reduce((sum, c) => sum + Math.abs(c), 0)\r\n    if (total === 0) return 0\r\n    \r\n    const probabilities = components.map(c => Math.abs(c) / total)\r\n    return -probabilities.reduce((sum, p) => {\r\n      return p > 0 ? sum + p * Math.log2(p) : sum\r\n    }, 0)\r\n  }\r\n\r\n  const cosineSimilarity = (v1, v2) => {\r\n    const dotProduct = v1.reduce((sum, a, i) => sum + a * v2[i], 0)\r\n    const mag1 = calculateMagnitude(v1)\r\n    const mag2 = calculateMagnitude(v2)\r\n    \r\n    if (mag1 === 0 || mag2 === 0) return 0\r\n    return dotProduct / (mag1 * mag2)\r\n  }\r\n\r\n  const generateAnalysisData = () => {\r\n    const vectors = vectorStore.vectors\r\n    \r\n    if (vectors.length === 0) {\r\n      return {\r\n        averageMagnitude: 0,\r\n        averageEntropy: 0,\r\n        vectorCount: 0,\r\n        dimensions: 0\r\n      }\r\n    }\r\n    \r\n    const magnitudes = vectors.map(v => calculateMagnitude(v.components))\r\n    const entropies = vectors.map(v => calculateEntropy(v.components))\r\n    \r\n    return {\r\n      vectorCount: vectors.length,\r\n      dimensions: vectors[0].components.length,\r\n      averageMagnitude: magnitudes.reduce((sum, mag) => sum + mag, 0) / magnitudes.length,\r\n      averageEntropy: entropies.reduce((sum, ent) => sum + ent, 0) / entropies.length,\r\n      magnitudes: magnitudes,\r\n      entropies: entropies\r\n    }\r\n  }\r\n\r\n  const generateLaTeXVectorTable = (vectors) => {\r\n    if (vectors.length === 0) return ''\r\n    \r\n    const maxComponents = Math.min(5, vectors[0].components.length)\r\n    \r\n    let table = '\\\\begin{table}[h]\\n\\\\centering\\n\\\\begin{tabular}{l'\r\n    for (let i = 0; i < maxComponents; i++) {\r\n      table += 'r'\r\n    }\r\n    table += '}\\n\\\\toprule\\nVector'\r\n    \r\n    for (let i = 0; i < maxComponents; i++) {\r\n      table += ` & $v_{${i+1}}$`\r\n    }\r\n    table += ' \\\\\\\\\\n\\\\midrule\\n'\r\n    \r\n    vectors.forEach((vector, idx) => {\r\n      table += `Vector ${idx + 1}`\r\n      for (let i = 0; i < maxComponents; i++) {\r\n        table += ` & ${vector.components[i].toFixed(3)}`\r\n      }\r\n      table += ' \\\\\\\\\\n'\r\n    })\r\n    \r\n    table += '\\\\bottomrule\\n\\\\end{tabular}\\n\\\\caption{Vector components (first 5 dimensions)}\\n\\\\end{table}'\r\n    \r\n    return table\r\n  }\r\n\r\n  const getSVGStyles = () => {\r\n    return `\r\n      .vector-atom { stroke: #667eea; stroke-width: 2; fill-opacity: 0.8; }\r\n      .force-line { stroke-opacity: 0.6; }\r\n      .vector-label { font-family: Arial, sans-serif; font-size: 12px; fill: white; }\r\n      .periodic-element { cursor: pointer; }\r\n      .periodic-element:hover { filter: brightness(1.2); }\r\n    `\r\n  }\r\n\r\n  const getTimestamp = () => {\r\n    return new Date().toISOString().slice(0, 19).replace(/[:]/g, '-')\r\n  }\r\n\r\n  const downloadFile = (content, filename, mimeType) => {\r\n    const blob = new Blob([content], { type: mimeType })\r\n    const url = URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = filename\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    document.body.removeChild(a)\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n  return {\r\n    // State\r\n    isExporting,\r\n    exportProgress,\r\n    formats,\r\n    \r\n    // Computed\r\n    hasVectors,\r\n    canExport,\r\n    \r\n    // Methods\r\n    exportJSON,\r\n    exportCSV,\r\n    exportSimilarityMatrix,\r\n    exportSVG,\r\n    exportPNG,\r\n    exportLaTeX,\r\n    exportPython,\r\n    exportSession,\r\n    \r\n    // Helper methods\r\n    calculateMagnitude,\r\n    calculateEntropy,\r\n    cosineSimilarity,\r\n    generateAnalysisData,\r\n    downloadFile\r\n  }\r\n} ","import { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nexport function useErrorHandler() {\r\n  const uiStore = useUIStore()\r\n  const errorLog = ref([])\r\n\r\n  const setupGlobalErrorHandling = () => {\r\n    window.addEventListener('error', (event) => {\r\n      handleError(event.error, {\r\n        context: 'Global JavaScript Error',\r\n        filename: event.filename,\r\n        lineno: event.lineno,\r\n        colno: event.colno\r\n      })\r\n    })\r\n\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      handleError(event.reason, {\r\n        context: 'Unhandled Promise Rejection'\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleError = (error, context = {}) => {\r\n    const errorInfo = {\r\n      id: `err-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`,\r\n      timestamp: new Date().toISOString(),\r\n      message: error?.message || 'An unknown error occurred.',\r\n      stack: error?.stack || '',\r\n      context: context,\r\n      severity: classifyError(error)\r\n    }\r\n\r\n    errorLog.value.push(errorInfo)\r\n    if (errorLog.value.length > 50) {\r\n      errorLog.value.shift()\r\n    }\r\n\r\n    logErrorToConsole(errorInfo)\r\n    \r\n    const friendlyMessage = getFriendlyMessage(errorInfo)\r\n    const actions = getSuggestedActions(errorInfo)\r\n\r\n    uiStore.showError(friendlyMessage, actions)\r\n  }\r\n\r\n  const classifyError = (error) => {\r\n    if (!error) return 'unknown';\r\n    const message = (error.message || '').toLowerCase();\r\n    if (message.includes('network') || message.includes('fetch')) return 'network';\r\n    if (message.includes('permission') || message.includes('denied')) return 'permission';\r\n    if (message.includes('memory') || message.includes('allocation')) return 'memory';\r\n    if (message.includes('invalid') || message.includes('malformed')) return 'validation';\r\n    if (message.includes('timeout')) return 'timeout';\r\n    return 'application';\r\n  }\r\n\r\n  const getFriendlyMessage = (errorInfo) => {\r\n    switch (errorInfo.severity) {\r\n      case 'network':\r\n        return 'A network error occurred. Please check your connection.';\r\n      case 'permission':\r\n        return 'Permission denied. The application may not have the required permissions to perform this action.';\r\n      case 'memory':\r\n        return 'The application ran out of memory. Try reducing the number of vectors or reloading.';\r\n      case 'validation':\r\n        return 'An invalid data format was encountered. Please check your inputs.';\r\n      case 'timeout':\r\n        return 'The operation timed out. Please try again.';\r\n      default:\r\n        return errorInfo.message || 'An unexpected error occurred.';\r\n    }\r\n  }\r\n\r\n  const getSuggestedActions = (errorInfo) => {\r\n    const actions = [];\r\n    switch (errorInfo.severity) {\r\n      case 'network':\r\n        actions.push({ text: 'Retry', action: () => window.location.reload() });\r\n        break;\r\n      case 'memory':\r\n        actions.push({ text: 'Reload', action: () => window.location.reload() });\r\n        break;\r\n      default:\r\n        actions.push({ text: 'Reload App', action: () => window.location.reload() });\r\n    }\r\n    return actions;\r\n  }\r\n\r\n  const logErrorToConsole = (errorInfo) => {\r\n    if (import.meta.env.DEV) {\r\n      console.group(`ðŸš¨ VectoVerse Error: ${errorInfo.id}`);\r\n      console.error('Message:', errorInfo.message);\r\n      console.log('Severity:', errorInfo.severity);\r\n      console.log('Context:', errorInfo.context);\r\n      console.log('Timestamp:', errorInfo.timestamp);\r\n      console.log('Stack Trace:', errorInfo.stack);\r\n      console.groupEnd();\r\n    }\r\n  }\r\n  \r\n  const wrapAsync = async (fn, context = {}) => {\r\n    try {\r\n      return await fn();\r\n    } catch (error) {\r\n      handleError(error, context);\r\n      // Re-throw so the caller knows it failed.\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  onMounted(() => {\r\n    setupGlobalErrorHandling()\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    // In a real SPA, you might want to remove the listeners,\r\n    // but for this app, they can live for the lifetime of the page.\r\n  })\r\n\r\n  return {\r\n    errorLog,\r\n    handleError,\r\n    wrapAsync,\r\n  }\r\n} ","import { ref, onMounted } from 'vue'\r\n\r\nexport function useMathRenderer() {\r\n  const isKaTeXReady = ref(false)\r\n\r\n  const waitForKaTeX = () => {\r\n    if (typeof window.katex !== 'undefined' && typeof window.renderMathInElement !== 'undefined') {\r\n      isKaTeXReady.value = true\r\n    } else {\r\n      setTimeout(waitForKaTeX, 100)\r\n    }\r\n  }\r\n\r\n  onMounted(waitForKaTeX)\r\n\r\n  const renderMath = (element, options = {}) => {\r\n    if (!isKaTeXReady.value || !element) return\r\n\r\n    const defaultOptions = {\r\n      delimiters: [\r\n        { left: '$$', right: '$$', display: true },\r\n        { left: '$', right: '$', display: false },\r\n        { left: '\\\\(', right: '\\\\)', display: false },\r\n        { left: '\\\\[', right: '\\\\]', display: true }\r\n      ],\r\n      throwOnError: false,\r\n      errorColor: '#cc0000',\r\n      macros: {\r\n        \"\\\\vec\": \"\\\\mathbf{#1}\",\r\n        \"\\\\norm\": \"\\\\left\\\\|#1\\\\right\\\\|\",\r\n        \"\\\\dot\": \"\\\\cdot\",\r\n        \"\\\\similarity\": \"\\\\text{sim}(#1, #2)\",\r\n        \"\\\\cosinesim\": \"\\\\cos\\\\theta_{#1,#2}\"\r\n      }\r\n    }\r\n\r\n    try {\r\n      window.renderMathInElement(element, { ...defaultOptions, ...options })\r\n    } catch (e) {\r\n      console.warn('KaTeX rendering error:', e)\r\n    }\r\n  }\r\n\r\n  const createVectorNotation = (components) => {\r\n    if (!Array.isArray(components)) return ''\r\n    // Limit to 10 components for display\r\n    const limitedComponents = components.slice(0, 10);\r\n    let componentStr = limitedComponents.map(c => c.toFixed(2)).join(' \\\\\\\\ ');\r\n    if (components.length > 10) {\r\n        componentStr += ' \\\\\\\\ \\\\vdots';\r\n    }\r\n    return `\\\\vec{v} = \\\\begin{pmatrix} ${componentStr} \\\\end{pmatrix}`;\r\n  }\r\n\r\n  const createMagnitudeFormula = (val) => `\\\\norm{\\\\vec{v}} = ${val.toFixed(3)}`\r\n  const createEntropyFormula = (val) => `H(\\\\vec{v}) = ${val.toFixed(3)}`\r\n  const createCosineSimilarityFormula = () => `\\\\text{sim}(\\\\vec{a}, \\\\vec{b}) = \\\\frac{\\\\vec{a} \\\\cdot \\\\vec{b}}{\\\\norm{\\\\vec{a}} \\\\norm{\\\\vec{b}}}`\r\n  const createEuclideanDistanceFormula = () => `d(\\\\vec{a}, \\\\vec{b}) = \\\\sqrt{\\\\sum_{i=1}^{n} (a_i - b_i)^2}`\r\n\r\n  return {\r\n    isKaTeXReady,\r\n    renderMath,\r\n    createVectorNotation,\r\n    createMagnitudeFormula,\r\n    createEntropyFormula,\r\n    createCosineSimilarityFormula,\r\n    createEuclideanDistanceFormula,\r\n  }\r\n} ","import { ref, reactive, watch, computed, onMounted } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useConfigStore } from '../stores/configStore'\r\n\r\nexport function useControls() {\r\n  const vectorStore = useVectorStore()\r\n  const configStore = useConfigStore()\r\n\r\n  const controls = reactive({\r\n    // New controls for vector generation\r\n    numVectors: { label: 'Number of Vectors', value: configStore.numVectors, type: 'slider', min: 1, max: 100, group: 'Generation' },\r\n    dimensions: { label: 'Vector Dimensions', value: configStore.dimensions, type: 'slider', min: 2, max: 50, group: 'Generation' },\r\n\r\n    // Visualization (now with icons)\r\n    showForces: { label: 'Show Forces', value: true, type: 'checkbox', group: 'Visualization', icon: 'ðŸ’¨' },\r\n    showLabels: { label: 'Show Labels', value: false, type: 'checkbox', group: 'Visualization', icon: 'ðŸ·ï¸' },\r\n    showGrid: { label: 'Show Grid', value: true, type: 'checkbox', group: 'Visualization', icon: 'ðŸ' },\r\n\r\n    // Forces\r\n    forceStrength: { label: 'Force Strength', value: 50, type: 'slider', min: 1, max: 200, group: 'Forces' },\r\n    linkDistance: { label: 'Link Distance', value: 100, type: 'slider', min: 10, max: 300, group: 'Forces' },\r\n    charge: { label: 'Charge', value: -30, type: 'slider', min: -100, max: 10, group: 'Forces' },\r\n\r\n    // Aesthetics\r\n    particleSize: { label: 'Particle Size', value: 5, type: 'slider', min: 1, max: 20, group: 'Aesthetics' },\r\n    rainbowMode: { label: 'Rainbow Mode', value: false, type: 'checkbox', group: 'Aesthetics', icon: 'ðŸŒˆ' },\r\n\r\n    // Neural Net Mode\r\n    neuronMode: { label: 'Neuron Mode (1st vector is input)', value: false, type: 'checkbox', group: 'Mode', icon: 'ðŸ§ ' },\r\n    activationFunction: { label: 'Activation Function', value: vectorStore.activationFunction, type: 'dropdown', options: vectorStore.availableActivationFunctions, group: 'Mode' },\r\n  })\r\n\r\n  // History for Undo/Redo\r\n  const history = ref([])\r\n  const historyIndex = ref(-1)\r\n\r\n  const recordHistory = (key, oldValue, newValue) => {\r\n    // If we are not at the end of the history, slice it\r\n    if (historyIndex.value < history.value.length - 1) {\r\n      history.value = history.value.slice(0, historyIndex.value + 1)\r\n    }\r\n    history.value.push({ key, oldValue, newValue });\r\n    historyIndex.value++;\r\n     // Limit history size\r\n    if (history.value.length > 50) {\r\n        history.value.shift();\r\n        historyIndex.value--;\r\n    }\r\n  }\r\n\r\n  const undo = () => {\r\n    if (historyIndex.value >= 0) {\r\n      const lastChange = history.value[historyIndex.value];\r\n      controls[lastChange.key].value = lastChange.oldValue;\r\n      historyIndex.value--;\r\n    }\r\n  }\r\n\r\n  const redo = () => {\r\n    if (historyIndex.value < history.value.length - 1) {\r\n      historyIndex.value++;\r\n      const nextChange = history.value[historyIndex.value];\r\n      controls[nextChange.key].value = nextChange.newValue;\r\n    }\r\n  }\r\n\r\n  // Presets\r\n  const presets = ref([])\r\n\r\n  const loadPresets = () => {\r\n    const savedPresets = localStorage.getItem('vectoverse_presets')\r\n    if (savedPresets) {\r\n      presets.value = JSON.parse(savedPresets)\r\n    } else {\r\n      // Add some default presets if none are saved\r\n      presets.value = [\r\n        { name: 'Default', values: getCurrentControlValues() },\r\n        { name: 'Focused Work', values: { ...getCurrentControlValues(), forceStrength: 20, linkDistance: 50 } },\r\n        { name: 'Chaos', values: { ...getCurrentControlValues(), forceStrength: 200, charge: 10 } },\r\n      ]\r\n    }\r\n  }\r\n\r\n  const savePreset = (name) => {\r\n    if (!name) return\r\n    const newPreset = { name, values: getCurrentControlValues() }\r\n    const existingIndex = presets.value.findIndex(p => p.name === name)\r\n    if (existingIndex > -1) {\r\n      presets.value[existingIndex] = newPreset\r\n    } else {\r\n      presets.value.push(newPreset)\r\n    }\r\n    persistPresets()\r\n  }\r\n\r\n  const loadPreset = (name) => {\r\n    const preset = presets.value.find(p => p.name === name)\r\n    if (preset) {\r\n      for (const key in preset.values) {\r\n        if (controls[key]) {\r\n          controls[key].value = preset.values[key]\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  const deletePreset = (name) => {\r\n      presets.value = presets.value.filter(p => p.name !== name);\r\n      persistPresets();\r\n  }\r\n\r\n  const persistPresets = () => {\r\n    localStorage.setItem('vectoverse_presets', JSON.stringify(presets.value))\r\n  }\r\n\r\n  const getCurrentControlValues = () => {\r\n    return Object.entries(controls).reduce((acc, [key, config]) => {\r\n      acc[key] = config.value\r\n      return acc\r\n    }, {})\r\n  }\r\n  \r\n  onMounted(loadPresets)\r\n\r\n  // Watchers for individual controls\r\n  watch(() => controls.numVectors.value, (newValue) => {\r\n    configStore.updateConfig('numVectors', newValue)\r\n    vectorStore.generateVectors() // Regenerate vectors when number changes\r\n  })\r\n\r\n  watch(() => controls.dimensions.value, (newValue) => {\r\n    configStore.updateConfig('dimensions', newValue)\r\n    vectorStore.generateVectors() // Regenerate vectors when dimensions change\r\n  })\r\n\r\n  watch(() => controls.neuronMode.value, (newValue, oldValue) => {\r\n    recordHistory('neuronMode', oldValue, newValue)\r\n    configStore.updateConfig('neuronMode', newValue)\r\n  })\r\n\r\n  watch(() => controls.activationFunction.value, (newValue) => {\r\n    vectorStore.setActivationFunction(newValue)\r\n  })\r\n\r\n  // Generic watcher for other controls\r\n  const otherControlKeys = ['showForces', 'showLabels', 'showGrid', 'forceStrength', 'linkDistance', 'charge', 'particleSize', 'rainbowMode']\r\n  otherControlKeys.forEach(key => {\r\n    watch(() => controls[key].value, (newValue, oldValue) => {\r\n      recordHistory(key, oldValue, newValue)\r\n      // Update the config store for visualization-related changes\r\n      configStore.updateConfig(key, newValue)\r\n    })\r\n  })\r\n\r\n  // Method to get controls by group\r\n  const getControlsByGroup = (group) => {\r\n    return Object.entries(controls)\r\n      .filter(([key, config]) => config.group === group)\r\n      .reduce((obj, [key, config]) => {\r\n        obj[key] = config;\r\n        return obj;\r\n      }, {});\r\n  }\r\n\r\n  return {\r\n    controls,\r\n    getControlsByGroup,\r\n    undo,\r\n    redo,\r\n    canUndo: computed(() => historyIndex.value > -1),\r\n    canRedo: computed(() => historyIndex.value < history.value.length - 1),\r\n    presets,\r\n    savePreset,\r\n    loadPreset,\r\n    deletePreset,\r\n  }\r\n} ","import { ref } from 'vue'\r\nimport { useVectorStore } from '@/stores/vectorStore'\r\nimport { useUIStore } from '@/stores/uiStore'\r\n\r\nexport function useAppActions() {\r\n    const vectorStore = useVectorStore()\r\n    const uiStore = useUIStore()\r\n\r\n    const exportData = () => {\r\n        try {\r\n            const data = {\r\n                vectors: vectorStore.vectors,\r\n                config: {\r\n                    dimensions: vectorStore.dimensions,\r\n                    forceType: vectorStore.forceType,\r\n                    activationFunction: vectorStore.activationFunction\r\n                },\r\n                timestamp: new Date().toISOString()\r\n            }\r\n            \r\n            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\r\n            const url = URL.createObjectURL(blob)\r\n            const link = document.createElement('a')\r\n            link.href = url\r\n            link.download = `vectoverse-export-${Date.now()}.json`\r\n            document.body.appendChild(link)\r\n            link.click()\r\n            document.body.removeChild(link)\r\n            URL.revokeObjectURL(url)\r\n            \r\n            uiStore.showSuccess('Data exported successfully')\r\n        } catch (error) {\r\n            console.error('Export error:', error)\r\n            uiStore.showError('Failed to export data')\r\n        }\r\n    }\r\n\r\n    const toggleFullscreen = () => {\r\n        if (!document.fullscreenElement) {\r\n            document.documentElement.requestFullscreen()\r\n        } else {\r\n            document.exitFullscreen()\r\n        }\r\n    }\r\n\r\n    return {\r\n        exportData,\r\n        toggleFullscreen\r\n    }\r\n} ","<template>\r\n  <div class=\"control-wrapper\" :class=\"[`control-${config.type}`, { 'has-icon': config.icon }]\">\r\n    \r\n    <!-- Icon Toggle Button -->\r\n    <template v-if=\"config.type === 'checkbox' && config.icon\">\r\n      <button \r\n        class=\"icon-toggle\"\r\n        :class=\"{ active: modelValue }\"\r\n        :title=\"config.label\"\r\n        @click=\"$emit('update:modelValue', !modelValue)\"\r\n      >\r\n        {{ config.icon }}\r\n      </button>\r\n    </template>\r\n\r\n    <!-- Standard Controls -->\r\n    <template v-else>\r\n      <label :for=\"controlId\" v-if=\"config.label\">{{ config.label }}</label>\r\n      <div class=\"control-input\">\r\n        <template v-if=\"config.type === 'slider'\">\r\n          <input\r\n            :id=\"controlId\"\r\n            type=\"range\"\r\n            :min=\"config.min\"\r\n            :max=\"config.max\"\r\n            :step=\"config.step || 1\"\r\n            :value=\"modelValue\"\r\n            @input=\"$emit('update:modelValue', parseFloat($event.target.value))\"\r\n          />\r\n          <span class=\"slider-value\">{{ modelValue }}</span>\r\n        </template>\r\n\r\n        <template v-if=\"config.type === 'checkbox' && !config.icon\">\r\n          <label class=\"switch\">\r\n            <input\r\n              :id=\"controlId\"\r\n              type=\"checkbox\"\r\n              :checked=\"modelValue\"\r\n              @change=\"$emit('update:modelValue', $event.target.checked)\"\r\n            />\r\n            <span class=\"slider round\"></span>\r\n          </label>\r\n        </template>\r\n        \r\n        <template v-if=\"config.type === 'button'\">\r\n          <button :id=\"controlId\" @click=\"$emit('click')\">\r\n            {{ config.label }}\r\n          </button>\r\n        </template>\r\n        \r\n        <template v-if=\"config.type === 'dropdown'\">\r\n          <select \r\n              :id=\"controlId\" \r\n              :value=\"modelValue\" \r\n              @change=\"$emit('update:modelValue', $event.target.value)\"\r\n          >\r\n            <option v-for=\"option in config.options\" :key=\"option\" :value=\"option\">\r\n              {{ option }}\r\n            </option>\r\n          </select>\r\n        </template>\r\n\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  config: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  modelValue: {\r\n    required: true\r\n  },\r\n  id: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\ndefineEmits(['update:modelValue', 'click'])\r\n\r\nconst controlId = computed(() => `control-${props.id}`)\r\n</script>\r\n\r\n<style scoped>\r\n.control-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 6px;\r\n}\r\n.control-wrapper.has-icon {\r\n  padding: 0;\r\n  justify-content: center;\r\n}\r\n\r\nlabel {\r\n  font-size: 0.85em;\r\n  color: var(--text-secondary);\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.control-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n/* Icon Toggle Button */\r\n.icon-toggle {\r\n  background: transparent;\r\n  border: 1px solid transparent;\r\n  color: var(--text-secondary);\r\n  padding: 0.4rem 0.6rem;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  font-size: 1.1rem;\r\n}\r\n.icon-toggle:hover {\r\n  border-color: var(--border-color-soft);\r\n  color: var(--text-primary);\r\n}\r\n.icon-toggle.active {\r\n  background-color: var(--primary-light);\r\n  color: var(--primary);\r\n  box-shadow: 0 0 10px 0 var(--primary-light);\r\n}\r\n\r\n/* Slider */\r\n.control-slider input[type=\"range\"] {\r\n  width: 100px;\r\n}\r\n.slider-value {\r\n  font-weight: bold;\r\n  font-size: 0.85em;\r\n  width: 28px;\r\n  text-align: right;\r\n}\r\n\r\n/* Checkbox (Switch) */\r\n.switch {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 44px;\r\n  height: 24px;\r\n}\r\n.switch input { \r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n.slider {\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: #4a4a4a;\r\n  transition: .4s;\r\n}\r\n.slider:before {\r\n  position: absolute;\r\n  content: \"\";\r\n  height: 18px;\r\n  width: 18px;\r\n  left: 3px;\r\n  bottom: 3px;\r\n  background-color: white;\r\n  transition: .4s;\r\n}\r\ninput:checked + .slider {\r\n  background-color: var(--primary);\r\n}\r\ninput:checked + .slider:before {\r\n  transform: translateX(20px);\r\n}\r\n.slider.round {\r\n  border-radius: 24px;\r\n}\r\n.slider.round:before {\r\n  border-radius: 50%;\r\n}\r\n</style> ","<template>\r\n  <header class=\"app-header\">\r\n    <div class=\"header-branding\">\r\n      <h1 class=\"app-title\">VectoVerse</h1>\r\n    </div>\r\n\r\n    <div class=\"controls-toolbar\">\r\n      <!-- Action Buttons -->\r\n      <div class=\"toolbar-section action-buttons\">\r\n        <button @click=\"vectorStore.generateVectors()\" title=\"Generate new vectors (G)\">ðŸŽ²</button>\r\n        <button @click=\"uiStore.showAddVectorModal()\" title=\"Add a custom vector (A)\">âž•</button>\r\n        <button @click=\"uiStore.showAnalysisModal()\" title=\"Run analysis (R)\">ðŸ“Š</button>\r\n        <button @click=\"appActions.exportData()\" title=\"Export data (E)\">ðŸ’¾</button>\r\n        <button @click=\"appActions.toggleFullscreen()\" title=\"Toggle fullscreen (F)\">ðŸ”</button>\r\n      </div>\r\n\r\n      <!-- Main Controls -->\r\n      <div class=\"toolbar-section main-controls\">\r\n        <Control v-for=\"(config, key) in controls.controls\" :key=\"key\" :id=\"key\" :config=\"config\" v-model=\"config.value\" />\r\n      </div>\r\n\r\n      <!-- History -->\r\n      <div class=\"toolbar-section history-controls\">\r\n        <button @click=\"controls.undo()\" :disabled=\"!controls.canUndo.value\" title=\"Undo (Ctrl+Z)\">â†©ï¸</button>\r\n        <button @click=\"controls.redo()\" :disabled=\"!controls.canRedo.value\" title=\"Redo (Ctrl+Y)\">â†ªï¸</button>\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script setup>\r\nimport { useControls } from '../composables/useControls'\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useAppActions } from '../composables/useAppActions'\r\nimport Control from './Control.vue'\r\n\r\nconst controls = useControls()\r\nconst uiStore = useUIStore()\r\nconst vectorStore = useVectorStore()\r\nconst appActions = useAppActions()\r\n</script>\r\n\r\n<style scoped>\r\n.app-header {\r\n  grid-area: header;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 0.75rem;\r\n  background-color: var(--sidebar-bg);\r\n  border-bottom: 1px solid var(--border-color);\r\n  height: 50px;\r\n}\r\n\r\n.header-branding {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.app-title {\r\n  font-size: 1.3rem;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  margin: 0;\r\n}\r\n\r\n.controls-toolbar {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n}\r\n\r\n.toolbar-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n}\r\n\r\n.main-controls {\r\n  flex-grow: 1;\r\n}\r\n\r\n.action-buttons button,\r\n.history-controls button {\r\n  background: transparent;\r\n  border: none;\r\n  color: var(--text-secondary);\r\n  padding: 0 0.4rem;\r\n  height: 100%;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  font-size: 1.1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.action-buttons button:hover,\r\n.history-controls button:hover:not(:disabled) {\r\n  color: var(--primary);\r\n  background-color: var(--bg-secondary);\r\n}\r\n\r\n.history-controls button:disabled {\r\n  opacity: 0.4;\r\n  cursor: not-allowed;\r\n}\r\n</style> ","export const Constants = {\r\n  COLORS: {\r\n    POSITIVE: '#4CAF50', // Green\r\n    NEGATIVE: '#FF5722', // Orange\r\n    NEUTRAL: '#888888',  // Grey\r\n    INPUT: '#FFD700',     // Gold\r\n    UPLOADED: '#2196F3', // Blue\r\n    SELECTION: '#FFD700' // Gold\r\n  },\r\n  MIN_VECTOR_RADIUS: 15,\r\n  MAX_VECTOR_RADIUS: 40,\r\n}; ","import { reactive, computed } from 'vue';\r\nimport { useVectorStore } from '@/stores/vectorStore';\r\nimport { vectorOperations } from '@/utils/vectorUtils';\r\n\r\nexport function useForceCalculator() {\r\n  const vectorStore = useVectorStore();\r\n\r\n  const state = reactive({\r\n    epsilon: 0.01,\r\n    temperature: 1.0,\r\n  });\r\n\r\n  // --- Core Physics & Math Functions ---\r\n  const dotProduct = (v1, v2) => vectorOperations.dotProduct(v1.components, v2.components);\r\n  const magnitude = (v) => vectorOperations.magnitude(v.components);\r\n  const distanceSquared = (v1, v2) => {\r\n      let sum = 0;\r\n      for (let i = 0; i < v1.components.length; i++) {\r\n          const diff = v1.components[i] - v2.components[i];\r\n          sum += diff * diff;\r\n      }\r\n      return sum;\r\n  };\r\n  const euclideanDistance = (v1, v2) => Math.sqrt(distanceSquared(v1, v2));\r\n  const manhattanDistance = (v1, v2) => v1.components.reduce((sum, c, i) => sum + Math.abs(c - v2.components[i]), 0);\r\n  const cosineSimilarity = (v1, v2) => {\r\n      const mag1 = magnitude(v1);\r\n      const mag2 = magnitude(v2);\r\n      if (mag1 === 0 || mag2 === 0) return 0;\r\n      return dotProduct(v1, v2) / (mag1 * mag2);\r\n  };\r\n\r\n  // --- Force Calculation ---\r\n  function calculateForces(vectors, forceType) {\r\n    const forces = [];\r\n    if (vectors.length < 2) return forces;\r\n\r\n    for (let i = 0; i < vectors.length; i++) {\r\n        for (let j = i + 1; j < vectors.length; j++) {\r\n            const v1 = vectors[i];\r\n            const v2 = vectors[j];\r\n            const force = calculateSelectedMetric(v1, v2, forceType);\r\n            forces.push({\r\n                x1: v1.x, y1: v1.y,\r\n                x2: v2.x, y2: v2.y,\r\n                force: force,\r\n                type: 'normal',\r\n                forceType: forceType\r\n            });\r\n        }\r\n    }\r\n    return forces;\r\n  }\r\n\r\n  function calculateSelectedMetric(v1, v2, metricType) {\r\n    switch (metricType) {\r\n        case 'gravity':\r\n            return (magnitude(v1) * magnitude(v2)) / (distanceSquared(v1, v2) + state.epsilon);\r\n        case 'repulsion':\r\n             return 1 / (distanceSquared(v1, v2) + state.epsilon);\r\n        case 'cosine':\r\n            return Math.abs(cosineSimilarity(v1, v2));\r\n        case 'correlation':\r\n            return Math.abs(vectorOperations.correlation(v1.components, v2.components));\r\n        case 'euclidean':\r\n            return 1 / (1 + euclideanDistance(v1, v2));\r\n        case 'manhattan':\r\n            return 1 / (1 + manhattanDistance(v1, v2));\r\n        case 'resonance':\r\n        default:\r\n            const alignment = Math.pow(dotProduct(v1, v2), 2);\r\n            const proximity = distanceSquared(v1, v2) + state.epsilon;\r\n            return alignment / proximity;\r\n    }\r\n  }\r\n\r\n  // --- Neural & Activation ---\r\n  function applyActivation(value, type = vectorStore.activationFunction) {\r\n      // Logic from EnhancedForceCalculator\r\n  }\r\n\r\n  // --- Comprehensive Analysis ---\r\n  function getEnhancedVectorAnalysis(vectorId) {\r\n      const vector = vectorStore.vectors.find(v => v.id === vectorId);\r\n      if (!vector) return null;\r\n      // Combine stats from both old calculators\r\n  }\r\n\r\n  return {\r\n    state,\r\n    calculateForces,\r\n    getEnhancedVectorAnalysis,\r\n    applyActivation,\r\n    // Expose other specific metrics if needed by components\r\n    cosineSimilarity,\r\n    euclideanDistance,\r\n    manhattanDistance\r\n  };\r\n} ","<template>\r\n  <div ref=\"container\" class=\"vector-renderer-container\">\r\n    <svg ref=\"svgElement\"></svg>\r\n    <div ref=\"tooltip\" class=\"renderer-tooltip\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch, nextTick, onUnmounted } from 'vue';\r\nimport * as d3 from 'd3';\r\nimport { useVectorStore } from '@/stores/vectorStore';\r\nimport { useConfigStore } from '@/stores/configStore';\r\nimport { vectorOperations } from '@/utils/vectorUtils';\r\nimport { Constants } from '@/utils/Constants';\r\nimport { useForceCalculator } from '@/composables/useForceCalculator';\r\n// Assuming composables exist, if not, they would need to be created or logic integrated.\r\n// import { useAnimationEngine } from '@/composables/useAnimationEngine';\r\n\r\nconst props = defineProps({\r\n  analysisResult: {\r\n    type: Object,\r\n    default: null,\r\n  },\r\n});\r\n\r\nconst vectorStore = useVectorStore();\r\nconst configStore = useConfigStore();\r\nconst forceCalculator = useForceCalculator();\r\n// const forceCalculator = useForceCalculator(); // Assuming this provides calculation methods\r\n\r\nconst container = ref(null);\r\nconst svgElement = ref(null);\r\nconst tooltip = ref(null);\r\nlet svg;\r\n\r\n// useAnimationEngine(svgElement); // This would set up a simulation if we use one\r\n\r\nonMounted(() => {\r\n  svg = d3.select(svgElement.value);\r\n  \r\n  if (svg.select(\"defs\").empty()) {\r\n    const defs = svg.append(\"defs\");\r\n    const filter = defs.append(\"filter\").attr(\"id\", \"glow\");\r\n    filter.append(\"feGaussianBlur\").attr(\"stdDeviation\", \"3\").attr(\"result\", \"coloredBlur\");\r\n    const feMerge = filter.append(\"feMerge\");\r\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\r\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\r\n  }\r\n\r\n  resize();\r\n  render();\r\n  setupKeyboardNavigation();\r\n});\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('keydown', handleKeyDown);\r\n});\r\n\r\nwatch(() => [configStore.width, configStore.height], resize);\r\nwatch(() => [vectorStore.vectors, vectorStore.selectedVectorId, configStore.showForces, vectorStore.forceType, vectorStore.inputVector], render, { deep: true });\r\nwatch(() => props.analysisResult, handleAnalysisResults);\r\n\r\nfunction resize() {\r\n  if (!svg) return;\r\n  svg.attr(\"width\", configStore.width)\r\n     .attr(\"height\", configStore.height)\r\n     .attr(\"viewBox\", `0 0 ${configStore.width} ${configStore.height}`);\r\n  render();\r\n}\r\n\r\nfunction render() {\r\n  if (!svg) return;\r\n  nextTick(() => {\r\n    svg.selectAll(\".bg-particle\").remove(); // Clear only particles and vectors, not defs\r\n    svg.selectAll(\".vector-atom\").remove();\r\n    svg.selectAll(\".input-vector\").remove();\r\n    svg.selectAll(\".force-line\").remove();\r\n    \r\n    renderBackgroundParticles();\r\n    renderVectors();\r\n    if (configStore.showForces) {\r\n      renderForces();\r\n    }\r\n    if (vectorStore.inputVector) {\r\n      renderInputVector();\r\n    }\r\n    updateVectorSelection();\r\n  });\r\n}\r\n\r\nfunction renderVectors() {\r\n    const vectorGroups = svg.selectAll(\".vector-atom\")\r\n        .data(vectorStore.vectors, d => d.id)\r\n        .join(\"g\")\r\n        .attr(\"class\", \"vector-atom\")\r\n        .attr(\"transform\", d => `translate(${d.x || configStore.width / 2}, ${d.y || configStore.height / 2})`)\r\n        .attr(\"tabindex\", \"0\")\r\n        .attr(\"role\", \"button\")\r\n        .attr(\"aria-label\", d => `Vector ${d.id}, magnitude ${vectorOperations.magnitude(d.components).toFixed(2)}`)\r\n        .on(\"click\", (event, d) => {\r\n            event.stopPropagation();\r\n            vectorStore.selectVector(d.id);\r\n        })\r\n        .on(\"keydown\", (event, d) => {\r\n            if (event.key === 'Enter' || event.key === ' ') {\r\n                event.preventDefault();\r\n                vectorStore.selectVector(d.id);\r\n            }\r\n        });\r\n\r\n    vectorGroups.append(\"circle\")\r\n        .attr(\"r\", d => getVectorRadius(d))\r\n        .attr(\"fill\", \"rgba(255,255,255,0.1)\")\r\n        .attr(\"stroke\", \"rgba(255,255,255,0.5)\")\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"filter\", \"url(#glow)\");\r\n\r\n    vectorGroups.each(function(d) {\r\n        renderDimensionArcs(d3.select(this), d);\r\n    });\r\n\r\n    vectorGroups.append(\"text\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"dominant-baseline\", \"middle\")\r\n        .attr(\"fill\", \"white\")\r\n        .attr(\"font-weight\", \"bold\")\r\n        .attr(\"font-size\", \"14px\")\r\n        .text(d => `V${d.id}`);\r\n}\r\n\r\nfunction renderDimensionArcs(group, vector) {\r\n    const radius = getVectorRadius(vector);\r\n    const angleStep = (2 * Math.PI) / vector.components.length;\r\n    \r\n    vector.components.forEach((component, dimIndex) => {\r\n        const angle = dimIndex * angleStep - Math.PI / 2;\r\n        const intensity = Math.abs(component);\r\n        const segmentRadius = radius * 0.8;\r\n        \r\n        const arc = d3.arc()\r\n            .innerRadius(segmentRadius - 8)\r\n            .outerRadius(segmentRadius - 2)\r\n            .startAngle(angle - angleStep * 0.4)\r\n            .endAngle(angle + angleStep * 0.4);\r\n        \r\n        group.append(\"path\")\r\n            .attr(\"d\", arc)\r\n            .attr(\"fill\", getComponentColor(component))\r\n            .attr(\"opacity\", 0.3 + intensity * 0.7)\r\n            .attr(\"class\", \"dimension-segment\");\r\n    });\r\n}\r\n\r\nfunction renderInputVector() {\r\n    const iv = vectorStore.inputVector;\r\n    if (!iv) return;\r\n\r\n    const inputGroup = svg.selectAll(\".input-vector\")\r\n        .data([iv])\r\n        .join(\"g\")\r\n        .attr(\"class\", \"input-vector\")\r\n        .attr(\"transform\", `translate(${iv.x || configStore.width - 50}, ${iv.y || 50})`);\r\n\r\n    const radius = getVectorRadius(iv);\r\n\r\n    inputGroup.append(\"circle\")\r\n        .attr(\"r\", radius + 10)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", Constants.COLORS.INPUT)\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"opacity\", 0.5)\r\n        .attr(\"class\", \"input-pulse\");\r\n    \r\n    inputGroup.append(\"circle\")\r\n        .attr(\"r\", radius)\r\n        .attr(\"fill\", \"rgba(255,215,0,0.3)\")\r\n        .attr(\"stroke\", Constants.COLORS.INPUT)\r\n        .attr(\"stroke-width\", 3);\r\n\r\n    renderDimensionArcs(inputGroup, iv);\r\n\r\n    inputGroup.append(\"text\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"dominant-baseline\", \"middle\")\r\n        .attr(\"fill\", Constants.COLORS.INPUT)\r\n        .attr(\"font-weight\", \"bold\")\r\n        .attr(\"font-size\", \"16px\")\r\n        .text(\"INPUT\");\r\n}\r\n\r\nfunction getVectorRadius(vector) {\r\n    const magnitude = vectorOperations.magnitude(vector.components);\r\n    const radius = Math.max(Constants.MIN_VECTOR_RADIUS, Math.min(Constants.MAX_VECTOR_RADIUS, magnitude * 25));\r\n    return radius;\r\n}\r\n\r\nfunction getComponentColor(value) {\r\n    if (Math.abs(value) < 0.1) return Constants.COLORS.NEUTRAL;\r\n    return value > 0 ? Constants.COLORS.POSITIVE : Constants.COLORS.NEGATIVE;\r\n}\r\n\r\nfunction updateVectorSelection() {\r\n    svg.selectAll(\".vector-atom\")\r\n        .classed(\"selected\", d => d.id === vectorStore.selectedVectorId);\r\n}\r\n\r\nfunction handleKeyDown(e) {\r\n    if (e.target.closest('.modal-overlay') || e.target.tagName === 'INPUT') return;\r\n            \r\n    const vectors = vectorStore.vectors;\r\n    if (!vectors.length) return;\r\n    \r\n    const currentIndex = vectors.findIndex(v => v.id === vectorStore.selectedVectorId);\r\n    let newIndex = -1;\r\n\r\n    switch(e.key) {\r\n        case 'ArrowRight':\r\n        case 'ArrowDown':\r\n            e.preventDefault();\r\n            newIndex = currentIndex < vectors.length - 1 ? currentIndex + 1 : 0;\r\n            break;\r\n        case 'ArrowLeft':\r\n        case 'ArrowUp':\r\n            e.preventDefault();\r\n            newIndex = currentIndex > 0 ? currentIndex - 1 : vectors.length - 1;\r\n            break;\r\n        case 'Home':\r\n            e.preventDefault();\r\n            newIndex = 0;\r\n            break;\r\n        case 'End':\r\n            e.preventDefault();\r\n            newIndex = vectors.length - 1;\r\n            break;\r\n    }\r\n    \r\n    if (newIndex !== -1) {\r\n        const newVectorId = vectors[newIndex].id;\r\n        vectorStore.selectVector(newVectorId);\r\n        \r\n        // Focus the newly selected element for accessibility\r\n        const vectorElement = svg.selectAll(\".vector-atom\").filter(d => d.id === newVectorId).node();\r\n        if (vectorElement) {\r\n            vectorElement.focus();\r\n        }\r\n    }\r\n}\r\n\r\nfunction setupKeyboardNavigation() {\r\n    document.addEventListener('keydown', handleKeyDown);\r\n}\r\n\r\nfunction renderBackgroundParticles() {\r\n    const particles = d3.range(30).map(() => ({\r\n        x: Math.random() * configStore.width,\r\n        y: Math.random() * configStore.height,\r\n        r: Math.random() * 2 + 1\r\n    }));\r\n    \r\n    svg.selectAll(\".bg-particle\")\r\n        .data(particles)\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"class\", \"bg-particle\")\r\n        .attr(\"cx\", d => d.x)\r\n        .attr(\"cy\", d => d.y)\r\n        .attr(\"r\", d => d.r)\r\n        .style(\"fill\", \"rgba(255,255,255,0.1)\");\r\n}\r\n\r\nfunction renderForces() {\r\n  const forces = forceCalculator.calculateForces(vectorStore.vectors, vectorStore.forceType);\r\n  \r\n  const forceLines = svg.selectAll(\".force-line\")\r\n    .data(forces)\r\n    .join(\"line\")\r\n    .attr(\"class\", \"force-line\")\r\n    .attr(\"x1\", d => d.x1)\r\n    .attr(\"y1\", d => d.y1)\r\n    .attr(\"x2\", d => d.x2)\r\n    .attr(\"y2\", d => d.y2)\r\n    .attr(\"stroke\", d => d.force > 0 ? Constants.COLORS.POSITIVE : Constants.COLORS.NEGATIVE)\r\n    .attr(\"stroke-width\", d => Math.min(5, Math.abs(d.force) * 5))\r\n    .attr(\"opacity\", d => Math.min(0.8, Math.abs(d.force) * 0.8));\r\n}\r\n\r\nfunction showVectorTooltip(event, data) {\r\n    const tt = d3.select(tooltip.value);\r\n    tt.style(\"opacity\", 1)\r\n      .style(\"left\", `${event.pageX + 10}px`)\r\n      .style(\"top\", `${event.pageY}px`)\r\n      .html(`<b>Vector ID: ${data.id}</b><br/>Components: ${data.components.length}`);\r\n}\r\n\r\nfunction hideVectorTooltip() {\r\n    d3.select(tooltip.value).style(\"opacity\", 0);\r\n}\r\n\r\nfunction showForceTooltip(event, data) {\r\n    const tt = d3.select(tooltip.value);\r\n    tt.style(\"opacity\", 1)\r\n      .style(\"left\", `${event.pageX + 10}px`)\r\n      .style(\"top\", `${event.pageY}px`)\r\n      .html(`<b>Force Type: ${data.forceType}</b><br/>Strength: ${data.force.toFixed(4)}`);\r\n}\r\n\r\nfunction hideForceTooltip() {\r\n    d3.select(tooltip.value).style(\"opacity\", 0);\r\n}\r\n\r\nfunction handleAnalysisResults(result) {\r\n    if (!result || !result.type) return;\r\n\r\n    const { data } = result;\r\n    if (result.type === 'kmeans') {\r\n        const colors = d3.scaleOrdinal(d3.schemeCategory10);\r\n        svg.selectAll(\".vector-atom\")\r\n            .each(function(d, i) {\r\n                const clusterId = data.assignments[i];\r\n                d3.select(this).select('circle').style('fill', colors(clusterId));\r\n            });\r\n    } else {\r\n        const xScale = d3.scaleLinear().domain(d3.extent(data, d => d[0])).range([50, configStore.width - 50]);\r\n        const yScale = d3.scaleLinear().domain(d3.extent(data, d => d[1])).range([50, configStore.height - 50]);\r\n\r\n        svg.selectAll(\".vector-atom\")\r\n            .transition().duration(750)\r\n            .attr(\"transform\", (d, i) => {\r\n                // Also update the vector's position in the store if desired\r\n                // vectorStore.updateVectorPosition(d.id, { x: xScale(data[i][0]), y: yScale(data[i][1]) });\r\n                return `translate(${xScale(data[i][0])}, ${yScale(data[i][1])})`\r\n            });\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.renderer-tooltip {\r\n    position: absolute;\r\n    background-color: rgba(0,0,0,0.9);\r\n    color: white;\r\n    padding: 8px 12px;\r\n    border-radius: 6px;\r\n    font-size: 11px;\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    transition: opacity 0.2s;\r\n    z-index: 1000;\r\n    box-shadow: 0 4px 8px rgba(0,0,0,0.3);\r\n}\r\n\r\n.vector-atom {\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  pointer-events: all;\r\n}\r\n\r\n.vector-atom:hover {\r\n  filter: brightness(1.2);\r\n}\r\n\r\n.vector-atom.selected {\r\n  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));\r\n}\r\n\r\n.vector-atom.selected circle {\r\n  stroke: rgba(255, 255, 255, 0.9) !important;\r\n  stroke-width: 3 !important;\r\n}\r\n\r\n.input-pulse {\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    transform: scale(1);\r\n    opacity: 0.5;\r\n  }\r\n  70% {\r\n    transform: scale(2);\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n    opacity: 0;\r\n  }\r\n}\r\n</style> ","import { ref } from 'vue';\r\n\r\nconst bus = ref(new Map());\r\n\r\nexport function useEventBus() {\r\n  const on = (event, callback) => {\r\n    if (!bus.value.has(event)) {\r\n      bus.value.set(event, []);\r\n    }\r\n    bus.value.get(event).push(callback);\r\n  };\r\n\r\n  const off = (event, callback) => {\r\n    if (bus.value.has(event)) {\r\n      const callbacks = bus.value.get(event);\r\n      const index = callbacks.indexOf(callback);\r\n      if (index > -1) {\r\n        callbacks.splice(index, 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const emit = (event, ...args) => {\r\n    if (bus.value.has(event)) {\r\n      bus.value.get(event).forEach(callback => {\r\n        callback(...args);\r\n      });\r\n    }\r\n  };\r\n\r\n  return { on, off, emit };\r\n} ","<template>\r\n  <div class=\"visualization-container\" ref=\"container\">\r\n    <D3Visualization :analysisResult=\"analysisResult\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, onMounted } from 'vue';\r\nimport D3Visualization from './visualization/D3Visualization.vue';\r\nimport { useVectorStore } from '@/stores/vectorStore';\r\nimport { useEventBus } from '@/composables/useEventBus';\r\n\r\nconst vectorStore = useVectorStore();\r\nconst eventBus = useEventBus();\r\n\r\nconst analysisResult = ref(null);\r\nconst container = ref(null);\r\n\r\nwatch(() => vectorStore.analysisResults, (newResult) => {\r\n  if (newResult) {\r\n    analysisResult.value = newResult;\r\n  }\r\n}, { deep: true });\r\n\r\nonMounted(() => {\r\n  eventBus.on('analysisCompleted', (result) => {\r\n    analysisResult.value = result;\r\n  });\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.visualization-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 600px;\r\n  background: radial-gradient(circle at center, rgba(102, 126, 234, 0.1) 0%, transparent 70%);\r\n  border-radius: 12px;\r\n  border: 2px solid rgba(102, 126, 234, 0.2);\r\n  overflow: hidden;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .visualization-container {\r\n    height: 400px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .visualization-container {\r\n    height: 300px;\r\n  }\r\n}\r\n</style> ","import { ref, computed, toRefs } from 'vue'\r\nimport { vectorOperations, vectorGeneration, vectorStatistics } from '../utils/vectorUtils.js'\r\nimport { useVectorStore } from '../stores/vectorStore.js'\r\n\r\n/**\r\n * Vue Composable for Vector Operations\r\n * Provides reactive vector manipulation and analysis functions\r\n */\r\nexport function useVectorOperations() {\r\n  const vectorStore = useVectorStore()\r\n  \r\n  // Reactive state\r\n  const isCalculating = ref(false)\r\n  const lastError = ref(null)\r\n  const operationHistory = ref([])\r\n  \r\n  // Computed properties\r\n  const selectedVector = computed(() => vectorStore.selectedVector)\r\n  const allVectors = computed(() => vectorStore.vectors)\r\n  const currentDimensions = computed(() => vectorStore.dimensions)\r\n  \r\n  /**\r\n   * Execute vector operation with error handling\r\n   * @param {Function} operation - Operation to execute\r\n   * @param {string} operationName - Name for history tracking\r\n   * @returns {Promise<any>} Operation result\r\n   */\r\n  const executeOperation = async (operation, operationName) => {\r\n    isCalculating.value = true\r\n    lastError.value = null\r\n    \r\n    try {\r\n      const result = await operation()\r\n      \r\n      // Add to operation history\r\n      operationHistory.value.unshift({\r\n        name: operationName,\r\n        timestamp: new Date(),\r\n        success: true,\r\n        result: typeof result === 'object' ? { ...result } : result\r\n      })\r\n      \r\n      // Keep only last 50 operations\r\n      if (operationHistory.value.length > 50) {\r\n        operationHistory.value = operationHistory.value.slice(0, 50)\r\n      }\r\n      \r\n      return result\r\n    } catch (error) {\r\n      lastError.value = error.message\r\n      \r\n      operationHistory.value.unshift({\r\n        name: operationName,\r\n        timestamp: new Date(),\r\n        success: false,\r\n        error: error.message\r\n      })\r\n      \r\n      throw error\r\n    } finally {\r\n      isCalculating.value = false\r\n    }\r\n  }\r\n  \r\n  // Vector Creation Operations\r\n  const createRandomVector = async (dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.random(dims, -10, 10)\r\n      return {\r\n        id: `random_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: vectorOperations.magnitude(vector),\r\n        created: new Date(),\r\n        type: 'random'\r\n      }\r\n    }, 'Create Random Vector')\r\n  }\r\n  \r\n  const createZeroVector = async (dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.zero(dims)\r\n      return {\r\n        id: `zero_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: 0,\r\n        created: new Date(),\r\n        type: 'zero'\r\n      }\r\n    }, 'Create Zero Vector')\r\n  }\r\n  \r\n  const createUnitVector = async (activeIndex, dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.unit(dims, activeIndex)\r\n      return {\r\n        id: `unit_${activeIndex}_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: 1,\r\n        created: new Date(),\r\n        type: 'unit',\r\n        activeIndex\r\n      }\r\n    }, `Create Unit Vector (e${activeIndex + 1})`)\r\n  }\r\n  \r\n  const createNormalVector = async (mean = 0, stdDev = 1, dimensions = null) => {\r\n    return executeOperation(async () => {\r\n      const dims = dimensions || currentDimensions.value\r\n      const vector = vectorGeneration.normal(dims, mean, stdDev)\r\n      return {\r\n        id: `normal_${Date.now()}`,\r\n        components: vector,\r\n        magnitude: vectorOperations.magnitude(vector),\r\n        created: new Date(),\r\n        type: 'normal',\r\n        parameters: { mean, stdDev }\r\n      }\r\n    }, 'Create Normal Vector')\r\n  }\r\n  \r\n  // Vector Arithmetic Operations\r\n  const addVectors = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for addition')\r\n      }\r\n      \r\n      const result = vectorOperations.add(vectorA.components, vectorB.components)\r\n      return {\r\n        id: `add_${Date.now()}`,\r\n        components: result,\r\n        magnitude: vectorOperations.magnitude(result),\r\n        created: new Date(),\r\n        type: 'addition',\r\n        operands: [vectorA.id, vectorB.id]\r\n      }\r\n    }, 'Vector Addition')\r\n  }\r\n  \r\n  const subtractVectors = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for subtraction')\r\n      }\r\n      \r\n      const result = vectorOperations.subtract(vectorA.components, vectorB.components)\r\n      return {\r\n        id: `subtract_${Date.now()}`,\r\n        components: result,\r\n        magnitude: vectorOperations.magnitude(result),\r\n        created: new Date(),\r\n        type: 'subtraction',\r\n        operands: [vectorA.id, vectorB.id]\r\n      }\r\n    }, 'Vector Subtraction')\r\n  }\r\n  \r\n  const scaleVector = async (vector, scalar) => {\r\n    return executeOperation(async () => {\r\n      if (!vector) {\r\n        throw new Error('Vector is required for scaling')\r\n      }\r\n      \r\n      const result = vectorOperations.scale(vector.components, scalar)\r\n      return {\r\n        id: `scale_${Date.now()}`,\r\n        components: result,\r\n        magnitude: vectorOperations.magnitude(result),\r\n        created: new Date(),\r\n        type: 'scaling',\r\n        operands: [vector.id],\r\n        scalar\r\n      }\r\n    }, `Scale Vector by ${scalar}`)\r\n  }\r\n  \r\n  const normalizeVector = async (vector) => {\r\n    return executeOperation(async () => {\r\n      if (!vector) {\r\n        throw new Error('Vector is required for normalization')\r\n      }\r\n      \r\n      const result = vectorOperations.normalize(vector.components)\r\n      return {\r\n        id: `normalize_${Date.now()}`,\r\n        components: result,\r\n        magnitude: 1,\r\n        created: new Date(),\r\n        type: 'normalization',\r\n        operands: [vector.id]\r\n      }\r\n    }, 'Normalize Vector')\r\n  }\r\n  \r\n  // Vector Analysis Operations\r\n  const calculateDotProduct = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for dot product')\r\n      }\r\n      \r\n      return vectorOperations.dotProduct(vectorA.components, vectorB.components)\r\n    }, 'Calculate Dot Product')\r\n  }\r\n  \r\n  const calculateCosineSimilarity = async (vectorA, vectorB) => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for cosine similarity')\r\n      }\r\n      \r\n      return vectorOperations.cosineSimilarity(vectorA.components, vectorB.components)\r\n    }, 'Calculate Cosine Similarity')\r\n  }\r\n  \r\n  const calculateDistance = async (vectorA, vectorB, metric = 'euclidean') => {\r\n    return executeOperation(async () => {\r\n      if (!vectorA || !vectorB) {\r\n        throw new Error('Two vectors are required for distance calculation')\r\n      }\r\n      \r\n      switch (metric.toLowerCase()) {\r\n        case 'euclidean':\r\n          return vectorOperations.euclideanDistance(vectorA.components, vectorB.components)\r\n        case 'manhattan':\r\n          return vectorOperations.manhattanDistance(vectorA.components, vectorB.components)\r\n        default:\r\n          throw new Error(`Unknown distance metric: ${metric}`)\r\n      }\r\n    }, `Calculate ${metric} Distance`)\r\n  }\r\n  \r\n  const analyzeVector = async (vector) => {\r\n    return executeOperation(async () => {\r\n      if (!vector) {\r\n        throw new Error('Vector is required for analysis')\r\n      }\r\n      \r\n      const stats = vectorStatistics.calculate(vector.components)\r\n      \r\n      return {\r\n        vectorId: vector.id,\r\n        ...stats,\r\n        dimensions: vector.components.length,\r\n        timestamp: new Date(),\r\n      }\r\n    }, 'Analyze Vector')\r\n  }\r\n  \r\n  // Batch Operations\r\n  const analyzeBatch = async (vectors) => {\r\n    return executeOperation(async () => {\r\n      if (!vectors || !Array.isArray(vectors)) {\r\n        throw new Error('Array of vectors is required for batch analysis')\r\n      }\r\n      \r\n      const analyses = await Promise.all(\r\n        vectors.map(vector => analyzeVector(vector))\r\n      )\r\n      \r\n      // Calculate batch statistics\r\n      const magnitudes = vectors.map(v => vectorOperations.magnitude(v.components))\r\n      const avgMagnitude = magnitudes.reduce((sum, mag) => sum + mag, 0) / magnitudes.length\r\n      const maxMagnitude = Math.max(...magnitudes)\r\n      const minMagnitude = Math.min(...magnitudes)\r\n      \r\n      return {\r\n        vectorAnalyses: analyses,\r\n        batchStatistics: {\r\n          count: vectors.length,\r\n          averageMagnitude: avgMagnitude,\r\n          maxMagnitude,\r\n          minMagnitude,\r\n          totalMagnitude: magnitudes.reduce((sum, mag) => sum + mag, 0)\r\n        },\r\n        timestamp: new Date()\r\n      }\r\n    }, 'Batch Analysis')\r\n  }\r\n  \r\n  const calculateSimilarityMatrix = async (vectors) => {\r\n    return executeOperation(async () => {\r\n      if (!vectors || !Array.isArray(vectors)) {\r\n        throw new Error('Array of vectors is required for similarity matrix')\r\n      }\r\n      \r\n      const n = vectors.length\r\n      const matrix = Array(n).fill().map(() => Array(n).fill(0))\r\n      \r\n      for (let i = 0; i < n; i++) {\r\n        for (let j = 0; j < n; j++) {\r\n          if (i === j) {\r\n            matrix[i][j] = 1 // Self-similarity is 1\r\n          } else {\r\n            matrix[i][j] = vectorOperations.cosineSimilarity(\r\n              vectors[i].components,\r\n              vectors[j].components\r\n            )\r\n          }\r\n        }\r\n      }\r\n      \r\n      return {\r\n        matrix,\r\n        vectors: vectors.map(v => ({ id: v.id, label: v.label || v.id })),\r\n        timestamp: new Date()\r\n      }\r\n    }, 'Calculate Similarity Matrix')\r\n  }\r\n  \r\n  // Utility functions\r\n  const clearHistory = () => {\r\n    operationHistory.value = []\r\n  }\r\n  \r\n  const clearError = () => {\r\n    lastError.value = null\r\n  }\r\n  \r\n  const getOperationHistory = (limit = 10) => {\r\n    return operationHistory.value.slice(0, limit)\r\n  }\r\n  \r\n  const undoLastOperation = () => {\r\n    if (operationHistory.value.length > 0) {\r\n      const lastOp = operationHistory.value[0]\r\n      operationHistory.value = operationHistory.value.slice(1)\r\n      return lastOp\r\n    }\r\n    return null\r\n  }\r\n  \r\n  return {\r\n    // Reactive state\r\n    isCalculating,\r\n    lastError,\r\n    operationHistory,\r\n    \r\n    // Computed properties\r\n    selectedVector,\r\n    allVectors,\r\n    currentDimensions,\r\n    \r\n    // Vector creation\r\n    createRandomVector,\r\n    createZeroVector,\r\n    createUnitVector,\r\n    createNormalVector,\r\n    \r\n    // Vector arithmetic\r\n    addVectors,\r\n    subtractVectors,\r\n    scaleVector,\r\n    normalizeVector,\r\n    \r\n    // Vector analysis\r\n    calculateDotProduct,\r\n    calculateCosineSimilarity,\r\n    calculateDistance,\r\n    analyzeVector,\r\n    \r\n    // Batch operations\r\n    analyzeBatch,\r\n    calculateSimilarityMatrix,\r\n    \r\n    // Utility functions\r\n    clearHistory,\r\n    clearError,\r\n    getOperationHistory,\r\n    undoLastOperation\r\n  }\r\n} ","<template>\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-icon\">{{ icon }}</div>\r\n    <div class=\"stat-info\">\r\n      <div class=\"stat-value\">{{ value }}</div>\r\n      <div class=\"stat-label\">{{ label }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps({\r\n  icon: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  value: {\r\n    type: [String, Number],\r\n    required: true\r\n  },\r\n  label: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.stat-card {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  padding: 1.5rem;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 8px;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.stat-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);\r\n  background: rgba(255, 255, 255, 0.08);\r\n}\r\n\r\n.stat-icon {\r\n  font-size: 2rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n.stat-info {\r\n  flex: 1;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 1.8rem;\r\n  font-weight: 700;\r\n  color: #667eea;\r\n  margin-bottom: 0.2rem;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .stat-card {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .stat-icon {\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  .stat-value {\r\n    font-size: 1.4rem;\r\n  }\r\n  \r\n  .stat-label {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <div class=\"analysis-overview-tab\">\r\n    <h4>Vector Overview</h4>\r\n    <div class=\"overview-grid\">\r\n      <StatCard label=\"Magnitude\" :value=\"stats.magnitude.toFixed(4)\" icon=\"ðŸ“\" />\r\n      <StatCard label=\"Dimensions\" :value=\"stats.dimensions\" icon=\"ðŸ“\" />\r\n      <StatCard label=\"Sparsity\" :value=\"`${(stats.sparsity * 100).toFixed(2)}%`\" icon=\"âœ¨\" />\r\n      <StatCard label=\"Entropy\" :value=\"stats.entropy.toFixed(4)\" icon=\"ðŸŒ€\" />\r\n      <StatCard label=\"Effective Dim.\" :value=\"stats.effectiveDimensionality.toFixed(2)\" icon=\"ðŸŒ\" />\r\n      <StatCard label=\"Info Density\" :value=\"`${(stats.informationDensity * 100).toFixed(2)}%`\" icon=\" densely\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport StatCard from '../../StatCard.vue'\r\n\r\ndefineProps({\r\n  stats: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.analysis-overview-tab {\r\n  padding: 1rem 0;\r\n}\r\n.overview-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\r\n  gap: 1rem;\r\n}\r\n</style> ","<template>\r\n  <div class=\"component-analysis-tab\">\r\n    <div class=\"component-insights\">\r\n      <StatCard label=\"Positive\" :value=\"stats.componentInsights.positiveCount\" icon=\"âž•\" />\r\n      <StatCard label=\"Negative\" :value=\"stats.componentInsights.negativeCount\" icon=\"âž–\" />\r\n      <StatCard label=\"Zeros\" :value=\"stats.componentInsights.zeroCount\" icon=\"â­•\" />\r\n    </div>\r\n    \r\n    <h4>Component Values</h4>\r\n    <div class=\"component-list-container\">\r\n      <ul class=\"component-list\">\r\n        <li v-for=\"(component, index) in components\" :key=\"index\">\r\n          <span class=\"component-index\">{{ index }}:</span>\r\n          <span class=\"component-value\">{{ component.toFixed(4) }}</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport StatCard from '../../StatCard.vue'\r\n\r\ndefineProps({\r\n  stats: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  components: {\r\n    type: Array,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.component-analysis-tab {\r\n  padding: 1rem 0;\r\n}\r\n.component-insights {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 2rem;\r\n}\r\n.component-list-container {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n}\r\n.component-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.component-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.3rem 0.5rem;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n}\r\n.component-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n.component-index {\r\n  font-weight: bold;\r\n  color: #888;\r\n}\r\n.component-value {\r\n  font-family: 'Courier New', Courier, monospace;\r\n}\r\n</style> ","<template>\r\n  <div class=\"advanced-stats-tab\">\r\n    <h4>Statistical Properties</h4>\r\n    <ul class=\"stats-list\">\r\n      <li>\r\n        <span class=\"stat-label\">Mean</span>\r\n        <span class=\"stat-value\">{{ stats.mean.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Variance</span>\r\n        <span class=\"stat-value\">{{ stats.variance.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Standard Deviation</span>\r\n        <span class=\"stat-value\">{{ stats.standardDeviation.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Min Value</span>\r\n        <span class=\"stat-value\">{{ stats.min.toFixed(4) }}</span>\r\n      </li>\r\n      <li>\r\n        <span class=\"stat-label\">Max Value</span>\r\n        <span class=\"stat-value\">{{ stats.max.toFixed(4) }}</span>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps({\r\n  stats: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.advanced-stats-tab {\r\n  padding: 1rem 0;\r\n}\r\n.stats-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  background: rgba(0,0,0,0.1);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n}\r\n.stats-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.75rem 0.5rem;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n}\r\n.stats-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n.stat-label {\r\n  color: #bbb;\r\n}\r\n.stat-value {\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n</style> ","<template>\r\n  <div class=\"individual-analysis-tab\">\r\n    <div v-if=\"selectedVector && vectorStats\">\r\n      <div class=\"vector-title\">\r\n        <h3>Analysis for Vector: <strong>{{ selectedVector.id }}</strong></h3>\r\n      </div>\r\n      \r\n      <div class=\"sub-tabs\">\r\n        <button \r\n          v-for=\"tab in subTabs\" \r\n          :key=\"tab.id\"\r\n          class=\"sub-tab-btn\" \r\n          :class=\"{ active: activeSubTab === tab.id }\"\r\n          @click=\"activeSubTab = tab.id\"\r\n        >\r\n          {{ tab.label }}\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"sub-tab-content\">\r\n        <AnalysisOverview v-if=\"activeSubTab === 'overview'\" :stats=\"vectorStats\" />\r\n        <ComponentAnalysis v-if=\"activeSubTab === 'components'\" :stats=\"vectorStats\" :components=\"selectedVector.components\" />\r\n        <AdvancedStats v-if=\"activeSubTab === 'advanced'\" :stats=\"vectorStats\" />\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"no-vector-selected\">\r\n      <p>Select a vector to see its individual analysis.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, watch, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\nimport { useVectorOperations } from '../../composables/useVectorOperations'\r\nimport AnalysisOverview from './individual/AnalysisOverview.vue'\r\nimport ComponentAnalysis from './individual/ComponentAnalysis.vue'\r\nimport AdvancedStats from './individual/AdvancedStats.vue'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst vectorOps = useVectorOperations()\r\n\r\nconst selectedVector = computed(() => vectorStore.selectedVector)\r\nconst vectorStats = ref(null)\r\nconst activeSubTab = ref('overview')\r\n\r\nconst subTabs = ref([\r\n  { id: 'overview', label: 'Overview' },\r\n  { id: 'components', label: 'Component Analysis' },\r\n  { id: 'advanced', label: 'Advanced Stats' }\r\n])\r\n\r\nconst analyzeVector = async () => {\r\n  if (selectedVector.value) {\r\n    const stats = await vectorOps.analyzeVector(selectedVector.value)\r\n    vectorStats.value = stats\r\n  } else {\r\n    vectorStats.value = null\r\n  }\r\n}\r\n\r\nwatch(selectedVector, (newVector) => {\r\n  if (newVector) {\r\n    analyzeVector()\r\n    activeSubTab.value = 'overview' // Reset to overview when vector changes\r\n  } else {\r\n    vectorStats.value = null\r\n  }\r\n})\r\n\r\nonMounted(() => {\r\n  if (selectedVector.value) {\r\n    analyzeVector()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.individual-analysis-tab {\r\n  padding: 1rem;\r\n}\r\n\r\n.vector-title {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.no-vector-selected {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #888;\r\n}\r\n\r\n.sub-tabs {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.sub-tab-btn {\r\n  padding: 0.8rem 1.2rem;\r\n  border: none;\r\n  background: transparent;\r\n  color: #aaa;\r\n  border-bottom: 2px solid transparent;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-weight: 500;\r\n}\r\n\r\n.sub-tab-btn.active {\r\n  color: #667eea;\r\n  border-bottom-color: #667eea;\r\n}\r\n\r\n.sub-tab-btn:hover:not(.active) {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  color: #fff;\r\n}\r\n\r\n.sub-tab-content {\r\n  min-height: 250px;\r\n}\r\n</style> ","<template>\r\n  <div class=\"relationships-tab\">\r\n    <div v-if=\"selectedVector\">\r\n      <h3>Relationships for Vector: <strong>{{ selectedVector.id }}</strong></h3>\r\n      <div v-if=\"relationships.length > 0\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Target Vector</th>\r\n              <th>Cosine Similarity</th>\r\n              <th>Euclidean Distance</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"rel in relationships\" :key=\"rel.id\">\r\n              <td>{{ rel.id }}</td>\r\n              <td>{{ rel.cosineSimilarity.toFixed(4) }}</td>\r\n              <td>{{ rel.euclideanDistance.toFixed(4) }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div v-else>\r\n        <p>Calculating relationships...</p>\r\n      </div>\r\n    </div>\r\n    <div v-else>\r\n      <p>Select a vector to see its relationships.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, watch, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\nimport { useVectorOperations } from '../../composables/useVectorOperations'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst vectorOps = useVectorOperations()\r\n\r\nconst selectedVector = computed(() => vectorStore.selectedVector)\r\nconst relationships = ref([])\r\n\r\nconst calculateRelationships = async () => {\r\n  if (selectedVector.value) {\r\n    relationships.value = []\r\n    const otherVectors = vectorStore.vectors.filter(v => v.id !== selectedVector.value.id)\r\n    const rels = await Promise.all(otherVectors.map(async (otherVector) => {\r\n      const cosineSimilarity = await vectorOps.calculateCosineSimilarity(selectedVector.value, otherVector)\r\n      const euclideanDistance = await vectorOps.calculateDistance(selectedVector.value, otherVector)\r\n      return {\r\n        id: otherVector.id,\r\n        cosineSimilarity,\r\n        euclideanDistance\r\n      }\r\n    }))\r\n    relationships.value = rels\r\n  } else {\r\n    relationships.value = []\r\n  }\r\n}\r\n\r\nwatch(selectedVector, calculateRelationships)\r\nonMounted(calculateRelationships)\r\n</script>\r\n\r\n<style scoped>\r\n.relationships-tab {\r\n  padding: 1rem;\r\n}\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\nth, td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\nth {\r\n  background-color: #f2f2f2;\r\n  text-align: left;\r\n}\r\n</style> ","import { ref } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { vectorStatistics } from '../utils/vectorUtils'\r\n\r\nexport function useClustering() {\r\n  const vectorStore = useVectorStore()\r\n  const clusters = ref(null)\r\n  const isClustering = ref(false)\r\n\r\n  const runKMeans = async (k) => {\r\n    isClustering.value = true\r\n    clusters.value = null\r\n    try {\r\n      const vectors = vectorStore.vectors.map(v => v.components)\r\n      const result = await new Promise((resolve) => {\r\n          setTimeout(() => {\r\n            const res = vectorStatistics.kmeans(vectors, k)\r\n            resolve(res)\r\n          }, 0)\r\n      })\r\n      \r\n      // Map original vector objects to clusters\r\n      const vectorMap = new Map(vectorStore.vectors.map(v => [JSON.stringify(v.components), v]));\r\n      const clusteredVectors = result.clusters.map(cluster => \r\n        cluster.map(vectorComponents => vectorMap.get(JSON.stringify(vectorComponents)))\r\n      );\r\n\r\n      clusters.value = {\r\n        centroids: result.centroids,\r\n        clusters: clusteredVectors,\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Clustering failed:', error)\r\n      clusters.value = null\r\n    } finally {\r\n      isClustering.value = false\r\n    }\r\n  }\r\n\r\n  return {\r\n    clusters,\r\n    isClustering,\r\n    runKMeans\r\n  }\r\n} ","<template>\r\n  <div class=\"clustering-tab\">\r\n    <div class=\"controls\">\r\n      <label for=\"k-value\">Number of Clusters (k):</label>\r\n      <input type=\"number\" id=\"k-value\" v-model.number=\"k\" min=\"1\" :max=\"maxK\">\r\n      <button @click=\"runClustering\" :disabled=\"isClustering || k < 1\">\r\n        {{ isClustering ? 'Clustering...' : 'Run K-Means' }}\r\n      </button>\r\n    </div>\r\n    <div v-if=\"clusters\" class=\"results\">\r\n      <h4>Clustering Results</h4>\r\n      <div v-for=\"(cluster, index) in clusters.clusters\" :key=\"index\" class=\"cluster\">\r\n        <h5>Cluster {{ index + 1 }}</h5>\r\n        <ul>\r\n          <li v-for=\"vector in cluster\" :key=\"vector.id\">\r\n            {{ vector.id }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useClustering } from '../../composables/useClustering'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\n\r\nconst { clusters, isClustering, runKMeans } = useClustering()\r\nconst vectorStore = useVectorStore()\r\n\r\nconst k = ref(3)\r\nconst maxK = computed(() => vectorStore.vectors.length)\r\n\r\nconst runClustering = () => {\r\n  if (k.value > 0) {\r\n    runKMeans(k.value)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.clustering-tab {\r\n  padding: 1rem;\r\n}\r\n.controls {\r\n  margin-bottom: 1rem;\r\n}\r\n.cluster {\r\n  margin-bottom: 1rem;\r\n  padding: 0.5rem;\r\n  border: 1px solid #eee;\r\n  border-radius: 4px;\r\n}\r\nul {\r\n  padding-left: 20px;\r\n}\r\n</style> ","<template>\r\n  <div class=\"statistics-tab\">\r\n    <h4>Global Vector Statistics</h4>\r\n    <div v-if=\"stats\">\r\n      <p><strong>Total Vectors:</strong> {{ stats.count }}</p>\r\n      <p><strong>Dimensions:</strong> {{ stats.dimensions }}</p>\r\n      \r\n      <h5>Mean Vector</h5>\r\n      <p class=\"vector-display\">{{ formatVector(stats.meanVector) }}</p>\r\n\r\n      <h5>Magnitude Distribution</h5>\r\n      <p>Mean: {{ stats.magnitude.mean.toFixed(4) }}, StdDev: {{ stats.magnitude.stdDev.toFixed(4) }}</p>\r\n\r\n    </div>\r\n    <div v-else>\r\n      <p>Calculating statistics...</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore'\r\nimport { vectorStatistics } from '../../utils/vectorUtils'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst stats = ref(null)\r\n\r\nconst calculateGlobalStats = () => {\r\n  const vectors = vectorStore.vectors.map(v => v.components)\r\n  if (vectors.length === 0) return\r\n\r\n  const count = vectors.length\r\n  const dimensions = vectors[0].length\r\n  \r\n  // Mean vector\r\n  const meanVector = Array(dimensions).fill(0)\r\n  vectors.forEach(vector => {\r\n    for (let i = 0; i < dimensions; i++) {\r\n      meanVector[i] += vector[i]\r\n    }\r\n  })\r\n  for (let i = 0; i < dimensions; i++) {\r\n    meanVector[i] /= count\r\n  }\r\n\r\n  // Magnitude distribution\r\n  const magnitudes = vectors.map(v => vectorStatistics.calculate(v).magnitude)\r\n  const magMean = vectorStatistics.mean(magnitudes)\r\n  const magVariance = vectorStatistics.variance(magnitudes, magMean)\r\n  const magStdDev = Math.sqrt(magVariance)\r\n\r\n  stats.value = {\r\n    count,\r\n    dimensions,\r\n    meanVector,\r\n    magnitude: {\r\n      mean: magMean,\r\n      stdDev: magStdDev\r\n    }\r\n  }\r\n}\r\n\r\nconst formatVector = (vector) => {\r\n  return '[' + vector.map(c => c.toFixed(2)).join(', ') + ']'\r\n}\r\n\r\nonMounted(calculateGlobalStats)\r\n</script>\r\n\r\n<style scoped>\r\n.statistics-tab {\r\n  padding: 1rem;\r\n}\r\n.vector-display {\r\n  word-break: break-all;\r\n}\r\n</style> ","/**\r\n * Interpolates between two colors.\r\n * @param {string} color1 - The start color (hex).\r\n * @param {string} color2 - The end color (hex).\r\n * @param {number} factor - The interpolation factor (0 to 1).\r\n * @returns {string} The interpolated hex color.\r\n */\r\nfunction interpolateColor(color1, color2, factor) {\r\n  const r1 = parseInt(color1.substring(1, 3), 16);\r\n  const g1 = parseInt(color1.substring(3, 5), 16);\r\n  const b1 = parseInt(color1.substring(5, 7), 16);\r\n\r\n  const r2 = parseInt(color2.substring(1, 3), 16);\r\n  const g2 = parseInt(color2.substring(3, 5), 16);\r\n  const b2 = parseInt(color2.substring(5, 7), 16);\r\n\r\n  const r = Math.round(r1 + factor * (r2 - r1));\r\n  const g = Math.round(g1 + factor * (g2 - g1));\r\n  const b = Math.round(b1 + factor * (b2 - b1));\r\n\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n\r\n/**\r\n * Generates a heatmap color for a value within a given range.\r\n * @param {number} value - The value to get a color for.\r\n * @param {number} min - The minimum value in the range.\r\n * @param {number} max - The maximum value in the range.\r\n * @returns {string} The calculated hex color.\r\n */\r\nexport function getHeatmapColor(value, min, max) {\r\n  if (min === max) {\r\n    return '#667eea'; // Return a neutral color if all values are the same\r\n  }\r\n  const factor = (value - min) / (max - min);\r\n  // Interpolate from a cool blue to a hot red\r\n  return interpolateColor('#4ecdc4', '#ff6b6b', factor);\r\n} ","<template>\r\n  <g \r\n    :transform=\"`translate(${element.position.x}, ${element.position.y})`\"\r\n    @click=\"onClick\"\r\n    @mouseenter=\"onMouseEnter\"\r\n    @mouseleave=\"onMouseLeave\"\r\n    class=\"periodic-element\"\r\n    :class=\"{ \r\n      'is-selected': isSelected, \r\n      'is-placeholder': element.isPlaceholder, \r\n      'is-present': element.present,\r\n      'is-highlighted': isHighlighted\r\n    }\"\r\n  >\r\n    <rect \r\n      class=\"element-rect\"\r\n      :width=\"config.elementWidth\"\r\n      :height=\"config.elementHeight\"\r\n      :fill=\"fillColor\"\r\n    />\r\n    <text \r\n      :x=\"config.elementWidth / 2\" \r\n      :y=\"config.elementHeight / 2 - 2\"\r\n      text-anchor=\"middle\" \r\n      alignment-baseline=\"central\"\r\n      class=\"element-name\"\r\n      :style=\"{ fontSize: dynamicFontSize }\"\r\n    >\r\n      {{ element.name }}\r\n    </text>\r\n    <text \r\n      :x=\"config.elementWidth / 2\" \r\n      :y=\"config.elementHeight / 2 + 18\" \r\n      :font-size=\"config.fontSize\"\r\n      text-anchor=\"middle\"\r\n      class=\"element-symbol\"\r\n    >\r\n      {{ element.symbol }}\r\n    </text>\r\n    <text \r\n      :x=\"4\"\r\n      :y=\"config.fontSize + 2\"\r\n      :font-size=\"config.fontSize\"\r\n      class=\"atomic-number\"\r\n    >\r\n      {{ element.atomicNumber }}\r\n    </text>\r\n  </g>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\nimport { useVectorStore } from '../../stores/vectorStore';\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nimport { getHeatmapColor } from '../../utils/colors';\r\n\r\nconst props = defineProps({\r\n  element: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n  config: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst vectorStore = useVectorStore();\r\nconst { activeHeatmap, dataRanges, highlightedElementIds } = usePeriodicTable();\r\n\r\nconst isSelected = computed(() => {\r\n  return vectorStore.selectedVectorIds.has(props.element.id);\r\n});\r\n\r\nconst isHighlighted = computed(() => {\r\n  return highlightedElementIds.value.has(props.element.id);\r\n});\r\n\r\nconst fillColor = computed(() => {\r\n  if (props.element.isPlaceholder) return '#333';\r\n  if (activeHeatmap.value === 'none' || !props.element.present) {\r\n    return props.element.color;\r\n  }\r\n  \r\n  const property = activeHeatmap.value; // e.g., 'atomicMass'\r\n  const value = props.element[property];\r\n  const range = dataRanges.value[property === 'atomicMass' ? 'magnitude' : property];\r\n\r\n  if (range && value !== undefined) {\r\n    return getHeatmapColor(value, range.min, range.max);\r\n  }\r\n  \r\n  return props.element.color;\r\n});\r\n\r\nconst dynamicFontSize = computed(() => {\r\n  const baseSize = props.config.symbolFontSize || 16;\r\n  const nameLength = props.element.name.length;\r\n  if (nameLength > 7) {\r\n    const scaleFactor = Math.max(0.5, 1 - (nameLength - 7) * 0.1);\r\n    return `${baseSize * scaleFactor}px`;\r\n  }\r\n  return `${baseSize}px`;\r\n});\r\n\r\nconst emit = defineEmits(['showTooltip', 'hideTooltip']);\r\n\r\nconst onClick = (event) => {\r\n  const isMultiSelect = event.ctrlKey || event.metaKey;\r\n  vectorStore.selectVector(props.element.id, isMultiSelect);\r\n}\r\n\r\nconst onMouseEnter = (event) => {\r\n  if (!props.element.isPlaceholder) {\r\n    emit('showTooltip', { event, element: props.element });\r\n  }\r\n}\r\n\r\nconst onMouseLeave = () => {\r\n  emit('hideTooltip');\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n@keyframes pulse {\r\n  0% {\r\n    box-shadow: 0 0 20px #f39c12;\r\n  }\r\n  50% {\r\n    box-shadow: 0 0 30px #f39c12;\r\n  }\r\n  100% {\r\n    box-shadow: 0 0 20px #f39c12;\r\n  }\r\n}\r\n\r\n.periodic-element {\r\n  cursor: pointer;\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\n.periodic-element.is-placeholder {\r\n  opacity: 0.3;\r\n  cursor: default;\r\n}\r\n\r\n.periodic-element.is-placeholder:hover {\r\n  opacity: 0.6;\r\n}\r\n\r\n.periodic-element.is-placeholder .element-rect {\r\n  stroke-dasharray: 3, 3;\r\n}\r\n\r\n.element-rect {\r\n  rx: 6;\r\n  ry: 6;\r\n  stroke-width: 1px;\r\n  stroke: rgba(255,255,255,0.2);\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\n.periodic-element.is-present .element-rect {\r\n  stroke: rgba(102, 126, 234, 0.7);\r\n  stroke-width: 1.5px;\r\n  box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);\r\n}\r\n\r\n.periodic-element.is-present:hover .element-rect {\r\n  stroke-width: 2px;\r\n  stroke: #82a2ff;\r\n  box-shadow: 0 0 15px rgba(102, 126, 234, 0.8);\r\n}\r\n\r\n.periodic-element.is-highlighted .element-rect {\r\n  stroke: #10b981;\r\n  stroke-width: 2.5px;\r\n}\r\n\r\n.periodic-element.is-selected .element-rect {\r\n  stroke: #f39c12;\r\n  stroke-width: 3px;\r\n  transform: scale(1.05);\r\n  transform-origin: center;\r\n  box-shadow: 0 0 20px #f39c12;\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n.element-name {\r\n  font-weight: 700;\r\n  fill: white;\r\n  pointer-events: none;\r\n}\r\n.element-symbol {\r\n  font-size: 10px;\r\n  opacity: 0.7;\r\n  fill: white;\r\n  pointer-events: none;\r\n}\r\n.atomic-number {\r\n  font-size: 10px;\r\n  font-weight: 500;\r\n  opacity: 0.9;\r\n  fill: white;\r\n  pointer-events: none;\r\n}\r\n</style> ","<template>\r\n  <div class=\"periodic-tooltip\" :style=\"positionStyles\">\r\n    <div class=\"tooltip-content\">\r\n      <div class=\"tooltip-header\">\r\n        <div class=\"tooltip-symbol\" :style=\"{ color: element.color }\">{{ element.symbol }}</div>\r\n        <div>\r\n          <div class=\"tooltip-name\">{{ element.name }}</div>\r\n          <div class=\"tooltip-quantum-key\">Quantum Profile: {{ element.quantumKey }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"tooltip-body\">\r\n        <div><strong>Magnitude:</strong> {{ element.atomicMass }}</div>\r\n        <div><strong>Entropy:</strong> {{ element.entropy }}</div>\r\n        <div><strong>Stability:</strong> {{ element.stability }}</div>\r\n      </div>\r\n      <div class=\"tooltip-footer\">\r\n        <div class=\"quantum-makeup-label\">Quantum Makeup:</div>\r\n        <div class=\"quantum-bar\">\r\n          <div \r\n            class=\"quantum-bar-item\"\r\n            :style=\"{ width: `${excitPct}%`, background: '#ff6b6b' }\" \r\n            :title=\"`Excitatory: ${element.excitatory}`\"\r\n          ></div>\r\n          <div \r\n            class=\"quantum-bar-item\"\r\n            :style=\"{ width: `${inhibPct}%`, background: '#4ecdc4' }\" \r\n            :title=\"`Inhibitory: ${element.inhibitory}`\"\r\n          ></div>\r\n          <div \r\n            class=\"quantum-bar-item\"\r\n            :style=\"{ width: `${neuPct}%`, background: '#95a5a6' }\" \r\n            :title=\"`Neutral: ${element.neutral}`\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"element.vectors && element.vectors.length > 1\" class=\"tooltip-footer\">\r\n        <strong>Stacked Vectors ({{ element.vectors.length }}):</strong>\r\n        <div class=\"vector-id-list\">\r\n          {{ element.vectors.map(v => v.id).join(', ') }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  element: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  position: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n});\r\n\r\nconst positionStyles = computed(() => ({\r\n  top: props.position.top,\r\n  left: props.position.left,\r\n  transform: 'translate(10px, 0)' // Add small offset\r\n}));\r\n\r\nconst quantumTotal = computed(() => props.element.excitatory + props.element.inhibitory + props.element.neutral);\r\nconst excitPct = computed(() => quantumTotal.value > 0 ? (props.element.excitatory / quantumTotal.value * 100).toFixed(1) : 0);\r\nconst inhibPct = computed(() => quantumTotal.value > 0 ? (props.element.inhibitory / quantumTotal.value * 100).toFixed(1) : 0);\r\nconst neuPct = computed(() => quantumTotal.value > 0 ? (props.element.neutral / quantumTotal.value * 100).toFixed(1) : 0);\r\n</script>\r\n\r\n<style scoped>\r\n.periodic-tooltip {\r\n  position: absolute;\r\n  background: rgba(20, 20, 30, 0.95);\r\n  color: white;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  font-size: 13px;\r\n  pointer-events: none;\r\n  z-index: 1000;\r\n  box-shadow: 0 5px 15px rgba(0,0,0,0.4);\r\n  max-width: 240px;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\r\n  transition: opacity 0.2s;\r\n}\r\n.tooltip-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid rgba(255,255,255,0.1);\r\n}\r\n.tooltip-symbol {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-right: 8px;\r\n  line-height: 1;\r\n}\r\n.tooltip-name {\r\n  font-weight: 600;\r\n}\r\n.tooltip-quantum-key {\r\n  font-size: 11px;\r\n  opacity: 0.7;\r\n}\r\n.tooltip-body {\r\n  margin-bottom: 8px;\r\n}\r\n.tooltip-body > div {\r\n  margin-bottom: 2px;\r\n}\r\n.tooltip-footer {\r\n  margin-top: 8px;\r\n  padding-top: 8px;\r\n  border-top: 1px solid rgba(255,255,255,0.1);\r\n}\r\n.tooltip-footer strong {\r\n  font-size: 12px;\r\n  color: #a0aec0;\r\n}\r\n.vector-id-list {\r\n  font-size: 11px;\r\n  opacity: 0.8;\r\n  max-height: 40px;\r\n  overflow-y: auto;\r\n  word-break: break-all;\r\n  margin-top: 4px;\r\n}\r\n.quantum-makeup-label {\r\n  font-weight: 600;\r\n  margin-bottom: 4px;\r\n}\r\n.quantum-bar {\r\n  width: 100%;\r\n  height: 10px;\r\n  background: #333;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  overflow: hidden;\r\n}\r\n</style> ","<template>\r\n  <div class=\"periodic-table-container-wrapper\">\r\n    <div class=\"periodic-table-container\" ref=\"tableContainerRef\">\r\n      <svg \r\n        class=\"periodic-table-svg\" \r\n        :width=\"tableWidth\" \r\n        :height=\"tableHeight\"\r\n      >\r\n        <text x=\"20\" y=\"20\" class=\"table-title\">ðŸ§ª Vector Periodic Table</text>\r\n        <g>\r\n          <text v-for=\"i in tableDimensions.rows\" :key=\"`row-label-${i-1}`\"\r\n            :x=\"15\"\r\n            :y=\"40 + (i - 1) * (config.elementHeight + config.padding + 15) + config.elementHeight / 2 + 5\"\r\n            class=\"axis-label\"\r\n          >\r\n            E{{ i - 1 }}\r\n          </text>\r\n        </g>\r\n        <g>\r\n           <text v-for=\"i in tableDimensions.cols\" :key=\"`col-label-${i-1}`\"\r\n            :x=\"50 + (i - 1) * (config.elementWidth + config.padding + 15) + config.elementWidth / 2\"\r\n            :y=\"25\"\r\n            class=\"axis-label\"\r\n          >\r\n            I{{ i - 1 }}\r\n          </text>\r\n        </g>\r\n        <PeriodicElement \r\n          v-for=\"element in visibleElements\" \r\n          :key=\"`${element.id}-${element.isPlaceholder}`\"\r\n          :element=\"element\"\r\n          :config=\"config\"\r\n          @showTooltip=\"onShowTooltip\"\r\n          @hideTooltip=\"onHideTooltip\"\r\n        />\r\n      </svg>\r\n    </div>\r\n    <PeriodicElementTooltip \r\n      v-if=\"tooltip.visible\"\r\n      :element=\"tooltip.element\"\r\n      :position=\"tooltip.position\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nimport PeriodicElement from './PeriodicElement.vue';\r\nimport PeriodicElementTooltip from './PeriodicElementTooltip.vue';\r\n\r\nconst { periodicData, config, tableDimensions, showPlaceholders } = usePeriodicTable();\r\nconst tableContainerRef = ref(null);\r\n\r\nconst visibleElements = computed(() => {\r\n  if (showPlaceholders.value) {\r\n    return periodicData.value;\r\n  }\r\n  return periodicData.value.filter(el => el.present);\r\n});\r\n\r\nconst tableWidth = computed(() => {\r\n  if (!periodicData.value.length) return '100%';\r\n  return 50 + tableDimensions.value.cols * (config.value.elementWidth + config.value.padding + 15) + 50;\r\n});\r\n\r\nconst tableHeight = computed(() => {\r\n  if (!periodicData.value.length) return 200;\r\n  return 40 + tableDimensions.value.rows * (config.value.elementHeight + config.value.padding + 15) + 40;\r\n});\r\n\r\nconst tooltip = ref({\r\n  visible: false,\r\n  element: null,\r\n  position: { top: '0px', left: '0px' }\r\n});\r\n\r\nconst onShowTooltip = ({ event, element }) => {\r\n  tooltip.value.element = element;\r\n  tooltip.value.visible = true;\r\n  \r\n  const rect = event.target.getBoundingClientRect();\r\n  const containerRect = tableContainerRef.value?.getBoundingClientRect() ?? { top: 0, left: 0 };\r\n  \r\n  tooltip.value.position = {\r\n    left: `${rect.right - containerRect.left}px`,\r\n    top: `${rect.top - containerRect.top}px`\r\n  };\r\n};\r\n\r\nconst onHideTooltip = () => {\r\n  tooltip.value.visible = false;\r\n  tooltip.value.element = null;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.periodic-table-container-wrapper {\r\n  width: 100%;\r\n  flex-grow: 1;\r\n  background: rgba(0,0,0,0.1);\r\n  position: relative; /* For tooltip positioning */\r\n  overflow: hidden;\r\n}\r\n.periodic-table-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: auto;\r\n  position: relative;\r\n}\r\n.periodic-table-svg {\r\n  display: block;\r\n  min-width: 100%;\r\n  min-height: 100%;\r\n}\r\n.table-title {\r\n  fill: white;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n}\r\n.axis-label {\r\n  fill: #667eea;\r\n  font-size: 12px;\r\n  text-anchor: middle;\r\n}\r\n</style> ","<template>\r\n  <div class=\"sparkline-container\">\r\n    <svg :viewBox=\"`0 0 ${width} ${height}`\" preserveAspectRatio=\"none\">\r\n      <path :d=\"path\" class=\"sparkline-path\" />\r\n      <line :x1=\"0\" :y1=\"zeroAxis\" :x2=\"width\" :y2=\"zeroAxis\" class=\"zero-axis\" />\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  components: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n  width: {\r\n    type: Number,\r\n    default: 100,\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 30,\r\n  },\r\n});\r\n\r\nconst path = computed(() => {\r\n  if (!props.components || props.components.length === 0) return '';\r\n  \r\n  const values = props.components;\r\n  const max = Math.max(...values.map(Math.abs));\r\n  if (max === 0) { // Handle case where all components are 0\r\n    const y = props.height / 2;\r\n    return `M 0,${y} L ${props.width},${y}`;\r\n  }\r\n\r\n  const scaleY = props.height / (max * 2);\r\n  const scaleX = props.width / (values.length - 1 || 1);\r\n\r\n  const points = values.map((val, i) => {\r\n    const x = i * scaleX;\r\n    const y = (props.height / 2) - val * scaleY;\r\n    return `${x},${y}`;\r\n  });\r\n\r\n  return `M ${points.join(' L ')}`;\r\n});\r\n\r\nconst zeroAxis = computed(() => props.height / 2);\r\n</script>\r\n\r\n<style scoped>\r\n.sparkline-container {\r\n  width: 100%;\r\n  height: 40px;\r\n}\r\n\r\n.sparkline-path {\r\n  stroke: #667eea;\r\n  stroke-width: 1.5;\r\n  fill: none;\r\n  stroke-linecap: round;\r\n  stroke-linejoin: round;\r\n}\r\n\r\n.zero-axis {\r\n  stroke: rgba(255, 255, 255, 0.2);\r\n  stroke-width: 1;\r\n  stroke-dasharray: 2, 2;\r\n}\r\n</style> ","<template>\r\n  <div class=\"heatmap-controls\">\r\n    <label for=\"heatmap-select\">Heatmap:</label>\r\n    <select id=\"heatmap-select\" v-model=\"activeHeatmap\" class=\"styled-select\">\r\n      <option value=\"none\">None</option>\r\n      <option value=\"atomicMass\">Magnitude</option>\r\n      <option value=\"entropy\">Entropy</option>\r\n      <option value=\"stability\">Stability</option>\r\n    </select>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nconst { activeHeatmap } = usePeriodicTable();\r\n</script>\r\n\r\n<style scoped>\r\n.heatmap-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 1rem;\r\n  padding: 0 1rem;\r\n}\r\nlabel {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n.styled-select {\r\n  background-color: rgba(0,0,0,0.3);\r\n  color: white;\r\n  border: 1px solid rgba(255,255,255,0.2);\r\n  border-radius: 6px;\r\n  padding: 0.4rem 0.8rem;\r\n  font-size: 0.9rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n.styled-select:hover {\r\n  background-color: rgba(0,0,0,0.5);\r\n  border-color: #667eea;\r\n}\r\n</style> ","<template>\r\n  <div class=\"filter-controls\">\r\n    <div class=\"toggle-switch\">\r\n      <input type=\"checkbox\" id=\"show-placeholders\" v-model=\"showPlaceholders\" class=\"toggle-switch-checkbox\">\r\n      <label for=\"show-placeholders\" class=\"toggle-switch-label\">\r\n        <span class=\"toggle-switch-inner\" />\r\n        <span class=\"toggle-switch-switch\" />\r\n      </label>\r\n    </div>\r\n    <label for=\"show-placeholders\" class=\"toggle-label-text\">Show Undiscovered</label>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nconst { showPlaceholders } = usePeriodicTable();\r\n</script>\r\n\r\n<style scoped>\r\n.filter-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n}\r\n.toggle-label-text {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  color: rgba(255, 255, 255, 0.8);\r\n  cursor: pointer;\r\n}\r\n.toggle-switch {\r\n  position: relative;\r\n  display: inline-block;\r\n  width: 50px;\r\n  height: 28px;\r\n}\r\n.toggle-switch-checkbox {\r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n.toggle-switch-label {\r\n  display: block;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  height: 100%;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  border-radius: 14px;\r\n}\r\n.toggle-switch-inner {\r\n  display: block;\r\n  width: 200%;\r\n  margin-left: -100%;\r\n  transition: margin 0.2s ease-in 0s;\r\n}\r\n.toggle-switch-inner:before, .toggle-switch-inner:after {\r\n  display: block;\r\n  float: left;\r\n  width: 50%;\r\n  height: 28px;\r\n  padding: 0;\r\n  line-height: 28px;\r\n  font-size: 12px;\r\n  color: white;\r\n  box-sizing: border-box;\r\n}\r\n.toggle-switch-inner:before {\r\n  content: \"\";\r\n  padding-left: 10px;\r\n  background-color: #374151;\r\n}\r\n.toggle-switch-inner:after {\r\n  content: \"\";\r\n  padding-right: 10px;\r\n  background-color: #667eea;\r\n  text-align: right;\r\n}\r\n.toggle-switch-switch {\r\n  display: block;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin: 4px;\r\n  background: white;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 22px;\r\n  border-radius: 50%;\r\n  transition: all 0.2s ease-in 0s;\r\n}\r\n.toggle-switch-checkbox:checked + .toggle-switch-label .toggle-switch-inner {\r\n  margin-left: 0;\r\n}\r\n.toggle-switch-checkbox:checked + .toggle-switch-label .toggle-switch-switch {\r\n  right: 0px;\r\n}\r\n</style> ","<template>\r\n  <div class=\"highlight-controls\">\r\n    <span class=\"highlight-label\">Highlight Top 5:</span>\r\n    <div class=\"button-group\">\r\n      <button @click=\"setHighlight('atomicMass')\" title=\"Highest Magnitude\">Magnitude</button>\r\n      <button @click=\"setHighlight('excitatory')\" title=\"Most Excitatory\">Excitatory</button>\r\n      <button @click=\"setHighlight('inhibitory')\" title=\"Most Inhibitory\">Inhibitory</button>\r\n      <button @click=\"setHighlight('stability')\" title=\"Most Stable\">Stability</button>\r\n      <button @click=\"clearHighlight\" class=\"clear-btn\" title=\"Clear Highlight\">âœ–</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nconst { setHighlight, clearHighlight } = usePeriodicTable();\r\n</script>\r\n\r\n<style scoped>\r\n.highlight-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.highlight-label {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n.button-group {\r\n  display: flex;\r\n  background-color: rgba(0,0,0,0.3);\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n  border: 1px solid rgba(255,255,255,0.2);\r\n}\r\n.button-group button {\r\n  background-color: transparent;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.4rem 0.8rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n  border-left: 1px solid rgba(255,255,255,0.1);\r\n}\r\n.button-group button:first-child {\r\n  border-left: none;\r\n}\r\n.button-group button:hover {\r\n  background-color: #667eea;\r\n}\r\n.button-group button.clear-btn {\r\n  background-color: #ef4444;\r\n}\r\n.button-group button.clear-btn:hover {\r\n  background-color: #dc2626;\r\n}\r\n</style> ","<template>\r\n  <div class=\"periodic-table-tab-content\">\r\n    <div class=\"table-controls\">\r\n      <HeatmapControls />\r\n      <FilterControls />\r\n      <HighlightControls />\r\n    </div>\r\n    <PeriodicTable \r\n      v-if=\"vectorStore.vectors.length > 0\" \r\n      :key=\"vectorStore.vectors.length\"\r\n    />\r\n    <div class=\"info-panel-wrapper\">\r\n      <transition name=\"fade\" mode=\"out-in\">\r\n        <!-- Single Selection View -->\r\n        <div v-if=\"selectedElements.length === 1\" key=\"single-view\" class=\"selected-element-info-panel\">\r\n          <div class=\"panel-header\">\r\n            <span class=\"element-symbol\" :style=\"{ color: selectedElements[0].color }\">{{ selectedElements[0].symbol }}</span>\r\n            <h3>{{ selectedElements[0].name }}</h3>\r\n          </div>\r\n          <div class=\"panel-content\">\r\n            <div v-if=\"!selectedElements[0].isPlaceholder\" class=\"element-details-grid\">\r\n              <div class=\"details-column\">\r\n                <div class=\"info-grid\">\r\n                  <div><strong>ID:</strong> <span>{{ selectedElements[0].id }}</span></div>\r\n                  <div><strong>Magnitude:</strong> <span>{{ selectedElements[0].atomicMass }}</span></div>\r\n                  <div><strong>Entropy:</strong> <span>{{ selectedElements[0].entropy }}</span></div>\r\n                  <div><strong>Stability:</strong> <span>{{ selectedElements[0].stability }}</span></div>\r\n                </div>\r\n                <div class=\"quantum-details\">\r\n                  <h4>Quantum Profile</h4>\r\n                  <p><strong>Excitatory:</strong> {{ selectedElements[0].excitatory }}</p>\r\n                  <p><strong>Inhibitory:</strong> {{ selectedElements[0].inhibitory }}</p>\r\n                  <p><strong>Neutral:</strong> {{ selectedElements[0].neutral }}</p>\r\n                </div>\r\n              </div>\r\n              <div class=\"details-column\">\r\n                <div class=\"components-details\">\r\n                  <h4>Vector Components</h4>\r\n                  <div class=\"components-list\">\r\n                    <SparklineChart v-if=\"selectedElements[0].vector\" :components=\"selectedElements[0].vector.components\" />\r\n                  </div>\r\n                </div>\r\n                <div v-if=\"selectedElements[0].vectors && selectedElements[0].vectors.length > 1\" class=\"stacked-vectors-details\">\r\n                  <h4>Stacked Vectors ({{selectedElements[0].vectors.length}})</h4>\r\n                  <div class=\"stacked-vectors-list\">\r\n                    <p>Properties shown are averages for the stack.</p>\r\n                    <strong>IDs:</strong> {{ selectedElements[0].vectors.map(v => v.id).join(', ') }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div v-else class=\"placeholder-content\">\r\n              <div class=\"quantum-details\">\r\n                <h4>Quantum Profile</h4>\r\n                <p><strong>Excitatory:</strong> {{ selectedElements[0].excitatory }}</p>\r\n                <p><strong>Inhibitory:</strong> {{ selectedElements[0].inhibitory }}</p>\r\n                <p><strong>Neutral:</strong> {{ selectedElements[0].neutral }}</p>\r\n              </div>\r\n              <div class=\"undiscovered-text\">\r\n                This quantum state is not present in the current vector set.\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Two-Element Comparison View -->\r\n        <div v-else-if=\"selectedElements.length === 2\" key=\"comparison-view\" class=\"comparison-panel\">\r\n          <div class=\"comparison-column\" v-for=\"element in selectedElements\" :key=\"element.id\">\r\n            <div class=\"panel-header\">\r\n              <span class=\"element-symbol\" :style=\"{ color: element.color }\">{{ element.symbol }}</span>\r\n              <h3>{{ element.name }}</h3>\r\n            </div>\r\n            <div class=\"info-grid\">\r\n              <div><strong>Magnitude:</strong> <span :class=\"getComparisonClass('atomicMass', 0, 1)\">{{ element.atomicMass }}</span></div>\r\n              <div><strong>Entropy:</strong> <span :class=\"getComparisonClass('entropy', 0, 1)\">{{ element.entropy }}</span></div>\r\n              <div><strong>Stability:</strong> <span :class=\"getComparisonClass('stability', 0, 1)\">{{ element.stability }}</span></div>\r\n            </div>\r\n             <div class=\"quantum-details\">\r\n              <h4>Quantum Profile</h4>\r\n              <p><strong>Excitatory:</strong> <span :class=\"getComparisonClass('excitatory', 0, 1)\">{{ element.excitatory }}</span></p>\r\n              <p><strong>Inhibitory:</strong> <span :class=\"getComparisonClass('inhibitory', 0, 1)\">{{ element.inhibitory }}</span></p>\r\n              <p><strong>Neutral:</strong> <span>{{ element.neutral }}</span></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Multi-Selection > 2 View -->\r\n        <div v-else-if=\"selectedElements.length > 2\" key=\"multi-select-view\" class=\"multi-select-panel\">\r\n          <h3>{{ selectedElements.length }} Elements Selected</h3>\r\n          <div class=\"multi-select-list\">\r\n            <span v-for=\"el in selectedElements\" :key=\"el.id\" class=\"multi-select-item\" :style=\"{borderColor: el.color}\">\r\n              {{ el.name }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Default Placeholder View -->\r\n        <div v-else key=\"placeholder-view\" class=\"placeholder-panel\">\r\n          Select an element to see its details. (Ctrl+Click to select multiple)\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, computed } from 'vue';\r\nimport { usePeriodicTable } from '../../composables/usePeriodicTable';\r\nimport { useVectorStore } from '../../stores/vectorStore';\r\nimport PeriodicTable from '../visualization/PeriodicTable.vue';\r\nimport SparklineChart from '../visualization/SparklineChart.vue';\r\nimport HeatmapControls from '../controls/HeatmapControls.vue';\r\nimport FilterControls from '../controls/FilterControls.vue';\r\nimport HighlightControls from '../controls/HighlightControls.vue';\r\n\r\nconst { getElementData } = usePeriodicTable();\r\nconst vectorStore = useVectorStore();\r\nconst selectedElements = ref([]);\r\n\r\nwatch(() => vectorStore.selectedVectorIds, (newIds) => {\r\n  const elements = [];\r\n  newIds.forEach(id => {\r\n    const elementData = getElementData(id);\r\n    if (elementData) {\r\n      elements.push(elementData);\r\n    }\r\n  });\r\n  selectedElements.value = elements;\r\n}, { deep: true, immediate: true });\r\n\r\nconst getComparisonClass = (property, index1, index2) => {\r\n  if (selectedElements.value.length !== 2) return '';\r\n  const val1 = selectedElements.value[index1][property];\r\n  const val2 = selectedElements.value[index2][property];\r\n  if (val1 > val2) return 'is-higher';\r\n  if (val2 > val1) return 'is-lower';\r\n  return 'is-same';\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.15s ease-in-out;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.periodic-table-tab-content {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(10, 20, 30, 0.5);\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  transition: background-color 0.5s ease;\r\n}\r\n\r\n.table-controls {\r\n  padding: 0.5rem 1rem;\r\n  background: rgba(0,0,0,0.2);\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 1rem 2rem;\r\n  align-items: center;\r\n}\r\n\r\n.info-panel-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  background: rgba(0,0,0,0.3);\r\n  border-top: 1px solid rgba(255,255,255,0.1);\r\n  min-height: 220px;\r\n}\r\n\r\n.selected-element-info-panel, .placeholder-panel {\r\n  background: rgba(0, 0, 0, 0.75);\r\n  color: white;\r\n  padding: 1.5rem 2rem;\r\n  border-radius: 12px;\r\n  width: 100%;\r\n  max-width: 800px;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  box-shadow: 0 8px 32px rgba(0,0,0,0.3);\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n.placeholder-panel {\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n  color: rgba(255,255,255,0.6);\r\n  border-bottom: none;\r\n}\r\n\r\n.panel-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid rgba(255,255,255,0.2);\r\n}\r\n\r\n.element-symbol {\r\n  font-size: 3rem;\r\n  font-weight: bold;\r\n  margin-right: 1rem;\r\n  line-height: 1;\r\n}\r\n\r\n.panel-header h3 {\r\n  margin: 0;\r\n  color: #fff;\r\n  font-size: 1.5rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.panel-content {\r\n  display: flex;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.element-details-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem 2rem;\r\n  width: 100%;\r\n}\r\n\r\n.details-column {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.info-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.info-grid div {\r\n  background: none;\r\n  padding: 0.25rem 0;\r\n  font-size: 0.95rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid rgba(255,255,255,0.05);\r\n}\r\n\r\n.info-grid strong {\r\n  opacity: 0.8;\r\n  color: #a0aec0;\r\n}\r\n\r\n.quantum-details, .components-details, .stacked-vectors-details {\r\n  margin-top: 0;\r\n}\r\n\r\nh4 {\r\n  margin-top: 0;\r\n  margin-bottom: 0.75rem;\r\n  color: #667eea;\r\n  border-bottom: 1px solid rgba(102, 126, 234, 0.3);\r\n  padding-bottom: 0.5rem;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.components-details {\r\n  margin-top: 0;\r\n}\r\n\r\n.components-list {\r\n  background: rgba(0,0,0,0.3);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  max-height: 100px;\r\n  overflow-y: auto;\r\n  font-family: 'Courier New', Courier, monospace;\r\n  font-size: 0.9rem;\r\n  word-break: break-all;\r\n  line-height: 1.4;\r\n}\r\n\r\n.placeholder-content {\r\n  width: 100%;\r\n}\r\n\r\n.undiscovered-text {\r\n  margin-top: 1rem;\r\n  padding: 1rem 1.5rem;\r\n  background: rgba(255,255,255,0.05);\r\n  border-radius: 6px;\r\n  text-align: center;\r\n  font-style: italic;\r\n  color: rgba(255,255,255,0.7);\r\n  line-height: 1.6;\r\n}\r\n\r\n.stacked-vectors-details {\r\n  margin-top: 0;\r\n}\r\n\r\n.stacked-vectors-list {\r\n  background: rgba(102, 126, 234, 0.1);\r\n  border: 1px solid rgba(102, 126, 234, 0.2);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  font-size: 0.9rem;\r\n  color: #bec8f1;\r\n  max-height: 100px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.stacked-vectors-list p {\r\n  margin: 0 0 0.5rem 0;\r\n  font-style: italic;\r\n  font-size: 0.85rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n.stacked-vectors-list strong {\r\n  font-weight: 600;\r\n}\r\n\r\n.comparison-panel {\r\n  display: flex;\r\n  gap: 2rem;\r\n  width: 100%;\r\n}\r\n.comparison-column {\r\n  flex: 1;\r\n  background: rgba(255,255,255,0.05);\r\n  padding: 1rem;\r\n  border-radius: 8px;\r\n}\r\n.is-higher { color: #34d399; font-weight: bold; }\r\n.is-lower { color: #f87171; }\r\n.is-same { color: #60a5fa; }\r\n\r\n.multi-select-panel {\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.multi-select-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n  margin-top: 1rem;\r\n}\r\n.multi-select-item {\r\n  background: rgba(255,255,255,0.1);\r\n  padding: 0.3rem 0.7rem;\r\n  border-radius: 4px;\r\n  border-left: 3px solid;\r\n}\r\n</style> ","<template>\r\n  <section class=\"vector-analysis-section\" ref=\"analysisRef\">\r\n    <div class=\"analysis-header\">\r\n      <h2>ðŸ”¬ Vector Analysis Studio</h2>\r\n      <p>Deep dive into vector properties, relationships, and advanced analytics</p>\r\n      <div class=\"analysis-toggle-controls\">\r\n        <button \r\n          class=\"btn-compact btn-secondary\" \r\n          @click=\"toggleAnalysisView\"\r\n          :data-state=\"uiStore.analysisViewMode\"\r\n        >\r\n          <span class=\"btn-icon\">ðŸ“Š</span>\r\n          <span class=\"btn-text\">{{ uiStore.analysisViewMode === 'overview' ? 'Detailed View' : 'Overview' }}</span>\r\n        </button>\r\n        <button \r\n          class=\"btn-compact btn-accent\" \r\n          @click=\"compareVectors\"\r\n          :disabled=\"!canCompareVectors\"\r\n        >\r\n          <span class=\"btn-icon\">âš–ï¸</span>\r\n          <span class=\"btn-text\">Compare Selected</span>\r\n        </button>\r\n        <button \r\n          class=\"btn-compact btn-primary\" \r\n          @click=\"exportAnalysis\"\r\n        >\r\n          <span class=\"btn-icon\">ðŸ“„</span>\r\n          <span class=\"btn-text\">Export Report</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Analysis Content Container - this will be populated by the existing VectorAnalysisStudio module -->\r\n    <div class=\"analysis-content\" id=\"analysis-content\">\r\n      <!-- The existing analysis content will be inserted here -->\r\n      <div class=\"analysis-overview\" id=\"analysis-overview\">\r\n        <div class=\"overview-stats\">\r\n          <StatCard \r\n            icon=\"ðŸŽ¯\" \r\n            :value=\"vectorStore.vectorCount\" \r\n            label=\"Total Vectors\" \r\n          />\r\n          <StatCard \r\n            icon=\"ðŸ“\" \r\n            :value=\"configStore.dimensions\" \r\n            label=\"Dimensions\" \r\n          />\r\n          <StatCard \r\n            icon=\"âš¡\" \r\n            :value=\"vectorStore.averageMagnitude.toFixed(2)\" \r\n            label=\"Avg Magnitude\" \r\n          />\r\n          <StatCard \r\n            icon=\"ðŸŒŠ\" \r\n            :value=\"vectorStore.maxSimilarity.toFixed(2)\" \r\n            label=\"Max Similarity\" \r\n          />\r\n        </div>\r\n\r\n        <!-- Existing analysis tabs structure will be preserved -->\r\n        <div class=\"analysis-tabs\">\r\n          <div class=\"tab-buttons\">\r\n            <button \r\n              v-for=\"tab in tabs\" \r\n              :key=\"tab.id\"\r\n              class=\"tab-btn\" \r\n              :class=\"{ active: uiStore.activeTab === tab.id }\"\r\n              @click=\"setActiveTab(tab.id)\"\r\n            >\r\n              {{ tab.label }}\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"tab-content\">\r\n            <!-- Tab panels will be handled by the existing framework -->\r\n            <div \r\n              v-for=\"tab in tabs\" \r\n              :key=\"tab.id\"\r\n              class=\"tab-panel\" \r\n              :class=\"{ active: uiStore.activeTab === tab.id }\"\r\n              :id=\"`${tab.id}-tab`\"\r\n            >\r\n              <IndividualAnalysisTab v-if=\"tab.id === 'individual'\" />\r\n              <RelationshipsTab v-if=\"tab.id === 'relationships'\" />\r\n              <ClusteringTab v-if=\"tab.id === 'clusters'\" />\r\n              <StatisticsTab v-if=\"tab.id === 'statistics'\" />\r\n              <PeriodicTableTab v-if=\"tab.id === 'periodic-table'\" />\r\n              <!-- Content populated by existing modules -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Detailed analysis view -->\r\n      <div \r\n        class=\"analysis-detailed\" \r\n        id=\"analysis-detailed\" \r\n        :style=\"{ display: uiStore.analysisViewMode === 'detailed' ? 'block' : 'none' }\"\r\n      >\r\n        <!-- Content populated by existing modules -->\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, inject } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport { useConfigStore } from '../stores/configStore'\r\nimport { useExportManager } from '../composables/useExportManager'\r\nimport { useVectorOperations } from '../composables/useVectorOperations'\r\nimport StatCard from './StatCard.vue'\r\nimport IndividualAnalysisTab from './tabs/IndividualAnalysisTab.vue'\r\nimport RelationshipsTab from './tabs/RelationshipsTab.vue'\r\nimport ClusteringTab from './tabs/ClusteringTab.vue'\r\nimport StatisticsTab from './tabs/StatisticsTab.vue'\r\nimport PeriodicTableTab from './tabs/PeriodicTableTab.vue'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\nconst configStore = useConfigStore()\r\nconst framework = computed(() => vectorStore.framework)\r\nconst analysisRef = ref(null)\r\nconst exportManager = useExportManager()\r\nconst vectorOps = useVectorOperations()\r\n\r\nconst tabs = ref([\r\n  { id: 'individual', label: 'Individual Analysis' },\r\n  { id: 'relationships', label: 'Relationships' },\r\n  { id: 'clusters', label: 'Clustering' },\r\n  { id: 'statistics', label: 'Statistics' },\r\n  { id: 'periodic-table', label: 'Periodic Table' }\r\n])\r\n\r\nconst canCompareVectors = computed(() => {\r\n  return vectorStore.selectedVector !== null && vectorStore.vectorCount > 1\r\n})\r\n\r\nconst toggleAnalysisView = () => {\r\n  const newMode = uiStore.analysisViewMode === 'overview' ? 'detailed' : 'overview'\r\n  uiStore.setAnalysisViewMode(newMode)\r\n}\r\n\r\nconst setActiveTab = (tabId) => {\r\n  uiStore.setActiveTab(tabId)\r\n}\r\n\r\nconst compareVectors = async () => {\r\n  if (canCompareVectors.value) {\r\n    const vectorA = vectorStore.selectedVector\r\n    // For now, just compare with the first other vector\r\n    const vectorB = vectorStore.vectors.find(v => v.id !== vectorA.id)\r\n\r\n    if (vectorA && vectorB) {\r\n      const dotProduct = await vectorOps.calculateDotProduct({ values: vectorA.components }, { values: vectorB.components })\r\n      const cosineSimilarity = await vectorOps.calculateCosineSimilarity({ values: vectorA.components }, { values: vectorB.components })\r\n      const euclideanDistance = await vectorOps.calculateDistance({ values: vectorA.components }, { values: vectorB.components })\r\n      \r\n      uiStore.showModal('vectorComparison', {\r\n        vectorA: { id: vectorA.id },\r\n        vectorB: { id: vectorB.id },\r\n        dotProduct,\r\n        cosineSimilarity,\r\n        euclideanDistance\r\n      })\r\n    } else {\r\n      uiStore.showError('Please select a vector and ensure at least one other vector exists.')\r\n    }\r\n  }\r\n}\r\n\r\nconst exportAnalysis = () => {\r\n  exportManager.exportSession()\r\n}\r\n\r\nonMounted(() => {\r\n  // The existing VectorAnalysisStudio will populate the content\r\n  // We just need to ensure the tab switching works with our Vue state\r\n  \r\n  // Set up tab button listeners for the existing content\r\n  setTimeout(() => {\r\n    const tabButtons = document.querySelectorAll('.tab-btn')\r\n    tabButtons.forEach((button, index) => {\r\n      button.addEventListener('click', () => {\r\n        const tabId = tabs.value[index]?.id\r\n        if (tabId) {\r\n          setActiveTab(tabId)\r\n        }\r\n      })\r\n    })\r\n  }, 100)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.vector-analysis-section {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 12px;\r\n  padding: 2rem;\r\n  margin-bottom: 2rem;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.analysis-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-header h2 {\r\n  font-size: 2rem;\r\n  margin: 0 0 0.5rem 0;\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  background-clip: text;\r\n}\r\n\r\n.analysis-header p {\r\n  color: #666;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.analysis-toggle-controls {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.overview-stats {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-tabs {\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  border: 1px solid rgba(255, 255, 255, 0.05);\r\n}\r\n\r\n.tab-buttons {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-bottom: 1rem;\r\n  border-bottom: 2px solid rgba(255, 255, 255, 0.1);\r\n  padding-bottom: 1rem;\r\n}\r\n\r\n.tab-btn {\r\n  padding: 0.8rem 1.2rem;\r\n  border: none;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  color: #666;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-weight: 500;\r\n}\r\n\r\n.tab-btn.active {\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  color: white;\r\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.tab-btn:hover:not(.active) {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: #333;\r\n}\r\n\r\n.tab-content {\r\n  min-height: 300px;\r\n}\r\n\r\n.tab-panel {\r\n  display: none;\r\n}\r\n\r\n.tab-panel.active {\r\n  display: block;\r\n}\r\n\r\n.btn-compact {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.6rem 1rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn-secondary {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: #333;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.btn-accent {\r\n  background: linear-gradient(135deg, #f093fb, #f5576c);\r\n  color: white;\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  color: white;\r\n}\r\n\r\n.btn-compact:hover:not(:disabled) {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.btn-compact:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .vector-analysis-section {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .analysis-toggle-controls {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  \r\n  .tab-buttons {\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .overview-stats {\r\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  }\r\n}\r\n</style> ","<template>\r\n  <aside class=\"info-sidebar\" :class=\"{ collapsed: uiStore.sidebarCollapsed }\">\r\n    <div class=\"sidebar-toggle\" @click=\"uiStore.toggleSidebar\">\r\n      <i class=\"arrow\" :class=\"{ left: !uiStore.sidebarCollapsed, right: uiStore.sidebarCollapsed }\"></i>\r\n    </div>\r\n    <div class=\"sidebar-content\">\r\n      <div v-if=\"selectedVector\" class=\"vector-details\">\r\n        <h4>Vector #{{ selectedVector.id }} Details</h4>\r\n        <div class=\"stats-grid\">\r\n          <div class=\"stat-item\">\r\n            <span>Magnitude</span>\r\n            <strong v-if=\"vectorStats.magnitude\" v-math=\"math.createMagnitudeFormula(vectorStats.magnitude)\"></strong>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span>Entropy</span>\r\n             <strong v-if=\"vectorStats.entropy\" v-math=\"math.createEntropyFormula(vectorStats.entropy)\"></strong>\r\n          </div>\r\n        </div>\r\n        \r\n        <h5>Components ({{ selectedVector.components.length }}D)</h5>\r\n        <div class=\"components-view\" v-math=\"math.createVectorNotation(selectedVector.components)\">\r\n        </div>\r\n\r\n        <h5>Similarities</h5>\r\n        <div v-if=\"similarities.length > 0\" class=\"similarities-list\">\r\n           <ul>\r\n            <li v-for=\"sim in similarities\" :key=\"sim.id\">\r\n              <span>vs #{{ sim.id }}</span>\r\n              <strong :style=\"{ color: sim.color }\">{{ sim.similarity.toFixed(3) }}</strong>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n         <div v-else class=\"no-data\">\r\n          No other vectors to compare.\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"no-selection\">\r\n        <p>Select a vector to see its details.</p>\r\n        <div v-math=\"math.createCosineSimilarityFormula()\"></div>\r\n      </div>\r\n    </div>\r\n  </aside>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, watch, ref } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore'\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport { useMathRenderer } from '../composables/useMathRenderer'\r\nimport { vectorStatistics, vectorOperations } from '../utils/vectorUtils'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\nconst math = useMathRenderer()\r\n\r\nconst selectedVector = computed(() => vectorStore.selectedVector)\r\n\r\nconst vectorStats = computed(() => {\r\n  if (!selectedVector.value) return {}\r\n  return {\r\n      magnitude: vectorOperations.magnitude(selectedVector.value.components),\r\n      entropy: vectorStatistics.entropy(selectedVector.value.components),\r\n  }\r\n})\r\n\r\nconst similarities = computed(() => {\r\n  if (!selectedVector.value) return []\r\n  return vectorStore.vectors\r\n    .filter(v => v.id !== selectedVector.value.id)\r\n    .map(v => {\r\n      const sim = vectorOperations.cosineSimilarity(selectedVector.value.components, v.components)\r\n      return {\r\n        id: v.id,\r\n        similarity: sim,\r\n        color: `hsl(${120 * sim}, 100%, 50%)`\r\n      }\r\n    })\r\n    .sort((a,b) => b.similarity - a.similarity)\r\n    .slice(0, 10)\r\n})\r\n\r\nconst vMath = {\r\n  mounted(el, binding) {\r\n    el.innerHTML = binding.value\r\n    math.renderMath(el)\r\n  },\r\n  updated(el, binding) {\r\n    if (binding.value !== binding.oldValue) {\r\n        el.innerHTML = binding.value\r\n        math.renderMath(el)\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.info-sidebar {\r\n  width: 300px;\r\n  background-color: var(--sidebar-bg);\r\n  color: var(--text-primary);\r\n  transition: width 0.3s ease;\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  border-left: 1px solid var(--border-color);\r\n}\r\n\r\n.info-sidebar.collapsed {\r\n  width: 20px;\r\n}\r\n\r\n.sidebar-toggle {\r\n  position: absolute;\r\n  left: -15px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  width: 30px;\r\n  height: 50px;\r\n  background-color: var(--sidebar-bg);\r\n  border: 1px solid var(--border-color);\r\n  border-right: none;\r\n  border-radius: 8px 0 0 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.sidebar-toggle:hover {\r\n  background-color: var(--primary);\r\n}\r\n.arrow {\r\n  border: solid var(--text-primary);\r\n  border-width: 0 3px 3px 0;\r\n  display: inline-block;\r\n  padding: 3px;\r\n  transition: transform 0.2s;\r\n}\r\n.left { transform: rotate(135deg); }\r\n.right { transform: rotate(-45deg); }\r\n\r\n\r\n.sidebar-content {\r\n  padding: 1rem;\r\n  overflow: hidden;\r\n  height: 100%;\r\n}\r\n\r\n.info-sidebar.collapsed .sidebar-content {\r\n  display: none;\r\n}\r\n\r\n.vector-details h4 {\r\n  margin-top: 0;\r\n  color: var(--primary);\r\n}\r\n.vector-details h5 {\r\n  margin-top: 1.5rem;\r\n  margin-bottom: 0.5rem;\r\n  color: var(--text-secondary);\r\n  text-transform: uppercase;\r\n  font-size: 0.8em;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.stat-item {\r\n    background-color: var(--bg-secondary);\r\n    padding: 0.75rem;\r\n    border-radius: 6px;\r\n    text-align: center;\r\n}\r\n\r\n.stat-item span {\r\n  font-size: 0.8em;\r\n  color: var(--text-secondary);\r\n  display: block;\r\n}\r\n\r\n.stat-item strong {\r\n    font-size: 1.2em;\r\n    color: var(--text-primary);\r\n    display: block;\r\n    margin-top: 0.25rem;\r\n    min-height: 25px;\r\n}\r\n\r\n.components-view {\r\n  background-color: var(--bg-secondary);\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.similarities-list ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n.similarities-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem;\r\n  border-radius: 4px;\r\n}\r\n.similarities-list li:nth-child(odd) {\r\n  background-color: var(--bg-secondary);\r\n}\r\n\r\n.no-selection, .no-data {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n:deep(.katex) {\r\n  font-size: 1.1em !important;\r\n}\r\n\r\n:deep(.katex-display) {\r\n  margin: 0.5em 0 !important;\r\n}\r\n</style>\r\n","<template>\r\n  <Teleport to=\"body\">\r\n    <div class=\"modal-overlay\" @click=\"handleOverlayClick\">\r\n      <div class=\"modal-container\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3 class=\"modal-title\">{{ title }}</h3>\r\n          <button class=\"modal-close-btn\" @click=\"$emit('close')\">Ã—</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <slot />\r\n        </div>\r\n        <div class=\"modal-footer\" v-if=\"$slots.footer\">\r\n          <slot name=\"footer\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Teleport>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, onUnmounted } from 'vue'\r\n\r\ndefineProps({\r\n  title: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['close'])\r\n\r\nconst handleOverlayClick = () => {\r\n  emit('close')\r\n}\r\n\r\nconst handleEscapeKey = (event) => {\r\n  if (event.key === 'Escape') {\r\n    emit('close')\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  document.addEventListener('keydown', handleEscapeKey)\r\n  document.body.style.overflow = 'hidden'\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('keydown', handleEscapeKey)\r\n  document.body.style.overflow = ''\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  backdrop-filter: blur(5px);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  animation: fadeIn 0.3s ease;\r\n}\r\n\r\n.modal-container {\r\n  background: #2c2c2e;\r\n  color: #f5f5f7;\r\n  border-radius: 12px;\r\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\r\n  max-width: 90vw;\r\n  max-height: 90vh;\r\n  width: 600px;\r\n  overflow: hidden;\r\n  animation: slideIn 0.3s ease;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem 1.5rem;\r\n  background: #1e1e1e;\r\n  color: white;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.modal-title {\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n  margin: 0;\r\n}\r\n\r\n.modal-close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: #a0a0a5;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.modal-close-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: white;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.modal-body {\r\n  padding: 1.5rem;\r\n  overflow-y: auto;\r\n  flex-grow: 1;\r\n}\r\n\r\n.modal-footer {\r\n  padding: 1rem 1.5rem;\r\n  background: #1e1e1e;\r\n  border-top: 1px solid #444;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from { opacity: 0; }\r\n  to { opacity: 1; }\r\n}\r\n\r\n@keyframes slideIn {\r\n  from { \r\n    opacity: 0;\r\n    transform: scale(0.95) translateY(-20px);\r\n  }\r\n  to { \r\n    opacity: 1;\r\n    transform: scale(1) translateY(0);\r\n  }\r\n}\r\n\r\n/* Scrollbar styling */\r\n.modal-body::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-track {\r\n  background: #2c2c2e;\r\n  border-radius: 4px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-thumb {\r\n  background: #555;\r\n  border-radius: 4px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-thumb:hover {\r\n  background: #777;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .modal-container {\r\n    width: 95vw;\r\n    margin: 1rem;\r\n    max-height: calc(100vh - 2rem);\r\n  }\r\n  \r\n  .modal-header,\r\n  .modal-body,\r\n  .modal-footer {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .modal-title {\r\n    font-size: 1.1rem;\r\n  }\r\n}\r\n</style> ","<template>\n  <div class=\"tutorial-content\">\n    <!-- Progress bar -->\n    <div class=\"tutorial-progress-container\">\n      <div class=\"tutorial-progress-bar\" :style=\"{ width: tutorialManager.progress + '%' }\"></div>\n    </div>\n    \n    <!-- Step indicator -->\n    <div class=\"tutorial-step-indicator\">\n      Step {{ tutorialManager.currentStep + 1 }} of {{ tutorialManager.tutorialSteps.length }}\n    </div>\n    \n    <!-- Current step content -->\n    <div v-if=\"tutorialManager.currentStepData\" class=\"tutorial-step\">\n      <h3 v-html=\"tutorialManager.currentStepData.title\"></h3>\n      <p v-html=\"tutorialManager.currentStepData.content\"></p>\n    </div>\n    \n    <!-- Navigation buttons -->\n    <div class=\"tutorial-navigation\">\n      <button \n        class=\"btn-compact btn-secondary\"\n        :disabled=\"tutorialManager.isFirstStep\"\n        @click=\"tutorialManager.previousStep\"\n      >\n        â† Previous\n      </button>\n      \n      <div class=\"tutorial-step-dots\">\n        <span \n          v-for=\"(step, index) in tutorialManager.tutorialSteps\" \n          :key=\"index\"\n          class=\"step-dot\"\n          :class=\"{ active: index === tutorialManager.currentStep, completed: index < tutorialManager.currentStep }\"\n          @click=\"tutorialManager.goToStep(index)\"\n        ></span>\n      </div>\n      \n      <button \n        class=\"btn-compact btn-primary\"\n        @click=\"tutorialManager.nextStep\"\n      >\n        {{ tutorialManager.isLastStep ? 'Finish ðŸŽ‰' : 'Next â†’' }}\n      </button>\n    </div>\n    \n    <!-- Keyboard shortcuts help -->\n    <div class=\"tutorial-help\">\n      <small>\n        ðŸ’¡ Use arrow keys to navigate, numbers 1-9 for quick step access, or ESC to exit\n      </small>\n    </div>\n    \n    <!-- Classic tutorial features from original -->\n    <div class=\"tutorial-features\" v-if=\"tutorialManager.currentStep === 0\">\n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">ðŸŽ¯</span>\n          <div class=\"feature-text\">\n            <strong>Vector Elements:</strong> Each vector is represented as an atomic element with unique properties\n          </div>\n        </div>\n        \n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">âš¡</span>\n          <div class=\"feature-text\">\n            <strong>Force Visualization:</strong> See relationships through various similarity metrics (cosine, correlation, etc.)\n          </div>\n        </div>\n        \n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">ðŸ§ </span>\n          <div class=\"feature-text\">\n            <strong>Neural Mode:</strong> Transform vectors into neural network representations with different activation functions\n          </div>\n        </div>\n        \n        <div class=\"feature-item\">\n          <span class=\"feature-icon\">ðŸ”¬</span>\n          <div class=\"feature-text\">\n            <strong>Analysis Studio:</strong> Deep dive into vector properties, clustering, and statistical analysis\n          </div>\n        </div>\n      </div>\n      \n    <!-- Quick tips for final step -->\n    <div class=\"tutorial-tips\" v-if=\"tutorialManager.isLastStep\">\n        <h5>Quick Tips:</h5>\n        <ul>\n          <li>Click on any vector element to view detailed properties</li>\n          <li>Use the controls toolbar to adjust dimensions and generate new vectors</li>\n          <li>Toggle forces to see vector relationships in real-time</li>\n          <li>Try Neural Mode for advanced visualization</li>\n          <li>Upload your own vector data in various formats</li>\n        <li>Press ? anytime to see keyboard shortcuts</li>\n        </ul>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useTutorialManager } from '../../composables/useTutorialManager'\n\nconst tutorialManager = useTutorialManager()\n</script>\n\n<style scoped>\n.tutorial-content {\n  padding: 0;\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n.tutorial-progress-container {\n  width: 100%;\n  height: 4px;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 2px;\n  margin-bottom: 20px;\n  overflow: hidden;\n}\n\n.tutorial-progress-bar {\n  height: 100%;\n  background: linear-gradient(90deg, var(--accent-secondary) 0%, var(--accent-primary) 100%);\n  border-radius: 2px;\n  transition: width 0.3s ease;\n}\n\n.tutorial-step-indicator {\n  text-align: center;\n  font-size: 0.9em;\n  opacity: 0.8;\n  margin-bottom: 15px;\n  color: var(--text-secondary);\n}\n\n.tutorial-step h3 {\n  margin: 0 0 15px 0;\n  font-size: 1.4em;\n  text-align: center;\n  color: var(--text-primary);\n}\n\n.tutorial-step p {\n  margin: 0 0 25px 0;\n  line-height: 1.6;\n  font-size: 1em;\n  text-align: center;\n  color: var(--text-secondary);\n}\n\n.tutorial-navigation {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 15px;\n  margin-bottom: 15px;\n}\n\n.tutorial-step-dots {\n  display: flex;\n  gap: 8px;\n  flex: 1;\n  justify-content: center;\n}\n\n.step-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.3);\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.step-dot.active {\n  background: var(--accent-primary);\n  transform: scale(1.3);\n}\n\n.step-dot.completed {\n  background: var(--success);\n}\n\n.step-dot:hover {\n  background: rgba(255, 255, 255, 0.6);\n  transform: scale(1.2);\n}\n\n.tutorial-help {\n  text-align: center;\n  padding-top: 15px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.tutorial-help small {\n  color: var(--text-secondary);\n  opacity: 0.8;\n}\n\n.tutorial-features {\n  margin-top: 20px;\n}\n\n.feature-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  border-left: 3px solid var(--accent-primary);\n}\n\n.feature-icon {\n  font-size: 1.2em;\n  min-width: 24px;\n}\n\n.feature-text {\n  flex: 1;\n}\n\n.feature-text strong {\n  color: var(--accent-primary);\n  display: block;\n  margin-bottom: 4px;\n}\n\n.tutorial-tips {\n  margin-top: 20px;\n  padding: 15px;\n  background: rgba(10, 132, 255, 0.1);\n  border-radius: 8px;\n  border-left: 3px solid var(--accent-primary);\n}\n\n.tutorial-tips h5 {\n  margin: 0 0 10px 0;\n  color: var(--accent-primary);\n  font-size: 1.1em;\n}\n\n.tutorial-tips ul {\n  margin: 0;\n  padding-left: 20px;\n}\n\n.tutorial-tips li {\n  margin-bottom: 6px;\n  color: var(--text-secondary);\n  line-height: 1.4;\n}\n\n.btn-compact:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Tutorial highlight animation */\n:global(.tutorial-highlight) {\n  animation: tutorialPulse 2s infinite;\n  border: 3px solid #ffd700 !important;\n  border-radius: 8px !important;\n  box-shadow: 0 0 20px rgba(255, 215, 0, 0.6) !important;\n}\n\n@keyframes tutorialPulse {\n  0%, 100% { \n    box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);\n    transform: scale(1);\n  }\n  50% { \n    box-shadow: 0 0 30px rgba(255, 215, 0, 0.9);\n    transform: scale(1.02);\n  }\n}\n\n@media (max-width: 768px) {\n  .tutorial-navigation {\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .tutorial-step-dots {\n    order: -1;\n    margin-bottom: 10px;\n  }\n  \n  .feature-item {\n    flex-direction: column;\n    text-align: center;\n  }\n}\n</style> ","import { ref, computed, watch } from 'vue'\r\nimport { useVectorStore } from '../stores/vectorStore.js'\r\nimport { vectorOperations, vectorStatistics } from '../utils/vectorUtils.js'\r\n\r\n/**\r\n * Vue Composable for Advanced Vector Analytics\r\n * Provides clustering, PCA, statistical analysis, and pattern detection\r\n */\r\nexport function useAnalytics() {\r\n  const vectorStore = useVectorStore()\r\n  \r\n  // Reactive state\r\n  const isAnalyzing = ref(false)\r\n  const analysisResults = ref(null)\r\n  const lastAnalysisType = ref(null)\r\n  const analysisError = ref(null)\r\n  const analysisProgress = ref(0)\r\n  \r\n  // Computed properties\r\n  const vectors = computed(() => vectorStore.vectors)\r\n  const hasVectors = computed(() => vectors.value.length > 0)\r\n  const canAnalyze = computed(() => hasVectors.value && !isAnalyzing.value)\r\n  \r\n  // Watch for vector changes to invalidate cache\r\n  watch(vectors, () => {\r\n    if (analysisResults.value) {\r\n      analysisResults.value.isStale = true\r\n    }\r\n  }, { deep: true })\r\n  \r\n  /**\r\n   * Execute analysis with progress tracking\r\n   * @param {Function} analysisFunction - Analysis function to execute\r\n   * @param {string} analysisType - Type of analysis\r\n   * @returns {Promise} Analysis result\r\n   */\r\n  const executeAnalysis = async (analysisFunction, analysisType) => {\r\n    if (isAnalyzing.value) {\r\n      throw new Error('Analysis already in progress')\r\n    }\r\n    \r\n    isAnalyzing.value = true\r\n    analysisError.value = null\r\n    analysisProgress.value = 0\r\n    lastAnalysisType.value = analysisType\r\n    \r\n    try {\r\n      const result = await analysisFunction()\r\n      analysisResults.value = {\r\n        type: analysisType,\r\n        data: result,\r\n        timestamp: new Date(),\r\n        isStale: false,\r\n        vectorCount: vectors.value.length,\r\n        dimensions: vectors.value[0]?.values?.length || 0\r\n      }\r\n      analysisProgress.value = 100\r\n      return result\r\n    } catch (error) {\r\n      analysisError.value = error.message\r\n      throw error\r\n    } finally {\r\n      isAnalyzing.value = false\r\n    }\r\n  }\r\n  \r\n  // Principal Component Analysis\r\n  const performPCA = async (components = 2) => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for PCA')\r\n      }\r\n      \r\n      analysisProgress.value = 10\r\n      const matrix = vectors.value.map(v => v.values)\r\n      \r\n      // Center the data\r\n      analysisProgress.value = 20\r\n      const means = calculateColumnMeans(matrix)\r\n      const centered = matrix.map(row => \r\n        row.map((val, i) => val - means[i])\r\n      )\r\n      \r\n      // Calculate covariance matrix\r\n      analysisProgress.value = 40\r\n      const covariance = calculateCovarianceMatrix(centered)\r\n      \r\n      // Perform eigendecomposition (simplified)\r\n      analysisProgress.value = 60\r\n      const { eigenvalues, eigenvectors } = performEigendecomposition(covariance, components)\r\n      \r\n      // Project data onto principal components\r\n      analysisProgress.value = 80\r\n      const projectedData = centered.map(row => \r\n        eigenvectors.slice(0, components).map(eigenvector =>\r\n          row.reduce((sum, val, i) => sum + val * eigenvector[i], 0)\r\n        )\r\n      )\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        projectedData,\r\n        eigenvalues: eigenvalues.slice(0, components),\r\n        eigenvectors: eigenvectors.slice(0, components),\r\n        explainedVariance: calculateExplainedVariance(eigenvalues, components),\r\n        means,\r\n        components\r\n      }\r\n    }, 'PCA')\r\n  }\r\n  \r\n  // K-Means Clustering\r\n  const performKMeans = async (k = 3, maxIterations = 100) => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for clustering')\r\n      }\r\n      \r\n      if (k > vectors.value.length) {\r\n        throw new Error('Number of clusters cannot exceed number of vectors')\r\n      }\r\n      \r\n      analysisProgress.value = 10\r\n      const data = vectors.value.map(v => v.values)\r\n      \r\n      // Initialize centroids randomly\r\n      const centroids = initializeRandomCentroids(data, k)\r\n      let assignments = new Array(data.length).fill(0)\r\n      let hasConverged = false\r\n      let iteration = 0\r\n      \r\n      while (!hasConverged && iteration < maxIterations) {\r\n        analysisProgress.value = 10 + (iteration / maxIterations) * 80\r\n        \r\n        // Assign points to nearest centroid\r\n        const newAssignments = data.map(point => \r\n          findNearestCentroid(point, centroids)\r\n        )\r\n        \r\n        // Check for convergence\r\n        hasConverged = newAssignments.every((assignment, i) => \r\n          assignment === assignments[i]\r\n        )\r\n        \r\n        assignments = newAssignments\r\n        \r\n        // Update centroids\r\n        if (!hasConverged) {\r\n          updateCentroids(data, assignments, centroids, k)\r\n        }\r\n        \r\n        iteration++\r\n      }\r\n      \r\n      // Calculate cluster statistics\r\n      const clusters = calculateClusterStatistics(data, assignments, centroids, k)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        clusters,\r\n        assignments,\r\n        centroids,\r\n        iterations: iteration,\r\n        converged: hasConverged,\r\n        silhouetteScore: calculateSilhouetteScore(data, assignments, centroids)\r\n      }\r\n    }, 'K-Means')\r\n  }\r\n  \r\n  // Hierarchical Clustering\r\n  const performHierarchicalClustering = async (linkage = 'ward') => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for hierarchical clustering')\r\n      }\r\n      \r\n      analysisProgress.value = 10\r\n      const data = vectors.value.map(v => v.values)\r\n      const n = data.length\r\n      \r\n      // Calculate distance matrix\r\n      analysisProgress.value = 30\r\n      const distanceMatrix = calculateDistanceMatrix(data)\r\n      \r\n      // Perform hierarchical clustering\r\n      analysisProgress.value = 50\r\n      const dendrogram = buildDendrogram(distanceMatrix, linkage)\r\n      \r\n      // Generate clusters for different cut levels\r\n      analysisProgress.value = 80\r\n      const clusterLevels = generateClusterLevels(dendrogram, n)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        dendrogram,\r\n        distanceMatrix,\r\n        clusterLevels,\r\n        linkage\r\n      }\r\n    }, 'Hierarchical Clustering')\r\n  }\r\n  \r\n  // Statistical Analysis\r\n  const performStatisticalAnalysis = async () => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for statistical analysis')\r\n      }\r\n      \r\n      analysisProgress.value = 20\r\n      \r\n      // Calculate individual vector statistics\r\n      const vectorStats = vectors.value.map(vector => ({\r\n        id: vector.id,\r\n        ...vectorStatistics.calculate(vector.values)\r\n      }))\r\n      \r\n      analysisProgress.value = 40\r\n      \r\n      // Calculate global statistics\r\n      const allValues = vectors.value.flatMap(v => v.values)\r\n      const globalStats = vectorStatistics.calculate(allValues)\r\n      \r\n      analysisProgress.value = 60\r\n      \r\n      // Calculate correlation matrix\r\n      const correlationMatrix = calculateCorrelationMatrix(vectors.value)\r\n      \r\n      analysisProgress.value = 80\r\n      \r\n      // Detect outliers\r\n      const outliers = detectOutliers(vectors.value)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        vectorStatistics: vectorStats,\r\n        globalStatistics: globalStats,\r\n        correlationMatrix,\r\n        outliers,\r\n        summary: {\r\n          totalVectors: vectors.value.length,\r\n          dimensions: vectors.value[0]?.values?.length || 0,\r\n          averageMagnitude: vectorStats.reduce((sum, stat) => sum + stat.magnitude, 0) / vectorStats.length,\r\n          sparsityRange: {\r\n            min: Math.min(...vectorStats.map(s => s.sparsity)),\r\n            max: Math.max(...vectorStats.map(s => s.sparsity))\r\n          }\r\n        }\r\n      }\r\n    }, 'Statistical Analysis')\r\n  }\r\n  \r\n  // Pattern Detection\r\n  const detectPatterns = async () => {\r\n    return executeAnalysis(async () => {\r\n      if (!hasVectors.value) {\r\n        throw new Error('No vectors available for pattern detection')\r\n      }\r\n      \r\n      analysisProgress.value = 25\r\n      const patterns = []\r\n      \r\n      // Detect linear relationships\r\n      const linearPatterns = detectLinearPatterns(vectors.value)\r\n      patterns.push(...linearPatterns)\r\n      \r\n      analysisProgress.value = 50\r\n      \r\n      // Detect clusters of similar vectors\r\n      const similarityGroups = detectSimilarityGroups(vectors.value)\r\n      patterns.push(...similarityGroups)\r\n      \r\n      analysisProgress.value = 75\r\n      \r\n      // Detect dimensional patterns\r\n      const dimensionalPatterns = detectDimensionalPatterns(vectors.value)\r\n      patterns.push(...dimensionalPatterns)\r\n      \r\n      analysisProgress.value = 100\r\n      \r\n      return {\r\n        patterns,\r\n        summary: {\r\n          totalPatterns: patterns.length,\r\n          patternTypes: [...new Set(patterns.map(p => p.type))],\r\n          confidence: patterns.reduce((sum, p) => sum + p.confidence, 0) / patterns.length\r\n        }\r\n      }\r\n    }, 'Pattern Detection')\r\n  }\r\n  \r\n  // Helper Functions\r\n  const calculateColumnMeans = (matrix) => {\r\n    const rows = matrix.length\r\n    const cols = matrix[0].length\r\n    const means = new Array(cols).fill(0)\r\n    \r\n    for (let j = 0; j < cols; j++) {\r\n      for (let i = 0; i < rows; i++) {\r\n        means[j] += matrix[i][j]\r\n      }\r\n      means[j] /= rows\r\n    }\r\n    \r\n    return means\r\n  }\r\n  \r\n  const calculateCovarianceMatrix = (centeredMatrix) => {\r\n    const rows = centeredMatrix.length\r\n    const cols = centeredMatrix[0].length\r\n    const covariance = Array(cols).fill().map(() => Array(cols).fill(0))\r\n    \r\n    for (let i = 0; i < cols; i++) {\r\n      for (let j = 0; j < cols; j++) {\r\n        let sum = 0\r\n        for (let k = 0; k < rows; k++) {\r\n          sum += centeredMatrix[k][i] * centeredMatrix[k][j]\r\n        }\r\n        covariance[i][j] = sum / (rows - 1)\r\n      }\r\n    }\r\n    \r\n    return covariance\r\n  }\r\n  \r\n  const performEigendecomposition = (matrix, components) => {\r\n    // Simplified eigendecomposition using power iteration\r\n    // In a production app, you'd use a proper linear algebra library\r\n    const size = matrix.length\r\n    const eigenvalues = []\r\n    const eigenvectors = []\r\n    \r\n    for (let i = 0; i < Math.min(components, size); i++) {\r\n      const { value, vector } = powerIteration(matrix, 100)\r\n      eigenvalues.push(value)\r\n      eigenvectors.push(vector)\r\n    }\r\n    \r\n    return { eigenvalues, eigenvectors }\r\n  }\r\n  \r\n  const powerIteration = (matrix, iterations) => {\r\n    const size = matrix.length\r\n    let vector = Array.from({ length: size }, () => Math.random())\r\n    \r\n    for (let i = 0; i < iterations; i++) {\r\n      // Multiply matrix by vector\r\n      const newVector = matrix.map(row => \r\n        row.reduce((sum, val, j) => sum + val * vector[j], 0)\r\n      )\r\n      \r\n      // Normalize\r\n      const norm = Math.sqrt(newVector.reduce((sum, val) => sum + val * val, 0))\r\n      vector = newVector.map(val => val / norm)\r\n    }\r\n    \r\n    // Calculate eigenvalue\r\n    const matrixVector = matrix.map(row => \r\n      row.reduce((sum, val, j) => sum + val * vector[j], 0)\r\n    )\r\n    const eigenvalue = vector.reduce((sum, val, i) => sum + val * matrixVector[i], 0)\r\n    \r\n    return { value: eigenvalue, vector }\r\n  }\r\n  \r\n  const calculateExplainedVariance = (eigenvalues, components) => {\r\n    const totalVariance = eigenvalues.reduce((sum, val) => sum + val, 0)\r\n    const explainedVariance = eigenvalues.slice(0, components).reduce((sum, val) => sum + val, 0)\r\n    return explainedVariance / totalVariance\r\n  }\r\n  \r\n  const initializeRandomCentroids = (data, k) => {\r\n    const dimensions = data[0].length\r\n    const centroids = []\r\n    \r\n    for (let i = 0; i < k; i++) {\r\n      const centroid = []\r\n      for (let j = 0; j < dimensions; j++) {\r\n        const min = Math.min(...data.map(point => point[j]))\r\n        const max = Math.max(...data.map(point => point[j]))\r\n        centroid.push(Math.random() * (max - min) + min)\r\n      }\r\n      centroids.push(centroid)\r\n    }\r\n    \r\n    return centroids\r\n  }\r\n  \r\n  const findNearestCentroid = (point, centroids) => {\r\n    let minDistance = Infinity\r\n    let nearestIndex = 0\r\n    \r\n    centroids.forEach((centroid, index) => {\r\n      const distance = vectorOperations.euclideanDistance(point, centroid)\r\n      if (distance < minDistance) {\r\n        minDistance = distance\r\n        nearestIndex = index\r\n      }\r\n    })\r\n    \r\n    return nearestIndex\r\n  }\r\n  \r\n  const updateCentroids = (data, assignments, centroids, k) => {\r\n    for (let i = 0; i < k; i++) {\r\n      const clusterPoints = data.filter((_, index) => assignments[index] === i)\r\n      \r\n      if (clusterPoints.length > 0) {\r\n        const dimensions = data[0].length\r\n        for (let j = 0; j < dimensions; j++) {\r\n          centroids[i][j] = clusterPoints.reduce((sum, point) => sum + point[j], 0) / clusterPoints.length\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  const calculateClusterStatistics = (data, assignments, centroids, k) => {\r\n    const clusters = []\r\n    \r\n    for (let i = 0; i < k; i++) {\r\n      const clusterPoints = data.filter((_, index) => assignments[index] === i)\r\n      const clusterIndices = assignments.map((assignment, index) => \r\n        assignment === i ? index : -1\r\n      ).filter(index => index !== -1)\r\n      \r\n      if (clusterPoints.length > 0) {\r\n        const distances = clusterPoints.map(point => \r\n          vectorOperations.euclideanDistance(point, centroids[i])\r\n        )\r\n        \r\n        clusters.push({\r\n          id: i,\r\n          centroid: centroids[i],\r\n          points: clusterPoints,\r\n          pointIndices: clusterIndices,\r\n          size: clusterPoints.length,\r\n          avgDistance: distances.reduce((sum, d) => sum + d, 0) / distances.length,\r\n          maxDistance: Math.max(...distances),\r\n          minDistance: Math.min(...distances)\r\n        })\r\n      }\r\n    }\r\n    \r\n    return clusters\r\n  }\r\n  \r\n  const calculateSilhouetteScore = (data, assignments, centroids) => {\r\n    // Simplified silhouette score calculation\r\n    let totalScore = 0\r\n    \r\n    for (let i = 0; i < data.length; i++) {\r\n      const point = data[i]\r\n      const cluster = assignments[i]\r\n      \r\n      // Calculate average distance to points in same cluster\r\n      const sameClusterPoints = data.filter((_, j) => assignments[j] === cluster && j !== i)\r\n      const avgIntraDistance = sameClusterPoints.length > 0 \r\n        ? sameClusterPoints.reduce((sum, p) => sum + vectorOperations.euclideanDistance(point, p), 0) / sameClusterPoints.length\r\n        : 0\r\n      \r\n      // Calculate average distance to nearest other cluster\r\n      let minInterDistance = Infinity\r\n      for (let c = 0; c < centroids.length; c++) {\r\n        if (c !== cluster) {\r\n          const otherClusterPoints = data.filter((_, j) => assignments[j] === c)\r\n          if (otherClusterPoints.length > 0) {\r\n            const avgDistance = otherClusterPoints.reduce((sum, p) => sum + vectorOperations.euclideanDistance(point, p), 0) / otherClusterPoints.length\r\n            minInterDistance = Math.min(minInterDistance, avgDistance)\r\n          }\r\n        }\r\n      }\r\n      \r\n      const silhouette = (minInterDistance - avgIntraDistance) / Math.max(minInterDistance, avgIntraDistance)\r\n      totalScore += silhouette\r\n    }\r\n    \r\n    return totalScore / data.length\r\n  }\r\n  \r\n  const calculateDistanceMatrix = (data) => {\r\n    const n = data.length\r\n    const matrix = Array(n).fill().map(() => Array(n).fill(0))\r\n    \r\n    for (let i = 0; i < n; i++) {\r\n      for (let j = i + 1; j < n; j++) {\r\n        const distance = vectorOperations.euclideanDistance(data[i], data[j])\r\n        matrix[i][j] = distance\r\n        matrix[j][i] = distance\r\n      }\r\n    }\r\n    \r\n    return matrix\r\n  }\r\n  \r\n  const buildDendrogram = (distanceMatrix, linkage) => {\r\n    // Simplified hierarchical clustering\r\n    const n = distanceMatrix.length\r\n    const clusters = Array.from({ length: n }, (_, i) => ({ id: i, members: [i], height: 0 }))\r\n    const dendrogram = []\r\n    \r\n    while (clusters.length > 1) {\r\n      // Find closest pair of clusters\r\n      let minDistance = Infinity\r\n      let mergeI = 0, mergeJ = 1\r\n      \r\n      for (let i = 0; i < clusters.length; i++) {\r\n        for (let j = i + 1; j < clusters.length; j++) {\r\n          const distance = calculateClusterDistance(clusters[i], clusters[j], distanceMatrix, linkage)\r\n          if (distance < minDistance) {\r\n            minDistance = distance\r\n            mergeI = i\r\n            mergeJ = j\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Merge clusters\r\n      const newCluster = {\r\n        id: n + dendrogram.length,\r\n        members: [...clusters[mergeI].members, ...clusters[mergeJ].members],\r\n        height: minDistance,\r\n        left: clusters[mergeI],\r\n        right: clusters[mergeJ]\r\n      }\r\n      \r\n      dendrogram.push(newCluster)\r\n      \r\n      // Remove merged clusters and add new one\r\n      clusters.splice(Math.max(mergeI, mergeJ), 1)\r\n      clusters.splice(Math.min(mergeI, mergeJ), 1)\r\n      clusters.push(newCluster)\r\n    }\r\n    \r\n    return dendrogram\r\n  }\r\n  \r\n  const calculateClusterDistance = (clusterA, clusterB, distanceMatrix, linkage) => {\r\n    const distances = []\r\n    \r\n    for (const i of clusterA.members) {\r\n      for (const j of clusterB.members) {\r\n        distances.push(distanceMatrix[i][j])\r\n      }\r\n    }\r\n    \r\n    switch (linkage) {\r\n      case 'single':\r\n        return Math.min(...distances)\r\n      case 'complete':\r\n        return Math.max(...distances)\r\n      case 'average':\r\n        return distances.reduce((sum, d) => sum + d, 0) / distances.length\r\n      case 'ward':\r\n      default:\r\n        return distances.reduce((sum, d) => sum + d, 0) / distances.length\r\n    }\r\n  }\r\n  \r\n  const generateClusterLevels = (dendrogram, n) => {\r\n    const levels = []\r\n    const maxHeight = Math.max(...dendrogram.map(node => node.height))\r\n    \r\n    for (let k = 2; k <= n; k++) {\r\n      const threshold = maxHeight * (k - 1) / (n - 1)\r\n      levels.push({\r\n        k,\r\n        threshold,\r\n        clusters: cutDendrogram(dendrogram[dendrogram.length - 1], threshold, [])\r\n      })\r\n    }\r\n    \r\n    return levels\r\n  }\r\n  \r\n  const cutDendrogram = (node, threshold, clusters) => {\r\n    if (node.height <= threshold || !node.left || !node.right) {\r\n      clusters.push(node.members)\r\n      return clusters\r\n    }\r\n    \r\n    cutDendrogram(node.left, threshold, clusters)\r\n    cutDendrogram(node.right, threshold, clusters)\r\n    return clusters\r\n  }\r\n  \r\n  const calculateCorrelationMatrix = (vectors) => {\r\n    const n = vectors.length\r\n    const matrix = Array(n).fill().map(() => Array(n).fill(0))\r\n    \r\n    for (let i = 0; i < n; i++) {\r\n      for (let j = 0; j < n; j++) {\r\n        if (i === j) {\r\n          matrix[i][j] = 1\r\n        } else {\r\n          matrix[i][j] = vectorOperations.cosineSimilarity(vectors[i].values, vectors[j].values)\r\n        }\r\n      }\r\n    }\r\n    \r\n    return matrix\r\n  }\r\n  \r\n  const detectOutliers = (vectors) => {\r\n    const magnitudes = vectors.map(v => vectorOperations.magnitude(v.values))\r\n    const mean = magnitudes.reduce((sum, mag) => sum + mag, 0) / magnitudes.length\r\n    const stdDev = Math.sqrt(magnitudes.reduce((sum, mag) => sum + Math.pow(mag - mean, 2), 0) / magnitudes.length)\r\n    \r\n    const threshold = 2 * stdDev\r\n    \r\n    return vectors.filter((vector, index) => {\r\n      const magnitude = magnitudes[index]\r\n      return Math.abs(magnitude - mean) > threshold\r\n    }).map((vector, originalIndex) => ({\r\n      vector,\r\n      originalIndex,\r\n      magnitude: vectorOperations.magnitude(vector.values),\r\n      deviationFromMean: Math.abs(vectorOperations.magnitude(vector.values) - mean)\r\n    }))\r\n  }\r\n  \r\n  const detectLinearPatterns = (vectors) => {\r\n    const patterns = []\r\n    \r\n    for (let i = 0; i < vectors.length; i++) {\r\n      for (let j = i + 1; j < vectors.length; j++) {\r\n        const similarity = vectorOperations.cosineSimilarity(vectors[i].values, vectors[j].values)\r\n        \r\n        if (Math.abs(similarity) > 0.95) {\r\n          patterns.push({\r\n            type: 'linear_relationship',\r\n            confidence: Math.abs(similarity),\r\n            vectors: [vectors[i].id, vectors[j].id],\r\n            description: similarity > 0 ? 'Highly positively correlated' : 'Highly negatively correlated'\r\n          })\r\n        }\r\n      }\r\n    }\r\n    \r\n    return patterns\r\n  }\r\n  \r\n  const detectSimilarityGroups = (vectors) => {\r\n    const threshold = 0.8\r\n    const groups = []\r\n    const visited = new Set()\r\n    \r\n    for (let i = 0; i < vectors.length; i++) {\r\n      if (visited.has(i)) continue\r\n      \r\n      const group = [i]\r\n      visited.add(i)\r\n      \r\n      for (let j = i + 1; j < vectors.length; j++) {\r\n        if (visited.has(j)) continue\r\n        \r\n        const similarity = vectorOperations.cosineSimilarity(vectors[i].values, vectors[j].values)\r\n        if (similarity > threshold) {\r\n          group.push(j)\r\n          visited.add(j)\r\n        }\r\n      }\r\n      \r\n      if (group.length > 1) {\r\n        groups.push({\r\n          type: 'similarity_group',\r\n          confidence: 0.8,\r\n          vectors: group.map(idx => vectors[idx].id),\r\n          description: `Group of ${group.length} similar vectors`\r\n        })\r\n      }\r\n    }\r\n    \r\n    return groups\r\n  }\r\n  \r\n  const detectDimensionalPatterns = (vectors) => {\r\n    const patterns = []\r\n    const dimensions = vectors[0].values.length\r\n    \r\n    // Check for consistently zero dimensions\r\n    for (let dim = 0; dim < dimensions; dim++) {\r\n      const values = vectors.map(v => v.values[dim])\r\n      const maxAbs = Math.max(...values.map(Math.abs))\r\n      \r\n      if (maxAbs < 1e-10) {\r\n        patterns.push({\r\n          type: 'zero_dimension',\r\n          confidence: 1.0,\r\n          dimension: dim,\r\n          description: `Dimension ${dim + 1} is consistently zero across all vectors`\r\n        })\r\n      }\r\n    }\r\n    \r\n    return patterns\r\n  }\r\n  \r\n  // Utility functions\r\n  const clearResults = () => {\r\n    analysisResults.value = null\r\n    analysisError.value = null\r\n    analysisProgress.value = 0\r\n  }\r\n  \r\n  const exportResults = () => {\r\n    if (!analysisResults.value) return null\r\n    \r\n    return {\r\n      ...analysisResults.value,\r\n      exportedAt: new Date()\r\n    }\r\n  }\r\n  \r\n  return {\r\n    // Reactive state\r\n    isAnalyzing,\r\n    analysisResults,\r\n    lastAnalysisType,\r\n    analysisError,\r\n    analysisProgress,\r\n    \r\n    // Computed properties\r\n    hasVectors,\r\n    canAnalyze,\r\n    \r\n    // Analysis methods\r\n    performPCA,\r\n    performKMeans,\r\n    performHierarchicalClustering,\r\n    performStatisticalAnalysis,\r\n    detectPatterns,\r\n    \r\n    // Utility methods\r\n    clearResults,\r\n    exportResults\r\n  }\r\n} ","<template>\r\n  <div class=\"analysis-modal\">\r\n    <div class=\"modal-header\">\r\n      <h3>ðŸ”¬ Advanced Analysis</h3>\r\n      <p>Perform comprehensive analysis on your vector dataset</p>\r\n    </div>\r\n\r\n    <!-- Analysis Type Selection -->\r\n    <div class=\"analysis-types\">\r\n      <div class=\"type-grid\">\r\n        <div\r\n          v-for=\"analysisType in analysisTypes\"\r\n          :key=\"analysisType.id\"\r\n          class=\"analysis-card\"\r\n          :class=\"{ \r\n            selected: selectedAnalysis === analysisType.id,\r\n            disabled: !analysisType.available \r\n          }\"\r\n          @click=\"selectAnalysis(analysisType.id)\"\r\n        >\r\n          <div class=\"card-icon\">{{ analysisType.icon }}</div>\r\n          <div class=\"card-title\">{{ analysisType.title }}</div>\r\n          <div class=\"card-description\">{{ analysisType.description }}</div>\r\n          <div v-if=\"!analysisType.available\" class=\"card-badge\">Coming Soon</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Analysis Configuration -->\r\n    <div v-if=\"selectedAnalysis\" class=\"analysis-config\">\r\n      <h4>{{ getAnalysisConfig(selectedAnalysis).title }} Configuration</h4>\r\n      \r\n      <!-- PCA Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'pca'\" class=\"config-section\">\r\n        <div class=\"config-group\">\r\n          <label for=\"pca-components\">Number of Components:</label>\r\n          <input\r\n            id=\"pca-components\"\r\n            v-model.number=\"pcaConfig.components\"\r\n            type=\"number\"\r\n            min=\"2\"\r\n            :max=\"Math.min(vectorStore.dimensions, vectorStore.vectorCount)\"\r\n            class=\"number-input\"\r\n          />\r\n        </div>\r\n        <div class=\"config-info\">\r\n          <p>PCA will reduce {{ vectorStore.dimensions }}D vectors to {{ pcaConfig.components }}D representation</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- K-Means Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'kmeans'\" class=\"config-section\">\r\n        <div class=\"config-group\">\r\n          <label for=\"kmeans-k\">Number of Clusters (k):</label>\r\n          <input\r\n            id=\"kmeans-k\"\r\n            v-model.number=\"kmeansConfig.k\"\r\n            type=\"number\"\r\n            min=\"2\"\r\n            :max=\"Math.min(10, vectorStore.vectorCount)\"\r\n            class=\"number-input\"\r\n          />\r\n        </div>\r\n        <div class=\"config-group\">\r\n          <label for=\"kmeans-iterations\">Max Iterations:</label>\r\n          <input\r\n            id=\"kmeans-iterations\"\r\n            v-model.number=\"kmeansConfig.maxIterations\"\r\n            type=\"number\"\r\n            min=\"10\"\r\n            max=\"1000\"\r\n            class=\"number-input\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Hierarchical Clustering Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'hierarchical'\" class=\"config-section\">\r\n        <div class=\"config-group\">\r\n          <label for=\"hierarchical-linkage\">Linkage Method:</label>\r\n          <select\r\n            id=\"hierarchical-linkage\"\r\n            v-model=\"hierarchicalConfig.linkage\"\r\n            class=\"select-input\"\r\n          >\r\n            <option value=\"single\">Single Linkage</option>\r\n            <option value=\"complete\">Complete Linkage</option>\r\n            <option value=\"average\">Average Linkage</option>\r\n            <option value=\"ward\">Ward Linkage</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Statistical Analysis Configuration -->\r\n      <div v-if=\"selectedAnalysis === 'statistics'\" class=\"config-section\">\r\n        <div class=\"config-options\">\r\n          <label class=\"checkbox-label\">\r\n            <input v-model=\"statisticsConfig.includeCorrelation\" type=\"checkbox\" />\r\n            Include correlation matrix\r\n          </label>\r\n          <label class=\"checkbox-label\">\r\n            <input v-model=\"statisticsConfig.includeOutliers\" type=\"checkbox\" />\r\n            Detect outliers\r\n          </label>\r\n          <label class=\"checkbox-label\">\r\n            <input v-model=\"statisticsConfig.includeDistribution\" type=\"checkbox\" />\r\n            Analyze distribution\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Analysis Results -->\r\n    <div v-if=\"analytics.analysisResults\" class=\"results-section\">\r\n      <div class=\"results-header\">\r\n        <h4>Analysis Results</h4>\r\n        <div class=\"results-meta\">\r\n          <span>{{ analytics.analysisResults.type }}</span>\r\n          <span>â€¢</span>\r\n          <span>{{ formatDate(analytics.analysisResults.timestamp) }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- PCA Results -->\r\n      <div v-if=\"analytics.analysisResults.type === 'PCA'\" class=\"results-content\">\r\n        <div class=\"result-stats\">\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Explained Variance:</span>\r\n            <span class=\"stat-value\">{{ (analytics.analysisResults.data.explainedVariance * 100).toFixed(1) }}%</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Components:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.components }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"eigenvalues\">\r\n          <h5>Eigenvalues:</h5>\r\n          <div class=\"eigenvalue-list\">\r\n            <span\r\n              v-for=\"(value, index) in analytics.analysisResults.data.eigenvalues\"\r\n              :key=\"index\"\r\n              class=\"eigenvalue-item\"\r\n            >\r\n              PC{{ index + 1 }}: {{ value.toFixed(3) }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- K-Means Results -->\r\n      <div v-if=\"analytics.analysisResults.type === 'K-Means'\" class=\"results-content\">\r\n        <div class=\"result-stats\">\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Clusters:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.clusters.length }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Silhouette Score:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.silhouetteScore.toFixed(3) }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Converged:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.converged ? 'Yes' : 'No' }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"cluster-info\">\r\n          <h5>Cluster Information:</h5>\r\n          <div class=\"cluster-list\">\r\n            <div\r\n              v-for=\"(cluster, index) in analytics.analysisResults.data.clusters\"\r\n              :key=\"index\"\r\n              class=\"cluster-item\"\r\n            >\r\n              <span class=\"cluster-label\">Cluster {{ cluster.id + 1 }}:</span>\r\n              <span class=\"cluster-size\">{{ cluster.size }} vectors</span>\r\n              <span class=\"cluster-distance\">Avg distance: {{ cluster.avgDistance.toFixed(3) }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Statistical Results -->\r\n      <div v-if=\"analytics.analysisResults.type === 'Statistical Analysis'\" class=\"results-content\">\r\n        <div class=\"result-stats\">\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Total Vectors:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.summary.totalVectors }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Dimensions:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.summary.dimensions }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">Avg Magnitude:</span>\r\n            <span class=\"stat-value\">{{ analytics.analysisResults.data.summary.averageMagnitude.toFixed(3) }}</span>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"analytics.analysisResults.data.outliers.length > 0\" class=\"outliers-info\">\r\n          <h5>Outliers Detected:</h5>\r\n          <div class=\"outlier-list\">\r\n            <span\r\n              v-for=\"outlier in analytics.analysisResults.data.outliers.slice(0, 5)\"\r\n              :key=\"outlier.vector.id\"\r\n              class=\"outlier-item\"\r\n            >\r\n              {{ outlier.vector.label || outlier.vector.id }}\r\n            </span>\r\n            <span v-if=\"analytics.analysisResults.data.outliers.length > 5\" class=\"more-outliers\">\r\n              +{{ analytics.analysisResults.data.outliers.length - 5 }} more\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Progress Indicator -->\r\n    <div v-if=\"analytics.isAnalyzing\" class=\"analysis-progress\">\r\n      <div class=\"progress-bar\">\r\n        <div class=\"progress-fill\" :style=\"{ width: analytics.analysisProgress + '%' }\"></div>\r\n      </div>\r\n      <div class=\"progress-text\">{{ getProgressText() }}</div>\r\n    </div>\r\n\r\n    <!-- Error Display -->\r\n    <div v-if=\"analytics.analysisError\" class=\"error-section\">\r\n      <div class=\"error-message\">\r\n        <span class=\"error-icon\">âš ï¸</span>\r\n        {{ analytics.analysisError }}\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal Actions -->\r\n    <div class=\"modal-actions\">\r\n      <button class=\"btn-secondary\" @click=\"$emit('close')\">\r\n        Close\r\n      </button>\r\n      <button\r\n        v-if=\"analytics.analysisResults\"\r\n        class=\"btn-utility\"\r\n        @click=\"exportResults\"\r\n      >\r\n        ðŸ’¾ Export Results\r\n      </button>\r\n      <button\r\n        class=\"btn-primary\"\r\n        :disabled=\"!selectedAnalysis || analytics.isAnalyzing || !analytics.hasVectors\"\r\n        @click=\"runAnalysis\"\r\n      >\r\n        <span v-if=\"analytics.isAnalyzing\">Analyzing...</span>\r\n        <span v-else>ðŸ”¬ Run Analysis</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore.js'\r\nimport { useUIStore } from '../../stores/uiStore.js'\r\nimport { useAnalytics } from '../../composables/useAnalytics.js'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\nconst analytics = useAnalytics()\r\n\r\n// Reactive state\r\nconst selectedAnalysis = ref(null)\r\n\r\n// Analysis configurations\r\nconst pcaConfig = ref({\r\n  components: Math.min(3, vectorStore.dimensions)\r\n})\r\n\r\nconst kmeansConfig = ref({\r\n  k: Math.min(3, vectorStore.vectorCount),\r\n  maxIterations: 100\r\n})\r\n\r\nconst hierarchicalConfig = ref({\r\n  linkage: 'ward'\r\n})\r\n\r\nconst statisticsConfig = ref({\r\n  includeCorrelation: true,\r\n  includeOutliers: true,\r\n  includeDistribution: true\r\n})\r\n\r\n// Analysis types\r\nconst analysisTypes = [\r\n  {\r\n    id: 'pca',\r\n    title: 'Principal Component Analysis',\r\n    icon: 'ðŸ”',\r\n    description: 'Discover the main dimensions of variation in your vector space',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'kmeans',\r\n    title: 'K-Means Clustering',\r\n    icon: 'ðŸŽ¯',\r\n    description: 'Group similar vectors using K-means clustering algorithm',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'hierarchical',\r\n    title: 'Hierarchical Clustering',\r\n    icon: 'ðŸŒ³',\r\n    description: 'Build a hierarchy of clusters using different linkage methods',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'statistics',\r\n    title: 'Statistical Analysis',\r\n    icon: 'ðŸ“Š',\r\n    description: 'Comprehensive statistical overview of vector properties',\r\n    available: true\r\n  },\r\n  {\r\n    id: 'tsne',\r\n    title: 't-SNE Visualization',\r\n    icon: 'ðŸ—ºï¸',\r\n    description: 'Non-linear dimensionality reduction for visualization',\r\n    available: false\r\n  },\r\n  {\r\n    id: 'anomaly',\r\n    title: 'Anomaly Detection',\r\n    icon: 'ðŸš¨',\r\n    description: 'Detect unusual patterns and outliers in your data',\r\n    available: false\r\n  }\r\n]\r\n\r\n// Computed properties\r\nconst getAnalysisConfig = (type) => {\r\n  return analysisTypes.find(a => a.id === type) || {}\r\n}\r\n\r\n// Methods\r\nconst selectAnalysis = (type) => {\r\n  const analysisType = analysisTypes.find(a => a.id === type)\r\n  if (analysisType && analysisType.available) {\r\n    selectedAnalysis.value = type\r\n  }\r\n}\r\n\r\nconst runAnalysis = async () => {\r\n  if (!selectedAnalysis.value || analytics.isAnalyzing.value) return\r\n\r\n  try {\r\n    switch (selectedAnalysis.value) {\r\n      case 'pca':\r\n        await analytics.performPCA(pcaConfig.value.components)\r\n        break\r\n      case 'kmeans':\r\n        await analytics.performKMeans(kmeansConfig.value.k, kmeansConfig.value.maxIterations)\r\n        break\r\n      case 'hierarchical':\r\n        await analytics.performHierarchicalClustering(hierarchicalConfig.value.linkage)\r\n        break\r\n      case 'statistics':\r\n        await analytics.performStatisticalAnalysis()\r\n        break\r\n    }\r\n    \r\n    uiStore.showSuccess('Analysis completed successfully!')\r\n  } catch (error) {\r\n    uiStore.showError(`Analysis failed: ${error.message}`)\r\n  }\r\n}\r\n\r\nconst exportResults = () => {\r\n  const results = analytics.exportResults()\r\n  if (results) {\r\n    const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' })\r\n    const url = URL.createObjectURL(blob)\r\n    const link = document.createElement('a')\r\n    link.href = url\r\n    link.download = `analysis_${results.type.toLowerCase()}_${Date.now()}.json`\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    document.body.removeChild(link)\r\n    URL.revokeObjectURL(url)\r\n    \r\n    uiStore.showSuccess('Analysis results exported!')\r\n  }\r\n}\r\n\r\nconst getProgressText = () => {\r\n  if (!analytics.lastAnalysisType.value) return 'Initializing...'\r\n  \r\n  const progress = analytics.analysisProgress.value\r\n  if (progress < 25) return `Preparing ${analytics.lastAnalysisType.value}...`\r\n  if (progress < 50) return 'Processing data...'\r\n  if (progress < 75) return 'Calculating results...'\r\n  if (progress < 100) return 'Finalizing analysis...'\r\n  return 'Complete!'\r\n}\r\n\r\nconst formatDate = (date) => {\r\n  return new Date(date).toLocaleString()\r\n}\r\n\r\nconst emit = defineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.analysis-modal {\r\n  max-width: 700px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.modal-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.modal-header h3 {\r\n  color: var(--accent-primary);\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.modal-header p {\r\n  color: var(--text-secondary);\r\n  margin: 0;\r\n}\r\n\r\n.type-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-card {\r\n  padding: 1.5rem;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  text-align: center;\r\n  position: relative;\r\n  background-color: var(--bg-secondary);\r\n}\r\n\r\n.analysis-card:hover:not(.disabled) {\r\n  border-color: var(--accent-primary);\r\n  background: var(--bg-tertiary);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.analysis-card.selected {\r\n  border-color: var(--accent-primary);\r\n  background: var(--bg-tertiary);\r\n  box-shadow: 0 0 15px rgba(10, 132, 255, 0.3);\r\n}\r\n\r\n.analysis-card.disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.card-icon {\r\n  font-size: 2rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.card-title {\r\n  font-weight: 600;\r\n  margin-bottom: 0.5rem;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.card-description {\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.card-badge {\r\n  position: absolute;\r\n  top: 0.5rem;\r\n  right: 0.5rem;\r\n  background: #f59e0b;\r\n  color: white;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.75rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.analysis-config {\r\n  background: var(--bg-tertiary);\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.analysis-config h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--accent-primary);\r\n}\r\n\r\n.config-section {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.config-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.config-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.number-input, .select-input {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  background-color: var(--bg-secondary);\r\n  border: 1px solid var(--border-color);\r\n  color: var(--text-primary);\r\n  border-radius: 6px;\r\n  transition: border-color 0.2s, box-shadow 0.2s;\r\n}\r\n\r\n.number-input:focus, .select-input:focus {\r\n  outline: none;\r\n  border-color: var(--accent-primary);\r\n  box-shadow: 0 0 5px rgba(10, 132, 255, 0.5);\r\n}\r\n\r\n.config-info {\r\n  background: rgba(10, 132, 255, 0.1);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  margin-top: 1rem;\r\n  border-left: 3px solid var(--accent-primary);\r\n}\r\n\r\n.config-info p {\r\n  margin: 0;\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.config-options {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.checkbox-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  cursor: pointer;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.checkbox-label input[type=\"checkbox\"] {\r\n  accent-color: var(--accent-primary);\r\n  margin: 0;\r\n}\r\n\r\n.results-section {\r\n  background: var(--bg-tertiary);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.results-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid var(--border-color);\r\n}\r\n\r\n.results-header h4 {\r\n  margin: 0;\r\n  color: var(--accent-primary);\r\n}\r\n\r\n.results-meta {\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.result-stats {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.stat-item {\r\n  text-align: center;\r\n  background: var(--bg-secondary);\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n}\r\n\r\n.stat-label {\r\n  display: block;\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.stat-value {\r\n  display: block;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  font-size: 1.2em;\r\n}\r\n\r\n.eigenvalues, .cluster-info, .outliers-info {\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.eigenvalues h5, .cluster-info h5, .outliers-info h5 {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.eigenvalue-list, .cluster-list, .outlier-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.eigenvalue-item, .outlier-item {\r\n  background: rgba(10, 132, 255, 0.2);\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 15px;\r\n  font-size: 0.875rem;\r\n  color: var(--accent-primary);\r\n  font-weight: 500;\r\n}\r\n\r\n.cluster-item {\r\n  background: var(--bg-secondary);\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  font-size: 0.875rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n  border-left: 3px solid #10b981;\r\n}\r\n\r\n.cluster-label {\r\n  font-weight: 500;\r\n  color: #10b981;\r\n}\r\n\r\n.cluster-size, .cluster-distance {\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.more-outliers {\r\n  color: var(--text-secondary);\r\n  font-style: italic;\r\n  padding: 0.25rem 0.5rem;\r\n}\r\n\r\n.analysis-progress {\r\n  margin-bottom: 2rem;\r\n  padding: 1rem;\r\n  background: var(--bg-tertiary);\r\n  border-radius: 8px;\r\n}\r\n\r\n.progress-bar {\r\n  width: 100%;\r\n  height: 8px;\r\n  background: var(--bg-secondary);\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.progress-fill {\r\n  height: 100%;\r\n  background: var(--accent-primary);\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.progress-text {\r\n  text-align: center;\r\n  font-size: 0.875rem;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.error-section {\r\n  margin-bottom: 2rem;\r\n  padding: 1rem;\r\n  background: rgba(239, 68, 68, 0.1);\r\n  border: 1px solid rgba(239, 68, 68, 0.3);\r\n  border-radius: 8px;\r\n}\r\n\r\n.error-message {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  color: #ef4444;\r\n  font-weight: 500;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n  border-top: 1px solid var(--border-color);\r\n  padding-top: 1.5rem;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.btn-secondary, .btn-primary, .btn-utility {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #555;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #777;\r\n}\r\n\r\n.btn-utility {\r\n  background: #10b981;\r\n  color: white;\r\n}\r\n\r\n.btn-utility:hover {\r\n  background: #059669;\r\n}\r\n\r\n.btn-primary {\r\n  background: var(--accent-primary);\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: var(--accent-secondary);\r\n}\r\n\r\n.btn-primary:disabled {\r\n  background: #555;\r\n  color: #999;\r\n  cursor: not-allowed;\r\n  opacity: 0.6;\r\n}\r\n</style> ","<template>\r\n  <div class=\"upload-help-content\">\r\n    <h4>ðŸ“ Supported File Formats</h4>\r\n    <div class=\"format-list\">\r\n      <div class=\"format-item\">\r\n        <strong>.txt</strong> - Plain text with space/comma separated values\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.csv</strong> - Comma-separated values\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.json</strong> - JSON array format\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.npy</strong> - NumPy array format\r\n      </div>\r\n      <div class=\"format-item\">\r\n        <strong>.mat</strong> - MATLAB matrix format\r\n      </div>\r\n    </div>\r\n    \r\n    <h4>ðŸ“‹ Example Formats</h4>\r\n    <div class=\"example-section\">\r\n      <h5>CSV Format:</h5>\r\n      <pre class=\"code-example\">1.2, 0.5, -0.8, 2.1\r\n0.3, 1.7, 0.2, -1.0\r\n-0.5, 0.1, 1.9, 0.7</pre>\r\n      \r\n      <h5>JSON Format:</h5>\r\n      <pre class=\"code-example\">[[1.2, 0.5, -0.8, 2.1],\r\n [0.3, 1.7, 0.2, -1.0],\r\n [-0.5, 0.1, 1.9, 0.7]]</pre>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Upload help modal\r\n</script>\r\n\r\n<style scoped>\r\n.upload-help-content {\r\n  color: #333;\r\n}\r\n\r\n.format-list {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.format-item {\r\n  padding: 0.5rem;\r\n  margin: 0.5rem 0;\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 4px;\r\n}\r\n\r\n.example-section {\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.code-example {\r\n  background: #f5f5f5;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 0.9rem;\r\n  overflow-x: auto;\r\n  border-left: 3px solid #667eea;\r\n}\r\n</style> ","<template>\r\n  <div class=\"activation-help-content\">\r\n    <h4>ðŸ”Œ Neural Activation Functions</h4>\r\n    <div class=\"activation-list\">\r\n      <div class=\"activation-item\">\r\n        <h5>Sigmoid</h5>\r\n        <p>Smooth S-curve, outputs between 0 and 1</p>\r\n        <div class=\"formula\">Ïƒ(x) = 1 / (1 + e^(-x))</div>\r\n      </div>\r\n      \r\n      <div class=\"activation-item\">\r\n        <h5>Tanh</h5>\r\n        <p>Hyperbolic tangent, outputs between -1 and 1</p>\r\n        <div class=\"formula\">tanh(x) = (e^x - e^(-x)) / (e^x + e^(-x))</div>\r\n      </div>\r\n      \r\n      <div class=\"activation-item\">\r\n        <h5>ReLU</h5>\r\n        <p>Rectified Linear Unit, simple and effective</p>\r\n        <div class=\"formula\">ReLU(x) = max(0, x)</div>\r\n      </div>\r\n      \r\n      <div class=\"activation-item\">\r\n        <h5>Leaky ReLU</h5>\r\n        <p>Modified ReLU allowing small negative values</p>\r\n        <div class=\"formula\">LeakyReLU(x) = max(0.01x, x)</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Activation functions help\r\n</script>\r\n\r\n<style scoped>\r\n.activation-help-content {\r\n  color: #333;\r\n}\r\n\r\n.activation-list {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.activation-item {\r\n  margin-bottom: 1.5rem;\r\n  padding: 1rem;\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n}\r\n\r\n.activation-item h5 {\r\n  color: #667eea;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.activation-item p {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #666;\r\n}\r\n\r\n.formula {\r\n  background: #f5f5f5;\r\n  padding: 0.5rem;\r\n  border-radius: 4px;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 0.9rem;\r\n  border-left: 3px solid #667eea;\r\n}\r\n</style> ","<template>\r\n  <div class=\"shortcuts-content\">\r\n    <div class=\"shortcuts-grid\">\r\n      <div class=\"shortcuts-section\">\r\n        <h4>ðŸš€ Quick Actions</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+G</kbd>\r\n          <span>Generate new vectors</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+R</kbd>\r\n          <span>Reset visualization</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+E</kbd>\r\n          <span>Export data</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+A</kbd>\r\n          <span>Open analysis modal</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Ctrl+H</kbd>\r\n          <span>Show help/tutorial</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"shortcuts-section\">\r\n        <h4>ðŸŽ¯ Navigation</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Tab</kbd>\r\n          <span>Navigate between controls</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>â†‘ â†“ â† â†’</kbd>\r\n          <span>Navigate between vectors</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Enter</kbd>\r\n          <span>Select vector</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Space</kbd>\r\n          <span>Activate button/control</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>Escape</kbd>\r\n          <span>Close modals</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"shortcuts-section\">\r\n        <h4>ðŸ“Š Analysis</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>P</kbd>\r\n          <span>Run PCA analysis</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>K</kbd>\r\n          <span>Run K-means clustering</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>S</kbd>\r\n          <span>Similarity analysis</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>T</kbd>\r\n          <span>Statistical analysis</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>N</kbd>\r\n          <span>Toggle neural mode</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"shortcuts-section\">\r\n        <h4>âš™ï¸ Controls</h4>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>F</kbd>\r\n          <span>Toggle force visualization</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>3</kbd>\r\n          <span>Toggle 3D mode</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>+</kbd>\r\n          <span>Increase dimensions</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>-</kbd>\r\n          <span>Decrease dimensions</span>\r\n        </div>\r\n        <div class=\"shortcut-item\">\r\n          <kbd>?</kbd>\r\n          <span>Show this help</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"shortcuts-footer\">\r\n      <p class=\"shortcuts-tip\">\r\n        ðŸ’¡ <strong>Tip:</strong> Most shortcuts work when you're not typing in input fields\r\n      </p>\r\n      <button class=\"btn-primary\" @click=\"emit('close')\">\r\n        Got it! ðŸ‘\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.shortcuts-content {\r\n  max-width: 700px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.shortcuts-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.shortcuts-section h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--primary);\r\n  font-size: 1.1em;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.shortcut-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  margin-bottom: 0.75rem;\r\n  padding: 0.5rem;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 6px;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.shortcut-item:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\nkbd {\r\n  background: var(--primary);\r\n  color: white;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\r\n  font-size: 0.85em;\r\n  font-weight: 600;\r\n  min-width: 60px;\r\n  text-align: center;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.shortcut-item span {\r\n  flex: 1;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.shortcuts-footer {\r\n  text-align: center;\r\n  padding-top: 1.5rem;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.shortcuts-tip {\r\n  margin: 0 0 1rem 0;\r\n  color: var(--text-secondary);\r\n  font-size: 0.9em;\r\n}\r\n\r\n.shortcuts-tip strong {\r\n  color: var(--primary);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .shortcuts-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .shortcut-item {\r\n    flex-direction: column;\r\n    text-align: center;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  kbd {\r\n    min-width: auto;\r\n    width: fit-content;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <div class=\"add-vector-modal\">\r\n    <div class=\"modal-header\">\r\n      <h3>âž• Add Custom Vector</h3>\r\n      <p>Enter vector components to create a new vector</p>\r\n    </div>\r\n\r\n    <div class=\"form-section\">\r\n      <div class=\"form-group\">\r\n        <label for=\"vector-input\">Vector Components</label>\r\n        <div class=\"input-help\">\r\n          Enter comma-separated values (e.g., 1, -2, 3.5, 4)\r\n        </div>\r\n        <textarea\r\n          id=\"vector-input\"\r\n          v-model=\"vectorInput\"\r\n          class=\"vector-input\"\r\n          :class=\"{ error: hasError }\"\r\n          placeholder=\"1, 2, 3, 4\"\r\n          rows=\"3\"\r\n          @input=\"validateInput\"\r\n        ></textarea>\r\n        <div v-if=\"errorMessage\" class=\"error-message\">\r\n          {{ errorMessage }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"vector-label\">Vector Label (Optional)</label>\r\n        <input\r\n          id=\"vector-label\"\r\n          v-model=\"vectorLabel\"\r\n          type=\"text\"\r\n          class=\"label-input\"\r\n          placeholder=\"My Custom Vector\"\r\n          maxlength=\"50\"\r\n        />\r\n      </div>\r\n\r\n      <div v-if=\"parsedVector\" class=\"preview-section\">\r\n        <h4>Preview</h4>\r\n        <div class=\"vector-stats\">\r\n          <span>Dimensions: {{ parsedVector.length }}</span>\r\n          <span>Magnitude: {{ magnitude.toFixed(3) }}</span>\r\n        </div>\r\n        <div class=\"components-preview\">\r\n          <span \r\n            v-for=\"(val, i) in parsedVector.slice(0, 8)\" \r\n            :key=\"i\"\r\n            class=\"component\"\r\n            :class=\"componentClass(val)\"\r\n          >\r\n            {{ val.toFixed(2) }}\r\n          </span>\r\n          <span v-if=\"parsedVector.length > 8\" class=\"more\">\r\n            +{{ parsedVector.length - 8 }} more\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"modal-actions\">\r\n      <button class=\"btn-cancel\" @click=\"$emit('close')\">\r\n        Cancel\r\n      </button>\r\n      <button \r\n        class=\"btn-add\" \r\n        :disabled=\"!canAdd\"\r\n        @click=\"addVector\"\r\n      >\r\n        Add Vector\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore.js'\r\nimport { useUIStore } from '../../stores/uiStore.js'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\n\r\n// Reactive state\r\nconst vectorInput = ref('')\r\nconst vectorLabel = ref('')\r\nconst parsedVector = ref(null)\r\nconst hasError = ref(false)\r\nconst errorMessage = ref('')\r\n\r\n// Computed properties\r\nconst magnitude = computed(() => {\r\n  if (!parsedVector.value) return 0\r\n  return Math.sqrt(parsedVector.value.reduce((sum, val) => sum + val * val, 0))\r\n})\r\n\r\nconst canAdd = computed(() => {\r\n  return parsedVector.value && !hasError.value\r\n})\r\n\r\n// Methods\r\nconst validateInput = () => {\r\n  const input = vectorInput.value.trim()\r\n  \r\n  if (!input) {\r\n    parsedVector.value = null\r\n    hasError.value = false\r\n    errorMessage.value = ''\r\n    return\r\n  }\r\n\r\n  try {\r\n    // Try JSON format first\r\n    if (input.startsWith('[') && input.endsWith(']')) {\r\n      const parsed = JSON.parse(input)\r\n      if (Array.isArray(parsed) && parsed.every(v => typeof v === 'number' && !isNaN(v))) {\r\n        parsedVector.value = parsed\r\n        hasError.value = false\r\n        errorMessage.value = ''\r\n        return\r\n      }\r\n    }\r\n\r\n    // Try comma-separated values\r\n    const values = input.split(',').map(v => parseFloat(v.trim()))\r\n    \r\n    if (values.some(isNaN)) {\r\n      throw new Error('All values must be valid numbers')\r\n    }\r\n    \r\n    if (values.length < 2) {\r\n      throw new Error('Vector must have at least 2 components')\r\n    }\r\n    \r\n    if (values.length > 50) {\r\n      throw new Error('Vector cannot have more than 50 components')\r\n    }\r\n\r\n    parsedVector.value = values\r\n    hasError.value = false\r\n    errorMessage.value = ''\r\n    \r\n  } catch (error) {\r\n    hasError.value = true\r\n    errorMessage.value = error.message\r\n    parsedVector.value = null\r\n  }\r\n}\r\n\r\nconst componentClass = (value) => {\r\n  if (value > 0) return 'positive'\r\n  if (value < 0) return 'negative'\r\n  return 'zero'\r\n}\r\n\r\nconst addVector = () => {\r\n  if (!canAdd.value) return\r\n\r\n  try {\r\n    if (vectorStore.framework) {\r\n      const newVector = {\r\n        id: `custom_${Date.now()}`,\r\n        values: parsedVector.value,\r\n        label: vectorLabel.value || `Custom Vector ${Date.now()}`,\r\n        type: 'custom',\r\n        created: new Date()\r\n      }\r\n      \r\n      // Add through the framework's state manager\r\n      vectorStore.framework.stateManager.addCustomVector(newVector)\r\n      uiStore.showSuccess('Vector added successfully!')\r\n    }\r\n    \r\n    // Clear form and close\r\n    vectorInput.value = ''\r\n    vectorLabel.value = ''\r\n    parsedVector.value = null\r\n    emit('close')\r\n    \r\n  } catch (error) {\r\n    uiStore.showError(`Failed to add vector: ${error.message}`)\r\n  }\r\n}\r\n\r\nconst emit = defineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.add-vector-modal {\r\n  max-width: 500px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.modal-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.modal-header h3 {\r\n  color: #667eea;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.modal-header p {\r\n  color: #666;\r\n  margin: 0;\r\n}\r\n\r\n.form-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.input-help {\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.vector-input {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 2px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  font-family: monospace;\r\n  resize: vertical;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.vector-input:focus {\r\n  outline: none;\r\n  border-color: #667eea;\r\n}\r\n\r\n.vector-input.error {\r\n  border-color: #ef4444;\r\n}\r\n\r\n.label-input {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 2px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.label-input:focus {\r\n  outline: none;\r\n  border-color: #667eea;\r\n}\r\n\r\n.error-message {\r\n  color: #ef4444;\r\n  font-size: 0.875rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.preview-section {\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.preview-section h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #667eea;\r\n}\r\n\r\n.vector-stats {\r\n  display: flex;\r\n  gap: 2rem;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n}\r\n\r\n.components-preview {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.component {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-family: monospace;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.component.positive {\r\n  background: rgba(239, 68, 68, 0.1);\r\n  color: #dc2626;\r\n}\r\n\r\n.component.negative {\r\n  background: rgba(59, 130, 246, 0.1);\r\n  color: #2563eb;\r\n}\r\n\r\n.component.zero {\r\n  background: rgba(156, 163, 175, 0.1);\r\n  color: #6b7280;\r\n}\r\n\r\n.more {\r\n  padding: 0.25rem 0.5rem;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.btn-cancel, .btn-add {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.btn-cancel {\r\n  background: #6b7280;\r\n  color: white;\r\n}\r\n\r\n.btn-cancel:hover {\r\n  background: #4b5563;\r\n}\r\n\r\n.btn-add {\r\n  background: #667eea;\r\n  color: white;\r\n}\r\n\r\n.btn-add:hover:not(:disabled) {\r\n  background: #5a67d8;\r\n}\r\n\r\n.btn-add:disabled {\r\n  background: #9ca3af;\r\n  cursor: not-allowed;\r\n}\r\n</style> ","/**\r\n * Format Utilities\r\n * Helper functions for formatting numbers, data, and display elements\r\n */\r\n\r\n// Number Formatting\r\nexport const numberFormat = {\r\n  /**\r\n   * Format a number with specified decimal places\r\n   * @param {number} value - Number to format\r\n   * @param {number} decimals - Number of decimal places\r\n   * @returns {string} Formatted number\r\n   */\r\n  decimal(value, decimals = 2) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return value.toFixed(decimals)\r\n  },\r\n\r\n  /**\r\n   * Format a number in scientific notation\r\n   * @param {number} value - Number to format\r\n   * @param {number} precision - Number of significant digits\r\n   * @returns {string} Scientific notation\r\n   */\r\n  scientific(value, precision = 3) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return value.toExponential(precision)\r\n  },\r\n\r\n  /**\r\n   * Format percentage with specified decimals\r\n   * @param {number} value - Value between 0 and 1\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted percentage\r\n   */\r\n  percentage(value, decimals = 1) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return `${(value * 100).toFixed(decimals)}%`\r\n  },\r\n\r\n  /**\r\n   * Format large numbers with appropriate units\r\n   * @param {number} value - Number to format\r\n   * @returns {string} Formatted number with units\r\n   */\r\n  compact(value) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    \r\n    const abs = Math.abs(value)\r\n    const sign = value < 0 ? '-' : ''\r\n    \r\n    if (abs >= 1e9) return `${sign}${(abs / 1e9).toFixed(1)}B`\r\n    if (abs >= 1e6) return `${sign}${(abs / 1e6).toFixed(1)}M`\r\n    if (abs >= 1e3) return `${sign}${(abs / 1e3).toFixed(1)}K`\r\n    return value.toString()\r\n  },\r\n\r\n  /**\r\n   * Format number with thousand separators\r\n   * @param {number} value - Number to format\r\n   * @param {string} separator - Thousand separator\r\n   * @returns {string} Formatted number\r\n   */\r\n  thousands(value, separator = ',') {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'N/A'\r\n    return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, separator)\r\n  }\r\n}\r\n\r\n// Vector Formatting\r\nexport const vectorFormat = {\r\n  /**\r\n   * Format vector components for display\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted vector string\r\n   */\r\n  components(vector, decimals = 3) {\r\n    if (!Array.isArray(vector)) return 'Invalid Vector'\r\n    const formatted = vector.map(val => numberFormat.decimal(val, decimals))\r\n    return `[${formatted.join(', ')}]`\r\n  },\r\n\r\n  /**\r\n   * Format vector with dimension labels\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted vector with labels\r\n   */\r\n  labeled(vector, decimals = 3) {\r\n    if (!Array.isArray(vector)) return 'Invalid Vector'\r\n    const formatted = vector.map((val, i) => \r\n      `x${i + 1}: ${numberFormat.decimal(val, decimals)}`\r\n    )\r\n    return formatted.join(', ')\r\n  },\r\n\r\n  /**\r\n   * Format vector magnitude\r\n   * @param {number[]} vector - Vector to calculate magnitude\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted magnitude\r\n   */\r\n  magnitude(vector, decimals = 3) {\r\n    if (!Array.isArray(vector)) return 'N/A'\r\n    const mag = Math.sqrt(vector.reduce((sum, val) => sum + val * val, 0))\r\n    return numberFormat.decimal(mag, decimals)\r\n  },\r\n\r\n  /**\r\n   * Format vector for CSV export\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {string} separator - CSV separator\r\n   * @returns {string} CSV formatted vector\r\n   */\r\n  csv(vector, separator = ',') {\r\n    if (!Array.isArray(vector)) return ''\r\n    return vector.join(separator)\r\n  }\r\n}\r\n\r\n// Time Formatting\r\nexport const timeFormat = {\r\n  /**\r\n   * Format duration in milliseconds to human readable\r\n   * @param {number} ms - Duration in milliseconds\r\n   * @returns {string} Human readable duration\r\n   */\r\n  duration(ms) {\r\n    if (typeof ms !== 'number' || ms < 0) return '0ms'\r\n    \r\n    const units = [\r\n      { name: 'd', value: 86400000 },\r\n      { name: 'h', value: 3600000 },\r\n      { name: 'm', value: 60000 },\r\n      { name: 's', value: 1000 },\r\n      { name: 'ms', value: 1 }\r\n    ]\r\n    \r\n    for (const unit of units) {\r\n      if (ms >= unit.value) {\r\n        const value = Math.floor(ms / unit.value)\r\n        return `${value}${unit.name}`\r\n      }\r\n    }\r\n    \r\n    return '0ms'\r\n  },\r\n\r\n  /**\r\n   * Format timestamp to readable format\r\n   * @param {number|Date} timestamp - Timestamp or Date object\r\n   * @returns {string} Formatted timestamp\r\n   */\r\n  timestamp(timestamp) {\r\n    try {\r\n      const date = new Date(timestamp)\r\n      return date.toLocaleString()\r\n    } catch {\r\n      return 'Invalid Date'\r\n    }\r\n  }\r\n}\r\n\r\n// Color Formatting\r\nexport const colorFormat = {\r\n  /**\r\n   * Convert value to HSL color based on range\r\n   * @param {number} value - Value to convert\r\n   * @param {number} min - Minimum value in range\r\n   * @param {number} max - Maximum value in range\r\n   * @returns {string} HSL color string\r\n   */\r\n  valueToHSL(value, min, max) {\r\n    if (typeof value !== 'number' || isNaN(value)) return 'hsl(0, 0%, 50%)'\r\n    \r\n    const normalized = (value - min) / (max - min)\r\n    const hue = Math.floor((1 - normalized) * 240) // Blue to Red\r\n    return `hsl(${hue}, 70%, 50%)`\r\n  },\r\n\r\n  /**\r\n   * Get color for vector component based on value\r\n   * @param {number} value - Component value\r\n   * @param {number} max - Maximum absolute value\r\n   * @returns {string} Color string\r\n   */\r\n  componentColor(value, max) {\r\n    if (typeof value !== 'number' || isNaN(value)) return '#666'\r\n    \r\n    const intensity = Math.abs(value) / max\r\n    const alpha = Math.min(0.3 + intensity * 0.7, 1)\r\n    \r\n    if (value > 0) {\r\n      return `rgba(239, 68, 68, ${alpha})` // Red for positive\r\n    } else if (value < 0) {\r\n      return `rgba(59, 130, 246, ${alpha})` // Blue for negative\r\n    } else {\r\n      return `rgba(156, 163, 175, ${alpha})` // Gray for zero\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Convert hex color to RGBA\r\n   * @param {string} hex - Hex color string\r\n   * @param {number} alpha - Alpha value (0-1)\r\n   * @returns {string} RGBA color string\r\n   */\r\n  hexToRGBA(hex, alpha = 1) {\r\n    const r = parseInt(hex.slice(1, 3), 16)\r\n    const g = parseInt(hex.slice(3, 5), 16)\r\n    const b = parseInt(hex.slice(5, 7), 16)\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`\r\n  }\r\n}\r\n\r\n// Text Formatting\r\nexport const textFormat = {\r\n  /**\r\n   * Truncate text with ellipsis\r\n   * @param {string} text - Text to truncate\r\n   * @param {number} maxLength - Maximum length\r\n   * @returns {string} Truncated text\r\n   */\r\n  truncate(text, maxLength = 50) {\r\n    if (typeof text !== 'string') return ''\r\n    if (text.length <= maxLength) return text\r\n    return text.slice(0, maxLength - 3) + '...'\r\n  },\r\n\r\n  /**\r\n   * Capitalize first letter of each word\r\n   * @param {string} text - Text to capitalize\r\n   * @returns {string} Capitalized text\r\n   */\r\n  titleCase(text) {\r\n    if (typeof text !== 'string') return ''\r\n    return text.replace(/\\w\\S*/g, (txt) => \r\n      txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\r\n    )\r\n  },\r\n\r\n  /**\r\n   * Convert camelCase to readable format\r\n   * @param {string} text - CamelCase text\r\n   * @returns {string} Readable text\r\n   */\r\n  camelToWords(text) {\r\n    if (typeof text !== 'string') return ''\r\n    return text.replace(/([A-Z])/g, ' $1').trim()\r\n  },\r\n\r\n  /**\r\n   * Pluralize word based on count\r\n   * @param {string} word - Word to pluralize\r\n   * @param {number} count - Count value\r\n   * @param {string} plural - Custom plural form\r\n   * @returns {string} Pluralized word\r\n   */\r\n  pluralize(word, count, plural = null) {\r\n    if (count === 1) return word\r\n    return plural || word + 's'\r\n  }\r\n}\r\n\r\n// Mathematical Formatting\r\nexport const mathFormat = {\r\n  /**\r\n   * Format mathematical expression with LaTeX\r\n   * @param {string} expression - Mathematical expression\r\n   * @returns {string} LaTeX formatted expression\r\n   */\r\n  latex(expression) {\r\n    return `\\\\(${expression}\\\\)`\r\n  },\r\n\r\n  /**\r\n   * Format vector in mathematical notation\r\n   * @param {number[]} vector - Vector to format\r\n   * @param {string} symbol - Vector symbol\r\n   * @returns {string} LaTeX vector notation\r\n   */\r\n  vectorNotation(vector, symbol = 'v') {\r\n    if (!Array.isArray(vector)) return ''\r\n    const components = vector.map(val => numberFormat.decimal(val, 3))\r\n    return `\\\\vec{${symbol}} = \\\\begin{pmatrix} ${components.join(' \\\\\\\\ ')} \\\\end{pmatrix}`\r\n  },\r\n\r\n  /**\r\n   * Format matrix in mathematical notation\r\n   * @param {number[][]} matrix - Matrix to format\r\n   * @returns {string} LaTeX matrix notation\r\n   */\r\n  matrixNotation(matrix) {\r\n    if (!Array.isArray(matrix) || !Array.isArray(matrix[0])) return ''\r\n    const rows = matrix.map(row => \r\n      row.map(val => numberFormat.decimal(val, 3)).join(' & ')\r\n    )\r\n    return `\\\\begin{pmatrix} ${rows.join(' \\\\\\\\ ')} \\\\end{pmatrix}`\r\n  }\r\n}\r\n\r\n// File Size Formatting\r\nexport const fileSizeFormat = {\r\n  /**\r\n   * Format bytes to human readable format\r\n   * @param {number} bytes - File size in bytes\r\n   * @param {number} decimals - Decimal places\r\n   * @returns {string} Formatted file size\r\n   */\r\n  bytes(bytes, decimals = 2) {\r\n    if (bytes === 0) return '0 Bytes'\r\n    \r\n    const k = 1024\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n    \r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + ' ' + sizes[i]\r\n  }\r\n}\r\n\r\n// Export all formatters as default\r\nexport default {\r\n  number: numberFormat,\r\n  vector: vectorFormat,\r\n  time: timeFormat,\r\n  color: colorFormat,\r\n  text: textFormat,\r\n  math: mathFormat,\r\n  fileSize: fileSizeFormat\r\n} ","<template>\r\n  <div class=\"export-modal\">\r\n    <div class=\"modal-header\">\r\n      <h3>ðŸ’¾ Export Data</h3>\r\n      <p>Export your vectors, analysis results, and visualizations</p>\r\n    </div>\r\n\r\n    <!-- Export Type Selection -->\r\n    <div class=\"export-sections\">\r\n      <div class=\"section-tabs\">\r\n        <button\r\n          v-for=\"section in exportSections\"\r\n          :key=\"section.id\"\r\n          class=\"tab-btn\"\r\n          :class=\"{ active: activeSection === section.id }\"\r\n          @click=\"setActiveSection(section.id)\"\r\n        >\r\n          <span class=\"tab-icon\">{{ section.icon }}</span>\r\n          {{ section.label }}\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Vector Data Export -->\r\n      <div v-if=\"activeSection === 'vectors'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Vector Data Export</h4>\r\n          <p>Export your current vector dataset</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"vectorExport.includeGenerated\" type=\"checkbox\" />\r\n              Include generated vectors ({{ generatedVectorCount }})\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"vectorExport.includeCustom\" type=\"checkbox\" />\r\n              Include custom vectors ({{ customVectorCount }})\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"vectorExport.includeMetadata\" type=\"checkbox\" />\r\n              Include metadata (labels, timestamps, etc.)\r\n            </label>\r\n          </div>\r\n\r\n          <div class=\"format-selection\">\r\n            <label>Export Format:</label>\r\n            <select v-model=\"vectorExport.format\" class=\"format-select\">\r\n              <option value=\"json\">JSON (.json)</option>\r\n              <option value=\"csv\">CSV (.csv)</option>\r\n              <option value=\"txt\">Text (.txt)</option>\r\n              <option value=\"numpy\">NumPy Array (.npy)</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"preview-info\">\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Vectors to export:</span>\r\n            <span class=\"info-value\">{{ selectedVectorCount }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Dimensions:</span>\r\n            <span class=\"info-value\">{{ vectorStore.dimensions }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">File size estimate:</span>\r\n            <span class=\"info-value\">{{ estimatedFileSize }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Analysis Results Export -->\r\n      <div v-if=\"activeSection === 'analysis'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Analysis Results Export</h4>\r\n          <p>Export analysis reports and statistical data</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeStatistics\" type=\"checkbox\" />\r\n              Include statistical analysis\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeCorrelations\" type=\"checkbox\" />\r\n              Include correlation matrix\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeClusters\" type=\"checkbox\" />\r\n              Include clustering results\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"analysisExport.includeCharts\" type=\"checkbox\" />\r\n              Include chart data\r\n            </label>\r\n          </div>\r\n\r\n          <div class=\"format-selection\">\r\n            <label>Report Format:</label>\r\n            <select v-model=\"analysisExport.format\" class=\"format-select\">\r\n              <option value=\"json\">JSON Data (.json)</option>\r\n              <option value=\"pdf\">PDF Report (.pdf)</option>\r\n              <option value=\"html\">HTML Report (.html)</option>\r\n              <option value=\"txt\">Text Report (.txt)</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Visualization Export -->\r\n      <div v-if=\"activeSection === 'visualization'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Visualization Export</h4>\r\n          <p>Export the current visualization as an image</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <div class=\"resolution-group\">\r\n              <label>Resolution:</label>\r\n              <select v-model=\"visualizationExport.resolution\" class=\"resolution-select\">\r\n                <option value=\"1x\">Current Size (1x)</option>\r\n                <option value=\"2x\">High Resolution (2x)</option>\r\n                <option value=\"4x\">Print Quality (4x)</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div class=\"format-selection\">\r\n              <label>Image Format:</label>\r\n              <select v-model=\"visualizationExport.format\" class=\"format-select\">\r\n                <option value=\"png\">PNG (Transparent background)</option>\r\n                <option value=\"jpg\">JPEG (White background)</option>\r\n                <option value=\"svg\">SVG (Vector graphics)</option>\r\n              </select>\r\n            </div>\r\n\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"visualizationExport.includeUI\" type=\"checkbox\" />\r\n              Include UI controls in export\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Configuration Export -->\r\n      <div v-if=\"activeSection === 'config'\" class=\"export-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Configuration Export</h4>\r\n          <p>Export current settings and preferences</p>\r\n        </div>\r\n\r\n        <div class=\"export-options\">\r\n          <div class=\"option-group\">\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeVectorSettings\" type=\"checkbox\" />\r\n              Vector space configuration\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeVisualizationSettings\" type=\"checkbox\" />\r\n              Visualization settings\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeNeuralSettings\" type=\"checkbox\" />\r\n              Neural network settings\r\n            </label>\r\n            <label class=\"checkbox-label\">\r\n              <input v-model=\"configExport.includeUIPreferences\" type=\"checkbox\" />\r\n              UI preferences\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Export Actions -->\r\n    <div class=\"modal-actions\">\r\n      <button class=\"btn-secondary\" @click=\"$emit('close')\">\r\n        Cancel\r\n      </button>\r\n      <button \r\n        class=\"btn-primary\" \r\n        :disabled=\"!canExport || isExporting\"\r\n        @click=\"performExport\"\r\n      >\r\n        <span v-if=\"isExporting\">Exporting...</span>\r\n        <span v-else>ðŸ’¾ Export {{ activeSection }}</span>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Export Progress -->\r\n    <div v-if=\"isExporting\" class=\"export-progress\">\r\n      <div class=\"progress-bar\">\r\n        <div class=\"progress-fill\" :style=\"{ width: exportProgress + '%' }\"></div>\r\n      </div>\r\n      <div class=\"progress-text\">{{ exportStatus }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useVectorStore } from '../../stores/vectorStore.js'\r\nimport { useUIStore } from '../../stores/uiStore.js'\r\nimport { fileSizeFormat } from '../../utils/formatUtils.js'\r\n\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\n\r\n// Reactive state\r\nconst activeSection = ref('vectors')\r\nconst isExporting = ref(false)\r\nconst exportProgress = ref(0)\r\nconst exportStatus = ref('')\r\n\r\n// Export configurations\r\nconst vectorExport = ref({\r\n  includeGenerated: true,\r\n  includeCustom: true,\r\n  includeMetadata: true,\r\n  format: 'json'\r\n})\r\n\r\nconst analysisExport = ref({\r\n  includeStatistics: true,\r\n  includeCorrelations: true,\r\n  includeClusters: true,\r\n  includeCharts: false,\r\n  format: 'json'\r\n})\r\n\r\nconst visualizationExport = ref({\r\n  resolution: '2x',\r\n  format: 'png',\r\n  includeUI: false\r\n})\r\n\r\nconst configExport = ref({\r\n  includeVectorSettings: true,\r\n  includeVisualizationSettings: true,\r\n  includeNeuralSettings: true,\r\n  includeUIPreferences: false\r\n})\r\n\r\n// Export sections\r\nconst exportSections = [\r\n  { id: 'vectors', label: 'Vectors', icon: 'ðŸŽ¯' },\r\n  { id: 'analysis', label: 'Analysis', icon: 'ðŸ“Š' },\r\n  { id: 'visualization', label: 'Image', icon: 'ðŸ–¼ï¸' },\r\n  { id: 'config', label: 'Settings', icon: 'âš™ï¸' }\r\n]\r\n\r\n// Computed properties\r\nconst generatedVectorCount = computed(() => {\r\n  return vectorStore.vectors.filter(v => v.type !== 'custom').length\r\n})\r\n\r\nconst customVectorCount = computed(() => {\r\n  return vectorStore.vectors.filter(v => v.type === 'custom').length\r\n})\r\n\r\nconst selectedVectorCount = computed(() => {\r\n  let count = 0\r\n  if (vectorExport.value.includeGenerated) count += generatedVectorCount.value\r\n  if (vectorExport.value.includeCustom) count += customVectorCount.value\r\n  return count\r\n})\r\n\r\nconst estimatedFileSize = computed(() => {\r\n  const vectorCount = selectedVectorCount.value\r\n  const dimensions = vectorStore.dimensions\r\n  const baseSize = vectorCount * dimensions * 8 // 8 bytes per number\r\n  const metadataSize = vectorExport.value.includeMetadata ? vectorCount * 100 : 0\r\n  const totalSize = baseSize + metadataSize\r\n  \r\n  return fileSizeFormat.bytes(totalSize)\r\n})\r\n\r\nconst canExport = computed(() => {\r\n  switch (activeSection.value) {\r\n    case 'vectors':\r\n      return selectedVectorCount.value > 0\r\n    case 'analysis':\r\n      return Object.values(analysisExport.value).some(v => v === true)\r\n    case 'visualization':\r\n      return true\r\n    case 'config':\r\n      return Object.values(configExport.value).some(v => v === true)\r\n    default:\r\n      return false\r\n  }\r\n})\r\n\r\n// Methods\r\nconst setActiveSection = (section) => {\r\n  activeSection.value = section\r\n}\r\n\r\nconst performExport = async () => {\r\n  if (!canExport.value || isExporting.value) return\r\n\r\n  isExporting.value = true\r\n  exportProgress.value = 0\r\n\r\n  try {\r\n    switch (activeSection.value) {\r\n      case 'vectors':\r\n        await exportVectors()\r\n        break\r\n      case 'analysis':\r\n        await exportAnalysis()\r\n        break\r\n      case 'visualization':\r\n        await exportVisualization()\r\n        break\r\n      case 'config':\r\n        await exportConfiguration()\r\n        break\r\n    }\r\n\r\n    uiStore.showSuccess('Export completed successfully!')\r\n    emit('close')\r\n\r\n  } catch (error) {\r\n    uiStore.showError(`Export failed: ${error.message}`)\r\n  } finally {\r\n    isExporting.value = false\r\n    exportProgress.value = 0\r\n    exportStatus.value = ''\r\n  }\r\n}\r\n\r\nconst exportVectors = async () => {\r\n  exportStatus.value = 'Preparing vector data...'\r\n  exportProgress.value = 10\r\n\r\n  const vectors = vectorStore.vectors.filter(vector => {\r\n    if (vector.type === 'custom' && !vectorExport.value.includeCustom) return false\r\n    if (vector.type !== 'custom' && !vectorExport.value.includeGenerated) return false\r\n    return true\r\n  })\r\n\r\n  exportProgress.value = 30\r\n  exportStatus.value = 'Formatting data...'\r\n\r\n  let exportData\r\n  let fileName\r\n  let mimeType\r\n\r\n  switch (vectorExport.value.format) {\r\n    case 'json':\r\n      exportData = JSON.stringify({\r\n        metadata: {\r\n          exportedAt: new Date().toISOString(),\r\n          vectorCount: vectors.length,\r\n          dimensions: vectorStore.dimensions,\r\n          includeMetadata: vectorExport.value.includeMetadata\r\n        },\r\n        vectors: vectors.map(v => vectorExport.value.includeMetadata ? v : { values: v.values })\r\n      }, null, 2)\r\n      fileName = `vectors_${Date.now()}.json`\r\n      mimeType = 'application/json'\r\n      break\r\n\r\n    case 'csv':\r\n      const headers = vectorExport.value.includeMetadata \r\n        ? ['id', 'label', 'type', ...Array.from({length: vectorStore.dimensions}, (_, i) => `dim_${i+1}`)]\r\n        : Array.from({length: vectorStore.dimensions}, (_, i) => `dim_${i+1}`)\r\n      \r\n      const csvRows = vectors.map(v => {\r\n        const row = vectorExport.value.includeMetadata \r\n          ? [v.id, v.label || '', v.type || '', ...v.values]\r\n          : v.values\r\n        return row.join(',')\r\n      })\r\n      \r\n      exportData = [headers.join(','), ...csvRows].join('\\n')\r\n      fileName = `vectors_${Date.now()}.csv`\r\n      mimeType = 'text/csv'\r\n      break\r\n\r\n    case 'txt':\r\n      exportData = vectors.map(v => {\r\n        const vectorStr = v.values.join(', ')\r\n        return vectorExport.value.includeMetadata \r\n          ? `${v.label || v.id}: [${vectorStr}]`\r\n          : `[${vectorStr}]`\r\n      }).join('\\n')\r\n      fileName = `vectors_${Date.now()}.txt`\r\n      mimeType = 'text/plain'\r\n      break\r\n  }\r\n\r\n  exportProgress.value = 80\r\n  exportStatus.value = 'Downloading file...'\r\n\r\n  downloadFile(exportData, fileName, mimeType)\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst exportAnalysis = async () => {\r\n  exportStatus.value = 'Gathering analysis data...'\r\n  exportProgress.value = 20\r\n\r\n  const analysisData = {\r\n    metadata: {\r\n      exportedAt: new Date().toISOString(),\r\n      vectorCount: vectorStore.vectors.length,\r\n      dimensions: vectorStore.dimensions\r\n    }\r\n  }\r\n\r\n  if (analysisExport.value.includeStatistics) {\r\n    // Get statistics from the framework if available\r\n    analysisData.statistics = vectorStore.framework ? \r\n      vectorStore.framework.modules.analysisEngine.getStatistics() : {}\r\n  }\r\n\r\n  exportProgress.value = 60\r\n  exportStatus.value = 'Formatting report...'\r\n\r\n  let exportData\r\n  let fileName\r\n  let mimeType\r\n\r\n  switch (analysisExport.value.format) {\r\n    case 'json':\r\n      exportData = JSON.stringify(analysisData, null, 2)\r\n      fileName = `analysis_${Date.now()}.json`\r\n      mimeType = 'application/json'\r\n      break\r\n\r\n    case 'txt':\r\n      exportData = generateTextReport(analysisData)\r\n      fileName = `analysis_report_${Date.now()}.txt`\r\n      mimeType = 'text/plain'\r\n      break\r\n  }\r\n\r\n  exportProgress.value = 90\r\n  downloadFile(exportData, fileName, mimeType)\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst exportVisualization = async () => {\r\n  exportStatus.value = 'Capturing visualization...'\r\n  exportProgress.value = 30\r\n\r\n  // Get the SVG element from the visualization\r\n  const svgElement = document.querySelector('#main-viz')\r\n  if (!svgElement) {\r\n    throw new Error('Visualization not found')\r\n  }\r\n\r\n  exportProgress.value = 60\r\n  exportStatus.value = 'Processing image...'\r\n\r\n  const serializer = new XMLSerializer()\r\n  const svgString = serializer.serializeToString(svgElement)\r\n\r\n  let fileName\r\n  let mimeType\r\n\r\n  switch (visualizationExport.value.format) {\r\n    case 'svg':\r\n      downloadFile(svgString, `visualization_${Date.now()}.svg`, 'image/svg+xml')\r\n      break\r\n\r\n    case 'png':\r\n    case 'jpg':\r\n      // Convert SVG to canvas and then to image\r\n      await exportAsImage(svgString, visualizationExport.value.format)\r\n      break\r\n  }\r\n\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst exportConfiguration = async () => {\r\n  exportStatus.value = 'Collecting configuration...'\r\n  exportProgress.value = 30\r\n\r\n  const config = {\r\n    metadata: {\r\n      exportedAt: new Date().toISOString(),\r\n      version: '1.0.0'\r\n    }\r\n  }\r\n\r\n  if (configExport.value.includeVectorSettings) {\r\n    config.vectorSettings = {\r\n      dimensions: vectorStore.dimensions,\r\n      numVectors: vectorStore.numVectors,\r\n      forceType: vectorStore.forceType\r\n    }\r\n  }\r\n\r\n  if (configExport.value.includeNeuralSettings) {\r\n    config.neuralSettings = {\r\n      activationFunction: vectorStore.activationFunction,\r\n      learningRate: vectorStore.learningRate\r\n    }\r\n  }\r\n\r\n  exportProgress.value = 80\r\n  const exportData = JSON.stringify(config, null, 2)\r\n  downloadFile(exportData, `config_${Date.now()}.json`, 'application/json')\r\n  exportProgress.value = 100\r\n}\r\n\r\nconst downloadFile = (content, fileName, mimeType) => {\r\n  const blob = new Blob([content], { type: mimeType })\r\n  const url = URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = fileName\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  URL.revokeObjectURL(url)\r\n}\r\n\r\nconst exportAsImage = async (svgString, format) => {\r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas')\r\n    const ctx = canvas.getContext('2d')\r\n    const img = new Image()\r\n\r\n    img.onload = () => {\r\n      const multiplier = parseInt(visualizationExport.value.resolution.replace('x', ''))\r\n      canvas.width = img.width * multiplier\r\n      canvas.height = img.height * multiplier\r\n\r\n      if (format === 'jpg') {\r\n        ctx.fillStyle = 'white'\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n      }\r\n\r\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\r\n\r\n      canvas.toBlob((blob) => {\r\n        const url = URL.createObjectURL(blob)\r\n        const link = document.createElement('a')\r\n        link.href = url\r\n        link.download = `visualization_${Date.now()}.${format}`\r\n        document.body.appendChild(link)\r\n        link.click()\r\n        document.body.removeChild(link)\r\n        URL.revokeObjectURL(url)\r\n        resolve()\r\n      }, `image/${format}`)\r\n    }\r\n\r\n    img.onerror = reject\r\n    img.src = 'data:image/svg+xml;base64,' + btoa(svgString)\r\n  })\r\n}\r\n\r\nconst generateTextReport = (data) => {\r\n  let report = 'VECTOVERSE ANALYSIS REPORT\\n'\r\n  report += '=' .repeat(30) + '\\n\\n'\r\n  report += `Generated: ${data.metadata.exportedAt}\\n`\r\n  report += `Vectors: ${data.metadata.vectorCount}\\n`\r\n  report += `Dimensions: ${data.metadata.dimensions}\\n\\n`\r\n  \r\n  if (data.statistics) {\r\n    report += 'STATISTICS\\n'\r\n    report += '-' .repeat(15) + '\\n'\r\n    Object.entries(data.statistics).forEach(([key, value]) => {\r\n      report += `${key}: ${value}\\n`\r\n    })\r\n  }\r\n  \r\n  return report\r\n}\r\n\r\nconst emit = defineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.export-modal {\r\n  max-width: 650px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.modal-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.modal-header h3 {\r\n  color: #667eea;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.modal-header p {\r\n  color: #666;\r\n  margin: 0;\r\n}\r\n\r\n.section-tabs {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-bottom: 2rem;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 8px;\r\n  padding: 0.25rem;\r\n}\r\n\r\n.tab-btn {\r\n  flex: 1;\r\n  padding: 0.75rem 1rem;\r\n  border: none;\r\n  background: transparent;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  color: #666;\r\n}\r\n\r\n.tab-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: #333;\r\n}\r\n\r\n.tab-btn.active {\r\n  background: #667eea;\r\n  color: white;\r\n}\r\n\r\n.export-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.section-header {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.section-header h4 {\r\n  color: #333;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.section-header p {\r\n  color: #666;\r\n  margin: 0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.export-options {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.option-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.checkbox-label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0.75rem;\r\n  cursor: pointer;\r\n  color: #333;\r\n}\r\n\r\n.checkbox-label input[type=\"checkbox\"] {\r\n  margin: 0;\r\n}\r\n\r\n.format-selection, .resolution-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.format-selection label, .resolution-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.format-select, .resolution-select {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 2px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.format-select:focus, .resolution-select:focus {\r\n  outline: none;\r\n  border-color: #667eea;\r\n}\r\n\r\n.preview-info {\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.info-item {\r\n  text-align: center;\r\n}\r\n\r\n.info-label {\r\n  display: block;\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.info-value {\r\n  display: block;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.btn-secondary, .btn-primary {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6b7280;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #4b5563;\r\n}\r\n\r\n.btn-primary {\r\n  background: #667eea;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #5a67d8;\r\n}\r\n\r\n.btn-primary:disabled {\r\n  background: #9ca3af;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.export-progress {\r\n  margin-top: 1rem;\r\n  padding: 1rem;\r\n  background: rgba(102, 126, 234, 0.05);\r\n  border-radius: 8px;\r\n}\r\n\r\n.progress-bar {\r\n  width: 100%;\r\n  height: 8px;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.progress-fill {\r\n  height: 100%;\r\n  background: #667eea;\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.progress-text {\r\n  text-align: center;\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n}\r\n</style> ","<template>\r\n  <div>\r\n    <div class=\"new-preset-form\">\r\n      <input v-model=\"newPresetName\" placeholder=\"New preset name...\" class=\"form-input\" />\r\n      <button @click=\"saveCurrentPreset\" :disabled=\"!newPresetName\" class=\"btn btn-primary\">Save Current</button>\r\n    </div>\r\n\r\n    <div class=\"presets-list\">\r\n      <h4 class=\"list-header\">Saved Presets</h4>\r\n      <div v-if=\"!controls.presets.value || controls.presets.value.length === 0\" class=\"no-presets\">\r\n        No presets saved yet.\r\n      </div>\r\n      <ul v-else>\r\n        <li v-for=\"preset in controls.presets.value\" :key=\"preset.name\">\r\n          <span class=\"preset-name\">{{ preset.name }}</span>\r\n          <div class=\"preset-actions\">\r\n            <button class=\"btn btn-secondary\" @click=\"loadSelectedPreset(preset.name)\">Load</button>\r\n            <button class=\"btn btn-danger\" @click=\"deleteSelectedPreset(preset.name)\">Delete</button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useControls } from '../../composables/useControls'\r\nimport { useUIStore } from '../../stores/uiStore'\r\n\r\nconst controls = useControls()\r\nconst uiStore = useUIStore()\r\nconst newPresetName = ref('')\r\n\r\ndefineEmits(['close'])\r\n\r\nconst saveCurrentPreset = () => {\r\n  if (!newPresetName.value) return;\r\n  const presetName = newPresetName.value;\r\n  controls.savePreset(presetName)\r\n  newPresetName.value = ''\r\n  uiStore.showSuccess(`Preset \"${presetName}\" saved!`)\r\n}\r\n\r\nconst loadSelectedPreset = (name) => {\r\n  controls.loadPreset(name)\r\n  uiStore.showSuccess(`Preset \"${name}\" loaded!`)\r\n  emit('close');\r\n}\r\n\r\nconst deleteSelectedPreset = (name) => {\r\n    controls.deletePreset(name);\r\n    uiStore.showSuccess(`Preset \"${name}\" deleted!`);\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.new-preset-form {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-input {\r\n  flex-grow: 1;\r\n  padding: 0.75rem;\r\n  background: #1e1e1e;\r\n  border: 1px solid #444;\r\n  border-radius: 6px;\r\n  color: #f5f5f7;\r\n  font-size: 1rem;\r\n}\r\n\r\n.form-input::placeholder {\r\n  color: #888;\r\n}\r\n\r\n.btn {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  transition: background-color 0.2s ease, opacity 0.2s ease;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #007aff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.btn:disabled {\r\n  background-color: #555;\r\n  color: #999;\r\n  cursor: not-allowed;\r\n  opacity: 0.6;\r\n}\r\n\r\n.list-header {\r\n  margin: 0 0 0.75rem 0;\r\n  color: #a0a0a5;\r\n  text-transform: uppercase;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n  letter-spacing: 0.05em;\r\n}\r\n\r\n.presets-list ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  max-height: 250px;\r\n  overflow-y: auto;\r\n  border: 1px solid #444;\r\n  border-radius: 6px;\r\n}\r\n\r\n.presets-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #444;\r\n}\r\n\r\n.presets-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.presets-list li:hover {\r\n  background-color: #3a3a3c;\r\n}\r\n\r\n.preset-name {\r\n  font-weight: 500;\r\n  color: #f5f5f7;\r\n}\r\n\r\n.preset-actions {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #555;\r\n  color: white;\r\n  padding: 0.4rem 0.8rem;\r\n  font-size: 0.9rem;\r\n}\r\n.btn-secondary:hover {\r\n  background-color: #777;\r\n}\r\n\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n  padding: 0.4rem 0.8rem;\r\n  font-size: 0.9rem;\r\n}\r\n.btn-danger:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\n.no-presets {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #888;\r\n  font-style: italic;\r\n  border: 1px dashed #555;\r\n  border-radius: 6px;\r\n}\r\n</style> ","<template>\r\n  <Teleport to=\"body\">\r\n    <div class=\"notification\" :class=\"type\" @click=\"$emit('close')\">\r\n      <div class=\"notification-icon\">\r\n        {{ type === 'error' ? 'âŒ' : 'âœ…' }}\r\n      </div>\r\n      <div class=\"notification-message\">\r\n        {{ message }}\r\n      </div>\r\n      <button class=\"notification-close\" @click.stop=\"$emit('close')\">Ã—</button>\r\n    </div>\r\n  </Teleport>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps({\r\n  type: {\r\n    type: String,\r\n    required: true,\r\n    validator: (value) => ['success', 'error'].includes(value)\r\n  },\r\n  message: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\ndefineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.notification {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  padding: 1rem 1.5rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  z-index: 1100;\r\n  cursor: pointer;\r\n  max-width: 400px;\r\n  animation: slideIn 0.3s ease;\r\n}\r\n\r\n.notification.success {\r\n  background: rgba(76, 175, 80, 0.9);\r\n  color: white;\r\n  border: 1px solid rgba(76, 175, 80, 0.3);\r\n}\r\n\r\n.notification.error {\r\n  background: rgba(244, 67, 54, 0.9);\r\n  color: white;\r\n  border: 1px solid rgba(244, 67, 54, 0.3);\r\n}\r\n\r\n.notification-icon {\r\n  font-size: 1.2rem;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.notification-message {\r\n  flex: 1;\r\n  font-weight: 500;\r\n}\r\n\r\n.notification-close {\r\n  background: none;\r\n  border: none;\r\n  color: inherit;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  width: 20px;\r\n  height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  opacity: 0.7;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.notification-close:hover {\r\n  opacity: 1;\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateX(100%);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .notification {\r\n    top: 10px;\r\n    right: 10px;\r\n    left: 10px;\r\n    max-width: none;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <div class=\"error-notification\" :class=\"`error-${notification.severity || 'application'}`\">\r\n    <div class=\"error-content\">\r\n      <div class=\"error-icon\">{{ getErrorIcon(notification.severity) }}</div>\r\n      <div class=\"error-text\">\r\n        <strong>Oops! Something went wrong.</strong>\r\n        <p>{{ notification.message }}</p>\r\n      </div>\r\n      <button class=\"error-close\" aria-label=\"Close\" @click=\"close\">&times;</button>\r\n    </div>\r\n    <div v-if=\"notification.actions && notification.actions.length > 0\" class=\"error-actions\">\r\n      <button\r\n        v-for=\"(action, index) in notification.actions\"\r\n        :key=\"index\"\r\n        class=\"btn-compact error-action\"\r\n        @click=\"() => executeAction(action.action)\"\r\n      >\r\n        {{ action.text }}\r\n      </button>\r\n    </div>\r\n     <div class=\"error-progress\" :style=\"{ width: `${progress}%` }\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport { useUIStore } from '../stores/uiStore'\r\n\r\nconst props = defineProps({\r\n  notification: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst uiStore = useUIStore()\r\nconst progress = ref(100)\r\nlet timer = null;\r\n\r\nconst close = () => {\r\n  uiStore.hideError()\r\n}\r\n\r\nconst executeAction = (action) => {\r\n  if (typeof action === 'function') {\r\n    action();\r\n  }\r\n  close();\r\n}\r\n\r\nconst getErrorIcon = (severity) => {\r\n  switch (severity) {\r\n    case 'network': return 'ðŸŒ';\r\n    case 'permission': return 'ðŸ”’';\r\n    case 'memory': return 'ðŸ’¾';\r\n    case 'validation': return 'âš ï¸';\r\n    case 'timeout': return 'â±ï¸';\r\n    default: return 'ðŸ”¥';\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  const duration = 10000; // 10 seconds\r\n  const interval = 100; // update every 100ms\r\n  const steps = duration / interval;\r\n  const decrement = 100 / steps;\r\n\r\n  timer = setInterval(() => {\r\n    progress.value -= decrement;\r\n    if (progress.value <= 0) {\r\n      close();\r\n    }\r\n  }, interval);\r\n})\r\n\r\nonUnmounted(() => {\r\n  clearInterval(timer)\r\n})\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.error-notification {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 350px;\r\n  background: #333;\r\n  color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 5px 15px rgba(0,0,0,0.3);\r\n  overflow: hidden;\r\n  z-index: 2000;\r\n  border-left: 4px solid #f44336;\r\n  animation: slideInUp 0.5s ease-out;\r\n}\r\n\r\n.error-notification.error-network { border-left-color: #2196F3; }\r\n.error-notification.error-permission { border-left-color: #FFC107; }\r\n.error-notification.error-memory { border-left-color: #9C27B0; }\r\n.error-notification.error-validation { border-left-color: #FF9800; }\r\n.error-notification.error-timeout { border-left-color: #607D8B; }\r\n\r\n.error-content {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 1rem;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 1.5rem;\r\n  margin-right: 1rem;\r\n}\r\n\r\n.error-text {\r\n  flex-grow: 1;\r\n}\r\n\r\n.error-text strong {\r\n  display: block;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.error-text p {\r\n  margin: 0;\r\n  font-size: 0.9em;\r\n  opacity: 0.9;\r\n  line-height: 1.4;\r\n}\r\n\r\n.error-close {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  opacity: 0.7;\r\n  transition: opacity 0.2s;\r\n}\r\n.error-close:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.error-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 0.5rem;\r\n  padding: 0 1rem 0.75rem;\r\n}\r\n\r\n.error-action {\r\n  background-color: rgba(255,255,255,0.1);\r\n  color: white;\r\n  border: 1px solid rgba(255,255,255,0.2);\r\n}\r\n.error-action:hover {\r\n  background-color: rgba(255,255,255,0.2);\r\n}\r\n\r\n.error-progress {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  height: 4px;\r\n  background-color: rgba(255,255,255,0.5);\r\n  transition: width 0.1s linear;\r\n}\r\n\r\n@keyframes slideInUp {\r\n  from {\r\n    transform: translateY(100px);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n</style> ","<template>\r\n  <ModalBase title=\"Settings\" v-if=\"show\" @close=\"closeModal\">\r\n    <p>Settings will be available here soon.</p>\r\n    <template #footer>\r\n      <button @click=\"closeModal\" class=\"btn btn-secondary\">Close</button>\r\n    </template>\r\n  </ModalBase>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\nimport { useUIStore } from '../../stores/uiStore';\r\nimport ModalBase from './ModalBase.vue';\r\n\r\nconst uiStore = useUIStore();\r\n\r\nconst show = computed(() => uiStore.isModalOpen && uiStore.modalName === 'settings');\r\n\r\nconst closeModal = () => {\r\n  uiStore.closeModal();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn-secondary {\r\n  background-color: #555;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #777;\r\n}\r\n</style> ","<template>\r\n  <transition name=\"fade\">\r\n    <div class=\"modal-overlay\" v-if=\"show\" @click.self=\"closeModal\">\r\n      <div class=\"modal-content\">\r\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\r\n        <h2 class=\"modal-title\">Vector Comparison</h2>\r\n        <div v-if=\"comparisonResults\" class=\"results-container\">\r\n          <p>Comparison between <strong>{{ comparisonResults.vectorA.id }}</strong> and <strong>{{ comparisonResults.vectorB.id }}</strong></p>\r\n          <ul class=\"results-list\">\r\n            <li><strong>Cosine Similarity:</strong> <span>{{ comparisonResults.cosineSimilarity.toFixed(4) }}</span></li>\r\n            <li><strong>Euclidean Distance:</strong> <span>{{ comparisonResults.euclideanDistance.toFixed(4) }}</span></li>\r\n            <li><strong>Dot Product:</strong> <span>{{ comparisonResults.dotProduct.toFixed(4) }}</span></li>\r\n          </ul>\r\n        </div>\r\n        <div v-else>\r\n          <p>Select two vectors to compare.</p>\r\n        </div>\r\n        <div class=\"modal-actions\">\r\n          <button @click=\"closeModal\" class=\"btn btn-primary\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue';\r\nimport { useUIStore } from '../../stores/uiStore';\r\n\r\nconst uiStore = useUIStore();\r\n\r\nconst show = computed(() => uiStore.isModalOpen && uiStore.modalName === 'vectorComparison');\r\nconst comparisonResults = computed(() => uiStore.modalData);\r\n\r\nconst closeModal = () => {\r\n  uiStore.closeModal();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.modal-content {\r\n  background: #2c2c2e;\r\n  color: #f5f5f7;\r\n  padding: 2rem;\r\n  border-radius: 12px;\r\n  max-width: 500px;\r\n  width: 90%;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n  position: relative;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.modal-title {\r\n  margin-top: 0;\r\n  color: #fff;\r\n  font-size: 1.5rem;\r\n  border-bottom: 1px solid #444;\r\n  padding-bottom: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.close-button {\r\n  position: absolute;\r\n  top: 1rem;\r\n  right: 1rem;\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  color: #aaa;\r\n  cursor: pointer;\r\n  transition: color 0.2s ease;\r\n}\r\n\r\n.close-button:hover {\r\n  color: #fff;\r\n}\r\n\r\n.results-container {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.results-list {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.results-list li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #444;\r\n}\r\n\r\n.results-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.results-list strong {\r\n  color: #a0a0a5;\r\n}\r\n\r\n.results-list span {\r\n  font-weight: bold;\r\n  color: #f5f5f7;\r\n}\r\n\r\n.modal-actions {\r\n  text-align: right;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #007aff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.fade-enter-from, .fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.fade-enter-active .modal-content,\r\n.fade-leave-active .modal-content {\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.fade-enter-from .modal-content,\r\n.fade-leave-to .modal-content {\r\n  transform: scale(0.95);\r\n}\r\n</style> ","<template>\r\n  <!-- Tutorial Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'tutorial'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"Welcome to the Vectoverse!\"\r\n  >\r\n    <TutorialModal />\r\n  </ModalBase>\r\n\r\n  <!-- Analysis Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'analysis'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"ðŸ”¬ Advanced Analysis\"\r\n  >\r\n    <AnalysisModal />\r\n  </ModalBase>\r\n\r\n  <!-- Upload Help Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'uploadHelp'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"ðŸ“ Vector Matrix Upload Guide\"\r\n  >\r\n    <UploadHelpModal />\r\n  </ModalBase>\r\n\r\n  <!-- Activation Help Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'activationHelp'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"ðŸ”Œ Neural Activation Functions Guide\"\r\n  >\r\n    <ActivationHelpModal />\r\n  </ModalBase>\r\n\r\n  <!-- Add Vector Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'addVector'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"âž• Add Custom Vector\"\r\n  >\r\n    <AddVectorModal />\r\n  </ModalBase>\r\n\r\n  <!-- Export Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'export'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"ðŸ’¾ Export Data\"\r\n  >\r\n    <ExportModal />\r\n  </ModalBase>\r\n\r\n  <!-- Presets Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'presets'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"ðŸ“ Vector Matrix Presets\"\r\n  >\r\n    <PresetsModal @close=\"uiStore.hideModal\" />\r\n  </ModalBase>\r\n\r\n  <!-- Keyboard Shortcuts Modal -->\r\n  <ModalBase \r\n    v-if=\"uiStore.activeModal === 'shortcuts'\" \r\n    @close=\"uiStore.hideModal\"\r\n    title=\"âŒ¨ï¸ Keyboard Shortcuts\"\r\n  >\r\n    <ShortcutsModal />\r\n  </ModalBase>\r\n\r\n  <!-- Error/Success Notifications -->\r\n  <Notification \r\n    v-if=\"uiStore.hasSuccess\"\r\n    type=\"success\"\r\n    :message=\"uiStore.successMessage\"\r\n    @close=\"uiStore.hideSuccess\"\r\n  />\r\n\r\n  <ErrorNotification\r\n    v-if=\"uiStore.hasError\"\r\n    :notification=\"uiStore.errorDetails\"\r\n    @close=\"uiStore.hideError\"\r\n  />\r\n\r\n  <!-- Other Modals -->\r\n  <SettingsModal />\r\n  <VectorComparisonModal />\r\n</template>\r\n\r\n<script setup>\r\nimport { useUIStore } from '../stores/uiStore'\r\nimport ModalBase from './modals/ModalBase.vue'\r\nimport TutorialModal from './modals/TutorialModal.vue'\r\nimport AnalysisModal from './modals/AnalysisModal.vue'\r\nimport UploadHelpModal from './modals/UploadHelpModal.vue'\r\nimport ActivationHelpModal from './modals/ActivationHelpModal.vue'\r\nimport ShortcutsModal from './modals/ShortcutsModal.vue'\r\nimport AddVectorModal from './modals/AddVectorModal.vue'\r\nimport ExportModal from './modals/ExportModal.vue'\r\nimport PresetsModal from './modals/PresetsModal.vue'\r\nimport Notification from './Notification.vue'\r\nimport ErrorNotification from './ErrorNotification.vue'\r\nimport SettingsModal from './modals/SettingsModal.vue'\r\nimport VectorComparisonModal from './modals/VectorComparisonModal.vue'\r\n\r\nconst uiStore = useUIStore()\r\n</script> ","<template>\r\n  <div id=\"app\" class=\"vectoverse-app\">\r\n    <div class=\"container\">\r\n      <!-- Header Component -->\r\n      <AppHeader class=\"app-header\" />\r\n\r\n      <main class=\"app-main\">\r\n        <!-- Main Visualization Container -->\r\n        <VisualizationContainer />\r\n\r\n        <!-- Vector Analysis Studio -->\r\n        <VectorAnalysisStudio />\r\n      </main>\r\n\r\n      <!-- Sidebar -->\r\n      <InfoSidebar class=\"info-sidebar\" />\r\n    </div>\r\n\r\n    <!-- Modals -->\r\n    <ModalContainer />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, provide, nextTick } from 'vue'\r\nimport { useVectorStore } from './stores/vectorStore'\r\nimport { useUIStore } from './stores/uiStore'\r\nimport { useKeyboardShortcuts } from './composables/useKeyboardShortcuts'\r\nimport { useTutorialManager } from './composables/useTutorialManager'\r\nimport { useAccessibility } from './composables/useAccessibility'\r\nimport { usePerformanceOptimizer } from './composables/usePerformanceOptimizer'\r\nimport { usePeriodicTable } from './composables/usePeriodicTable'\r\nimport { useExportManager } from './composables/useExportManager'\r\nimport { useErrorHandler } from './composables/useErrorHandler'\r\nimport { useMathRenderer } from './composables/useMathRenderer'\r\nimport { useControls } from './composables/useControls'\r\n\r\n// Components\r\nimport AppHeader from './components/AppHeader.vue'\r\nimport VisualizationContainer from './components/VisualizationContainer.vue'\r\nimport VectorAnalysisStudio from './components/VectorAnalysisStudio.vue'\r\nimport InfoSidebar from './components/InfoSidebar.vue'\r\nimport ModalContainer from './components/ModalContainer.vue'\r\n\r\n// Stores\r\nconst vectorStore = useVectorStore()\r\nconst uiStore = useUIStore()\r\n\r\n// Composables\r\nconst keyboardShortcuts = useKeyboardShortcuts()\r\nconst tutorialManager = useTutorialManager()\r\nconst accessibility = useAccessibility()\r\nconst performanceOptimizer = usePerformanceOptimizer()\r\nconst periodicTable = usePeriodicTable()\r\nconst exportManager = useExportManager()\r\nconst errorHandler = useErrorHandler()\r\nconst mathRenderer = useMathRenderer()\r\nconst controls = useControls()\r\n\r\nonMounted(async () => {\r\n  try {\r\n    await nextTick()\r\n    \r\n    // Initialize the vectors in the store\r\n    vectorStore.generateVectors()\r\n    \r\n    // Initialize accessibility features\r\n    accessibility.initialize()\r\n    \r\n    console.log('VectoVerse Vue app initialized successfully.')\r\n    \r\n    // Re-render math after framework initialization\r\n    setTimeout(() => {\r\n      if (window.renderMath) {\r\n        window.renderMath()\r\n      }\r\n    }, 100)\r\n\r\n  } catch (error) {\r\n    console.error('Failed to initialize VectoVerse:', error)\r\n    uiStore.showError('Failed to initialize VectoVerse. Please refresh and try again.')\r\n  }\r\n})\r\n\r\n// Provide composables to child components\r\nprovide('tutorialManager', tutorialManager)\r\nprovide('accessibility', accessibility)\r\nprovide('performanceOptimizer', performanceOptimizer)\r\nprovide('periodicTable', periodicTable)\r\nprovide('exportManager', exportManager)\r\nprovide('errorHandler', errorHandler)\r\nprovide('mathRenderer', mathRenderer)\r\nprovide('controls', controls)\r\n</script> ","import katex from '../katex.mjs';\n\n/* eslint no-constant-condition:0 */\nvar findEndOfMath = function findEndOfMath(delimiter, text, startIndex) {\n  // Adapted from\n  // https://github.com/Khan/perseus/blob/master/src/perseus-markdown.jsx\n  var index = startIndex;\n  var braceLevel = 0;\n  var delimLength = delimiter.length;\n\n  while (index < text.length) {\n    var character = text[index];\n\n    if (braceLevel <= 0 && text.slice(index, index + delimLength) === delimiter) {\n      return index;\n    } else if (character === \"\\\\\") {\n      index++;\n    } else if (character === \"{\") {\n      braceLevel++;\n    } else if (character === \"}\") {\n      braceLevel--;\n    }\n\n    index++;\n  }\n\n  return -1;\n};\n\nvar escapeRegex = function escapeRegex(string) {\n  return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n};\n\nvar amsRegex = /^\\\\begin{/;\n\nvar splitAtDelimiters = function splitAtDelimiters(text, delimiters) {\n  var index;\n  var data = [];\n  var regexLeft = new RegExp(\"(\" + delimiters.map(x => escapeRegex(x.left)).join(\"|\") + \")\");\n\n  while (true) {\n    index = text.search(regexLeft);\n\n    if (index === -1) {\n      break;\n    }\n\n    if (index > 0) {\n      data.push({\n        type: \"text\",\n        data: text.slice(0, index)\n      });\n      text = text.slice(index); // now text starts with delimiter\n    } // ... so this always succeeds:\n\n\n    var i = delimiters.findIndex(delim => text.startsWith(delim.left));\n    index = findEndOfMath(delimiters[i].right, text, delimiters[i].left.length);\n\n    if (index === -1) {\n      break;\n    }\n\n    var rawData = text.slice(0, index + delimiters[i].right.length);\n    var math = amsRegex.test(rawData) ? rawData : text.slice(delimiters[i].left.length, index);\n    data.push({\n      type: \"math\",\n      data: math,\n      rawData,\n      display: delimiters[i].display\n    });\n    text = text.slice(index + delimiters[i].right.length);\n  }\n\n  if (text !== \"\") {\n    data.push({\n      type: \"text\",\n      data: text\n    });\n  }\n\n  return data;\n};\n\n/* eslint no-console:0 */\n/* Note: optionsCopy is mutated by this method. If it is ever exposed in the\n * API, we should copy it before mutating.\n */\n\nvar renderMathInText = function renderMathInText(text, optionsCopy) {\n  var data = splitAtDelimiters(text, optionsCopy.delimiters);\n\n  if (data.length === 1 && data[0].type === 'text') {\n    // There is no formula in the text.\n    // Let's return null which means there is no need to replace\n    // the current text node with a new one.\n    return null;\n  }\n\n  var fragment = document.createDocumentFragment();\n\n  for (var i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      fragment.appendChild(document.createTextNode(data[i].data));\n    } else {\n      var span = document.createElement(\"span\");\n      var math = data[i].data; // Override any display mode defined in the settings with that\n      // defined by the text itself\n\n      optionsCopy.displayMode = data[i].display;\n\n      try {\n        if (optionsCopy.preProcess) {\n          math = optionsCopy.preProcess(math);\n        }\n\n        katex.render(math, span, optionsCopy);\n      } catch (e) {\n        if (!(e instanceof katex.ParseError)) {\n          throw e;\n        }\n\n        optionsCopy.errorCallback(\"KaTeX auto-render: Failed to parse `\" + data[i].data + \"` with \", e);\n        fragment.appendChild(document.createTextNode(data[i].rawData));\n        continue;\n      }\n\n      fragment.appendChild(span);\n    }\n  }\n\n  return fragment;\n};\n\nvar renderElem = function renderElem(elem, optionsCopy) {\n  for (var i = 0; i < elem.childNodes.length; i++) {\n    var childNode = elem.childNodes[i];\n\n    if (childNode.nodeType === 3) {\n      // Text node\n      // Concatenate all sibling text nodes.\n      // Webkit browsers split very large text nodes into smaller ones,\n      // so the delimiters may be split across different nodes.\n      var textContentConcat = childNode.textContent;\n      var sibling = childNode.nextSibling;\n      var nSiblings = 0;\n\n      while (sibling && sibling.nodeType === Node.TEXT_NODE) {\n        textContentConcat += sibling.textContent;\n        sibling = sibling.nextSibling;\n        nSiblings++;\n      }\n\n      var frag = renderMathInText(textContentConcat, optionsCopy);\n\n      if (frag) {\n        // Remove extra text nodes\n        for (var j = 0; j < nSiblings; j++) {\n          childNode.nextSibling.remove();\n        }\n\n        i += frag.childNodes.length - 1;\n        elem.replaceChild(frag, childNode);\n      } else {\n        // If the concatenated text does not contain math\n        // the siblings will not either\n        i += nSiblings;\n      }\n    } else if (childNode.nodeType === 1) {\n      (function () {\n        // Element node\n        var className = ' ' + childNode.className + ' ';\n        var shouldRender = optionsCopy.ignoredTags.indexOf(childNode.nodeName.toLowerCase()) === -1 && optionsCopy.ignoredClasses.every(x => className.indexOf(' ' + x + ' ') === -1);\n\n        if (shouldRender) {\n          renderElem(childNode, optionsCopy);\n        }\n      })();\n    } // Otherwise, it's something else, and ignore it.\n\n  }\n};\n\nvar renderMathInElement = function renderMathInElement(elem, options) {\n  if (!elem) {\n    throw new Error(\"No element provided to render\");\n  }\n\n  var optionsCopy = {}; // Object.assign(optionsCopy, option)\n\n  for (var option in options) {\n    if (options.hasOwnProperty(option)) {\n      optionsCopy[option] = options[option];\n    }\n  } // default options\n\n\n  optionsCopy.delimiters = optionsCopy.delimiters || [{\n    left: \"$$\",\n    right: \"$$\",\n    display: true\n  }, {\n    left: \"\\\\(\",\n    right: \"\\\\)\",\n    display: false\n  }, // LaTeX uses $â€¦$, but it ruins the display of normal `$` in text:\n  // {left: \"$\", right: \"$\", display: false},\n  // $ must come after $$\n  // Render AMS environments even if outside $$â€¦$$ delimiters.\n  {\n    left: \"\\\\begin{equation}\",\n    right: \"\\\\end{equation}\",\n    display: true\n  }, {\n    left: \"\\\\begin{align}\",\n    right: \"\\\\end{align}\",\n    display: true\n  }, {\n    left: \"\\\\begin{alignat}\",\n    right: \"\\\\end{alignat}\",\n    display: true\n  }, {\n    left: \"\\\\begin{gather}\",\n    right: \"\\\\end{gather}\",\n    display: true\n  }, {\n    left: \"\\\\begin{CD}\",\n    right: \"\\\\end{CD}\",\n    display: true\n  }, {\n    left: \"\\\\[\",\n    right: \"\\\\]\",\n    display: true\n  }];\n  optionsCopy.ignoredTags = optionsCopy.ignoredTags || [\"script\", \"noscript\", \"style\", \"textarea\", \"pre\", \"code\", \"option\"];\n  optionsCopy.ignoredClasses = optionsCopy.ignoredClasses || [];\n  optionsCopy.errorCallback = optionsCopy.errorCallback || console.error; // Enable sharing of global macros defined via `\\gdef` between different\n  // math elements within a single call to `renderMathInElement`.\n\n  optionsCopy.macros = optionsCopy.macros || {};\n  renderElem(elem, optionsCopy);\n};\n\nexport { renderMathInElement as default };\n","import { createApp } from 'vue'\r\nimport { createPinia } from 'pinia'\r\nimport App from './App.vue'\r\nimport './assets/styles/studio-theme.css'\r\nimport './assets/styles/layout.css'\r\n\r\n// Import KaTeX and D3 globally\r\nimport * as d3 from 'd3'\r\nimport katex from 'katex'\r\nimport renderMathInElement from 'katex/dist/contrib/auto-render.mjs'\r\nimport 'katex/dist/katex.css'\r\n\r\n// Make D3 and KaTeX available globally for existing modules\r\nwindow.d3 = d3\r\nwindow.katex = katex\r\nwindow.renderMathInElement = renderMathInElement\r\n\r\n// Initialize KaTeX globally\r\nfunction initializeKaTeX() {\r\n    try {\r\n        // Configure and render math\r\n        renderMathInElement(document.body, {\r\n            delimiters: [\r\n                {left: '$$', right: '$$', display: true},\r\n                {left: '$', right: '$', display: false},\r\n                {left: '\\\\(', right: '\\\\)', display: false},\r\n                {left: '\\\\[', right: '\\\\]', display: true}\r\n            ],\r\n            throwOnError: false,\r\n            errorColor: '#cc0000',\r\n            strict: false,\r\n            trust: true,\r\n            macros: {\r\n                \"\\\\vec\": \"\\\\mathbf{#1}\",\r\n                \"\\\\norm\": \"\\\\left\\\\|#1\\\\right\\\\|\",\r\n                \"\\\\cos\": \"\\\\text{cos}\",\r\n                \"\\\\sin\": \"\\\\text{sin}\",\r\n                \"\\\\dot\": \"\\\\cdot\"\r\n            }\r\n        })\r\n        \r\n        // Create global renderMath function\r\n        window.renderMath = function(element = document.body) {\r\n            try {\r\n                renderMathInElement(element, {\r\n                    delimiters: [\r\n                        {left: '$$', right: '$$', display: true},\r\n                        {left: '$', right: '$', display: false},\r\n                        {left: '\\\\(', right: '\\\\)', display: false},\r\n                        {left: '\\\\[', right: '\\\\]', display: true}\r\n                    ],\r\n                    throwOnError: false,\r\n                    errorColor: '#cc0000',\r\n                    strict: false,\r\n                    macros: {\r\n                        \"\\\\vec\": \"\\\\mathbf{#1}\",\r\n                        \"\\\\norm\": \"\\\\left\\\\|#1\\\\right\\\\|\",\r\n                        \"\\\\cos\": \"\\\\text{cos}\",\r\n                        \"\\\\sin\": \"\\\\text{sin}\",\r\n                        \"\\\\dot\": \"\\\\cdot\"\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                console.warn('Math rendering error:', error)\r\n            }\r\n        }\r\n        \r\n        console.log('KaTeX initialized successfully')\r\n        return true\r\n    } catch (error) {\r\n        console.error('KaTeX initialization failed:', error)\r\n        return false\r\n    }\r\n}\r\n\r\n// Initialize the Vue app\r\nconst app = createApp(App)\r\nconst pinia = createPinia()\r\n\r\n// Use Pinia\r\napp.use(pinia)\r\n\r\n// Initialize KaTeX before mounting\r\ninitializeKaTeX()\r\n\r\n// Mount the app\r\napp.mount('#app') "],"names":["activePinia","setActivePinia","pinia","piniaSymbol","isPlainObject","o","MutationType","createPinia","scope","effectScope","state","ref","_p","toBeInstalled","markRaw","app","plugin","noop","addSubscription","subscriptions","callback","detached","onCleanup","removeSubscription","idx","getCurrentScope","onScopeDispose","triggerSubscriptions","args","fallbackRunWithContext","fn","ACTION_MARKER","ACTION_NAME","mergeReactiveObjects","target","patchToApply","value","key","subPatch","targetValue","isRef","isReactive","skipHydrateSymbol","shouldHydrate","obj","assign","isComputed","createOptionsStore","id","options","hot","actions","getters","initialState","store","setup","localState","toRefs","computedGetters","name","computed","createSetupStore","$id","isOptionsStore","optionsForPlugin","$subscribeOptions","isListening","isSyncListening","actionSubscriptions","debuggerEvents","activeListener","$patch","partialStateOrMutator","subscriptionMutation","myListenerId","nextTick","$reset","newState","$state","$dispose","action","wrappedAction","afterCallbackList","onErrorCallbackList","after","onError","ret","error","partialStore","stopWatcher","watch","reactive","setupStore","prop","actionValue","toRaw","extender","defineStore","idOrOptions","setupOptions","isSetupStore","useStore","hasContext","hasInjectionContext","inject","useConfigStore","vectorOperations","a","b","val","i","vector","scalar","sum","mag","dotProd","magA","magB","diff","vectorGeneration","dimensions","min","max","activeIndex","mean","stdDev","u1","u2","vectorValidation","input","expectedDimensions","vectorStatistics","variance","entropy","m","threshold","squared","v","sumSquared","s","p","len","positiveCount","negativeCount","zeroCount","maxEntropy","vectors","k","maxIterations","centroids","assignments","iterations","newAssignments","minDistance","closestCentroidIndex","centroid","index","distance","clusters","cluster","meanVector","useVectorStore","selectedVectorIds","inputVector","forceType","activationFunction","learningRate","selectedVectors","selectedVector","vectorCount","averageMagnitude","acc","magnitude","c","availableForceTypes","availableActivationFunctions","maxSimilarity","j","sim","generateVectors","configStore","newVectors","margin","d","selectVector","vectorId","isMultiSelect","addInputVector","newIV","removeInputVector","randomizeInputVector","updateInputVectorComponent","removeVector","addCustomVector","components","setVectorCustomColor","color","setVectorScale","scale","setForceType","type","setActivationFunction","func","setLearningRate","rate","useUIStore","activeModal","errorMessage","successMessage","errorDetails","isLoading","sidebarCollapsed","activeTab","analysisViewMode","neuralModeActive","forcesVisible","selectedAnalysisType","analysisResults","isAnalyzing","tutorialStep","tutorialActive","shortcutsVisible","hasError","hasSuccess","isModalOpen","showModal","modalName","hideModal","showError","message","hideError","showSuccess","duration","hideSuccess","setLoading","loading","toggleSidebar","setActiveTab","tabName","setAnalysisViewMode","mode","setNeuralModeActive","active","setForcesVisible","visible","setAnalysisType","setAnalysisResults","results","setAnalyzing","analyzing","runAnalysis","analysisFunction","startTutorial","nextTutorialStep","previousTutorialStep","endTutorial","toggleShortcuts","showTutorialModal","showAnalysisModal","showUploadHelpModal","showActivationHelpModal","showAddVectorModal","showExportModal","showShortcutsModal","shortcuts","shortcutsData","showPresetsModal","closeAllModals","showInfo","useKeyboardShortcuts","vectorStore","uiStore","isEnabled","defaultShortcuts","exportData","triggerFileInput","deleteSelectedVector","confirmCurrentAction","selectPreviousVector","selectNextVector","navigateTab","toggleVectorSelection","toggleFullscreen","initializeShortcuts","shortcut","createShortcutKey","modifiers","handleKeyDown","event","isInputElement","createEventKey","element","inputElements","contentEditable","data","blob","url","link","fileInput","confirmButton","currentIndex","previousIndex","nextIndex","direction","tabs","newIndex","addShortcut","ctrl","alt","shift","description","shortcutKey","removeShortcut","enableShortcuts","disableShortcuts","getAllShortcuts","formatShortcutDisplay","parts","showShortcutsHelp","onMounted","onUnmounted","useTutorialManager","isActive","currentStep","announcements","tutorialSteps","progress","currentStepData","isFirstStep","isLastStep","trackEvent","announce","nextStep","performStepAction","previousStep","goToStep","stepIndex","clearHighlights","step","firstVector","highlightElement","selector","el","eventName","priority","shouldShowTutorial","hasSeenTutorial","hasVisited","autoStartIfNew","handleKeydown","stepNum","useAccessibility","highContrastMode","liveRegion","createAriaLiveRegion","region","handleKeyboardShortcuts","generateBtn","resetBtn","manageFocus","focusedElement","announceVectorFocus","vectorElement","trapFocusInModal","modal","focusableElements","firstElement","lastElement","setupHighContrastMode","highContrastQuery","updateHighContrast","matches","e","addAriaLabelsToControls","label","updateVisualizationDescription","svg","vectorElements","handleFocusIn","showKeyboardShortcuts","ensureColorContrast","style","getAccessibilityReport","initialize","cleanup","highContrastStyle","usePerformanceOptimizer","frameRate","renderQueue","isRendering","performanceMetrics","lastTime","frameCount","animationFrameId","isLowPerformance","isHighMemoryUsage","shouldReduceComplexity","isMobile","isLowMemory","isLowFPS","tooManyVectors","trackFPS","currentTime","adjustRenderingQuality","monitorMemory","optimizeForLowPerformance","restoreHighQuality","atom","line","throttleRender","renderFunction","delay","lastRender","now","debounceRender","timeoutId","batchRenderUpdates","updates","processRenderQueue","startTime","batchSize","update","optimizeVectorRendering","applyLevelOfDetail","viewBox","getViewBox","shouldSimplify","getDistanceFromCenter","rect","dx","dy","manageMemory","cleanupDOMElements","clearCaches","tooltip","errorNotifications","_a","getOptimizedConfig","baseConfig","getPerformanceRecommendations","recommendations","getPerformanceReport","wrapWithPerformanceCheck","start","result","createAnimationFrame","timestamp","updateVectorCount","count","memoryInterval","calculateVectorStatistics","calculateMagnitude","calculateEntropy","stability","calculateStability","total","QUANTUM_THRESHOLD","getInformationQuantums","excitatory","inhibitory","neutral","prefixes","excitatoryRoots","inhibitoryRoots","balancedRoots","generateElementName","activeDimensions","prefix","root","activeHeatmap","dataRanges","showPlaceholders","highlightedElementIds","usePeriodicTable","periodicData","config","tableDimensions","generateFullPeriodicTable","newTable","row","col","neutralCount","x","y","mapVectorsToTable","table","mappedTable","vectorGroups","quantumData","vectorsForElement","stats","avgMagnitude","avgEntropy","avgStability","getElementColor","calculateDataRanges","presentElements","magnitudes","entropies","stabilities","setHighlight","property","sorted","valA","valB","topIds","clearHighlight","updatePeriodicData","fullTable","getElementData","useExportManager","isExporting","exportProgress","formats","hasVectors","canExport","exportJSON","generateAnalysisData","downloadFile","getTimestamp","exportCSV","headers","rows","inputRow","exportSimilarityMatrix","v1","v2","similarity","cosineSimilarity","exportSVG","clonedSvg","styleElement","getSVGStyles","svgString","exportPNG","canvas","ctx","svgData","img","promise","resolve","reject","svgBlob","exportLaTeX","analysis","latex","_b","generateLaTeXVectorTable","exportPython","pythonCode","exportSession","sessionData","dotProduct","mag1","mag2","ent","maxComponents","content","filename","mimeType","useErrorHandler","errorLog","setupGlobalErrorHandling","handleError","context","errorInfo","classifyError","friendlyMessage","getFriendlyMessage","getSuggestedActions","wrapAsync","useMathRenderer","isKaTeXReady","waitForKaTeX","defaultOptions","componentStr","useControls","controls","history","historyIndex","recordHistory","oldValue","newValue","undo","lastChange","redo","nextChange","presets","loadPresets","savedPresets","getCurrentControlValues","savePreset","newPreset","existingIndex","persistPresets","loadPreset","preset","deletePreset","group","useAppActions","props","__props","controlId","_createElementBlock","_normalizeClass","_cache","$event","$emit","_toDisplayString","_hoisted_1","_Fragment","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_5","_openBlock","_hoisted_6","_hoisted_8","_renderList","option","_hoisted_10","appActions","_unref","_hoisted_4","_createBlock","Control","_hoisted_7","Constants","useForceCalculator","distanceSquared","euclideanDistance","manhattanDistance","calculateForces","forces","force","calculateSelectedMetric","metricType","alignment","proximity","applyActivation","getEnhancedVectorAnalysis","forceCalculator","container","svgElement","d3.select","filter","feMerge","resize","render","setupKeyboardNavigation","handleAnalysisResults","renderBackgroundParticles","renderVectors","renderForces","renderInputVector","updateVectorSelection","getVectorRadius","renderDimensionArcs","radius","angleStep","component","dimIndex","angle","intensity","segmentRadius","arc","d3.arc","getComponentColor","iv","inputGroup","newVectorId","particles","d3.range","colors","d3.scaleOrdinal","d3.schemeCategory10","clusterId","xScale","d3.scaleLinear","d3.extent","yScale","bus","useEventBus","callbacks","eventBus","analysisResult","newResult","_createVNode","D3Visualization","useVectorOperations","isCalculating","lastError","operationHistory","allVectors","currentDimensions","executeOperation","operation","operationName","createRandomVector","dims","createZeroVector","createUnitVector","createNormalVector","addVectors","vectorA","vectorB","subtractVectors","scaleVector","normalizeVector","calculateDotProduct","calculateCosineSimilarity","calculateDistance","metric","analyzeVector","analyses","maxMagnitude","minMagnitude","n","matrix","limit","lastOp","StatCard","vectorOps","vectorStats","activeSubTab","subTabs","newVector","tab","AnalysisOverview","ComponentAnalysis","AdvancedStats","relationships","calculateRelationships","otherVectors","rels","otherVector","rel","useClustering","isClustering","res","vectorMap","clusteredVectors","vectorComponents","runKMeans","maxK","runClustering","calculateGlobalStats","magMean","magVariance","magStdDev","formatVector","interpolateColor","color1","color2","factor","r1","g1","b1","r2","g2","b2","r","g","getHeatmapColor","isSelected","isHighlighted","fillColor","range","dynamicFontSize","baseSize","nameLength","scaleFactor","emit","__emit","onClick","onMouseEnter","onMouseLeave","positionStyles","quantumTotal","excitPct","inhibPct","neuPct","_normalizeStyle","_hoisted_11","_hoisted_12","tableContainerRef","visibleElements","tableWidth","tableHeight","onShowTooltip","containerRect","onHideTooltip","PeriodicElement","PeriodicElementTooltip","path","values","scaleY","scaleX","points","zeroAxis","selectedElements","newIds","elements","elementData","getComparisonClass","index1","index2","val1","val2","HeatmapControls","FilterControls","HighlightControls","PeriodicTable","_Transition","_hoisted_16","_hoisted_17","_hoisted_9","_hoisted_13","SparklineChart","_hoisted_14","_hoisted_15","_createTextVNode","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","analysisRef","exportManager","canCompareVectors","toggleAnalysisView","newMode","tabId","compareVectors","exportAnalysis","button","IndividualAnalysisTab","RelationshipsTab","ClusteringTab","StatisticsTab","PeriodicTableTab","math","similarities","vMath","binding","_withDirectives","handleOverlayClick","handleEscapeKey","_Teleport","_renderSlot","_ctx","$slots","tutorialManager","useAnalytics","lastAnalysisType","analysisError","analysisProgress","canAnalyze","executeAnalysis","analysisType","performPCA","means","calculateColumnMeans","centered","covariance","calculateCovarianceMatrix","eigenvalues","eigenvectors","performEigendecomposition","projectedData","eigenvector","calculateExplainedVariance","performKMeans","initializeRandomCentroids","hasConverged","iteration","point","findNearestCentroid","assignment","updateCentroids","calculateClusterStatistics","calculateSilhouetteScore","performHierarchicalClustering","linkage","distanceMatrix","calculateDistanceMatrix","dendrogram","buildDendrogram","clusterLevels","generateClusterLevels","performStatisticalAnalysis","allValues","globalStats","correlationMatrix","calculateCorrelationMatrix","outliers","detectOutliers","stat","detectPatterns","patterns","linearPatterns","detectLinearPatterns","similarityGroups","detectSimilarityGroups","dimensionalPatterns","detectDimensionalPatterns","cols","centeredMatrix","size","powerIteration","norm","matrixVector","totalVariance","nearestIndex","clusterPoints","_","clusterIndices","distances","totalScore","sameClusterPoints","avgIntraDistance","minInterDistance","otherClusterPoints","avgDistance","silhouette","mergeI","mergeJ","calculateClusterDistance","newCluster","clusterA","clusterB","levels","maxHeight","node","cutDendrogram","originalIndex","groups","visited","dim","analytics","selectedAnalysis","pcaConfig","kmeansConfig","hierarchicalConfig","statisticsConfig","analysisTypes","getAnalysisConfig","selectAnalysis","exportResults","getProgressText","formatDate","date","_vModelSelect","_vModelCheckbox","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","outlier","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","vectorInput","vectorLabel","parsedVector","canAdd","validateInput","parsed","componentClass","addVector","fileSizeFormat","bytes","decimals","sizes","activeSection","exportStatus","vectorExport","analysisExport","visualizationExport","configExport","exportSections","generatedVectorCount","customVectorCount","selectedVectorCount","estimatedFileSize","metadataSize","totalSize","setActiveSection","section","performExport","exportVectors","exportVisualization","exportConfiguration","fileName","csvRows","vectorStr","analysisData","generateTextReport","exportAsImage","format","multiplier","report","newPresetName","saveCurrentPreset","presetName","loadSelectedPreset","deleteSelectedPreset","timer","close","executeAction","getErrorIcon","severity","show","closeModal","ModalBase","comparisonResults","TutorialModal","AnalysisModal","UploadHelpModal","ActivationHelpModal","AddVectorModal","ExportModal","PresetsModal","ShortcutsModal","Notification","ErrorNotification","SettingsModal","VectorComparisonModal","accessibility","performanceOptimizer","periodicTable","errorHandler","mathRenderer","provide","AppHeader","VisualizationContainer","VectorAnalysisStudio","InfoSidebar","ModalContainer","findEndOfMath","delimiter","text","startIndex","braceLevel","delimLength","character","escapeRegex","string","amsRegex","splitAtDelimiters","delimiters","regexLeft","delim","rawData","renderMathInText","optionsCopy","fragment","span","katex","renderElem","elem","childNode","textContentConcat","sibling","nSiblings","frag","className","shouldRender","renderMathInElement","d3","initializeKaTeX","createApp","App"],"mappings":"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","x_google_ignoreList":[0,62]}